!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="f9b2c7b9-3126-412a-ae77-896163b3f789",e._sentryDebugIdIdentifier="sentry-dbid-f9b2c7b9-3126-412a-ae77-896163b3f789")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"bc2693d4215565fabcb99f564371a4d3f67daeb6"},(()=>{"use strict";var e,t,n,r={15699:(e,t,n)=>{n.d(t,{Sf:()=>d,ZY:()=>u,ed:()=>f,ex:()=>p,gH:()=>m,zy:()=>h});var r=n(15861),a=n(64687),o=n.n(a),i=n(76756),s=n(53979),c=n(38856),l=new i.mQ({env:(0,c.a)(),name:"chrome API"});function u(e){return new Promise((function(t){chrome.windows.getLastFocused((function(n){e?e(n):t(n)}))}))}var d=function(){return"undefined"!=typeof chrome&&chrome.runtime.getManifest?chrome.runtime.getManifest().version:"0.0.0"},f=function(e,t){chrome.windows.get(e,t)},p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{windowTypes:["normal"]};chrome.windows.onFocusChanged.hasListener(e)||chrome.windows.onFocusChanged.addListener(e,t)},m=function(e){chrome.windows.onFocusChanged.removeListener(e)},h=function(){var e=(0,r.Z)(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.Oe)(t);case 2:if(n=e.sent,!(r=n.find((function(e){return e.active})))){e.next=8;break}return e.abrupt("return",new Promise((function(e){chrome.tabs.sendMessage(Number(r.id),{text:"report_webpage_content"},(function(t){l.info("getWebpageContentOfAnActiveTab -> content \n",null!=t?t:"NO EXTRACTABLE CONTENT FOUND!"),e(null!=t?t:"")}))})));case 8:return l.error("Error: You've requested webpage content of an active tab, but there's no active tab!"),e.abrupt("return","");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},60243:(e,t,n)=>{n.d(t,{$p:()=>y,Ad:()=>C,CZ:()=>v,Fl:()=>h,G1:()=>l,MW:()=>g,OF:()=>j,Re:()=>w,SI:()=>d,TG:()=>b,UK:()=>_,cG:()=>c,f4:()=>m,kr:()=>x,rV:()=>f,vb:()=>p});var r,a,o=n(89062),i=n(4942),s=n(56336),c={ORGANIZE_TABS:"organize-tabs"},l=(0,i.Z)({},c.ORGANIZE_TABS,"organize_tabs"),u=(0,i.Z)({},c.ORGANIZE_TABS,Boolean(null===(r=opr.shodanPrivate)||void 0===r?void 0:r.startRecording)&&Boolean(null===(a=opr.shodanPrivate)||void 0===a?void 0:a.stopRecording)),d=Object.values(c).reduce((function(e,t){return u[t]?[].concat((0,o.Z)(e),[t]):e}),[]),f=!1,p=["ar"],m=15*s.EB,h="",v="",g=25,x=8,b=200,y="opera developer",w=function(e,t){h="conversation-data-".concat(e,"-v").concat(3).concat(t?"-".concat("private"):"")},j=100,_=function(e){v="chat-warning-".concat(e)},C={GPT:"GPT-4o",GEMINI:"Gemini 1.5",IMAGEN:"Imagen 3"}},53744:(e,t,n)=>{n.d(t,{F0:()=>d,L1:()=>l,O8:()=>s,OZ:()=>u,W6:()=>f,hq:()=>c});var r=n(93324),a=n(67294),o=n(23586),i=n(76756),s=function(e,t){(0,a.useEffect)((function(){var n=function(n){var r=e.current,a=n.target;null!==r&&null!==a&&document.body.contains(r)&&document.body.contains(a)&&(r.contains(a)||t())};return window.addEventListener("click",n),function(){window.removeEventListener("click",n)}}),[t,e])},c=function(){var e=(0,a.useState)(i.$M),t=(0,r.Z)(e,2),n=t[0],o=t[1],s=(0,i.oH)().isAriaInTabView;return(0,a.useEffect)((function(){if(s){var e=window.location.hash.split("/"),t=(0,r.Z)(e,2)[1];o(t||i.$M)}else{var n=window.localStorage.getItem(i.re)||i.$M;o(n)}}),[s]),(0,a.useEffect)((function(){s||window.localStorage.setItem(i.re,n)}),[n,s]),{conversationId:n,updateConversationId:o}},l=function(){return{isCurrentThemeDark:(0,o.YWL)().isDarkThemeEnabled}},u=function(e,t,n){var o=(0,a.useState)(!1),i=(0,r.Z)(o,2),s=i[0],c=i[1],l=(0,a.useState)(!0),u=(0,r.Z)(l,2),d=u[0],f=u[1];return(0,a.useEffect)((function(){var r=function(){var r;if(null!=e&&e.current&&null!=t&&null!==(r=t.current)&&void 0!==r&&r.lastChild){var a,o=e.current.getBoundingClientRect(),i=(null===(a=t.current)||void 0===a?void 0:a.lastChild).getBoundingClientRect();o&&i&&(c(o.top<i.top+("bottom"===n?i.height:0)),f(!s))}};return r(),window.addEventListener("scroll",r),window.addEventListener("resize",r),function(){window.removeEventListener("scroll",r),window.removeEventListener("resize",r)}})),{isListUnder:s,isListAbove:d}},d=function(){var e=(0,a.useRef)(null),t=(0,a.useState)(!1),n=(0,r.Z)(t,2),o=n[0],s=n[1],c=(0,a.useState)(!1),l=(0,r.Z)(c,2),u=l[0],d=l[1],f=function(){if(e.current){var t=e.current,n=t.scrollTop,r=t.scrollHeight,a=t.clientHeight;s(n>0),d(n+a<r)}};return(0,a.useEffect)((function(){var t=e.current;if(t)return t.addEventListener("scroll",f),setTimeout(f,100*i.KP),function(){return t.removeEventListener("scroll",f)}}),[]),{showTopBorder:o,showBottomBorder:u,containerRef:e}};function f(e){var t=(0,a.useRef)(e);return(0,a.useEffect)((function(){t.current=e})),(0,a.useMemo)((function(){return function(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return null===(e=t.current)||void 0===e?void 0:e.call.apply(e,[t].concat(r))}}),[])}},7226:(e,t,n)=>{n.d(t,{$T:()=>o.$T,Bh:()=>o.Bh,EK:()=>o.EK,FM:()=>r.F,J$:()=>s.J,Mf:()=>i.M,OZ:()=>a.OZ,Pv:()=>a.Pv,VZ:()=>a.VZ,Vy:()=>o.Vy,e1:()=>o.e1,f6:()=>a.f6,ff:()=>a.ff,ix:()=>a.ix,n5:()=>a.n5,oA:()=>o.oA,qP:()=>a.qP,vy:()=>a.vy,xM:()=>a.xM,z4:()=>o.z4,zT:()=>r.z});var r=n(74721),a=n(76453),o=n(22055),i=(n(94361),n(57112)),s=n(86744)},22055:(e,t,n)=>{n.d(t,{$T:()=>y,Bh:()=>b,EK:()=>j,Vy:()=>v,e1:()=>_,oA:()=>w,z4:()=>g});var r,a,o=n(15861),i=n(64687),s=n.n(i),c=n(76756),l=n(38856),u=n(31372),d=n(58489),f=new c.mQ({env:(0,l.a)(),name:"SHODAN API"}),p="NEW SHODAN API NOT SUPPORTED",m="isCommandLineVisible"in((null===(r=opr)||void 0===r?void 0:r.shodanPrivate)||{}),h="onSendImageToAriaClicked"in((null===(a=opr)||void 0===a?void 0:a.shodanPrivate)||{});function v(){opr.shodanPrivate.closeCommandLine()}function g(){return x.apply(this,arguments)}function x(){return(x=(0,o.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m?(t=function(e){e||opr.shodanPrivate.showCommandLine()},m?opr.shodanPrivate.isCommandLineVisible(t):f.info(p)):f.info(p);case 1:case"end":return e.stop()}var t}),e)})))).apply(this,arguments)}function b(){return"switchToNormalWindow"in opr.shodanPrivate&&"AriaRequestSource"in opr.shodanPrivate}function y(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(b()){var t=e?opr.shodanPrivate.AriaRequestSource.COMMAND_LINE:opr.shodanPrivate.AriaRequestSource.SIDEBAR_PANEL;opr.shodanPrivate.switchToNormalWindow(t)}else f.info(p,"switchToNormalWindow")}function w(e){h?opr.shodanPrivate.onSendImageToAriaClicked.addListener((function(t){(0,d.vH)({action:u.VV.MEDIA_UPLOAD,element:u.Y3.CHAT,context:u.hG.CONTEXT_MENU,str_value:"image"}),e(t)})):f.info(p)}function j(e){h?opr.shodanPrivate.onSendImageToAriaClicked.removeListener((function(t){(0,d.vH)({action:u.VV.MEDIA_UPLOAD,element:u.Y3.CHAT,context:u.hG.CONTEXT_MENU,str_value:"image"}),e(t)})):f.info(p)}function _(){return new Promise((function(e){try{return opr.shodanPrivate.distillPage((function(t){f.info("distillPage -> content \n",t),e(t)}))}catch(e){return f.info("Page distillation is not possible due to:",e),""}}))}},57112:(e,t,n)=>{n.d(t,{M:()=>a});n(64687),new(n(57406).mQ)({name:"OperaTabsPrivatApi",env:"development"});function r(e){return e in opr.tabsPrivate}function a(e){return new Promise((function(t){r("getAllInWorkspace")?opr.tabsPrivate.getAllInWorkspace(e,t):t([])}))}},34134:(e,t,n)=>{n.d(t,{So:()=>c,Wu:()=>l,jb:()=>s});var r=n(15861),a=n(64687),o=n.n(a),i=(n(26382),n(47772)),s=(n(25108),function(){var e=(0,r.Z)(o().mark((function e(){var t,n,r,a=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]&&a[0],n=a.length>1&&void 0!==a[1]&&a[1],e.next=4,(0,i.l9)(t,n);case 4:return r=e.sent,e.abrupt("return",null==r?void 0:r.token);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),c=function(){var e=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){opr.operaIdentityPrivate.getUseremail((function(t){return e(t)}))}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){opr.operaAccountPrivate.showOperaAccountPopup(chrome.windows.WINDOW_ID_CURRENT)}},58489:(e,t,n)=>{n.d(t,{Aj:()=>x,V_:()=>w,ab:()=>b,ki:()=>y,vH:()=>v});var r=n(93324),a=n(4942),o=n(15861),i=n(64687),s=n.n(i),c=n(26382),l=n(54115),u=n(34134),d=n(47772),f=n(76756),p=n(25108);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v=function(){var e=(0,o.Z)(s().mark((function e(t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(t);case 2:if(n=e.sent,(0,l.BB)()){e.next=6;break}return p.info("%c TEST: Stat that would be reported: ","background: #0cc; color: #000",n),e.abrupt("return");case 6:p.info("%c Reporting Stat:","background: #0cc; color: #000",n),opr.statsPrivate.recordSessionEvent("feature_events.event_ai",JSON.stringify(n),opr.statsPrivate.Priority.NORMAL);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=(0,o.Z)(s().mark((function e(t){var n,a,o,i,c,l,u,f,p,m,v;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.action,a=t.element,o=t.context,i=t.str_value,c=t.int_value,l=t.map_of_ints,u=t.ai_provider,f=t.model,p=void 0===f?"Aria":f,e.t0=h,e.t1={action:n,element:a,context:o,model:p},e.t2=(0,d.dp)(),!e.t2){e.next=9;break}return e.next=7,j();case 7:e.t3=e.sent,e.t2={account_type:e.t3};case 9:return e.t4=e.t2,m=(0,e.t0)(e.t1,e.t4),null===p&&delete m.model,v={str_value:i,int_value:c,ai_provider:u,map_of_ints:l},Object.entries(v).forEach((function(e){var t=(0,r.Z)(e,2),n=t[0],a=t[1];a&&(m[n]=a)})),e.abrupt("return",m);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(e){switch(e){case"command-line":return c.hG.COMMAND_BAR;case"selected-content-prompt":return c.hG.HIGHLIGHT;case"sidebar":return c.hG.SIDEBAR;case"tab-view":return c.hG.BROWSER_TAB}},b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"PageContext";return e===c.Cm.EXPLORE_WEBPAGE?"WebpageContext:explore_topic":e===c.Cm.SUMMARIZE?"WebpageContext:summarize_page":"TabOrganize"===t?"OrganizeTabs:".concat(e):void p.warn("Unable to map suggestion prompt")},y=function(e){return f.v5.includes(e)?"image":f.Go.includes(e)?"audio":f.jn.includes(e)?"video":f.JH.includes(e)?"pdf":f.tZ.includes(e)?"spreadsheet":f.V4.includes(e)?"doc":f.YF.includes(e)?"json":void p.warn("Unable to map file type prompt")},w=function(e){if(e)switch(e){case"openai":return"OpenAi";case"google":return"Google";default:return"Other"}},j=function(){var e=(0,o.Z)(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.So)();case 2:return t=e.sent,e.abrupt("return",t?c.HQ.REGULAR:c.HQ.ANONYMOUS);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},75923:(e,t,n)=>{n.d(t,{Bn:()=>w,JA:()=>g,SJ:()=>b,X1:()=>v,fV:()=>x,g$:()=>y,m7:()=>h,tK:()=>m});var r=n(15861),a=n(64687),o=n.n(a),i=n(60243),s=n(96531),c=n(4916),l=n(76756),u=n(25108);function d(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var p=function(e){return e.DeleteConversation="delete-conversation",e.SaveConversation="save-conversation",e.SaveRawData="save-raw-data",e.UpdateConversation="update-conversation",e.AppendConversation="append-conversation",e}({}),m=function(){var e=(0,r.Z)(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){chrome.runtime.sendMessage({cmd:p.SaveRawData,data_key:t,data:n},(function(t){e(t)}))})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),h=function(){var e=(0,r.Z)(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.info("Save conversation: ",n,t),e.abrupt("return",new Promise((function(e){chrome.runtime.sendMessage({cmd:p.SaveConversation,data_key:i.Fl,conversation:t},(function(t){e(t)}))})));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),v=function(e,t,n){return new Promise((function(r){u.info("Updated conversation: ",n,e,t),chrome.runtime.sendMessage({cmd:p.UpdateConversation,data_key:i.Fl,conversation_id:e,conversation_update:t},(function(e){r(e)}))}))},g=function(e,t,n){return new Promise((function(r){u.info("Appended conversation: ",n,e,t),chrome.runtime.sendMessage({cmd:p.AppendConversation,data_key:i.Fl,conversation_id:e,conversation_update:t},(function(e){r(e)}))}))},x=function(e){return new Promise((function(t){chrome.runtime.sendMessage({cmd:p.DeleteConversation,data_key:i.Fl,conversation_id:e},(function(e){t(e)}))}))},b=function(){var e=(0,r.Z)(o().mark((function e(t,n,r){var a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=5;break}return e.next=3,(0,c.WF)(t);case 3:null==(a=e.sent)||a.forEach((function(e){(0,s.k9)(e)}));case 5:return e.next=7,x(t);case 7:if(n){e.next=10;break}return u.warn("server_id is not defined for local conversation",t),e.abrupt("return");case 10:return e.abrupt("return",r.deleteAuthorized({subUrl:"".concat(l.bC.endpointDelete,"/").concat(n)}));case 11:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),y=function(){var e=(0,r.Z)(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.Ug)(t);case 2:e.sent.forEach((function(e){var t=e.server_id;t&&n.deleteVoiceDataCache(t)}));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),w=function(){var e=(0,r.Z)(o().mark((function e(t,n){var r,a,i,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],a=d(t);try{for(a.s();!(i=a.n()).done;)c=i.value,r.push(b(c.id,c.server_id,n))}catch(e){a.e(e)}finally{a.f()}return e.next=5,Promise.all(r);case 5:return e.next=7,(0,s.qN)();case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},53979:(e,t,n)=>{n.d(t,{Oe:()=>p,RB:()=>d,iE:()=>h,nU:()=>f,xm:()=>u});var r=n(15861),a=n(64687),o=n.n(a),i=n(76756),s=n(38856),c=n(7226),l=new i.mQ({env:(0,s.a)(),name:"tab utils"}),u=chrome.runtime.getURL&&chrome.runtime.getURL("/aria.html"),d=function(e,t){var n={active:!0,url:e};if(!t)return chrome.tabs.create(n);chrome.tabs.create(n,t)};function f(e){var t;null===(t=chrome.tabs)||void 0===t||t.getCurrent(e)}function p(e){return m.apply(this,arguments)}function m(){return(m=(0,r.Z)(o().mark((function e(t){var n,r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.J$)(t);case 2:return n=e.sent,r=[],e.next=6,(0,c.Mf)(n);case 6:return a=e.sent,r=a.filter((function(e){var t=e.id;return t>0})).map((function(e){return{id:String(e.id),active:e.active,url:e.url,title:e.title,inactive_time:e.inactiveTime,pinned:e.pinned}})),l.info("Organize tabs info",r,"for window id",t),e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){return v.apply(this,arguments)}function v(){return(v=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){chrome.topSites.get((function(t){var n=t.map((function(e){return{domain:new URL(e.url).hostname}}));e(n)}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},63119:(e,t,n)=>{n.d(t,{AW:()=>p,Cp:()=>o,Dc:()=>m,F1:()=>u,HX:()=>c,Mx:()=>a,N2:()=>d,X0:()=>i,hB:()=>l,qf:()=>s,yc:()=>f});var r=n(60243),a=function(e,t){var n;s(null===(n=e.current)||void 0===n?void 0:n.lastChild,"end",t)},o=function(e,t){var n;s(null===(n=e.current)||void 0===n?void 0:n.firstChild,"center",t)},i=function(e){var t=e.current;t&&setTimeout((function(){t.scrollTop=t.scrollHeight}),r.MW)},s=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"smooth";e&&setTimeout((function(){return e.scrollIntoView({behavior:n,block:t,inline:"nearest"})}),r.MW)},c=function(){var e=new MouseEvent("mousedown",{view:window,bubbles:!0,cancelable:!0});document.body.dispatchEvent(e)},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{behavior:"smooth"};e.scrollIntoView(t)},u=function(e){e.parentElement&&e.parentElement.scrollIntoView({behavior:"smooth",inline:"center",block:"center"})},d=function(e){if(e){var t=e.clientHeight,n=e.scrollHeight,r=e.scrollTop;return Math.abs(n-Math.round(r)-t)<=1}return!1},f=function(e,t,n){e&&(n||t)&&u(e)};function p(e){var t=["pre",".hljs",".table-wrapper"];window.renderingHighlights="mask"===e;for(var n=0;n<t.length;n++)document.querySelectorAll(t[n]).forEach((function(t){"mask"===e?t.classList.add("!overflow-hidden"):t.classList.remove("!overflow-hidden")}))}var m=function(e,t,n){var r,a;a=t?e?"opera-gx-dark":"opera-gx":n?e?"opera-air-dark":"opera-air":e?"opera-dark":"opera",null===(r=document.querySelector("html"))||void 0===r||r.setAttribute("data-theme",a)}},38856:(e,t,n)=>{n.d(t,{$o:()=>p,A2:()=>l.A2,AK:()=>f,AW:()=>o.AW,BB:()=>i.BB,Cp:()=>o.Cp,Dc:()=>o.Dc,F0:()=>v,F1:()=>o.F1,FR:()=>k,HX:()=>o.HX,Mx:()=>o.Mx,N2:()=>o.N2,Ur:()=>s.Ur,Vs:()=>w,Wf:()=>b,X0:()=>o.X0,X8:()=>c.X,Y8:()=>i.Y8,Yo:()=>d,_f:()=>s._f,a:()=>i.a,aD:()=>l.aD,cL:()=>y,fm:()=>l.fm,hB:()=>o.hB,mX:()=>j,nu:()=>g,qf:()=>o.qf,r8:()=>i.r8,u2:()=>O,wE:()=>m,yc:()=>o.yc,z7:()=>_,zn:()=>C});var r=n(93324),a=n(36609),o=n(63119),i=n(54115),s=n(14270),c=(n(6642),n(34470),n(14664)),l=n(19718),u=n(25108),d=function(e){window.open(e,"_blank").opener=null},f=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return"string"==typeof e&&""!==e})).join(" ")},p=function(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches},m=function(e,t,n){var r;return"".concat(null!==(r=e.name)&&void 0!==r?r:e.displayName,"-").concat(t,"-").concat(n)},h=0,v=function(){return(new Date).getTime().toString()+Math.floor(100*Math.random()).toString()+(++h).toString()},g=function(){var e=new Date;return"conversation-".concat(e.getTime())},x=function(e){return String(e).padStart(2,"0")},b=function(){var e=-(new Date).getTimezoneOffset(),t=Math.abs(e);return 0===e?"Z":[e>0?"+":"-",x(Math.floor(t/60)),":",x(t%60)].join("")},y=function(e,t){var n=t-e,r=Math.random(),a=Math.floor(r*n);return a+=e};function w(e){return new Promise((function(t){return setTimeout(t,e)}))}function j(e){return e.forEach((function(e){var t;null!=e&&e.id||(e.id=g()),null==e||null===(t=e.data)||void 0===t||t.map((function(e){if(e)return e.progress&&(e.message=(0,a.t)("empty_interrupted_message"),e.progress=!1,u.warn("Saved data was incorrect, loaded message cannot be in progress. Aria response had to be unexpectedly interrupted.")),e.message||function(e){return e.rich_response}(e)||(e.message=(0,a.t)("empty_interrupted_message"),u.warn("Saved empty message, interruption disclaimer wasn't set.")),e}))})),e}var _=function(e){var t=new URL(e).hostname;return t.startsWith("www.")?t.replace("www.",""):t},C=function(e){if(!e.includes("/"))return e;var t=e.split("/"),n=(0,r.Z)(t,3),a=n[1];return n[2]||a||e};function k(e){return Object.entries(e)}function O(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:256;return"".concat("https://www.google.com/s2/favicons","?domain=").concat(e,"&sz=").concat(t)}},19718:(e,t,n)=>{n.d(t,{A2:()=>o,aD:()=>a,fm:()=>r});var r=function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()},a=function(e){return e.replace(/_(.)/g,(function(e,t){return t.toUpperCase()}))},o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return e.match(new RegExp("(.|\\n\\n|\\n){1,".concat(t,"}"),"gu"))}},49759:(e,t,n)=>{n.d(t,{B9:()=>l,VU:()=>s,wO:()=>c});var r,a=n(13771),o=new RegExp(/mac/),i="Aria",s=function(e){var t=document.createElement("canvas").getContext("2d");return t.font="400 14px 'Be Vietnam'",t.measureText(e).width};o.test(null===(r=window.navigator)||void 0===r?void 0:r.platform.toLowerCase());function c(e){return!e||e===i}var l=function(e,t){var n="production"===t?a.RN.PROD:a.RN.STG;return e===a.FU.EMAIL?"https://auth.".concat(n,"/account/authenticate/email"):"https://auth.".concat(n,"/account/social/v4/login?service=auth&provider=").concat(e,"&create_user_if_not_exists=1")}},10449:(e,t,n)=>{n.d(t,{xE:()=>m,zx:()=>r.z,hU:()=>h.h,Rg:()=>o.R,j2:()=>v,_X:()=>a._});var r=n(77783),a=n(15289),o=n(88887),i=n(30811);const s=n.p+"assets/66292949a3a6849abd86.svg";var c=n(42376),l=n(27411),u=n(38856),d=n(89250),f=n(76756),p=n(85893),m=function(e){var t=e.label,n=e.onClick,r=e.disabled,a=(0,i.$G)().t,o=(0,d.s0)(),m=t||a("back"),h=(0,f.o6)({buttonText:{operaOne:"text-button-s",operaGx:"text-header-s",operaAir:"text-button-m"}},["buttonText"]);return(0,p.jsxs)("button",{tabIndex:-1,onClick:function(){n?n():o(-1)},className:(0,u.AK)("flex h-4 select-none flex-row items-center justify-center gap-2 text-center",h.buttonText,r?"text-text-t3-text-gray":"text-text-t1-text-active-icons"),children:[(0,p.jsx)(l.S,{config:{operaOne:{light:s,dark:c,color:r?"var(--text-t3-text-gray)":"var(--text-t1-text-active-icons)"}}}),(0,p.jsx)("p",{children:m})]})},h=n(80850),v=function(e){var t=e.children,n=e.className,r=e.onClick,a=e.onMouseEnter,o=e.onMouseLeave,i=e.onKeyUp,s=e.testId,c=e.tabIndex,l=void 0===c?-1:c,d=(0,f.o6)({rounded:"rounded-aria-radius-3",operaGx:{rounded:"rounded-aria-radius-2"},operaAir:{rounded:"rounded-aria-radius-5"}},["rounded"]);return(0,p.jsx)("div",{role:"button","data-testid":s||void 0,className:(0,u.AK)("text-button-s flex h-10 cursor-pointer select-none flex-row items-center justify-start px-aria-4 py-aria-3 text-text-t1-text-active-icons outline-none hover:bg-levels-l2-hover",d.rounded,n),tabIndex:l,onClick:r,onMouseEnter:a,onMouseLeave:o,onKeyUp:i,children:t})}},41775:(e,t,n)=>{n.d(t,{Im:()=>i,xE:()=>c.xE,zx:()=>c.zx,hn:()=>R.h,Dd:()=>E.D,u1:()=>A,oX:()=>T,hU:()=>c.hU,Rg:()=>c.Rg,j2:()=>c.j2,P_:()=>S,fx:()=>s,_X:()=>c._X,sm:()=>I.s,Kx:()=>f,oi:()=>d,u:()=>l.u});var r=n(38856),a=n(76756),o=n(85893),i=function(e){var t=e.onBackButtonClick,n=e.title,i=(0,a.o6)({headerWrapper:{operaGx:"border-image-1-header",operaAir:"border-transparent"},title:{operaOne:"!font-normal",operaGx:"!font-semibold"}},["headerWrapper","title"]);return(0,o.jsxs)("div",{id:"aria_header",className:(0,r.AK)("relative box-border flex h-14 min-h-14 w-full items-center justify-center border-b border-secondary-s1-selected-stroke p-3",i.headerWrapper),children:[(0,o.jsx)("div",{className:"absolute left-3",children:(0,o.jsx)(c.xE,{onClick:t})}),(0,o.jsx)("span",{className:(0,r.AK)("text-subheader-m",i.title),children:n})]})},s=(n(93919),function(e){var t=e.render,n=(0,a.u)(),r=n.handleScreenshotClipboard,i=n.screenshotClipboardAreaRef,s=n.clipboardPending;return(0,o.jsx)("div",{ref:i,children:t({handleScreenshotClipboard:r,clipboardPending:s})})}),c=n(10449),l=(n(61393),n(61401),n(10181)),u=(n(24871),n(67294)),d=(0,u.forwardRef)((function(e,t){var n=e.className,i=e.onFocus,s=e.onChange,c=e.onKeyDown,l=e.onKeyUp,u=e.value,d=e.maxLength,f=e.placeholder,p=e.defaultValue,m=(0,a.o6)({element:"outline-none px-2 py-1 min-w-10",background:"bg-secondary-s2-tertiary-need-to-fix",text:"text-text-t1-text-active-icons text-body-m",rounded:"rounded-aria-radius-3",operaGx:{background:"bg-levels-l0-extension-bg"},operaAir:{rounded:"rounded-full",background:"bg-levels-l4-message-bg"}},["element","background","text","rounded"]);return(0,o.jsx)("input",{ref:t,className:(0,r.AK)(m.element,m.background,m.text,m.rounded,n),type:"text",maxLength:d,value:u,onFocus:i,onChange:s,onKeyDown:c,onKeyUp:l,placeholder:f,defaultValue:p})})),f=(0,u.forwardRef)((function(e,t){var n=e.className,i=e.id,s=e.name,c=e.testId,l=e.onInput,u=e.onFocus,d=e.onChange,f=e.onKeyDown,p=e.onKeyUp,m=e.value,h=e.disabled,v=e.maxLength,g=e.placeholder,x=e.defaultValue,b=e.invalid,y={outer:"rounded-aria-radius-3 bg-levels-l3-cards overflow-hidden py-2 pl-2 pr-2 border",outerBorderColor:b?"border-states-error":"border-transparent",textarea:"text-body-m outline-none p-1 placeholder-text-t3-text-gray text-text-t1-text-active-icons bg-transparent",scrollbar:"hover-scrollbar box-border resize-none"},w=(0,a.o6)(y,["outer","textarea","scrollbar","outerBorderColor"]);return(0,o.jsx)("div",{className:(0,r.AK)(w.outer,w.outerBorderColor,n),children:(0,o.jsx)("textarea",{ref:t,name:s,id:i,"data-testid":c,"data-invalid":!!b,className:(0,r.AK)("h-full w-full resize-none",w.textarea,w.scrollbar),maxLength:v,value:m,onFocus:u,onChange:d,onKeyDown:f,onKeyUp:p,onInput:l,placeholder:g,defaultValue:x,disabled:h,children:m})})})),p=n(4942),m=n(47643),h=n(2065),v=n(30811),g=n(23586),x=n(31372),b=n(72075),y=n(58489),w=n(49759),j=n(13771),_=n(27411);function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){(0,p.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O=new Map;const S=function(){var e=(0,g.fvp)().networkEnvironment,t=(0,g.HhX)().setAccountlessLoginData,n=(0,v.$G)().t,i=(0,h.Z)(),s=i.closeNotification,l=i.notificationIcon,d=i.notifications,f=(0,a.oH)().isAriaInTabView,p={error:"bg-states-error",info:"bg-secondary-s1-selected-stroke",success:"bg-states-correct"},C=(0,u.useCallback)((function(e){return function(){s(e)}}),[s]),S=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.YE,n=window.setTimeout((function(){window.clearTimeout(n),O.delete(e),s(e)}),t);O.set(e,n)},A=function(e){var t=O.get(e);window.clearTimeout(t),O.delete(e)},E=function(e){return function(){A(e)}},I=function(e){return function(){O.get(e)&&A(e),S(e,3*a.sh)}};(0,u.useEffect)((function(){d.forEach((function(e){O.has(e.id)||S(e.id)}))}),[d]);var N=(0,u.useCallback)((function(){var e=f?x.hG.BROWSER_TAB:x.hG.SIDEBAR;t({context:e,initTime:Date.now(),source:"limit_message"}),(0,y.vH)({action:x.VV.CLICK,context:e,element:x.Y3.ONBOARDING,str_value:"start:log_in:limit_message"})}),[f,t]),T=(0,a.o6)({notification:"bg-levels-l5-primary",text:"text-text-t1-text-active-icons text-body-s",border:"border border-secondary-s1-selected-stroke rounded-aria-radius-3",separator:"border-l border-solid border-secondary-s1-selected-stroke",icon:"!w-6 !h-6 min-w-6 rounded-aria-radius-2",operaAir:{notification:"bg-levels-l5-primary air-level-02 border-secondary-s1-selected-stroke border",border:"rounded-aria-radius-3",separator:""}},["notification","border","text","separator","icon"]);return d.length?(0,o.jsx)("div",{className:(0,r.AK)("absolute right-0 top-14 z-[11] w-full",!f&&"notifications-wrapper"),children:d.map((function(t){var a=t.id,i=t.link,s=t.text,u=t.type;return(0,o.jsxs)("div",{className:(0,r.AK)("mx-auto mb-2 flex max-w-fit items-center justify-between overflow-hidden pl-2  text-center",T.text,T.border,T.notification),onMouseEnter:E(a),onMouseLeave:I(a),children:[(0,o.jsx)("div",{className:(0,r.AK)("flex items-center justify-center",p[u],T.icon),children:(0,o.jsx)(_.S,{color:"info"===u?"var(--text-t1-text-active-icons)":void 0,src:l(u)})}),(0,o.jsx)("div",{className:"mx-2",children:i?(0,o.jsx)(v.cC,{i18nKey:n(s),components:{link1:(0,o.jsx)(b.h,k({className:"font-bold underline",to:i},i===(0,w.B9)(j.FU.EMAIL,e)&&{onClick:N}))}}):s}),(0,o.jsxs)("div",{className:"flex h-10 items-center",children:[(0,o.jsx)("div",{className:(0,r.AK)("h-full",T.separator)}),(0,o.jsx)(c.hU,{type:"context-menu",onClick:C(a),icon:m,title:n("close"),className:"h-full rounded-none"})]})]},a)}))}):null};var A=function(e){var t=e.onClick,n=e.children;return(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("div",{className:"absolute bottom-0 left-0 right-0 top-0 z-1 -m-2",onClick:t,onKeyDown:t,role:"button",tabIndex:-1}),n]})},E=(n(70639),n(56393)),I=n(33408),N=(n(81209),n(65910)),T={Wrapper:n(80865).M,Section:N.v},R=n(16981)},73009:(e,t,n)=>{n.d(t,{x:()=>g,J:()=>T});var r=n(89062),a=n(93324),o=n(4942),i=n(38856),s=n(67294),c=n(30811),l=n(86645),u=n(23586),d=n(31372),f=n(55970),p=n(53744),m=n(76756),h=n(58489),v=n(85893);function g(){var e,t,n=(0,c.$G)().t,g=(0,p.L1)().isCurrentThemeDark,x=(0,m.oH)().isAriaInTabView,b=(e={},(0,o.Z)(e,m.b$.POSITIVE,[{id:"helpful",uiText:n("helpful")},{id:"detailed",uiText:n("detailed")},{id:"informative",uiText:n("informative")},{id:"knowledgeable",uiText:n("knowledgeable")},{id:"quick_solution",uiText:n("quick_solution")},{id:"humorous",uiText:n("humorous")},{id:"relevant",uiText:n("relevant_content")}]),(0,o.Z)(e,m.b$.NEGATIVE,[{id:"out_of_date",uiText:n("out_of_date")},{id:"inaccurate",uiText:n("inaccurate")},{id:"dangerous",uiText:n("dangerous_or_problematic")},{id:"false",uiText:n("factually_incorrect")},{id:"denial",uiText:n("denial_when_it_should_not_happen")},{id:"harmful",uiText:n("harmful_or_offensive")},{id:"not_helpful",uiText:n("not_helpful")}]),e),y=(0,m.o6)({container:"rounded-aria-radius-3 border border-secondary-s1-selected-stroke",feedbackKind:"bg-secondary-s4-surface-overlay text-text-t3-text-gray",feedbackOptionButton:"text-header-s",selectedFeedbackKind:"bg-secondary-s1-selected-stroke text-text-t1-text-active-icons",operaGx:{feedbackOptionButton:"text-body-s !uppercase"}},["container","feedbackKind","feedbackOptionButton","selectedFeedbackKind"]),w=(0,u.hsz)(),j=w.feedbackData,_=w.saveFeedbackLoading,C=w.saveFeedbackSuccessful,k=(null!=j?j:{}).comment,O=(0,u.Uwy)().userCapabilities,S=(0,u.tkH)(),A=S.clearFeedbackState,E=S.handleSaveFeedback,I=S.setFeedbackData,N=(0,s.useState)(!1),T=(0,a.Z)(N,2),R=T[0],M=T[1],P=(0,s.useRef)(null),D=(0,s.useCallback)((function(){var e=P.current;e&&(k||(e.style.height="".concat(38,"px"),e.style.overflow="hidden"),e.style.height="".concat(Math.min(e.scrollHeight,60),"px"),e.style.overflow=e.scrollHeight>60?"auto":"hidden")}),[k]),G=function(e){var t;return null!=j&&null!==(t=j.kind)&&void 0!==t&&t.includes(e.id)?y.selectedFeedbackKind:y.feedbackKind};return(0,s.useEffect)((function(){return P.current&&(0,i.F1)(P.current),window.addEventListener("beforeunload",A),function(){window.removeEventListener("beforeunload",A)}}),[A]),(0,s.useEffect)((function(){!k&&P.current&&(P.current.value=""),D()}),[D,k]),(0,s.useEffect)((function(){var e,t;C?(M(!0),e=window.setTimeout((function(){A()}),3*m.sh),(0,h.vH)({action:d.VV.SEND_FEEDBACK,element:d.Y3.CHAT,context:x?d.hG.BROWSER_TAB:d.hG.SIDEBAR,model:"Aria",ai_provider:(0,h.V_)(null==O?void 0:O.ai_provider),str_value:"".concat(null==j?void 0:j.rate,":").concat(null==j||null===(t=j.kind)||void 0===t?void 0:t.join(","))})):M(!1);return function(){clearTimeout(e)}}),[A,C,x]),(0,v.jsx)("div",{className:(0,i.AK)("my-2 w-full bg-inherit p-3",y.container),children:R?(0,v.jsx)("p",{className:"text-body-m text-center text-text-t3-text-gray",children:n("thanks_for_your_feedback")}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{className:(0,i.AK)("rounded-aria-radius-3 border border-secondary-s1-selected-stroke"),children:(0,v.jsx)("textarea",{className:(0,i.AK)("hover-scrollbar text-body-m block w-full resize-none bg-transparent p-3 text-text-t1-text-active-icons outline-none placeholder:text-text-t3-text-gray"),placeholder:n("type_your_feedback_here"),ref:P,maxLength:1e3,onChange:function(e){return I({comment:e.target.value})},value:k,onInput:D})}),(0,v.jsx)("div",{className:(0,i.AK)("mt-3 flex flex-wrap gap-1"),children:(null==j?void 0:j.rate)&&b[j.rate].map((function(e){return(0,v.jsx)("button",{className:(0,i.AK)("flex h-6 cursor-pointer select-none flex-row items-center justify-center whitespace-nowrap rounded-full px-3",y.feedbackOptionButton,G(e)),onClick:function(){return function(e){var t,n,a,o;n=null!==(t=j.kind)&&void 0!==t&&t.includes(e.id)?null==j||null===(a=j.kind)||void 0===a?void 0:a.filter((function(t){return t!==e.id})):[].concat((0,r.Z)(null!==(o=null==j?void 0:j.kind)&&void 0!==o?o:[]),[e.id]),I({kind:n})}(e)},children:e.uiText},e.id)}))}),"boolean"==typeof C&&!C&&(0,v.jsx)("p",{className:"mt-4 text-other-warning",children:n("chat_error_processing_request")}),(0,v.jsxs)("div",{className:(0,i.AK)("mt-4 flex flex-row justify-end gap-1.5"),children:[(0,v.jsx)(l.zx,{type:"tertiary",onClick:A,size:"xs",children:n("cancel")}),(0,v.jsx)(l.zx,{type:"primary",disabled:!(null!=j&&null!==(t=j.kind)&&void 0!==t&&t.length),onClick:E,size:"xs",children:_?(0,v.jsx)(f.Z,{spinnerColoring:g?"white-gray":"gray-accent"}):n("send_feedback")})]})]})})}var x=n(15861),b=n(64687),y=n.n(b);const w=n.p+"assets/b9c699a86ab690791b12.svg",j=n.p+"assets/7b9ac5b763bce158898d.svg",_=n.p+"assets/fda33c4a45d4654e2276.svg",C=n.p+"assets/a97a63d1b11ad7177bce.svg",k=n.p+"assets/79a4ae501b42b69cb13e.svg",O=n.p+"assets/6ed2cd085dd2e14940ac.svg";var S=n(4916),A=n(41775),E=n(25108);function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const T=function e(t){var n=t.rate,r=t.conversationId,a=t.messageId,o=(0,c.$G)().t,s=(0,u.tkH)(),d=s.setFeedbackData,f=s.clearFeedbackState,p=(0,u.hsz)().feedbackData,h=function(){var e=(0,x.Z)(y().mark((function e(){var t,o,i,s,c,l;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=33;break}return e.next=3,(0,S.hV)(r);case 3:if(e.t1=t=e.sent,e.t0=null!==e.t1,!e.t0){e.next=7;break}e.t0=void 0!==t;case 7:if(!e.t0){e.next=11;break}e.t2=t,e.next=12;break;case 11:e.t2={};case 12:return i=e.t2,s=i.server_id,e.next=16,(0,S.S$)(a,r);case 16:if(e.t4=o=e.sent,e.t3=null!==e.t4,!e.t3){e.next=20;break}e.t3=void 0!==o;case 20:if(!e.t3){e.next=24;break}e.t5=o,e.next=25;break;case 24:e.t5={};case 25:if(c=e.t5,l=c.server_id,s){e.next=29;break}return e.abrupt("return",E.error("Cannot leave feedback, conversation's server id does not exist!"));case 29:p&&f(),d({rate:n,conversation_id:s,message_id:l}),e.next=34;break;case 33:return e.abrupt("return",E.error("Cannot leave feedback, conversation id does not exist!"));case 34:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g={likeIcon:{operaOne:j,color:"var(--text-t1-text-active-icons)",operaGx:C,operaAir:O},dislikeIcon:{operaOne:w,color:"var(--text-t1-text-active-icons)",operaGx:_,operaAir:k},offsetValue:8,operaGx:{offsetValue:12},operaAir:{offsetValue:12}},b=(0,m.o6)(g,["offsetValue","dislikeIcon","likeIcon"]);return(0,v.jsx)(l.u,{placement:"bottom",arrowDirection:"top",offsetValue:b.offsetValue,title:n===m.b$.POSITIVE?o("good_answer"):o("wrong_answer"),delay:m.XT,children:function(t){var r=t.ref,a=t.referenceProps;return(0,v.jsx)("div",N(N({ref:r},a),{},{children:(0,v.jsx)(A.hU,{iconSize:13,icon:n===m.b$.POSITIVE?b.likeIcon:b.dislikeIcon,type:"context-menu",onClick:h,testId:(0,i.wE)(e,"button","feedback")})}))}})}},55970:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(38856),a=n(76756),o=n(85893);const i=function e(t){var n=t.spinnerColoring,i=t.sizeClass,s=void 0===i?"h-4 w-4":i,c=(0,a.o6)({grayAccent:"before:border-primary-p1-cobalt-buttons before:border-t-secondary-s1-selected-stroke after:border-secondary-s1-selected-stroke after:border-t-primary-p1-cobalt-buttons",whiteGray:"before:border-secondary-s1-selected-stroke before:border-t-levels-l1-chat-bg-bg-elements after:border-levels-l1-chat-bg-bg-elements after:border-t-secondary-s1-selected-stroke",operaAir:{grayAccent:"before:border-secondary-[#00000014] before:border-t-levels-l1-chat-bg-bg-elements after:border-levels-l1-chat-bg-bg-elements after:border-t-secondary-[#00000014]",whiteGray:"before:border-secondary-[#00000014] before:border-t-levels-l1-chat-bg-bg-elements after:border-levels-l1-chat-bg-bg-elements after:border-t-secondary-[#00000014]"}},["grayAccent","whiteGray"]),l=c.grayAccent,u=c.whiteGray;return(0,o.jsx)("span",{"data-testid":(0,r.wE)(e,"span","spinner"),className:(0,r.AK)(s,"gray-accent"===n?l:u,"after:content relative inline-block before:absolute before:block before:h-full before:w-full before:animate-spin before:rounded-full before:border-2 before:border-solid before:content-[''] after:absolute after:block after:h-full after:w-full after:animate-spin after:rounded-full after:border-2 after:border-solid after:delay-150 after:content-['']")})}},44282:(e,t,n)=>{n.d(t,{Z:()=>I});var r=n(4942),a=n(6501),o=n(29522),i=n(9470),s=n(45386),c=n(13934),l=n(60153),u=n(91701),d=n(4445),f=n(22196),p=n(59006),m=n(37938),h=n(67294),v=n(26017),g=n(28163),x=n(35703),b=n(50653),y=n(72090),w=n(44971),j=(n(16611),n(86667)),_=n(38856),C=n(76711),k=n(99079),O=n(85893);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e){var t=e.links,n=e.message,r=e.isGenerating,h=void 0!==r&&r,S=e.components,E=e.isNonTempDisplayedMessage,I=e.wrapperClass,N=e.isTextless,T=(0,m.Z)({enabled:h}),R=(0,j.E)().isAriaAnalyzing&&!E;R||(n+=T),n=(0,w.VV)(n);var M=t&&Object.values(t).flat();return(0,O.jsx)("span",{className:(0,_.AK)(I,"markdown",R&&"animate-wavyBlinking"),children:(0,O.jsx)(a.U,{className:"[&>p:not(:first-child)]:mt-4",remarkPlugins:[s.Z,[c.Z,{singleDollarTextMath:!1}],[u.N,{links:M,disabled:h}],[l.s,{disabled:!h}],[k.W,{disabled:!N}]],rehypePlugins:[o.Z,i.Z,[y.Z,{target:"_blank"}]],components:A({ul:f.Ik,ol:f.Ic,th:d.U,td:d.H,pre:p.Z,h1:v.Z,h2:v.Z,h3:v.Z,h4:v.Z,h5:v.Z,h6:v.Z,table:h?C.Z:x.Z,blockquote:g.Z,img:b.Z},S),children:n})})}const I=(0,h.memo)(E)},22196:(e,t,n)=>{n.d(t,{Ic:()=>f,Ik:()=>p,Tf:()=>m});var r=n(4942),a=n(45987),o=n(38856),i=n(85893),s=["node","className"],c=["node","className"],l=["node","className"];function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e){e.node;var t=e.className,n=(0,a.Z)(e,s);return(0,i.jsx)("ol",d({className:(0,o.AK)(t,"list-decimal pl-[18px] rtl:pr-[18px]")},n))}function p(e){e.node;var t=e.className,n=(0,a.Z)(e,c);return(0,i.jsx)("ul",d({className:(0,o.AK)(t,"[&>li]:custom-bullet pl-[18px] rtl:pr-[18px]")},n))}function m(e){e.node;var t=e.className,n=(0,a.Z)(e,l);return(0,i.jsx)("ul",d({className:(0,o.AK)(t,"pl-[18px] rtl:pr-[18px] [&>li]:list-disc")},n))}},87014:(e,t,n)=>{n.d(t,{xb:()=>_.x,bZ:()=>w,tN:()=>j.t});var r=n(76756),a=n(38856),o=n(85893),i=function(e){var t=e.children,n=(0,r.o6)({wrapper:{operaOne:"right-aria-3",operaGx:"right-aria-4"}},["wrapper"]);return(0,o.jsx)("div",{className:(0,a.AK)("absolute top-0 z-1 -translate-y-1/2",n.wrapper),children:t})},s=n(41775),c={increase:"mask-chevron-right",decrease:"mask-chevron-left"},l=function(e){var t=e.onClick,n=e.strategy;return(0,o.jsx)(s.u1,{onClick:t,children:(0,o.jsx)("i",{className:(0,a.AK)(c[n],"icon")})})},u=function(e){var t=e.activeAnswer,n=e.answersCount;return(0,o.jsxs)("span",{className:"text-header-s-bold select-none text-text-t1-text-active-icons",children:[t+1,"/",n]})},d=n(58489),f=n(31372),p=function(e){var t=e.activeAnswer,n=e.answersCount,a=e.setActiveAnswer,i=e.answerCategory,s=function(e){var t=e.answersCount,n=e.setActiveAnswer,a=e.activeAnswer,o=(0,r.T4)({itemsCount:t,setActiveItem:n,activeItem:a});return{onNextAnswer:o.onNext,onPreviousAnswer:o.onPrevious}}({answersCount:n,setActiveAnswer:a,activeAnswer:t}),c=s.onNextAnswer,p=s.onPreviousAnswer;return function(e){var t=e.activeAnswer,n=e.answerCategory,a=(0,r.oH)().isAriaInTabView;(0,r.rf)((function(){(0,d.vH)({action:f.VV.CLICK,element:f.Y3.MULTIMODAL_ANSWER,context:a?f.hG.BROWSER_TAB:f.hG.SIDEBAR,model:"Aria",str_value:n,int_value:t})}),[t],[n,a])}({activeAnswer:t,answerCategory:i}),(0,o.jsx)("div",{className:"rounded-aria-radius-2 border border-secondary-s1-selected-stroke bg-levels-l3-cards p-aria-2",children:(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)(l,{onClick:p,strategy:"decrease"}),(0,o.jsx)(u,{activeAnswer:t,answersCount:n}),(0,o.jsx)(l,{onClick:c,strategy:"increase"})]})})},m=n(44282),h=n(67294),v=n(53979);const g=function e(t){var n=t.image,r=t.richResponseId,i=(0,h.useCallback)((function(){(0,v.RB)(n.link)}),[n.link]);return(0,o.jsx)("div",{className:"rich-response-image w-full","data-test-id":(0,a.wE)(e,"div","rich-response-image-".concat(r)),onClick:i,onKeyUp:i,role:"button",tabIndex:-1,children:(0,o.jsx)("img",{alt:n.title,className:"mx-auto max-h-70 rounded-aria-radius-3",src:n.imageUrl,title:n.title})})};var x=function(e){var t=e.href,n=e.children,r=e.target;return(0,o.jsx)("a",{href:t,className:"!bg-secondary-s3-bg-icons",target:r,children:(0,o.jsx)("span",{children:n})})},b=function e(t){var n=t.branchContent,r=t.links,i=n.images_list||[];return(0,o.jsxs)("div",{"data-test-id":(0,a.wE)(e,"div","rich-response"),children:[i.length>0&&(0,o.jsx)("div",{className:"rich-response-images mb-aria-5",children:i.map((function(e,t){return(0,o.jsx)(g,{image:e,richResponseId:n.id},"".concat(n.id,"-").concat(t,"-rich-response-image"))}))}),(0,o.jsx)(m.Z,{message:n.text,links:r,components:{a:function(e){var t=e.children,n=e.href,r=e.target;return(0,o.jsx)(x,{href:n,target:r,children:t})}}})]})},y=function(e){var t=e.text,n=e.links;return(0,o.jsx)("div",{children:(0,o.jsx)(m.Z,{message:t,links:n})})},w=function(e){var t=e.selectedAnswerIndex,n=e.content,s=e.updateRichResponseSelectedIndex,c=e.isLocked,l=e.answerCategory,u=e.links,d=t||0,f=n.main_texts.length,m=(0,r.o6)({answerCard:{operaOne:"bg-levels-l3-cards",operaGx:"bg-levels-l5-primary"}},["answerCard"]);return(0,o.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,o.jsx)("div",{children:(0,o.jsx)(y,{text:n.first_message,links:u})}),(0,o.jsx)("div",{children:(0,o.jsxs)("div",{className:(0,a.AK)("relative w-full rounded-aria-radius-3 p-aria-4",m.answerCard),children:[!c&&(0,o.jsx)(i,{children:(0,o.jsx)(p,{activeAnswer:d,answersCount:f,setActiveAnswer:s,answerCategory:l})}),(0,o.jsx)(b,{branchContent:n.main_texts[d],links:u})]})}),n.last_message&&(0,o.jsx)("div",{children:(0,o.jsx)(y,{text:n.last_message,links:u})})]})},j=n(47845),_=n(29098)},86645:(e,t,n)=>{n.d(t,{P_:()=>r.P_,hU:()=>r.hU,u:()=>r.u,zx:()=>r.zx});var r=n(41775)},76808:(e,t,n)=>{n(7090),n(49110);var r=Boolean(localStorage.debug),a=window.console.debug;window.console.debug=function(){return r&&a.apply(void 0,arguments)};var o=window.console.warn;window.console.warn=function(){return r&&o.apply(void 0,arguments)};var i=window.console.info;window.console.info=function(){return r&&i.apply(void 0,arguments)};var s=n(20745),c=n(76756),l=n(67294),u=n(23586),d=n(7226),f=n(68279),p=function(e){var t=e.children,n=(0,f.Su)().loggerService,r=(0,u.Pt2)().handleAriaOpened,a=(0,u.Qck)().setLocalModelsServiceStatus,o=(0,l.useCallback)((function(e){var t=e?"RUNNING":"UNAVAILABLE";n.info("LOCAL MODELS SERVICE STATUS CHANGED TO",t),a(t)}),[a]);return(0,l.useEffect)((function(){return(0,d.OZ)(o),r(!0),(0,d.ff)().then(o),function(){r(!1),(0,d.n5)(o)}}),[]),t},m=n(89062),h=n(15861),v=n(93324),g=n(4942),x=n(64687),b=n.n(x),y=n(30811),w=n(26382),j=n(44282),_=n(12294),C=n(85893);const k=(0,l.memo)((function(e){var t=e.title,n=e.sender,r=e.progress,a=e.countryCode,o=e.message,i=e.contextType,s=e.isCurrentlyGeneratedMessage,c=e.links,l=e.children,u=e.richContentExists,d=e.isNonTempDisplayedMessage,f=(r||s)&&!u,p=n===w.CI.aria,m=n===w.CI.user,h=n===w.CI.localModel;return(0,C.jsxs)(C.Fragment,{children:[t&&(0,C.jsx)("div",{className:"title",children:t}),(0,C.jsxs)("div",{className:"content flex min-h-8 flex-col justify-center",children:[m&&(0,C.jsx)("span",{children:o}),h&&(0,C.jsx)("span",{children:o}),p&&(o||f)&&(0,C.jsx)(j.Z,{isNonTempDisplayedMessage:d,links:c,message:o,isGenerating:f,components:{a:function(e){var t=e.children,n=e.href;return(0,C.jsx)(_.Z,{href:null!=n?n:"",progress:f,contextType:i,countryCode:null!=a?a:navigator.language,children:t})}}}),l]})]})}));var O=n(78546),S=n(38856),A=n(47643),E=n(27411);const I=function(e){var t=e.onChipRemove,n=e.title,r=e.variant,a=void 0===r?"normal":r,o=Boolean(t),i=(0,l.useCallback)((function(e){e.stopPropagation(),t()}),[t]),s=(0,c.o6)({padding:"p-1",operaGx:{padding:"p-1 px-2"},operaAir:{padding:"p-1 px-2",shadow:"air-level-02-shadow"}},["border","padding","shadow"]);return(0,C.jsxs)("button",{title:n,className:(0,S.AK)("text-body-s flex !h-7 max-w-[175px] cursor-pointer select-none items-center rounded-aria-radius-2 bg-levels-l2-hover text-text-t1-text-active-icons",s.padding,s.shadow,"message"===a&&"mr-2.5 mt-2.5 !cursor-auto !bg-transparent","message"===a&&"border border-secondary-s1-selected-stroke"),onClick:o?i:function(){},children:[(0,C.jsx)("span",{className:"shrink-0 flex-grow basis-0 select-none truncate",children:n}),o&&(0,C.jsx)(E.S,{src:A,color:"default",className:"ml-0.5 shrink-0",title:"Remove"})]})};var N=n(6391),T=n(62655);const R=n.p+"assets/0632be293d6893eef9b9.svg",M=n.p+"assets/17d820f0ebf3196a58c6.svg";var P=n(95928),D=n(86645),G=n(55970),L=function e(t){var n=t.type,r=t.file,a=t.readonly,o=t.onRemove,i=(0,l.useRef)(null),s=(0,c.XI)(i),u=function(){return null==o?void 0:o(r.image_id)},d=!(c.v5.includes(n)||c.Go.includes(n)),f=r.status!==c.bb.FINISHED,p=s||f;return(0,C.jsxs)("div",{ref:i,className:(0,S.AK)("flex h-12 w-42 items-center gap-aria-2 rounded-aria-radius-3 border border-secondary-s1-selected-stroke bg-levels-l5-primary p-aria-3",!a&&"hover:bg-levels-l2-hover hover:bg-none"),children:[(0,C.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-aria-radius-3 bg-secondary-s3-bg-icons p-aria-3",children:(0,C.jsx)(E.S,{config:d?M:R,color:"var(--text-t1-text-active-icons)"})}),(0,C.jsxs)("div",{className:"flex flex-grow flex-col gap-aria-2",children:[(0,C.jsx)("p",{className:(0,S.AK)("text-body-m max-h-4 overflow-hidden text-ellipsis text-nowrap text-text-t1-text-active-icons",p&&!a?"max-w-22":"max-w-28"),children:r.name}),(0,C.jsx)("p",{className:"text-body-s text-text-t3-text-gray",children:n})]}),p&&!a&&(f&&!s?(0,C.jsx)(G.Z,{spinnerColoring:"gray-accent"}):!!o&&(0,C.jsx)(D.hU,{dataTestId:(0,S.wE)(e,"button","remove-btn"),type:"transparent",icon:P,iconSize:16,tabIndex:-1,onClick:u,onKeyUp:u,className:"-ml-1 h-full items-center self-end"}))]})},B=n(96531),Z=n(41775),H=n(69185),F=function e(t){var n=t.image,r=t.onRemove,a=t.visualQuestionResponseImage,o=void 0!==a&&a,i=(0,l.useState)("default"),s=(0,v.Z)(i,2),u=s[0],d=s[1],f=(0,l.useState)("cover"),p=(0,v.Z)(f,2),m=p[0],g=p[1],x=(0,l.useState)(""),y=(0,v.Z)(x,2),w=y[0],j=y[1],_=(0,l.useState)(!1),k=(0,v.Z)(_,2),O=k[0],E=k[1],I=!!n.isLocalModel,N="in_progress"===n.status||I&&!w,T=function(){return null==r?void 0:r(n.image_id)},R=function(){var e=(0,h.Z)(b().mark((function e(t){var n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,B.zj)(t);case 2:(n=e.sent)&&j(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();(0,l.useEffect)((function(){I&&R(n.image_id)}),[n.image_id]);var M=(0,c.o6)({radius:"rounded-aria-radius-3",operaGx:{radius:"rounded-aria-radius-3"},operaAir:{radius:"rounded-aria-radius-3"}},["radius"]),P=Boolean(n.original_size_url),D=P?function(){E(!0)}:void 0;return(0,C.jsx)("div",{"data-testid":(0,S.wE)(e,"div","container"),className:(0,S.AK)("relative overflow-clip border-stroke-components","landscape"===u&&"flex items-center",o?"h-29 w-29":"h-aria-9 w-aria-9",M.radius),children:N?(0,C.jsx)("div",{"data-testid":"Loader-image-wave",className:(0,S.AK)("h-full w-full animate-imageHolderShimmer bg-shimmer",M.radius)}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{className:(0,S.AK)("group absolute inset-0 flex items-center justify-center bg-transparent transition-all",N&&"bg-black bg-opacity-50",!!r&&"hover:bg-black hover:bg-opacity-50",P&&"cursor-pointer"),role:P?"button":void 0,onClick:D,onKeyUp:D,children:!!r&&(0,C.jsx)(Z.hU,{dataTestId:(0,S.wE)(e,"button","remove-btn"),type:"transparent",icon:A,className:"invisible h-full w-full opacity-0 transition-opacity group-hover:visible group-hover:opacity-100",tabIndex:-1,onClick:T,onKeyUp:T})}),(!!n.thumbnail_url||!!w)&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("img",{alt:"",className:(0,S.AK)("h-full w-full bg-secondary-s1-selected-stroke","center-crop"===m&&"object-cover object-center","cover"===m&&"object-cover"),src:I?w:n.thumbnail_url,onLoad:function(e){var t=e.target,n=t.naturalHeight,r=t.naturalWidth;d(r<114?"default":r>n?"landscape":"portrait"),g(r>=48&&n>=48?"center-crop":"cover")}}),P&&O&&(0,C.jsx)(H.Z,{onClose:function(){E(!1)},previewImageAlt:n.name,previewImageSrc:n.original_size_url})]})]})})},K=function(e){var t=e.files,n=e.isMessageResponse,r=void 0!==n&&n,a=e.onRemove,o=e.readonly,i=(0,c.Su)().filesService;return(0,C.jsx)("div",{className:"flex w-fit flex-row gap-1",children:!!t.length&&(0,C.jsx)("div",{className:"flex w-fit flex-row flex-wrap gap-2",children:t.map((function(e){var t,n;return i.isImage(null!==(t=e.name)&&void 0!==t?t:"")?(0,C.jsx)(F,{image:e,onRemove:a,visualQuestionResponseImage:r},e.image_id):(0,C.jsx)(L,{file:e,onRemove:a,readonly:o,type:c.nS.getFileExtension(null!==(n=e.name)&&void 0!==n?n:"")},e.image_id)}))})})},U=n(9192),V=n(60387),W=n(2065),z=n(40054),Y=n(87014),q=n(91786),X=n(38824),$=(0,l.createContext)(null),Q=function(){var e=(0,l.useContext)($);if(!e)throw new Error("useScrollActions is used outside of context of value is undefined inside Provider");var t=(0,l.useCallback)((function(){e.current&&(0,S.qf)(e.current,"start")}),[e]);return{scrollIntoEnd:(0,l.useCallback)((function(){e.current&&(0,S.qf)(e.current,"end")}),[e]),scrollIntoStart:t}},J=function(e){var t=e.children,n=Q().scrollIntoEnd;return t({layoutUpdateCallbackByCollapsibleStatus:(0,l.useCallback)((function(e){e&&n()}),[n])})},ee=n(22277),te=function(e){var t=e.children,n=e.enabled,r=e.strategy,a=Q(),o=a.scrollIntoEnd,i=a.scrollIntoStart;return(0,l.useEffect)((function(){n&&("bottom-focused"===r?o():i())}),[n,o,i,r]),t},ne=n(86667),re=n(62857),ae=n(89250),oe=n(58489),ie=n(31372),se=function(){var e,t,n=(0,y.$G)().t,r=(0,ae.s0)(),a=(e=function(){r("/settings",{state:{initialTab:n("profile_settings_tab")}})},t=(0,c.oH)().isAriaInTabView,(0,l.useCallback)((function(){(0,oe.vH)({action:ie.VV.CLICK,element:ie.Y3.PROFILE_MEMORY,context:t?ie.hG.BROWSER_TAB:ie.hG.SIDEBAR,model:"Aria",str_value:"long_term_memory:memory_updated_indication"}),e()}),[e,t]));return(0,C.jsx)("div",{className:"cursor-pointer rounded-aria-radius-2 bg-secondary-s3-bg-icons p-aria-2 transition-colors hover:bg-levels-l2-hover",onClick:a,onKeyUp:a,tabIndex:-1,role:"button",children:(0,C.jsxs)("div",{className:"flex flex-row items-center gap-aria-2",children:[(0,C.jsx)("div",{children:(0,C.jsx)(E.S,{config:re,className:"!block stroke-text-t1-text-active-icons"})}),(0,C.jsx)("div",{className:"flex-1",children:(0,C.jsx)("span",{className:"text-header-s uppercase text-text-t1-text-active-icons","data-ignore-highlighter":!0,children:n("profile_memory_message_indicator")})})]})})};function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ue=(0,l.forwardRef)((function(e,t){var n,r=e.audioAvailable,a=e.countryCode,o=void 0===a?navigator.language:a,i=e.title,s=e.conversationId,d=e.conversationSource,f=e.children,p=e.isLastMessage,m=e.onRetry,v=e.sender,x=e.error,j=e.errorType,_=e.id,A=e.progress,E=e.noAvatar,R=e.message,M=void 0===R?"":R,P=e.contextType,D=e.responseInProgress,G=void 0!==D&&D,L=e.isActive,B=void 0!==L&&L,Z=e.suggestions,H=e.sources,F=e.handleScreenshotClipboard,Q=e.screenshotClipboardPending,re=e.highlightedTexts,ae=e.links,oe=e.quotation,ie=e.model,ce=e.files,de=e.originLink,fe=e.addNewChat,pe=e.writingModeState,me=e.rich_response,he=e.richResponseSelectedIndex,ve=e.shopping_list,ge=e.images_list,xe=e.games_list,be=e.layout,ye=e.withNewFactsIndicator,we=(0,c.Su)(),je=we.loggerService,_e=we.clipboardService,Ce=(0,y.$G)().t,ke=(0,W.Z)().pushNotification,Oe=(0,q.d)().saveMessage,Se=(0,X.H)({messageSpecificLayout:be}).messageLayout,Ae=(0,ee.s)().conversation,Ee=(0,ne.E)().isAriaAnalyzing,Ie=(0,c.Cg)().consentNeeded,Ne=(0,u.GgQ)().isSiaEnabled,Te=(0,u.J0e)().isSourceLinksEnabled,Re=(0,u.coc)().chatContext,Me=(0,u.WGj)().rephraseMessagePatch,Pe=(0,u.ljr)().remoteConfig,De=(0,u.tkH)().clearFeedbackState,Ge=(0,l.useRef)(null);(null==Me?void 0:Me.messageId)==="message-".concat(_)&&Me.message&&(M=Me.message);var Le=(0,l.useCallback)((0,h.Z)(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!me){e.next=6;break}return e.next=4,_e.writeSeparatedTitleDescription({title:me.first_message,description:me.main_texts[he||0].text});case 4:e.next=8;break;case 6:return e.next=8,_e.formatRespectingCopy(M,document.querySelector("#message-".concat(_," .body .content")));case 8:ke(Ce("copied"),"info"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),je.error("Copy message error:",e.t0),ke(Ce("error_occurred_message"),"error");case 15:case"end":return e.stop()}}),e,null,[[0,11]])}))),[_,M,he,me,_e]),Be=(0,l.useCallback)((function(e){Oe({message:"",sender:w.CI.aria,messageId:_,conversation:Ae,richResponseSelectedIndex:e})}),[Ae,Oe,_]);(0,l.useEffect)((function(){De()}),[De,s]);var Ze=oe&&!!oe.length,He=Re.message,Fe=v===w.CI.aria&&p&&Re.messageId===_&&["tab-view","sidebar","selected-content-prompt"].includes(d),Ke=!A&&!G&&v===w.CI.aria&&!Ie,Ue=(0,l.useMemo)((function(){var e,t=M;null!=pe&&pe.action?(t=pe.action+": \n"+M,t=(e={},(0,g.Z)(e,z.o9.GENERATE_TEXT,Ce("generate_text")),(0,g.Z)(e,z.o9.TWEAK,Ce("tweak_it")),(0,g.Z)(e,z.o9.SPELLCHECK,Ce("spellcheck")),(0,g.Z)(e,z.Hr.OUTPUT_EDITING,Ce("output_editing")),(0,g.Z)(e,z.Hr.LONGER,Ce("make_it_longer")),(0,g.Z)(e,z.Hr.SHORTER,Ce("make_it_shorter")),(0,g.Z)(e,z.Hr.ADD_EMOJI,Ce("add-emoji")),(0,g.Z)(e,z.Hr.ADD_HASHTAGS,Ce("add_hashtags")),e)[null==pe?void 0:pe.action]+": \n"+M):Ee&&p&&Re.working&&(t=Ce("constructing_response"));return Fe&&He||t}),[Re.working,He,Ee,p,M,Fe,Ce,pe]),Ve=Ne&&(null==Z?void 0:Z.suggestionList.length),We=!(G&&p)&&(Te&&((null==H||null===(n=H.sourceList)||void 0===n?void 0:n.length)||ge||ve||xe)||Ve),ze=(0,c.o6)({ariaMessageHover:"",backgroundFromUser:"message-from bg-transparent",backgroundFromAria:"message-to bg-levels-l4-message-bg",operaGx:{ariaMessageHover:""},operaAir:{ariaMessageHover:"",backgroundFromAria:"message-to bg-transparent"}},["ariaMessageHover","backgroundFromUser","backgroundFromAria"]);return"USER_LIMIT"===j||"IMAGES_LIMIT"===j?null:(0,C.jsx)($.Provider,{value:Ge,children:(0,C.jsx)(te,{enabled:Boolean(p&&x),strategy:Boolean(null==Z?void 0:Z.suggestionList.length)?"bottom-focused":"options-focused",children:(0,C.jsx)("div",le(le({"data-testid":p&&(0,S.wE)(ue,"div","is-last-message"),className:(0,S.AK)(Boolean(x)&&"bg-transparent",v===w.CI.aria&&ze.ariaMessageHover,B&&"active","group/message text-body-l message relative box-border rounded-aria-radius-3 border border-solid border-transparent px-4 py-5 text-text-t1-text-active-icons",v==w.CI.user?ze.backgroundFromUser:ze.backgroundFromAria),id:"message-".concat(_),"data-sentry-ignore":!0,ref:t},G&&p&&{"data-testid":(0,S.wE)(ue,"div","response-in-progress")}),{},{children:(0,C.jsxs)("div",{className:"wrap flex flex-row gap-aria-4",children:[!E&&(0,C.jsx)("div",{className:"block shrink-0",children:(0,C.jsx)(N.P,{error:x,sender:v,model:ie,includeFileLoadingState:p})}),(0,C.jsxs)("div",{ref:Ge,className:(0,S.AK)("body",Boolean(x)&&"flex flex-col-reverse"),children:[Ke&&(0,C.jsx)(O.Z,{ariaReadVoiceAvailable:r,isLastMessage:p,conversationId:s,messageId:_,onRetry:m,onCopy:Le,error:x,errorType:j,isEmptyMessage:!M.trim()&&!me,clipboardScreenshotButtonDisabled:Q,handleScreenshotClipboard:F,addNewChat:fe}),(0,C.jsx)(k,{links:ae,title:i,isNonTempDisplayedMessage:!(!Fe||!He),sender:v,progress:A,message:Ue,isCurrentlyGeneratedMessage:Fe,countryCode:o,contextType:P,id:_,richContentExists:Boolean(me),children:me&&(0,C.jsx)(Y.bZ,{content:me,selectedAnswerIndex:he,updateRichResponseSelectedIndex:Be,isLocked:!Boolean(p),answerCategory:(0,Y.tN)({rich_response:me,images_list:ge,shopping_list:ve,games_list:xe}),links:ae})}),v===w.CI.user&&Boolean(null==re?void 0:re.length)&&(0,C.jsx)("div",{className:"flex flex-wrap",children:re.map((function(e){return(0,C.jsx)(I,{variant:"message",title:e},"".concat(_,"-highlighted_text-").concat(e))}))}),v===w.CI.user&&!(null==ce||!ce.length)&&(0,C.jsx)(K,{files:ce,readonly:!0,isMessageResponse:!0}),de&&de.url&&(0,C.jsx)(U.H,{sources:{sourceList:[de]},id:"context-mode-link",source:d}),f&&f,!G&&Ze&&(0,C.jsx)(V.Z,{quotation:oe}),We&&(0,C.jsx)(J,{children:function(e){var t=e.layoutUpdateCallbackByCollapsibleStatus;return(0,C.jsx)(T.Z,{suggestions:Z,sources:H,id:_,source:d,images_list:ge,shopping_list:ve,games_list:xe,messageLayout:Se,layoutUpdateCallbackByCollapsibleStatus:t})}}),ye&&Pe.longterm_memory&&(0,C.jsx)("div",{className:"flex",children:(0,C.jsx)(se,{})})]})]})}))})})}));const de=ue,fe=n.p+"assets/b1a49f1790d1b4a705cb.svg";var pe=n(50198);const me=function e(t){var n=t.conversationId,r=t.inputRef,a=t.messagesContainerRef,o=t.message,i=t.isUpgradeBannerVisible,s=(0,l.useState)(!1),c=(0,v.Z)(s,2),u=c[0],d=c[1],f=(0,l.useState)(!1),p=(0,v.Z)(f,2),m=p[0],h=p[1],g=(0,l.useRef)(null),x=null==r?void 0:r.current;function b(){(0,S.Mx)(a),d(!1),h(!0),setTimeout((function(){h(!1)}),pe.DH)}return(0,l.useEffect)((function(){var e;if(g.current){var t=o?+(null==x?void 0:x.clientHeight):pe.bX;t+=x?pe.un:pe.YO,t+=i?pe.gp:0,g.current.style.setProperty("bottom","".concat(null!==(e=t)&&void 0!==e?e:0,"px"))}}),[x,o,n,i]),(0,l.useEffect)((function(){var e=null==a?void 0:a.current;if(e){var t=function(){var t=e.scrollHeight-(e.clientHeight+e.scrollTop);d(t>e.clientHeight/2&&!m)};return t(),e.addEventListener("scroll",t),function(){return e.removeEventListener("scroll",t)}}}),[a,n,m]),(0,C.jsx)("div",{className:"relative m-auto w-full max-w-tab-view ",children:(0,C.jsx)("div",{ref:g,className:"absolute bottom-8 right-5",children:(0,C.jsx)(Z.hU,{dataTestId:(0,S.wE)(e,"button","scrollDown"),className:(0,S.AK)(u?"z-1 opacity-100":"-z-1 cursor-none opacity-0"),tabIndex:0,onClick:b,onKeyUp:b,icon:fe,type:"secondary"})})})};var he=n(93379),ve=n.n(he),ge=n(7795),xe=n.n(ge),be=n(90569),ye=n.n(be),we=n(68575),je=n.n(we),_e=n(19216),Ce=n.n(_e),ke=n(44589),Oe=n.n(ke),Se=n(41807),Ae={attributes:{source:"aria-extension"}};Ae.styleTagTransform=Oe(),Ae.setAttributes=je(),Ae.insert=ye().bind(null,"head"),Ae.domAPI=xe(),Ae.insertStyleElement=Ce();ve()(Se.Z,Ae);Se.Z&&Se.Z.locals&&Se.Z.locals;const Ee=n.p+"assets/637f22f6137db0081579.svg",Ie=n.p+"assets/046461fc1a778fe43d99.svg",Ne=n.p+"assets/823d989847c2950d3b26.svg",Te=n.p+"assets/9abe40fc417dcd471d7d.svg";const Re=function(e){var t=e.children,n=e.isAriaModel,r=(0,l.useState)(!1),a=(0,v.Z)(r,2),o=a[0],i=a[1],s=(0,l.useRef)(null),d=(0,u.YZY)().isOperaOne,f=["orange","pink","purple","green"],p=2*c.sh,m=3*c.sh;return(0,C.jsxs)("div",{className:"input-animation-wrapper ".concat(o?"active":""),ref:s,id:"input-animation-wrapper",children:[(0,C.jsx)("div",{className:"input-wrapper",onFocus:function(){o||(f.forEach((function(e){s.current&&(s.current.style.setProperty("--input-animation-position-".concat(e,"-left"),(0,S.cL)(25,75)+"%"),s.current.style.setProperty("--input-animation-position-".concat(e,"-top"),(0,S.cL)(45,55)+"%"),s.current.style.setProperty("--input-animation-duration-".concat(e),(0,S.cL)(p,m)/c.sh+"s"))})),i(!0),setTimeout((function(){return i(!1)}),1100))},children:t}),o&&d&&n&&(0,C.jsxs)("div",{className:"gradient-wrapper",children:[(0,C.jsx)("img",{src:Ie,alt:"",className:"gradient",draggable:"false"}),(0,C.jsx)("img",{src:Ne,alt:"",className:"gradient",draggable:"false"}),(0,C.jsx)("img",{src:Te,alt:"",className:"gradient",draggable:"false"}),(0,C.jsx)("img",{src:Ee,alt:"",className:"gradient",draggable:"false"})]})]})};var Me=n(49759);const Pe=function(e){var t=e.reusableHighlights,n=(0,u.lUI)().removeReusableHighlight,r=(0,l.useCallback)((function(e){return function(){return n(e)}}),[n]),a=(0,c.o6)({container:""},["container"]);return(0,C.jsx)("div",{className:(0,S.AK)("flex w-fit select-none flex-nowrap items-end justify-start gap-1",a.container),children:t.map((function(e){var t=e.id,n=e.title;return(0,C.jsx)(I,{onChipRemove:r(t),title:n},t)}))})},De=n.p+"assets/71530e764db142499250.svg",Ge=n.p+"assets/662c2eab0596ae6d6ead.svg";var Le=(0,l.forwardRef)((function(e,t){var n=e.disabled,r=e.onAction,a=(0,l.useRef)(null),o=(0,c.XI)(a),i=(0,u.ljr)().remoteConfig,s={icon:De,color:n?"var(--text-t3-text-gray)":"var(--text-t1-text-active-icons)",iconClass:{light:"light",dark:"dark"},button:"rounded-aria-radius-2 hover:bg-surface-on-hover dark:hover:bg-buttons-secondary-border-hover",operaGx:{icon:Ge,button:"rounded-aria-radius-3 hover:bg-classic-gx-no-77 dark:hover:bg-classic-gx-no-20"},operaAir:{color:n?"var(--text-t3-text-gray)":o?"var(--text-tb)":"var(--text-t1-text-active-icons)",button:"rounded-aria-radius-5 hover:bg-surface-on-hover dark:hover:bg-buttons-secondary-border-hover"}};return(0,C.jsxs)("label",{ref:a,className:(0,S.AK)("flex h-10 min-w-10 items-center justify-center p-2",(0,c.o6)(s,"button"),n?"cursor-not-allowed":"cursor-pointer"),"data-testid":(0,S.wE)(Le,"label","upload"),children:[(0,C.jsx)("input",{id:"upload-image-input",ref:t,type:"file",className:"sr-only",accept:(0,pe.Cr)([].concat((0,m.Z)(pe.v5),(0,m.Z)(i.read_and_save_files?[].concat((0,m.Z)(pe.Go),(0,m.Z)(pe.vH)):[]))),multiple:!0,disabled:n,onChange:function(e){n||null==r||r(e.target.files)}}),(0,C.jsx)(E.S,{config:s})]})}));Le.displayName="UploadImageButton";const Be=function e(t){var n=t.content,r={container:"px-[10px] pt-[2px] bg-secondary-s1-selected-stroke",text:"text-text-t1-text-active-icons text-body-s !leading-[20px]",rounded:t.middle?"rounded-none":"rounded-t-[8px]",operaGx:{container:"px-[10px] py-[4px] bg-secondary-s1-selected-stroke mb-[4px]",text:"text-text-t1-text-active-icons text-body-s text-center",rounded:"rounded-aria-radius-1"},operaAir:{container:"px-[10px] py-[4px] bg-secondary-s1-selected-stroke mb-[4px]",text:"text-text-t1-text-active-icons text-body-s text-center",rounded:"rounded-aria-radius-3"}},a=(0,c.o6)(r,["rounded","text","container"]);return(0,C.jsx)("p",{className:(0,S.AK)("w-full",a.container,a.text,a.rounded),"data-testid":(0,S.wE)(e,"p","disclaimer"),children:n})};var Ze=n(93075),He=n(85983),Fe=n(66037);const Ke=n.p+"assets/5c2425d1f6cda1251f8c.svg";var Ue=function(e){var t=e.content,n=e.isOpen,r=e.setIsOpen,a=(0,Ze.YF)({middleware:[(0,He.cv)({mainAxis:16})],placement:"top-end",open:n,onOpenChange:r,whileElementsMounted:Fe.Me}),o=a.refs,i=a.floatingStyles,s=(0,l.useRef)(null),u=(0,c.XI)(s),d={button:"mb-1 h-10 hover:bg-buttons-secondary-border-hover",moreIconColor:"default",operaGx:{button:"mb-1 h-10 rounded-sm hover:bg-levels-l2-hover",moreIconColor:u?"var(--text-t1-text-active-icons)":"default"},operaAir:{button:"mb-1 h-10 hover:bg-primary-p2-hover-buttons",moreIconColor:u?"var(--text-tb)":"default"}},f=(0,c.o6)(d,["button","moreIconColor"]);return(0,C.jsxs)("div",{className:"flex h-full items-end",children:[(0,C.jsx)("div",{ref:s,children:(0,C.jsx)("button",{ref:o.setReference,className:(0,S.AK)("flex w-6 items-center justify-center rounded-md",f.button),type:"button",onClick:function(){r((function(e){return!e}))},tabIndex:-1,children:(0,C.jsx)("span",{className:(0,S.AK)("flex items-center justify-center transition-all duration-200"),children:(0,C.jsx)(E.S,{src:Ke,size:16,color:f.moreIconColor})})})}),n&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(Ze.y0,{className:"z-1",onClick:function(){return r(!1)}}),(0,C.jsx)(Ze.ll,{children:(0,C.jsx)("div",{ref:o.setFloating,className:"z-2",style:i,children:t})})]})]})},Ve=function(e){return e.LEFT="left-0",e.TOP_RIGHT="top-0 right-0",e.BOTTOM_RIGHT="bottom-0 right-0",e}({});function We(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({action:ie.VV.CLICK,element:ie.Y3.COMPOSE,context:ie.hG.SIDEBAR},e||{});(0,oe.vH)(t)}function ze(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:":";return Array.from(e).map((function(e){var n=(0,v.Z)(e,2),r=n[0],a=n[1];return 0===a||Boolean(a)?[r,a].join(t):r})).join(n)}const Ye=n.p+"assets/bd0504d286f5e3431f45.svg",qe=n.p+"assets/4f310ff7d409a774155a.svg";function Xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xe(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Qe=function(e){var t=e.message,n=e.disabled,r=e.isComposeAvailable,a=e.isTextVisible,o=void 0===a||a,i=e.onAction,s=(0,l.useRef)(null),u=(0,c.XI)(s),d=(0,y.$G)().t,f=n||!r,p=(0,c.oH)().isAriaInTabView,m={composeIcon:{icon:Ye,size:32,color:f?"var(--text-t2-text-secondary)":"var(--primary-p1-cobalt-buttons)"},composeDisabledHoverIcon:{icon:qe,size:32,color:f?"var(--text-t2-text-secondary)":"var(--primary-p1-cobalt-buttons)"},caption:{operaAir:"!capitalize"}},h=(0,c.o6)(m,["caption"]);return(0,C.jsxs)(Z.zx,{ref:s,type:"context-menu",disabled:f,onClick:function(e){f?e.preventDefault():(null==i||i(),location.href="#prompt-studio?".concat(t),We({context:p?ie.hG.BROWSER_TAB:ie.hG.SIDEBAR}))},className:(0,S.AK)("justify-between gap-1"),children:[!r&&u?(0,C.jsx)(D.u,{className:"max-w-[250px] leading-5",offsetValue:15,title:d("compose_not_available"),children:function(e){var t=e.ref,n=e.referenceProps;return(0,C.jsx)("span",$e($e({ref:t},n),{},{children:(0,C.jsx)(E.S,{config:m.composeDisabledHoverIcon})}))}}):(0,C.jsx)(E.S,{config:m.composeIcon}),o&&(0,C.jsx)("span",{className:(0,S.AK)("text-header-s",h.caption),children:d("compose")})]})};const Je=n.p+"assets/73a295398a2e696b7910.svg";var et=function(e){var t=e.onAction,n=e.disabled,r=e.sendMessage,a=(0,u.coc)().chatContext,o=(0,y.$G)().t,i=(0,c.oH)().isAriaInTabView,s=function(){var e=(0,h.Z)(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==t||t(),r({source:i?"tab-view":"sidebar",text:o("summarize_this_chat"),isRetryDisabled:!0,endpointType:"endpointSummarizeChatV2"}),(0,oe.vH)({action:ie.VV.WRITING,element:ie.Y3.CHAT,context:i?ie.hG.BROWSER_TAB:ie.hG.SIDEBAR,model:"Aria",str_value:"summary"});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l={summarizeIcon:{icon:Je,size:32,color:n?"var(--text-t2-text-secondary)":"var(--primary-p1-cobalt-buttons)"},container:"justify-between gap-1",caption:{operaAir:"!capitalize"}},d=(0,c.o6)(l,["container","caption"]);return(0,C.jsxs)(Z.zx,{type:"context-menu",className:(0,S.AK)(d.container),disabled:a.working||n,onClick:s,children:[(0,C.jsx)(E.S,{config:l.summarizeIcon}),(0,C.jsx)("span",{className:(0,S.AK)("text-header-s",d.caption),children:o("summarize_chat")})]})};const tt=n.p+"assets/b4651ee163c27a993521.svg";var nt=function(e){var t,n,r=e.onAction,a=(0,y.$G)().t,o=(0,ae.s0)(),i=(t=function(){r(),o("/settings",{state:{initialTab:a("profile_settings_tab")}})},n=(0,c.oH)().isAriaInTabView,(0,l.useCallback)((function(){(0,oe.vH)({action:ie.VV.CLICK,element:ie.Y3.PROFILE_MEMORY,context:n?ie.hG.BROWSER_TAB:ie.hG.SIDEBAR,model:"Aria",str_value:"long_term_memory:input_action_clicked"}),t()}),[t,n])),s={summarizeIcon:{icon:tt,size:32,color:"var(--primary-p1-cobalt-buttons)"},container:"justify-between gap-1",caption:{operaAir:"!capitalize"}},u=(0,c.o6)(s,["container","caption"]);return(0,C.jsxs)(Z.zx,{type:"context-menu",className:(0,S.AK)(u.container),onClick:i,children:[(0,C.jsx)(E.S,{config:s.summarizeIcon}),(0,C.jsx)("span",{className:(0,S.AK)("text-header-s",u.caption),children:a("profile_memory_input_action")})]})},rt=(0,C.jsx)("div",{className:"my-1 h-px bg-secondary-s1-selected-stroke"}),at=function(e){var t=e.message,n=e.disabled,r=e.isComposeAvailable,a=e.isChatEmpty,o=e.sendMessage,i=(0,l.useState)(!1),s=(0,v.Z)(i,2),d=s[0],f=s[1],p=(0,u.ljr)().remoteConfig,m=function(){f(!1)},h=(0,c.o6)({content:"bg-levels-l5-primary p-1",contentBorder:"border border-solid border-secondary-s1-selected-stroke rounded-aria-radius-3",separator:"bg-secondary-s1-selected-stroke my-1 h-px",moreIconColor:"default",operaAir:{content:"bg-levels-l5-primary p-1 air-level-02",contentBorder:"rounded-aria-radius-4",separator:"bg-transparent h-1"}},["content","contentBorder","separator","moreIconColor"]);return(0,C.jsx)(Ue,{content:(0,C.jsx)("div",{className:(0,S.AK)("flex flex-col",h.content,h.contentBorder),children:(0,C.jsxs)(Z.hn,{separator:rt,children:[(0,C.jsx)(Qe,{message:t,disabled:n,isComposeAvailable:r,onAction:m}),!a&&(0,C.jsx)(et,{onAction:m,disabled:n,sendMessage:o}),p.longterm_memory&&(0,C.jsx)(nt,{onAction:m})]})}),isOpen:d,setIsOpen:f})},ot=n(39157),it=function(e){var t=e.conversationId,n=e.conversation,r=(0,u.Itl)().checkIfExistInRegistry,a=(0,u.J7o)().currentModel,o=(0,l.useMemo)((function(){return"_new"===t||n.data.length<=2&&!n.model}),[t,n]),i=(0,l.useMemo)((function(){return o?"Aria"===a:(0,Me.wO)(n.model)}),[o,a,n.model]),s=(0,l.useMemo)((function(){return r(o?a:n.model)}),[o,a,n.model,r]),c=(0,l.useMemo)((function(){return o?a:n.model||"cloud"}),[o,a,n.model]),d=(0,l.useMemo)((function(){var e=c.split("/");return(null==e?void 0:e.length)<2?c:e[1]}),[c]);return{isAriaModel:i,isCloudModel:s,modelName:c,parsedModelName:d}};const st=function(e){var t=e.handleImageUpload,n=e.setMessage,r=e.addNewChat,a=(0,y.$G)().t,o=(0,c.Su)().loggerService,i=(0,u.nT6)().selectedImageDataUrl,s=(0,u.zLZ)().handleImageFromPageDeleted;(0,l.useEffect)((function(){var e=function(){var e=(0,h.Z)(b().mark((function e(){var c;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!i){e.next=16;break}if(r(),n(a("hey_aria_whats_on_this_image")),c=null,!i.startsWith("http")){e.next=11;break}return e.next=8,(0,B.q$)(i);case 8:c=e.sent,e.next=12;break;case 11:c=(0,B.gk)(i);case 12:if(!c){e.next=15;break}return e.next=15,t([c],!1);case 15:s();case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),o.error("Error fetching image:",e.t0);case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(){return e.apply(this,arguments)}}();i&&e()}),[i])};var ct=n(73935),lt=n(11549),ut=n(50320),dt=(n(57567),n(50653)),ft=n(4916),pt=n(75923),mt=n(88247),ht=n(25108);const vt=function(e){var t=e.children;return(0,C.jsx)("p",{className:"text-subheader-m flex h-5 w-full items-center justify-center text-text-t3-text-gray",children:t})};var gt=function(e){var t=e.isSpeaking,n=e.scale,r=function(e){return t?"":"gradient_".concat(e,"-turn")};return(0,C.jsx)("span",{className:(0,S.AK)("blob"),style:{transform:"scale(".concat(n,")")},children:(0,C.jsxs)("svg",{width:"500",height:"500",viewBox:"0 0 500 500",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,C.jsx)("g",{filter:"url(#filter0_f_7257_25)",id:"flare_7257_25",children:(0,C.jsx)("ellipse",{cx:"213.333",cy:"210",rx:"96.6667",ry:"93.3333",fill:"#82F8FF",fillOpacity:"0.4"})}),(0,C.jsx)("g",{filter:"url(#filter1_f_7257_25)",id:"circle_7257_25",children:(0,C.jsx)("circle",{cx:"276.667",cy:"276.667",r:"93.3333",fill:"#5021FF",fillOpacity:"0.4"})}),(0,C.jsx)("mask",{id:"mask0_7257_25",maskUnits:"userSpaceOnUse",x:"130",y:"130",width:"234",height:"234",children:(0,C.jsx)("circle",{cx:"246.667",cy:"246.667",r:"116.667",fill:"#5021FF"})}),(0,C.jsxs)("g",{mask:"url(#mask0_7257_25)",id:"main_7257_25",children:[(0,C.jsx)("g",{filter:"url(#filter2_f_7257_25)",id:r("7257_25_1"),children:(0,C.jsx)("path",{d:"M504.214 89.033C528.721 142.667 505.108 206.013 451.473 230.52C397.839 255.026 467.324 332.996 309.987 177.779C152.65 22.562 309.093 60.7988 362.728 36.2923C416.362 11.7859 479.708 35.3987 504.214 89.033Z",fill:"#F17532"})}),(0,C.jsx)("g",{filter:"url(#filter3_f_7257_25)",id:r("7257_25_2"),children:(0,C.jsx)("path",{d:"M210.209 254.785C115.75 341.021 162.406 361.556 103.438 361.556C44.4699 361.556 -3.33301 313.753 -3.33301 254.785C-3.33301 195.817 44.4699 148.014 103.438 148.014C162.406 148.014 304.667 168.55 210.209 254.785Z",fill:"#82F8FF"})}),(0,C.jsx)("g",{filter:"url(#filter4_f_7257_25)",id:r("7257_25_3"),children:(0,C.jsx)("path",{d:"M223.07 289.462C345.798 253.451 312.895 214.518 365.876 240.406C418.857 266.294 440.82 330.231 414.932 383.212C389.044 436.193 325.107 458.156 272.126 432.268C219.145 406.38 100.342 325.473 223.07 289.462Z",fill:"#4902F4"})})]}),(0,C.jsx)("g",{filter:"url(#filter5_i_7257_25)",id:"shine_7257_25",children:(0,C.jsx)("circle",{cx:"246.667",cy:"246.667",r:"116.667",fill:"#5021FF",fillOpacity:"0.01"})}),(0,C.jsxs)("defs",{children:[(0,C.jsxs)("filter",{id:"filter0_f_7257_25",x:"34.3998",y:"34.4",width:"357.867",height:"351.2",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,C.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,C.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,C.jsx)("feGaussianBlur",{stdDeviation:"41.1333",result:"effect1_foregroundBlur_7257_25"})]}),(0,C.jsxs)("filter",{id:"filter1_f_7257_25",x:"101.067",y:"101.067",width:"351.2",height:"351.2",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,C.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,C.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,C.jsx)("feGaussianBlur",{stdDeviation:"41.1333",result:"effect1_foregroundBlur_7257_25"})]}),(0,C.jsxs)("filter",{id:"filter2_f_7257_25",x:"81.6831",y:"-133.391",width:"592.214",height:"565.257",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,C.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,C.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,C.jsx)("feGaussianBlur",{stdDeviation:"80",result:"effect1_foregroundBlur_7257_25"})]}),(0,C.jsxs)("filter",{id:"filter3_f_7257_25",x:"-163.333",y:"-11.9857",width:"565.073",height:"533.542",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,C.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,C.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,C.jsx)("feGaussianBlur",{stdDeviation:"80",result:"effect1_foregroundBlur_7257_25"})]}),(0,C.jsxs)("filter",{id:"filter4_f_7257_25",x:"9.37744",y:"72.0044",width:"576.418",height:"531.128",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,C.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,C.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,C.jsx)("feGaussianBlur",{stdDeviation:"80",result:"effect1_foregroundBlur_7257_25"})]}),(0,C.jsxs)("filter",{id:"filter5_i_7257_25",x:"130",y:"130",width:"236.667",height:"236.667",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,C.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,C.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,C.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,C.jsx)("feOffset",{dx:"3.33333",dy:"3.33333"}),(0,C.jsx)("feGaussianBlur",{stdDeviation:"1.66667"}),(0,C.jsx)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,C.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.25 0"}),(0,C.jsx)("feBlend",{mode:"normal",in2:"shape",result:"effect1_innerShadow_7257_25"})]})]})]})})},xt=n(7013);const bt=function(e){var t=e.transcribedMessage,n=e.isUserSpeaking,r=e.partialTranscribedMessage,a=e.handleMicrophoneButton;return(0,C.jsxs)("div",{className:"flex min-h-20 flex-col items-center justify-center gap-aria-5",children:[(0,C.jsx)("p",{className:"text-subheader-m flex h-5 w-full items-center justify-center text-text-t3-text-gray",children:!!t&&n&&r}),(0,C.jsxs)("div",{className:"relative flex items-center justify-center",children:[n&&(0,C.jsx)("div",{className:"absolute",children:(0,C.jsx)("div",{className:"h-7 w-7 animate-ping rounded-full bg-[#AD45FF] blur-sm"})}),(0,C.jsx)(D.hU,{type:"primary",className:n?"animate-size-down":"",disabled:n,disabledClickable:!0,onClick:a,children:(0,C.jsx)(E.S,{color:n?"var(--text-t1-text-active-icons)":"",src:xt,size:16,bgSize:"100% 100%"})})]})]})};var yt=n(25108);function wt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wt(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const _t=function e(t){var n=t.onClose,r=t.sendMessage,a=t.conversation,o=t.showOnCloseError,i=(0,c.oH)().isAriaInTabView,s=(0,y.$G)().t,d=(0,c.Su)(),f=d.loggerService,p=d.networkService,g=(0,W.Z)(),x=g.pushNotification,w=g.notifications,_=g.closeNotification,k=(0,l.useState)(!0),O=(0,v.Z)(k,2),A=O[0],E=O[1],I=(0,l.useState)(""),N=(0,v.Z)(I,2),T=N[0],R=N[1],M=(0,l.useState)(""),P=(0,v.Z)(M,2),G=P[0],L=P[1],B=(0,l.useState)(!0),Z=(0,v.Z)(B,2),H=Z[0],F=Z[1],K=(0,l.useRef)(),U=(0,l.useRef)(),V=(0,u.R_9)().isVoiceMode,z=(0,u.coc)().chatContext,Y=(0,u.dQQ)().setIsVoiceMode,q=(0,l.useMemo)((function(){return a.data.at(-1)}),[a.data]),X=(0,l.useMemo)((function(){return(null==q?void 0:q.sender)===ie.CI.aria?q.message:""}),[q]),$=(0,l.useMemo)((function(){return!X||null!=q&&q.aborted?[]:(null==q?void 0:q.audioData)||[]}),[X,q]),Q=function(e){var t=(0,l.useState)(!1),n=(0,v.Z)(t,2),r=n[0],a=n[1],o=(0,l.useState)(!1),i=(0,v.Z)(o,2),s=i[0],c=i[1],u=(0,l.useState)(1),d=(0,v.Z)(u,2),f=d[0],p=d[1],g=(0,l.useRef)([]),x=(0,l.useRef)(null),y=(0,l.useRef)(null),w=(0,l.useRef)(0),j=(0,l.useRef)(-1),_=(0,l.useRef)(null),C=(0,l.useRef)(null),k=(0,l.useRef)(new Set),O=(0,l.useRef)(!0),S=(0,l.useRef)(f);(0,l.useEffect)((function(){return x.current||(x.current=new AudioContext),function(){I()}}),[]),(0,l.useEffect)((function(){var t;if(O.current)O.current=!1;else if(!(0===e.length||s||w.current>=e.length)){var n=e.slice(w.current).filter((function(e){return!k.current.has(e)&&(k.current.add(e),!0)}));if(0!==n.length){w.current=e.length;var a=n.map(mt.J);(t=g.current).push.apply(t,(0,m.Z)(a)),r||A()}}}),[e]);var A=(0,l.useCallback)((0,h.Z)(b().mark((function e(){var t,n,r,o,i;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x.current&&0!==g.current.length){e.next=4;break}return a(!1),E(),e.abrupt("return");case 4:if(a(!0),t=g.current.shift()){e.next=10;break}return a(!1),E(),e.abrupt("return");case 10:return j.current=w.current-g.current.length,e.prev=11,e.next=14,x.current.decodeAudioData(t);case 14:n=e.sent,(r=x.current.createBufferSource()).buffer=n,(o=x.current.createAnalyser()).fftSize=1024,y.current=o,i=new Uint8Array(o.frequencyBinCount),r.connect(o),o.connect(x.current.destination),_.current=r,function e(){o.getByteFrequencyData(i);var t=1+i.reduce((function(e,t){return e+t}),0)/i.length/255*.8,n=S.current,r=n+.3*(t-n);p(r),S.current=r,C.current=requestAnimationFrame(e)}(),r.start(),r.onended=function(){C.current&&cancelAnimationFrame(C.current),A()},e.next=35;break;case 30:e.prev=30,e.t0=e.catch(11),ht.error("Audio decoding error:",e.t0),a(!1),E();case 35:case"end":return e.stop()}}),e,null,[[11,30]])}))),[]),E=function(){g.current=[],w.current=0,j.current=-1,k.current.clear(),p(1)},I=(0,l.useCallback)((function(){x.current&&_.current&&_.current.stop(),E(),a(!1),c(!1)}),[]);return{isSpeaking:r,scale:f,stop:I,pause:function(){x.current&&"running"===x.current.state&&(x.current.suspend(),c(!0),a(!1))},resume:function(){x.current&&"suspended"===x.current.state&&(x.current.resume(),c(!1),a(!0),A())}}}($||[]),J=Q.isSpeaking,ee=Q.stop,te=Q.scale,ne=(0,l.useCallback)((function(){K.current&&K.current.getTracks().forEach((function(e){e.stop()})),se(),Y(!1),p.removeWSListener("message",le),p.removeWSListener("error",ue),p.removeWSListener("close",de),n()}),[n,K.current]),re=function(e){var t=function(e){for(var t=e.length,n=new Int16Array(t),r=0;r<t;r++)n[r]=32767*Math.min(1,e[r]);return n.buffer}(e.inputBuffer.getChannelData(0));p.sendWSMessage(t)},ae=function(){var e=(0,h.Z)(b().mark((function e(){var t,n,r,a,o,i;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.getUserMedia({audio:!0});case 3:t=e.sent,K.current=t,n=new AudioContext({sampleRate:c.jE}),(r=n.createAnalyser()).fftSize=2048,a=r.frequencyBinCount,o=new Uint8Array(a),r.getByteTimeDomainData(o),i=n.createMediaStreamSource(t),U.current=n.createScriptProcessor(c.qB,1,1),i.connect(r),i.connect(U.current),U.current.connect(n.destination),U.current.addEventListener("audioprocess",re),E(!0),f.debug("User starts to speak"),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(0),f.error("Unknown error occurred",e.t0);case 24:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(){return e.apply(this,arguments)}}(),se=function(){var e,t;E(!1),U.current||f.error("No scriptProcessor to unmount"),null===(e=U.current)||void 0===e||e.removeEventListener("audioprocess",re),null===(t=U.current)||void 0===t||t.disconnect(),p.getWSReadyState()===WebSocket.OPEN&&p.closeWSConnection(1e3,"User finished speaking"),K.current&&K.current.getTracks().forEach((function(e){e.stop()})),f.debug("Stopped recording")},ce=(0,l.useCallback)((function(){return T.length>=c.tX?T.slice(0,c.tX):T}),[T]),le=function(e){if("data"in e){var t=T+e.data,n=t.slice(t.length-c.E$,t.length);R(t),L(n)}else f.error("No data found in WS message")},ue=function(e){f.error("Unexpected WS error occurred",e),o(s("error_occurred_message"),"error"),ne()},de=function(e){f.debug("WS connection closed - stopping recording",e),se()},fe=function(){var e=(0,h.Z)(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xe();case 2:ee(),z.working||J?(z.working&&r({text:"",source:i?"tab-view":"sidebar",sourceRequestOverride:"voice"}),me()):(ce()&&(0,oe.vH)({action:ie.VV.CLICK,element:ie.Y3.VOICE,context:i?ie.hG.BROWSER_TAB:ie.hG.SIDEBAR,str_value:"voice_in_out:message_send"}),pe());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),pe=function(){F(!1);var e=ce();r({text:e,source:i?"tab-view":"sidebar",sourceRequestOverride:"voice"}),e||A||(f.debug("User didn't say anything",e),ne(),se()),R(""),se()},me=function(){var e=(0,h.Z)(b().mark((function e(){var t;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Y(!0),E(!0),t="/api/ws/v1/speech-to-text/transcribe",e.next=7,p.openWSConnection({subUrl:t});case 7:p.addWSListener("open",ae),p.addWSListener("message",le),p.addWSListener("error",ue),p.addWSListener("close",de);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,l.useEffect)((function(){T.length>=c.tX?(setTimeout((function(){o(s("your_question_reached_maximum_length",{maxInputLength:c.tX}),"error")}),.5*c.sh),pe()):T.length>=c.V6&&(w.length&&w.forEach((function(e){return _(e.id)})),x(s("your_question_approaches_maximum_length",{transcribedMessageLength:T.length,maxInputLength:c.tX}),"info"))}),[T]),(0,l.useEffect)((function(){return me(),function(){xe()}}),[]),(0,l.useEffect)((function(){J||!V||z.working||H||(f.debug("Listening next users voice message"),me())}),[J,V]),(0,l.useEffect)((function(){A||pe()}),[A]);var he=(0,c.o6)({closeImagePreview:{dark:ut,light:lt}},["closeImagePreview"]),ve=(0,l.useMemo)((function(){return A?"i_m_listening":J?"i_m_speaking":z.working?"i_m_thinking":(f.debug("Voice mode encountered unexpected state","chatContext.working, lastAriaMessage, isSpeaking, isUserSpeaking",z.working,X,J,A),"")}),[A,J,z.working,f,X]),ge=(0,l.useMemo)((function(){return!!X&&X.includes("![](")&&!H&&!z.working&&!!$.length&&(A||J||!ve)}),[$,z.working,H,J,A,X,ve]),xe=function(){var e=(0,h.Z)(b().mark((function e(){var t,n,r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(yt.log("## cleanUpPreviousAudioData chat context",a.id),a.id&&"_new"!==a.id){e.next=4;break}return yt.error("error during cleanup prev conv, not conversation id in context",a.id),e.abrupt("return");case 4:return e.prev=4,e.next=7,(0,ft.hV)(a.id);case 7:null!=(t=e.sent)&&t.data&&t.data.length&&(n=t.data.map((function(e){return jt(jt({},e),{},{audioData:void 0})})),r=jt(jt({},t),{},{data:n}),(0,pt.X1)(a.id,r)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),yt.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(){return e.apply(this,arguments)}}();return(0,ct.createPortal)((0,C.jsx)("dialog",{tabIndex:-1,id:"voice-overlay",className:(0,S.AK)("fixed inset-x-0 inset-y-0 z-10 h-screen w-screen bg-secondary-s4-surface-overlay","flex flex-col items-center justify-center","gap-3",i?"px-[52px]":"px-[24px]"),open:!0,ref:function(e){null==e||e.focus()},children:(0,C.jsxs)("div",{className:"relative flex h-full w-full flex-col justify-between p-aria-7",children:[(0,C.jsxs)("div",{className:"z-50",children:[(0,C.jsx)("div",{className:"flex w-full flex-row justify-end",children:(0,C.jsx)(D.hU,{dataTestId:(0,S.wE)(e,"button","close-voice-preview"),type:"tertiary",onClick:function(){(0,oe.vH)({action:ie.VV.CLICK,element:ie.Y3.VOICE,context:i?ie.hG.BROWSER_TAB:ie.hG.SIDEBAR,str_value:"voice_in_out:close"}),ne()},icon:he.closeImagePreview,iconSize:32})}),(0,C.jsx)("div",{className:"flex w-full items-center justify-center",children:(0,C.jsx)("p",{className:"text-header-m min-h-5 animate-wavyBlinking text-text-t1-text-active-icons",children:s(ve)})})]}),(0,C.jsxs)("div",{className:"relative flex w-full flex-col items-center",children:[(0,C.jsx)("div",{className:(0,S.AK)("relative max-h-[500px] items-center transition-transform duration-500 ease-in-out",ge&&"-translate-y-[100px] items-end"),children:(0,C.jsx)(gt,{isSpeaking:J,scale:te})}),ge&&(0,C.jsx)("div",{className:"relative mb-24 translate-y-0 animate-appear-slowly transition-all duration-500 ease-in-out",children:(0,C.jsx)(j.Z,{wrapperClass:"max-h-32",message:X,isTextless:!0,components:jt(jt({},c.Z$),{},{img:dt.Z,p:vt})})})]}),(0,C.jsx)(bt,{transcribedMessage:T,handleMicrophoneButton:fe,isUserSpeaking:A,partialTranscribedMessage:G})]})}),document.body)};var Ct=function(e){return"string"==typeof e?e:Array.isArray(e)?e.includes(c.vR)?c.vR:e.includes(c._e)?c._e:e[0]||"":""},kt=(0,l.forwardRef)((function(e,t){var n,r,a,o,i=e.addNewChat,s=e.imageHandlers,d=e.readOnly,f=e.message,p=e.setMessage,m=e.sendMessage,g=e.conversation,x=e.createTimestamp,w=e.messagesContainerRef,j=e.onActiveUserMessageIndexChange,_=e.menuStatus,k=e.conversationId,O=e.disabled,A=s.files,E=s.upload,I=s.removeFile,N=s.reset,T=s.limitReached,R=(0,c.oH)().isAriaInTabView,M=(0,y.$G)().t,P=it({conversationId:k,conversation:g}),D=P.isAriaModel,G=P.isCloudModel,L=P.parsedModelName,B=(0,c.Su)(),H=B.ariaVoiceReaderService,F=B.networkService,U=(0,W.Z)().pushNotification,V=(0,l.useRef)(null),z=(0,l.useRef)(null),Y=(0,u.coc)().chatContext,q=(0,u.J7o)(),X=q.currentModel,$=q.fetchedModels,Q=(0,u.kGW)(g.id).reusableHighlights,J=(0,c.Cg)().consentNeeded,ee=(0,u.B9q)().newConversationRequest,te=(0,u.cpB)().promptStudioConfig,ne=(0,u.ljr)().remoteConfig,re=(0,l.useState)(!1),ae=(0,v.Z)(re,2),se=ae[0],ce=ae[1],le=(0,l.useState)(!1),ue=(0,v.Z)(le,2),de=ue[0],fe=ue[1],pe=(0,l.useState)(!1),me=(0,v.Z)(pe,2),he=me[0],ve=me[1],ge=(0,l.useState)(c.V5?c.vR:c._e),xe=(0,v.Z)(ge,2),be=xe[0],ye=xe[1],we=(0,l.useState)(null),je=(0,v.Z)(we,2),_e=je[0],Ce=je[1],ke=""===be?M("type_here"):M("chat_input_placeholder",{shortcut:be,interpolation:{escapeValue:!1}}),Oe=(0===g.data.length&&(null==ee||ee.message),Y.working&&Y.conversationId===k),Se=function(e){if(!Oe||"enter"!==e){var t=Oe?"":f;m({text:t,source:R?"tab-view":"sidebar",files:A}),V.current,t&&t.length>=c.Fb&&N(),(0,S.X0)(w),fe(!1)}},Ae=(0,l.useCallback)((function(){if((0,S.N2)(null==w?void 0:w.current)&&(0,S.Mx)(w,"instant"),(null==V?void 0:V.current)instanceof HTMLTextAreaElement){V.current.style.height="0px";var e=c.uj;f?(V.current.scrollHeight>c.uj&&(e=Math.min(V.current.scrollHeight,c.$Y)),V.current.style.height="".concat(e,"px")):V.current.style.height="".concat(e,"px")}}),[f,Y.working,D]);(0,l.useEffect)((function(){if(_e){var e=(0,v.Z)(_e,2),t=e[0],n=e[1];U(t,n),Ce(null)}}),[_e]),(0,l.useEffect)((function(){opr.shodanPrivate.getCommandLineShortcut&&opr.shodanPrivate.getCommandLineShortcut((function(e){ye(Ct(e))}))}),[]),(0,l.useEffect)((function(){if(opr.shodanPrivate.getCommandLineShortcut){var e=function(){opr.shodanPrivate.getCommandLineShortcut((function(e){ye(Ct(e))}))};return window.addEventListener("focus",e),function(){window.removeEventListener("focus",e)}}}),[]),(0,l.useEffect)((function(){var e=function(){if((null==V?void 0:V.current)instanceof HTMLTextAreaElement){var e=V.current.placeholder,t=Math.floor((0,Me.VU)(e)),n=V.current.clientWidth-20;ve(t>n)}};return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[he]),(0,l.useEffect)((function(){g.mode===ot.E.pageContext||g.mode===ot.E.writingMode?(0,S.Cp)(w):(0,S.Mx)(w),setTimeout((function(){var e;null===(e=V.current)||void 0===e||e.focus()}),0)}),[g.id,g.mode,x,w]),(0,l.useEffect)((function(){Ae()}),[Ae]),(0,l.useEffect)((function(){V.current&&V.current.focus()}),[g.id,g.data.length]),(0,l.useEffect)((function(){var e,t=function(){var e;null===(e=V.current)||void 0===e||e.focus()};return null===(e=opr.browserSidebarPrivate.onItemPanelVisibilityChanged)||void 0===e||e.addListener(t),function(){var e;null===(e=opr.browserSidebarPrivate.onItemPanelVisibilityChanged)||void 0===e||e.removeListener(t)}}),[]),(0,l.useEffect)((function(){if(!_){var e=setTimeout((function(){var e;null===(e=V.current)||void 0===e||e.focus()}),300);return function(){return clearTimeout(e)}}}),[_]);var Ee=(0,l.useCallback)((function(){z.current&&(z.current.value="")}),[z]),Ie=(0,l.useCallback)((function(e){Ee(),I(e)}),[Ee,I]),Ne=(0,l.useCallback)(function(){var e=(0,h.Z)(b().mark((function e(t){var n,r=arguments;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:E(t,!(r.length>1&&void 0!==r[1])||r[1]),null===(n=V.current)||void 0===n||n.focus(),Ee();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[E,V,Ee]);st({handleImageUpload:Ne,setMessage:p,addNewChat:i});var Te=!D&&!(null===(n=$.find((function(e){return e.family_name===(0,S.zn)("Aria"!==X?X:g.model||"").split(":")[0]})))||void 0===n||null===(n=n.kind)||void 0===n||!n.includes(ie.kk.MULTIMODAL)),De=(0,l.useMemo)((function(){return(null==g?void 0:g.mode)===ot.E.pageContext}),[null==g?void 0:g.mode]),Ge=(0,l.useMemo)((function(){var e;return null!=g&&null!==(e=g.originLink)&&void 0!==e&&e.url?(0,S.z7)(g.originLink.url):M("page_context")}),[null==g||null===(r=g.originLink)||void 0===r?void 0:r.url,M]),Ze=(0,l.useMemo)((function(){return!D||De}),[D,De]),He=function(){return f.trim().length>=c.Fb||Oe?Oe?"processing":"default":ne.voice_in_and_out&&!R?"voice":"disabled"},Fe=(null!==(a=null==V||null===(o=V.current)||void 0===o||null===(o=o.value)||void 0===o?void 0:o.length)&&void 0!==a?a:0)>c.V6&&!d&&D,Ke=function(){var e=(0,h.Z)(b().mark((function e(t){var n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),null===(n=V.current)||void 0===n||n.focus(),"voice"!==He()){e.next=25;break}return(0,oe.vH)({action:ie.VV.CLICK,element:ie.Y3.CHAT,context:R?ie.hG.BROWSER_TAB:ie.hG.SIDEBAR,str_value:"voice_in_out:open"}),H.stopRead(),e.prev=5,e.next=8,F.getAuthorized({subUrl:"/api/ws/v1/speech-to-text/health"});case 8:return e.next=10,navigator.permissions.query({name:"microphone"});case 10:if("denied"!==e.sent.state){e.next=14;break}return U({text:M("microphone_access_has_been_denied"),link:"opera://settings/content/siteDetails?site=".concat(encodeURI(c.U8))},"error"),e.abrupt("return");case 14:if(!J){e.next=17;break}return m({text:M("voice_consent_query"),source:R?"tab-view":"sidebar",sourceRequestOverride:"voice"}),e.abrupt("return");case 17:ce(!0),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(5),U(M("error_occurred_message"),"error");case 23:e.next=26;break;case 25:Se("submitButton");case 26:case"end":return e.stop()}}),e,null,[[5,20]])})));return function(t){return e.apply(this,arguments)}}(),Ue={outerContainer:"rounded-aria-radius-3 bg-levels-l1-chat-bg-bg-elements",inputContainer:"rounded-aria-radius-3 bg-levels-l0-extension-bg",textarea:"text-body-l text-text-t1-text-active-icons",textareaPaddingCorrection:"pl-2 pt-[10.2px]",textareaPlaceholderText:"placeholder:text-text-t3-text-gray",modelDisclaimerInputContainer:Ze&&"rounded-t-none",operaGx:{textarea:"text-body-l text-text-t2-text-secondary",textareaPaddingCorrection:"pl-2 pt-[10px] !leading-[20px]",modelDisclaimerInputContainer:""},operaAir:{outerContainer:"",inputContainer:"rounded-aria-radius-5 bg-levels-l0-extension-bg",textarea:"text-body-l text-text-t2-text-secondary",textareaPaddingCorrection:"pl-4 pt-[12px]",modelDisclaimerInputContainer:""}},Ve=(0,c.o6)(Ue,["outerContainer","inputContainer","textarea","textareaPaddingCorrection","textareaPlaceholderText","modelDisclaimerInputContainer"]);return(0,C.jsxs)("div",{className:"chat-input-wrapper flex flex-col justify-end",children:[(0,C.jsx)("div",{className:"relative z-50 mx-3",children:(0,C.jsxs)("div",{className:"absolute -bottom-2 flex flex-col gap-1",children:[!!Q.length&&(0,C.jsx)(Pe,{reusableHighlights:Q}),!!A.length&&(0,C.jsx)(K,{files:A,onRemove:Ie})]})}),(0,C.jsxs)("div",{className:(0,S.AK)("z-1 box-border flex w-full select-none items-center justify-center gap-1 p-3",R&&"mb-3",Ve.outerContainer),children:[(0,C.jsx)("div",{className:"grow",children:(0,C.jsx)(Re,{isAriaModel:D,children:(0,C.jsxs)("div",{className:"flex flex-col items-center",children:[!D&&(0,C.jsx)(Be,{content:M(G?"cloud_model_input_disclaimer":"using_local_model",{modelName:L})}),De&&(0,C.jsx)(Be,{middle:!D,content:M("page_context_disclaimer",{pageName:Ge})}),(0,C.jsxs)("div",{ref:t,className:(0,S.AK)("input-container relative flex w-full select-none items-end",Ve.inputContainer,Ve.modelDisclaimerInputContainer),children:[Fe&&(0,C.jsx)("div",{className:"text-body-s absolute -bottom-3 left-2 !text-[8px] text-text-t1-text-active-icons",children:"".concat(f.length,"/").concat(c.tX)}),(0,C.jsx)("textarea",{"data-testid":(0,S.wE)(kt,"textarea","chat-input"),className:(0,S.AK)("hover-scrollbar chat-input m-0 my-1 h-10 w-full resize-none overflow-auto border-none bg-transparent pb-2.5 pr-1 outline-none",Ve.textarea,Ve.textareaPaddingCorrection,Ve.textareaPlaceholderText),placeholder:D?Q.length>0?M("type_new_prompt_about_selected_content"):ke:M("type_here_to_local_model"),maxLength:D?c.tX:void 0,onChange:function(e){p(e.target.value)},value:f,ref:V,onKeyDown:function(e){"Enter"===e.key&&!1===e.shiftKey?(e.preventDefault(),Se("enter")):"ArrowUp"!==e.key||de?"ArrowDown"!==e.key||de?setTimeout((function(){var e;fe(Boolean(null===(e=V.current)||void 0===e?void 0:e.value))}),0):(e.preventDefault(),j(1)):(e.preventDefault(),j(-1))},onInput:Ae,onPaste:function(){return fe(!0)},disabled:O}),(0,C.jsxs)("div",{className:"mb-1 ml-1 flex flex-row items-center gap-1",children:[(Te||D)&&!O&&(0,C.jsx)(Le,{disabled:T,onAction:Ne,ref:z}),(0,C.jsx)(Z.Rg,{className:"mr-1 h-10 w-10",state:He(),onClick:Ke})]})]})]})})}),D&&!J&&(0,C.jsx)(at,{message:f,disabled:Y.working,isComposeAvailable:te&&Boolean(te.length),isChatEmpty:0===g.data.length,sendMessage:m}),se&&(0,C.jsx)(_t,{showOnCloseError:function(e,t){Ce([e,t])},onClose:function(){return ce(!1)},sendMessage:m,conversation:g})]})]})}));kt.displayName="InputContainer";const Ot=kt;var St=n(22258);const At=function e(t){var n=t.isBordered,r=void 0===n||n,a=t.id,o=t.currentLabel,i=t.setEditId,s=(0,l.useState)(""),u=(0,v.Z)(s,2),d=u[0],f=u[1],p=(0,y.$G)().t;(0,l.useEffect)((function(){f(o)}),[o]);var m=(0,l.useRef)(null),g=function(){var e=(0,h.Z)(b().mark((function e(){var t;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,ft.hV)(a);case 2:return t=e.sent,e.next=5,(0,pt.X1)(t.id,{label:d.trim()||p("empty_title"),isLabelGenerated:!1});case 5:i(null);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,l.useEffect)((function(){var e=function(e){m.current&&!m.current.contains(e.target)&&i(null)};return window.addEventListener("mousedown",e),function(){window.removeEventListener("mousedown",e)}}),[i,m]);var x={container:{operaOne:"py-aria-3",operaGx:"py-aria-3",operaAir:"py-aria-3"},input:"!h-8 flex-grow",border:{operaOne:r?"px-aria-3 border-secondary-s1-selected-stroke border border-solid rounded-aria-radius-3":"",operaGx:r?"px-aria-3 border-levels-l2-hover border border-solid rounded-aria-radius-3":"",operaAir:r?"px-2 border-secondary-s1-selected-stroke border border-solid rounded-aria-radius-5":""}},w=(0,c.o6)(x,["container","input","border"]);return(0,C.jsxs)("div",{className:(0,S.AK)("flex w-full flex-row gap-2",w.container,w.border),ref:m,children:[(0,C.jsx)(Z.oi,{className:w.input,maxLength:c.wN,value:d,ref:function(e){e&&(e.focus(),e.scrollLeft=e.scrollWidth)},onFocus:function(e){return e.currentTarget.setSelectionRange(e.currentTarget.value.length,e.currentTarget.value.length)},onChange:function(e){return t=e.target.value,void f(t);var t},onKeyDown:function(e){!function(e){"Enter"==e.key&&0==e.shiftKey&&(e.preventDefault(),g())}(e)}}),(0,C.jsxs)("div",{className:"flex flex-row gap-aria-2",children:[(0,C.jsx)(Z.hU,{dataTestId:(0,S.wE)(e,"button","decline"),border:!0,icon:P,type:"tertiary",className:"flex h-8 w-8 items-center justify-center !p-0",onClick:function(){return i(null)}}),(0,C.jsx)(Z.hU,{dataTestId:(0,S.wE)(e,"button","submit"),border:!0,icon:St,type:"primary",className:"flex h-8 w-8 items-center justify-center !p-0",onClick:g})]})]})};var Et=n(36609);function It(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Nt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?It(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):It(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Tt=(0,l.memo)((function(e){var t=e.textStyle,n=e.value,r=e.isTooltipEnabled,a=e.isAnimated,o=r?e.onClick:void 0,i=a?e.onAnimationFinish:void 0,s=a?e.animationDuration:void 0,u=a?e.animationDelay:void 0,d=(0,l.useState)(!0),f=(0,v.Z)(d,2),p=f[0],m=f[1];(0,l.useEffect)((function(){m(!0)}),[n]),(0,l.useEffect)((function(){if(a){var e=setTimeout((function(){m(!1),setTimeout((function(){m(!0),null==i||i()}),s)}),u);return function(){clearTimeout(e)}}}),[a,i,s,u]);var h=(0,c.o6)({container:"box-border inline-block max-w-full overflow-hidden text-nowrap p-2 transition duration-250",rounded:"rounded-aria-radius-3",hover:"hover:bg-levels-l2-hover hover:cursor-pointer",operaGx:{rounded:"rounded-aria-radius-2",hover:"hover:bg-text-t3-text-gray hover:cursor-pointer"},operaAir:{rounded:"rounded-aria-radius-4",hover:"hover:bg-secondary-s3-bg-icons hover:cursor-pointer"}},["container","hover","rounded"]);return r?(0,C.jsx)(D.u,{className:(0,S.AK)("max-w-[250px] animate-appear"),title:(0,Et.t)("click_to_edit_name"),offsetValue:8,children:function(e){var r=e.ref,i=e.referenceProps;return(0,C.jsx)("span",Nt(Nt({className:(0,S.AK)(t||"",h.container,h.hover,h.rounded,p?"text-ellipsis":"animate-typing ease-typing"),style:a?{animationDuration:"".concat(s,"ms")}:void 0,role:"button",tabIndex:-1,onClick:o,onKeyUp:o,ref:r},i),{},{children:n}))}}):(0,C.jsx)("span",{className:(0,S.AK)(h.container,h.rounded,p?"text-ellipsis":"animate-typing ease-typing"),style:a?{animationDuration:"".concat(s,"ms")}:void 0,children:n})})),Rt=n(53744),Mt=n(96885),Pt=n(61401);function Dt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dt(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Lt=function(e){var t=e.model,n=e.currentModel,r=e.onClick,a=(0,l.useRef)(null),o=(0,Mt.d)(a),i="Aria"===t.name?["Aria",""]:(0,S.zn)(t.name).split(":"),s=(0,v.Z)(i,2),c=s[0],u=s[1],d=(0,l.useMemo)((function(){return n===(null==t?void 0:t.name)}),[n,t]);return(0,C.jsx)("div",{className:(0,S.AK)("mx-2 flex flex-row items-center justify-between gap-2 border-b border-solid border-secondary-s1-selected-stroke py-2 text-text-t1-text-active-icons last:border-none","Aria"===t.name&&"text-text-gray"),children:(0,C.jsxs)("div",Gt(Gt({className:"flex w-full flex-row items-center justify-between gap-2 overflow-hidden"},o&&{title:(0,S.zn)(t.name)}),{},{children:[(0,C.jsxs)("div",{className:(0,S.AK)("flex flex-col justify-between overflow-hidden"),children:[(0,C.jsx)("p",{className:"text-body-s text-t1-text-active-icons overflow-hidden text-ellipsis whitespace-nowrap !capitalize",ref:a,children:c}),u&&(0,C.jsx)("p",{className:"text-body-s mt-1 overflow-hidden text-ellipsis whitespace-nowrap text-text-gray",ref:a,children:u})]}),(0,C.jsx)("div",{children:(0,C.jsx)(Pt.Z,{id:"radio_input_type",checked:d,onChange:function(){r(t)}})})]}))})};function Bt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(!+e)return"0 Bytes";var n=t<0?0:t,r=Math.floor(Math.log(e)/Math.log(1024));return"".concat(parseFloat((e/Math.pow(1024,r)).toFixed(n))," ").concat(["Bytes","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"][r])}var Zt=n(30845),Ht=n(68209);function Ft(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Kt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ft(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ft(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ut=function(e){return e.map((function(e){var t=e.name,n=e.size,r=e.name.split("/"),a=r[r.length-1];return Kt(Kt({},e),{},{id:t,name:a,tag:a,size:Bt(n),download:{timestamp:Date.parse(e.modified_at),inProgress:null,status:null,total:null}})}))},Vt=function(e,t,n){return e&&t?Math.round(e/t*100):n?0:void 0},Wt=function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:new TextDecoder("utf-8")).decode(e).split("\n").filter((function(e){return e.length}));return t.push.apply(t,(0,m.Z)(n)),t[t.length-1]},zt=function(e,t){var n,r,a,o,i,s;if(!e.download||!t.download)return NaN;var c=!(null!==(n=e.download)&&void 0!==n&&n.timestamp)&&(null===(r=t.download)||void 0===r?void 0:r.timestamp),l=(null===(a=e.download)||void 0===a?void 0:a.timestamp)&&!(null!==(o=t.download)&&void 0!==o&&o.timestamp),u=!(null!==(i=e.download)&&void 0!==i&&i.timestamp||null!==(s=t.download)&&void 0!==s&&s.timestamp);return c?-1:l?1:u?Vt(e.download.inProgress,e.download.total,e.download)-Vt(t.download.inProgress,t.download.total,t.download):t.download.timestamp-e.download.timestamp},Yt=(0,Zt.Z)((function(e,t,n){return{items:e,handleItemToggling:t,getItemState:n}}));const qt=function(e){var t=e.isAvailable,n=e.testId,r=e.headerText,a=e.models,o=e.currentModel,i=e.handleKeyDown,s=e.handleOnClick;return t?(0,C.jsxs)("div",{"data-testid":n,children:[(0,C.jsx)("p",{className:"mb-0.5 whitespace-nowrap font-be-vietnam text-xxs font-normal text-text-t1-text-active-icons",children:r}),(0,C.jsx)("div",{className:"flex max-h-[124px] w-full flex-col overflow-auto rounded-aria-radius-3 bg-levels-l3-cards font-be-vietnam",children:a.map((function(e){return(0,C.jsx)(Lt,{model:{id:e.name,name:e.name},currentModel:o,onKeyDown:function(){return i(e)},onClick:function(){return s(e)}},e.name)}))})]}):null};var Xt=n(60243);const $t=function e(t){var n=t.conversationId,r=t.conversation,a=t.addNewChat,o=(0,ae.s0)(),i=(0,y.$G)().t,s=(0,u.coc)().chatContext,c=(0,u.J7o)(),d=c.currentModel,f=c.localModels,p=c.localModelsServiceStatus,m=(0,u.MII)().isLocalModelsEnabled,g=(0,u.ljr)().remoteConfig,x=(0,u.Itl)().fetchedCloudModels,w=(0,u.pb4)().audience,j=(0,u.Qck)().setModel,_=(0,u.Qck)().addModelList,k=(0,l.useState)(!1),O=(0,v.Z)(k,2),A=O[0],E=O[1],I=(0,l.useRef)(null),N=it({conversationId:n,conversation:r}).isAriaModel,T=function(){var e=(0,h.Z)(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!m||"RUNNING"!==p){e.next=8;break}return e.t0=_,e.t1=Ut,e.next=5,(0,S._f)();case 5:e.t2=e.sent,e.t3=(0,e.t1)(e.t2),(0,e.t0)(e.t3);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(e){var t=Ht.D.IMAGE_GENERATION,n=Ht.D.TEXT,r=Ht.$.AI_CLUSTER;return e?e.reduce((function(e,a){var o=a.type,i=a.provider;return o===t?e.imageModels.push(a):i===r?e.aiClusterModels.push(a):o===n&&i!==r&&e.otherTextModels.push(a),e}),{imageModels:[],aiClusterModels:[],otherTextModels:[]}):{imageModels:[],aiClusterModels:[],otherTextModels:[]}}(x),M=R.imageModels,P=R.aiClusterModels,G=R.otherTextModels;(0,l.useEffect)((function(){T()}),[m,p]),(0,Rt.O8)(I,(function(){A&&E(!1)})),(0,l.useEffect)((function(){s.working||(r.data.length>1&&r.model?j(r.model):r.data.length>1&&"_new"!==n&&!r.model&&j("Aria"))}),[r.model,n]);var L=(null==w?void 0:w.identifier)===Xt.$p,B=!N||"Aria"!==d&&"_new"===n||"Aria"!==r.model&&"Aria"!==d,Z=x&&(null==x?void 0:x.length)>0,H=M&&(null==M?void 0:M.length)>0,F=P&&(null==P?void 0:P.length)>0,K=G&&(null==G?void 0:G.length)>0,U=function(){E(!A)},V=B?(0,S.zn)(r.model||d).split(":"):["Aria",""],W=(0,v.Z)(V,2),z=W[0],Y=W[1],q=(0,l.useCallback)((function(e){E(!1),"_new"!==n&&a(),j(e.name)}),[a,n,j]),X=(0,l.useCallback)((function(e){E(!1),j(e.name),a()}),[a,j]);return(0,C.jsxs)("div",{ref:I,className:(0,S.AK)("absolute -top-4 z-2 rounded-aria-radius-3 border border-solid border-secondary-s1-selected-stroke bg-levels-l5-primary text-text-t1-text-active-icons shadow-md",A&&"overflow-hidden",!A&&B?"max-w-[85px]":"max-w-[153px]"),children:[(0,C.jsx)("div",{role:"button",onKeyDown:U,tabIndex:-1,onClick:U,children:B?(0,C.jsx)("div",{className:"flex flex-col items-center justify-center py-2",children:(0,C.jsx)("div",{className:"w-full gap-2 text-center",children:(0,C.jsxs)("div",{className:(0,S.AK)("flex h-6 flex-col justify-between",Y?"h-6":"h-auto"),children:[(0,C.jsx)("p",{className:"text-body-s text-t1-text-active-icons overflow-hidden text-ellipsis whitespace-nowrap px-2 !capitalize",children:z}),Y&&(0,C.jsx)("p",{className:"text-body-s mt-1 overflow-hidden text-ellipsis whitespace-nowrap px-2 text-text-gray",children:Y})]})})}):(0,C.jsx)("div",{className:"flex h-7 w-full flex-row items-center justify-center px-aria-2 py-aria-4",children:(0,C.jsx)("p",{"data-testid":(0,S.wE)(e,"p","choose-title"),className:"text-header-s-bold text-center",children:i(Z?"choose_model":"choose_local_model")})})}),(0,C.jsx)("div",{className:(0,S.AK)("grid overflow-hidden transition-all duration-300",A?"h-auto":"h-0"),style:{gridTemplateRows:A?"1fr":"0fr"},children:(0,C.jsx)("div",{className:"flex min-h-0 w-full overflow-hidden",children:(0,C.jsxs)("div",{className:"flex flex-col gap-2 overflow-hidden p-aria-4 pt-0",children:[A&&B&&(0,C.jsx)("div",{className:"flex w-full flex-row items-center justify-center",children:(0,C.jsx)("p",{"data-testid":(0,S.wE)(e,"p","choose-title"),className:"text-header-s-bold whitespace-nowrap text-center",children:i(Z?"choose_model":"choose_local_model")})}),(0,C.jsx)(qt,{isAvailable:F,testId:(0,S.wE)(e,"div","cloud-text-models-section"),headerText:i("cloud_models_opera_cluster"),models:P,currentModel:r.model||d,handleKeyDown:X,handleOnClick:q}),(0,C.jsx)(qt,{isAvailable:H,testId:(0,S.wE)(e,"div","cloud-image-models-section"),headerText:i("cloud_models_image"),models:M,currentModel:r.model||d,handleKeyDown:X,handleOnClick:q}),(0,C.jsx)(qt,{isAvailable:K,testId:(0,S.wE)(e,"div","cloud-api-models-section"),headerText:i("cloud_models_api"),models:G,currentModel:r.model||d,handleKeyDown:X,handleOnClick:q}),L&&g.local_models&&(0,C.jsxs)(C.Fragment,{children:[f.length?m&&(0,C.jsx)("div",{"data-testid":(0,S.wE)(e,"div","local-models-section"),className:"flex w-full flex-col overflow-clip rounded-aria-radius-3 bg-levels-l3-cards font-be-vietnam",children:f.filter((function(e){var t;return!(null!==(t=e.download)&&void 0!==t&&t.inProgress)&&e.size})).map((function(e){return(0,C.jsx)(Lt,{model:e,currentModel:r.model||d,onKeyDown:function(){return X(e)},onClick:function(){return q(e)}},e.name)}))}):(0,C.jsx)("p",{className:"text-body-s mx-auto max-w-[130px] text-text-t3-text-gray",children:i("download_local_models_in_aria_settings")}),(0,C.jsx)(D.zx,{type:"tertiary",onClick:function(){return o("/settings",{state:{initialTab:i("local_models")}})},className:"h-8",children:i("go_to_settings")})]})]})})})]})},Qt=n.p+"assets/ad709c15ec059a326c61.svg",Jt=n.p+"assets/ac7229d3476fb848ffa0.svg",en=n.p+"assets/3c2395b3f2a83825f3bb.svg";var tn=function e(t){var n=t.menuStatus,r=t.setMenuStatus,a=(0,u.YZY)().isAir,o=(0,l.useCallback)((function(){r(!n)}),[n,r]);return(0,C.jsx)(Z.hU,{dataTestId:(0,S.wE)(e,"button","menu-button"),border:!n,className:"flex h-8 w-8 items-center justify-center !p-0",type:n||a?"secondary":"tertiary",onClick:o,onKeyUp:o,iconSize:12,icon:(0,c.o6)({operaOne:Qt,operaAir:Jt,operaGx:en})})};tn.displayName="SwitchMenuButton";const nn=tn,rn=n.p+"assets/e54584d220911040e9a8.svg";var an={header:"border-b border-b-secondary-s1-selected-stroke",operaGx:{header:"box-border border-b border-secondary-s1-selected-stroke border-image-1-header"}};const on=function(e){var t=e.children,n=e.modelSelector,r=e.isBorderLess,a=void 0!==r&&r,o=(0,c.oH)().isAriaInTabView,i=(0,c.o6)(an,["header"]).header;return(0,C.jsxs)("div",{className:"relative bg-levels-l1-chat-bg-bg-elements",children:[(0,C.jsx)("div",{className:(0,S.AK)("header relative z-1 flex h-14 select-none items-center gap-11 px-3",i,o?"justify-between":"justify-center",a&&"border-none"),children:t}),!!n&&n]})};const sn=function(e){var t=e.addNewChat,n=e.conversation,a=e.conversationId,o=e.conversationTitle,i=e.isAnimated,s=void 0!==i&&i,d=e.menuStatus,f=e.onAnimationFinish,p=e.setMenuStatus,m=(0,y.$G)().t,h=(0,c.oH)().isAriaInTabView,g=(0,c.iP)().windowInnerWidth,x=(0,u.ljr)().remoteConfig,b=(0,u.MII)().isLocalModelsEnabled,w=(0,u.Itl)().fetchedCloudModels,j=(0,u.Qck)().setModel,_=(0,l.useState)(!1),k=(0,v.Z)(_,2),O=k[0],A=k[1],E=function(){j("Aria"),t()},I=function(){A("_new"!==a)},T=(0,l.useMemo)((function(){return(0,C.jsx)("div",{className:"absolute bottom-0 flex w-full items-center justify-center",children:(0,C.jsx)($t,{conversationId:a,conversation:n,addNewChat:t})})}),[a,n,t]),R=(0,l.useMemo)((function(){return x.local_models&&b||(null==w?void 0:w.length)>0}),[x.local_models,b,w]),M=!h&&g>=c.Qx,P=(0,c.o6)({headerProductName:"ml-1 font-mono text-xs font-bold uppercase leading-3.5",headerMenu:"dark:text-white",headerChatTitle:"text-sm",operaGx:{header:"box-border border-b border-secondary-s1-selected-stroke border-image-1-header",headerMenu:"",headerProductName:"ml-2 font-sf-pro text-sm font-semibold leading-4.5 text-classic-gx-no-00 dark:text-classic-gx-no-100",headerChatTitle:"text-lg"},operaAir:{headerProductName:"ml-2 leading-4.5 text-[14px] text-text-t1-text-active-icons"}},["headerProductName","headerChatTitle","headerMenu"]);return(0,C.jsx)(on,{modelSelector:R&&T,children:O?(0,C.jsx)(At,{isBordered:!1,id:a,currentLabel:o,setEditId:function(e){null===e&&A(!1)}}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{className:(0,S.AK)("flex h-5 basis-28 items-center sidebarless:visible",P.headerMenu,d?"invisible":"visible"),children:[h&&(0,C.jsxs)("button",{onClick:E,className:"flex items-center",children:[(0,C.jsx)(N.P,{sender:ie.CI.aria,size:20}),(0,C.jsx)("span",{className:(0,S.AK)("mr-2",P.headerProductName),children:m("product_name.opera")})]}),!M&&(0,C.jsx)(nn,{menuStatus:d,setMenuStatus:p})]}),(0,C.jsxs)("div",{className:(0,S.AK)("text-body-l flex grow flex-col items-center justify-center overflow-hidden text-ellipsis whitespace-nowrap font-be-vietnam text-text-t1-text-active-icons sidebarless:max-w-[400px]",P.headerChatTitle),children:[r&&(0,C.jsx)("div",{className:"absolute -top-[2px]",children:(0,C.jsx)("small",{children:a})}),s&&f?(0,C.jsx)(Tt,{isTooltipEnabled:"_new"!==a,value:o,isAnimated:!0,animationDelay:0,animationDuration:1e3,onAnimationFinish:f,onClick:I}):(0,C.jsx)(Tt,{isTooltipEnabled:"_new"!==a,value:o,isAnimated:!1,onClick:I})]}),(0,C.jsx)("div",{className:"flex basis-28 flex-col items-end",children:(0,C.jsx)(D.hU,{icon:rn,type:"primary",onClick:E,className:"h-8 w-8 !p-0"})})]})})};var cn=n(36459);const ln=function(e){(0,cn.Z)(e);var t=(0,y.$G)().t;return(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)("div",{className:"text-body-s mt-3 w-full select-none text-center text-text-t3-text-gray",children:[(0,C.jsx)("span",{children:t("chat_misleading_responses")}),(0,C.jsx)("a",{className:"cursor-pointer underline underline-offset-1",href:"http://help.opera.com/ai-chat-faq",target:"_blank",rel:"noopener noreferrer",draggable:"false",children:t("learn_more")})]})})};const un=function(e){(0,cn.Z)(e);var t=(0,y.$G)().t;return(0,C.jsx)(C.Fragment,{children:(0,C.jsx)("div",{className:"text-body-s w-full select-none text-center text-text-t3-text-gray",children:(0,C.jsx)("span",{children:t("chat_read_only")})})})};var dn=Object.keys(c.uk).filter((function(e){return"production"!==e}));const fn=function(){var e=(0,u.fvp)().networkEnvironment,t=(0,u.FQG)().handleNetworkEnvironmentChanged,n=(0,l.useCallback)((function(e){e.preventDefault(),t(e.target.value)}),[t]);return(0,C.jsx)("select",{className:"text-header-l relative z-1 h-5 w-full overflow-hidden bg-levels-l1-chat-bg-bg-elements text-text-t1-text-active-icons",onChange:n,value:e,children:dn.map((function(e){return(0,C.jsx)("option",{className:"endpoint-option",value:e,children:c.uk[e]},e)}))})};var pn=n(72075),mn=function e(t){var n=t.checked,r=t.setChecked,a=t.disabled,o=t.testName,i=void 0===o?"":o,s={wrapperStatic:{operaOne:"rounded-aria-radius-2",operaGx:"rounded-aria-radius-3",operaAir:"rounded-aria-radius-5"},cursorDisabled:a?"cursor-not-allowed":"cursor-pointer",wrapperStatus:{operaOne:n?"bg-primary-p1-cobalt-buttons":"bg-secondary-s2-tertiary-need-to-fix",operaAir:n?"bg-text-tb":"bg-secondary-s2-tertiary-need-to-fix"},headStatic:{operaOne:"rounded-aria-radius-1 h-3.5 w-3.5",operaGx:"rounded-aria-radius-1 h-[17px] w-[17px]",operaAir:"w-4.5 h-4.5 rounded-full"},headStaticDisabled:{operaOne:{dark:a?"bg-text-t3-text-gray":"bg-text-tb",light:a?"bg-text-t4":"bg-text-tb"},operaAir:a?"bg-secondary-s3-bg-icons":" bg-text-t1-text-active-icons"},headStatus:{operaOne:n?"translate-x-[22px]":"translate-x-1",operaGx:n?"translate-x-[20px]":"translate-x-[3px]",operaAir:n?"translate-x-4 left-1":"translate-x-0 left-0.5"}};return(0,l.useEffect)((function(){a&&r(!1)}),[a,n,r]),(0,C.jsx)("label",{className:(0,S.AK)("flex select-none items-center"),children:(0,C.jsxs)("div",{className:"relative",children:[(0,C.jsx)("input",{"data-testid":"".concat((0,S.wE)(e,"input",i),"-").concat(n),type:"checkbox",role:"switch",checked:n,onChange:function(){return!a&&r(!n)},className:"sr-only",tabIndex:0}),(0,C.jsx)("div",{className:(0,S.AK)("box block h-5.5 w-10",(0,c.o6)(s,"wrapperStatic"),(0,c.o6)(s,"cursorDisabled"),(0,c.o6)(s,"wrapperStatus"))}),(0,C.jsx)("div",{className:(0,S.AK)("absolute inset-y-0 my-auto flex items-center justify-center transition",(0,c.o6)(s,"headStatic"),(0,c.o6)(s,"headStaticDisabled"),(0,c.o6)(s,"cursorDisabled"),(0,c.o6)(s,"headStatus"))})]})})};const hn=function(e){var t=e.toggleConfig,n=e.settingName,r=t.checked,a=t.setChecked;return(0,C.jsxs)("div",{className:(0,S.AK)("flex w-full justify-between border-surface-selected"),children:[(0,C.jsx)("div",{className:"flex flex-col justify-center",children:(0,C.jsx)("p",{className:"font-mono text-xxs font-bold uppercase text-text-t1-text-active-icons",children:n})}),(0,C.jsx)(mn,{checked:r,setChecked:a})]})};function vn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vn(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const xn=function(e){var t,n,r=e.setRemoteConfigOverrideAvailable,a=(0,u.ljr)().remoteConfigOverride,o=(0,u.FLN)().setRemoteConfigOverride,i=(0,u.YZY)().isGx,s=(0,y.$G)().t;return(0,C.jsxs)("div",{className:(0,S.AK)("menu-footer gap-4.5 absolute z-3 mx-4 box-border flex h-fit w-3/4 flex-col items-center justify-center border border-solid border-[--opera-chatbot-message-info-border] bg-levels-l0-extension-bg",i?"mt-2 rounded px-6 py-4":"rounded-lg p-4 shadow-settings"),children:[(0,C.jsxs)("div",{className:"flex flex-col items-center space-y-1 text-center text-black dark:text-white",children:[(0,C.jsxs)("p",{className:"text-base",children:["Aria ",null!==(t=null===(n="production")?void 0:n.toUpperCase())&&void 0!==t?t:""]}),(0,C.jsx)("small",{className:"text-xs",children:"Remote config override"}),(0,C.jsx)("small",{className:"text-xs",children:(0,C.jsx)(pn.h,{className:"cursor-pointer !text-blue-400 text-inherit underline underline-offset-1",to:"https://wiki.opera.software/display/DNA/Aria+Remote+Config",children:"Wiki"})})]}),(0,C.jsx)("div",{className:"max-h-[75%] w-full overflow-y-auto",children:(0,S.FR)(a).filter((function(e){return"boolean"==typeof(0,v.Z)(e,2)[1]})).map((function(e){var t=e,n=(0,v.Z)(t,2),r=n[0],i=n[1];return(0,C.jsx)("div",{className:"mx-1.5 my-3",children:(0,C.jsx)(hn,{settingName:r,toggleConfig:{checked:a[r],setChecked:function(){return o(gn(gn({},a),{},(0,g.Z)({},r,!i)))}}})},r)}))}),(0,C.jsx)("div",{className:"flex space-x-4",children:(0,C.jsx)(D.zx,{type:"tertiary",onClick:function(){return r(!1)},children:s("close")})})]})};var bn=n(47733),yn=n(59295),wn=n(25108);function jn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jn(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Cn(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return kn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kn(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function kn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function On(e,t,n){for(var r=document.createNodeIterator(e,NodeFilter.SHOW_ALL),a="",o="",i=!1,s=r.nextNode(),c=function(e){if(An(e))if(e===t){var r=e.textContent||"",s=r.substring(0,n),c=r.substring(n);a+=s,o+=c,i=!0}else i||e===t?i&&e!==t&&(o+=e.textContent):a+=e.textContent};s;)c(s),s=r.nextNode();return{prevTextContent:a,nextTextContent:o,messageChildNodeOffset:n}}function Sn(e){if(e.nodeType===Node.TEXT_NODE)return e;for(var t=0;t<e.childNodes.length;t++){var n=Sn(e.childNodes[t]);if(n)return n}for(var r=e.nextSibling;r;){var a=Sn(r);if(a)return a;r=r.nextSibling}return null}var An=function(e){var t;if(!e)return!1;if(e.nodeType!==Node.TEXT_NODE)return!1;var n=e.parentElement;if(n){if(n.dataset.ignoreHighlighter)return!1;if("none"!==window.getComputedStyle(n).getPropertyValue("user-select"))return!!(null===(t=e.parentElement)||void 0===t?void 0:t.closest(".message"))}},En=function e(t){if(!t)return null;if(An(t))return t;for(var n=t.lastChild;n;){var r=e(n);if(r)return r;n=n.previousSibling}return null};function In(e,t){var n;if(!t){var r=En(e);if(An(r))return r}for(var a=e.previousSibling;a;){var o=In(a,!1);if(An(o))return o;a=a.previousSibling}for(var i=e.parentNode;i&&!i.previousSibling;)i=i.parentNode;return null!==(n=i)&&void 0!==n&&n.previousSibling?In(i.previousSibling,!1):null}function Nn(e){var t=e.cloneRange();if(t.startContainer.nodeType!==Node.TEXT_NODE){var n=Sn(t.startContainer);n&&t.setStart(n,0)}if(t.endContainer.nodeType!==Node.TEXT_NODE){var r,a=In(t.endContainer,!0);if(a)t.setEnd(a,(null===(r=a.textContent)||void 0===r?void 0:r.length)||0)}return t}function Tn(e){for(var t,n,r,a,o=(e=Nn(e)).startContainer,i=e.endContainer,s=document.createNodeIterator(e.commonAncestorContainer,NodeFilter.SHOW_ALL),c=s.nextNode(),l=!1,u=function(s){var c=s.parentElement;if(c&&"none"!==window.getComputedStyle(c).getPropertyValue("user-select")){var l=null==c?void 0:c.closest(".message");if(l){if(s===o){var u=On(l,s,e.startOffset);t=l,n=u.prevTextContent.length}if(s===i){var d=On(l,s,e.endOffset);r=l,a=d.prevTextContent.length}}}};c;){if(c===o&&(l=!0),l&&c.nodeType===Node.TEXT_NODE&&u(c),c===i){l=!1;break}c=s.nextNode()}if(void 0!==t&&void 0!==r&&void 0!==n&&void 0!==a){var d="message-to",f=t.classList.contains(d),p=r.classList.contains(d);return{firstMessageId:t.id,firstMessageIsAriaResponse:f,firstMessageOffset:n,lastMessageId:r.id,lastMessageIsAriaResponse:p,lastMessageOffset:a}}wn.warn("WARN: could not convert browser range to chat messages range",{range:e,firstParentMessageElement:t,lastParentMessageElement:r,firstParentMessageElementStartOffset:n,lastParentMessageElementEndOffset:a})}function Rn(e){var t=e.firstMessageId,n=e.firstMessageOffset,r=e.lastMessageId,a=e.lastMessageOffset,o=document.getElementById(t),i=document.getElementById(r);if(o&&i){var s=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"preffer_prev",r=e,a=0,o=function(e){if(e.nextSibling)return e.nextSibling;for(var t=e.parentNode;t&&!t.nextSibling;)t=t.parentNode;return t?t.nextSibling:null};r;){if(An(r)){var i=r.textContent.length;if("preffer_next"===n){if(a+i>t)return{textNode:r,actualOffset:t-a}}else if(a+i>=t)return{textNode:r,actualOffset:t-a};a+=i}r=r.firstChild||o(r)}},c=s(o,n,"preffer_next"),l=s(i,a);if(c&&l){var u=new Range;return u.setStart(c.textNode,c.actualOffset),u.setEnd(l.textNode,l.actualOffset),u}wn.warn("WARN: Could not locate text nodes for range",{startMessageElement:o,firstMessageOffset:n,startResult:c,endMessageElement:i,lastMessageOffset:a,endResult:l})}else wn.warn("WARN: Could not find message elements in DOM",{firstMessageId:t,lastMessageId:r})}function Mn(e,t){if(!t)return"";var n=t.firstMessageId,r=t.firstMessageOffset,a=t.lastMessageOffset;return"hl_".concat(e,"_").concat(n,"_").concat(r,"_").concat(a)}function Pn(e){for(var t,n="",r=document.createNodeIterator(e,NodeFilter.SHOW_TEXT,{acceptNode:function(e){return An(e)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}});t=r.nextNode();)n+=t.textContent;return n}var Dn=["rephrase"];function Gn(e,t,n,r){var a,o=e.chatMessagesRange,i=o.firstMessageId,s=o.lastMessageId,c=o.firstMessageOffset,l=o.lastMessageOffset,u=0,d=Cn((0,yn.Kx)(n,r));try{for(d.s();!(a=d.n()).done;){var f=a.value;i===t&&c>u&&(f.added&&f.count&&(c+=f.count),f.removed&&f.count&&(c-=f.count)),s===t&&l>=u&&(f.added&&f.count&&(l+=f.count),f.removed&&f.count&&(l-=f.count)),!f.removed&&f.count&&(u+=f.count)}}catch(e){d.e(e)}finally{d.f()}var p=_n(_n({},o),{},{firstMessageOffset:c,lastMessageOffset:l});return _n(_n({},e),{},{chatMessagesRange:p,id:Dn.includes(e.id)?e.id:Mn(e.conversationId,p)})}function Ln(e,t){for(var n,r,a=[],o=0,i=0;i<e.length;i+=1){var s=!1;do{if(n=e[i],r=t[o],n===r||" "===n&&"\n"===r)s=!0,a[i]=o,"\n"!==e[i]&&(o+=1);else{var c;o+=1;var l=t.substring(o).match(/^\```[\w]+/);if(null!=l&&null!==(c=l[0])&&void 0!==c&&c.length&&(o+=l[0].length),o>t.length-1){if(""!==e.substring(o).trim()){var u="Cannot map output to source txt at index ".concat(o);throw wn.error(u,{outputLength:e.length,outputIndex:i,sourceIndex:o,opart:e.substring(i-10,i+10),sourceLength:t.length,lettersMap:a,so:{output_text:e,source_text:t}}),new Error(u)}o=t.length-1,s=!0}}}while(!s)}return a}function Bn(e){return e?e.nodeType!==Node.TEXT_NODE?e:e.parentNode?Bn(e.parentNode):null:null}function Zn(e,t,n,r){return e.substring(0,t)+r+e.substring(t+n)}function Hn(e){var t=(0,m.Z)(e.matchAll(/<link(?:\s+category="([^"]*)"?)?>/g)),n=(0,m.Z)(e.matchAll(/<\/link>/g));if(n.length>t.length){var r=n[0];void 0!==r.index&&(e=Zn(e,r.index,r[0].length,""))}if(n.length<t.length){var a=t[t.length-1];void 0!==a.index&&(e=Zn(e,a.index,a[0].length,""))}return e}function Fn(e,t,n){for(var r=[" ","!","#","(",")","*","+","-",".","=",">","?","[","\f","\n","\r","\t","\v","]","_","`","|","~","'","/","<",'"',"\\","{","}",","];t>0&&!r.includes(e[t-1]);)t--;for(;n<e.length&&!r.includes(e[n]);)n++;return[t,n]}var Kn=function(e){var t=document.createElement("canvas").getContext("2d");return t?(t.font="400 14px 'Be Vietnam'",t.measureText(e).width):-1},Un=function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".replace(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",""),t=e.length;return e.charAt(Math.floor(Math.random()*t))},Vn=function(e){for(var t,n=e.length,r=Kn(e),a=e,o=0,i=Math.abs(o-r),s=0;s<10;s+=1){t=e;for(var c=(0,m.Z)(t),l=0;l<1;l+=1){var u=Math.floor(Math.random()*n);c[u]=Un(c[u])}t=c.join(""),o=Kn(t);var d=Math.abs(o-r);d<i&&(i=d,a=t)}return a},Wn=n(29403),zn={attributes:{source:"aria-extension"}};zn.styleTagTransform=Oe(),zn.setAttributes=je(),zn.insert=ye().bind(null,"head"),zn.domAPI=xe(),zn.insertStyleElement=Ce();ve()(Wn.Z,zn);const Yn=Wn.Z&&Wn.Z.locals?Wn.Z.locals:void 0;function qn(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Xn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xn(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){throw e})),f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){s=!0,o=e})),f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function Xn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var $n=new c.mQ({env:"development",name:"HIGHLIGHTER DOM UTILS"});function Qn(e,t,n){var r=t.id,a=t.chatMessagesRange;if(e){var o=function(e,t){if(e){for(var n=t.firstMessageId,r=t.lastMessageId,a=t.firstMessageOffset,o=t.lastMessageOffset,i=[],s=document.createNodeIterator(e,NodeFilter.SHOW_ALL),c=!1,l=!1,u=0,d=0,f=!1,p=function(e){if(An(e)){var t=e.parentElement;if(t){var s=null==t?void 0:t.closest(".message");if(s&&"none"!==window.getComputedStyle(t).getPropertyValue("user-select")&&(s.id===n&&(c=!0),c)){var p=void 0,m=void 0,h=e.textContent||"";s.id===r&&(o-d>h.length?d+=h.length:(m=o-d,f=!0)),!l&&a-u>h.length?u+=h.length:(l||(l=!0,p=a-u),p!==h.length&&i.push({node:e,startOffset:p,endOffset:m}))}}}},m=s.nextNode();m&&!f;)p(m),m=s.nextNode();return i}}(e,a);if(o){var i,s=qn(o);try{for(s.s();!(i=s.n()).done;){var c,l=i.value;if(null!=l&&null!==(c=l.node)&&void 0!==c&&c.textContent){var u=document.createElement("span");u.className="outer-highlight";var d=document.createElement("span"),f=document.createElement("span"),p=document.createElement("span"),m=(0,S.AK)(Yn.highlighter,t.selectionColor&&Yn[t.selectionColor]);if(f.id=r,f.className=m,"rephrase"===t.type){var h=Date.now()-t.timestamp;Object.assign(f.style,{animationDelay:"-".concat(h,"ms")})}else f.addEventListener("click",(function(e){var r=window.getSelection();null!=r&&r.toString()||n(e,t)}));var v,g="",x="",b=l.node.textContent;void 0!==l.startOffset&&(g=b.substring(0,l.startOffset)),v=b.substring(l.startOffset||0,l.endOffset),void 0!==l.endOffset&&(x=b.substring(l.endOffset)),g&&(d.textContent=g,u.appendChild(d)),f.textContent=v,u.appendChild(f),x&&(p.textContent=x,u.appendChild(p));var y=l.node.parentNode;if(y)u._origTextNode=l.node,y.replaceChild(u,l.node)}}}catch(e){s.e(e)}finally{s.f()}}}}function Jn(e){if(e){var t=e.querySelectorAll(".outer-highlight");if(t.length){var n,r=qn(t);try{for(r.s();!(n=r.n()).done;){var a=n.value,o=a.parentNode;if(o){var i=a;o.replaceChild(i._origTextNode,a)}else $n.info("PARENT OF .outer-highlight span NOT FOUND")}}catch(e){r.e(e)}finally{r.f()}}}}function er(){if(!window.renderingHighlights&&window.highlightsRendered){window.highlightsRendered=!1;var e=document.getElementById("messages-container");e&&Jn(e)}}var tr=n(71002);const nr=function(e){var t=e.option,n=void 0===t?"default":t,r=e.selectedOption,a=void 0===r?"":r,o=e.size,i=void 0===o?24:o,s=e.onClick,d=(0,u._gZ)().contextType,f=(0,c.oH)().isAriaInTabView,p=(0,l.useCallback)((function(){s(n),(0,oe.vH)({action:ie.VV.CLICK,element:ie.Y3.REFINER,context:f?ie.hG.BROWSER_TAB:d,str_value:"ColorSelected"})}),[s,n,f,d]),m={shape:{operaOne:"svg",operaGx:"rect",operaAir:"circle"},default_fill:"fill-[--opera-chatbot-message-highlight-bg-default]",custom1_fill:"fill-[--opera-chatbot-message-highlight-bg-custom-1]",custom2_fill:"fill-[--opera-chatbot-message-highlight-bg-custom-2]",custom3_fill:"fill-[--opera-chatbot-message-highlight-bg-custom-3]",stroke:a===n?"stroke-[--primary-p1-cobalt-buttons]":"stroke-[--secondary-s1-selected-stroke]",default_bg:"bg-[--opera-chatbot-message-highlight-bg-default]",custom1_bg:"bg-[--opera-chatbot-message-highlight-bg-custom-1]",custom2_bg:"bg-[--opera-chatbot-message-highlight-bg-custom-2]",custom3_bg:"bg-[--opera-chatbot-message-highlight-bg-custom-3]",border_bg:a===n?"bg-[--primary-p1-cobalt-buttons]":"bg-[--secondary-s1-selected-stroke]"},h=(0,c.o6)(m,"shape"),v=(0,c.o6)(m,"".concat(n,"_fill")),g=(0,c.o6)(m,"stroke"),x=(0,c.o6)(m,"".concat(n,"_bg")),b=(0,c.o6)(m,"border_bg"),y=(0,S.AK)(v,g);return"svg"===h?(0,C.jsx)("svg",{className:"cursor-pointer hover:scale-110 hover:duration-150",xmlns:"http://www.w3.org/2000/svg",width:i,height:i,viewBox:"0 0 24 24",fill:"none",onClick:p,children:(0,C.jsx)("path",{d:"M4.46447 4.46447C3.66191 5.26702 3.31672 6.27752 3.15536 7.47766C2.99995 8.63362 2.99997 10.1034 3 11.9268L3 12L3 12.0732C2.99997 13.8966 2.99995 15.3664 3.15536 16.5223C3.31672 17.7225 3.66191 18.733 4.46447 19.5355C5.26702 20.3381 6.27752 20.6833 7.47766 20.8446C8.63363 21 10.1034 21 11.9269 21H12H12.0731C13.8966 21 15.3664 21 16.5223 20.8446C17.7225 20.6833 18.733 20.3381 19.5355 19.5355C20.3381 18.733 20.6833 17.7225 20.8446 16.5223C21 15.3664 21 13.8966 21 12.0731V12V11.9269C21 10.1034 21 8.63363 20.8446 7.47766C20.6833 6.27752 20.3381 5.26702 19.5355 4.46447C18.733 3.66191 17.7225 3.31672 16.5223 3.15536C15.3664 2.99995 13.8966 2.99997 12.0732 3L12 3L11.9268 3C10.1034 2.99997 8.63362 2.99995 7.47766 3.15536C6.27752 3.31672 5.26702 3.66191 4.46447 4.46447Z",className:y,strokeWidth:"2"})}):"rect"===h?(0,C.jsx)("button",{className:(0,S.AK)("flex items-center justify-center outline-none","h-5 w-5 rounded-aria-radius-1",b,"cursor-pointer hover:scale-110 hover:duration-150"),onClick:p,children:(0,C.jsx)("div",{className:(0,S.AK)("h-4 w-4 rounded-aria-radius-1",x)})}):(0,C.jsx)("button",{className:(0,S.AK)("flex items-center justify-center outline-none","h-5 w-5 rounded-aria-radius-3",b,"cursor-pointer hover:scale-110 hover:duration-150"),onClick:p,children:(0,C.jsx)("div",{className:(0,S.AK)("h-4 w-4 rounded-aria-radius-3",x)})})};var rr=n(44971);const ar=function(e){var t=e.setShowBorder,n=e.optionHandler,r=e.optionText,a=e.disabled,o=(0,c.o6)({text:"text-button-m",radius:"rounded-aria-radius-1",height:"h-4",background:"hover:bg-levels-l2-hover",separator:"opacity-100 mx-[3px]",padding:"px-1",operaAir:{text:"text-header-s",radius:"rounded-aria-radius-3",separator:"opacity-0",height:"h-6",padding:"px-2"},operaGx:{text:"text-header-s",height:"h-5",separator:"opacity-100 mx-[2px]"}},["text","radius","background","separator","height","padding"]);return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{className:(0,S.AK)("h-4 w-[1px] bg-secondary-s1-selected-stroke duration-150",o.separator)}),(0,C.jsx)("div",{onMouseEnter:function(){return t(!1)},onMouseLeave:function(){return t(!0)},className:(0,S.AK)(!a&&o.background,"flex items-center text-center transition-all duration-150",o.radius,o.height,a&&"pointer-events-none opacity-50"),children:(0,C.jsx)("button",{className:(0,S.AK)(o.text,o.padding,"h-full cursor-pointer select-none bg-transparent text-text-t1-text-active-icons"),type:"button",onClick:n,children:r})})]})};var or=n(25108);function ir(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ir(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ir(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cr(e){return e&&"object"===(0,tr.Z)(e)&&"current"in e}var lr=(0,l.forwardRef)((function(e,t){var n,r,a=e.align,o=e.highlightData,i=e.x,s=e.y,d=e.conversation,f=e.readOnly,p=e.setClickedHighlighter,m=(0,c.Su)().loggerService,h=o.chatMessagesRange,g=o.conversationId,x=o.id,b=o.selectionColor,w=o.text,j=(0,y.$G)().t,_=(0,c.oH)().isAriaInTabView,k=(0,u.uEF)(),O=k.setHighlight,A=k.removeHighlight,E=(0,u.okl)().rephraseHighlight,I=(0,u.kGW)(g).reusableHighlights,N=(0,u.lUI)(),T=N.reuseHighlight,R=N.removeReusableHighlight,M=(0,u._gZ)().contextType,P=(0,u.WGj)().highlightToRephrase,D=h.firstMessageIsAriaResponse,G=h.lastMessageIsAriaResponse,L=h.firstMessageId,B=h.lastMessageId,Z=w.length<=c.B7&&!f,H=!!I.find((function(e){return e.id===x})),F=document.getElementById(L),K=h.firstMessageId.split("-"),U=(0,v.Z)(K,2)[1],V=d.data.findIndex((function(e){return e.id===U})),W=-1===V?void 0:d.data[V],z=null==W?void 0:W.message,Y=z&&(0,rr.Ku)(z),q=F&&Pn(F),X=null===(n=d.id)||void 0===n||null===(r=n.split)||void 0===r||null===(r=r.call(n,"-"))||void 0===r?void 0:r[0],$=q&&q.substring(h.firstMessageOffset,h.lastMessageOffset).trim(),Q=!1,J=!1,ee=null,te=null,ne=null,re=".code-box",ae=".table-wrapper",se=window.getSelection(),ce=Rn(h);ce&&(null==se||se.removeAllRanges(),null==se||se.addRange(ce));var le="";null!=se&&se.rangeCount&&(ne=se.getRangeAt(0),le=ne.toString(),ee=Bn(ne.startContainer),te=Bn(ne.endContainer),ee&&ee.closest(re)&&(Q=!0),te&&te.closest(re)&&(Q=!0),ee&&ee.closest(ae)&&(J=!0),te&&te.closest(ae)&&(J=!0));var ue,de,fe,pe,me,he,ve,ge=!Q,xe="",be="";if(q&&Y&&z)try{ue=h.firstMessageOffset,de=h.lastMessageOffset,void 0!==ue&&void 0!==de&&(xe=Y.substring(ue,de));var ye=Ln(q,Y);if(fe=ye[h.firstMessageOffset],pe=ye[h.lastMessageOffset-1]+1,void 0!==fe&&void 0!==pe){var we=Fn(Y,fe,pe),je=(0,v.Z)(we,2);fe=je[0],pe=je[1],be=Y.substring(fe,pe)}var _e=Ln(q,z);if(me=_e[h.firstMessageOffset],he=_e[h.lastMessageOffset-1]+1,void 0!==me&&void 0!==he){var Ce=Fn(z,me,he),ke=(0,v.Z)(Ce,2);me=ke[0],he=ke[1]}}catch(e){or.error("mapSelectableTextToMarkdownSource error",e)}if(z&&void 0!==me&&void 0!==he){var Oe=Hn(z.substring(0,me)),Se=Hn(z.substring(he));ve=Oe+be+Se,me=Oe.length,he=Oe.length+be.length}if(void 0!==me&&void 0!==he){var Ae,Ee=null===(Ae=ve)||void 0===Ae?void 0:Ae.substr(me,he-me);m.infoColor("REPHRASE SELECTION DEBUG","red",Ee)}(be=be.trim()).startsWith("```")&&(be=be.substring(3)),be.endsWith("```")&&(be=be.substring(0,be.length-3)),be=be.trim();var Ie,Ne,Te,Re,Me=(Ie=L===B,Ne=D&&G,Te=null==W?void 0:W.server_id,Re=!P&&Te&&w.length>=c.CX&&Ne&&Ie&&!c.Dv.includes(L)&&F&&Y&&$&&be&&!Q&&!J&&("prompt"!==X||V>2)&&!f&&le,or.info("%c[rephrase] checkIfRephraseIsAvailable:selection","background: tomato; color: white",{messageSourceWithLinkifyTextWithoutSelectedLink:ve,selectedSource:be,chatMessagesRange:h,sourceTextStartOffset:fe,sourceTextEndOffset:pe,isSameMessageHighlighted:Ie,isAriaResponseHighlighted:Ne,messageServerId:Te,selectedText:$,sourceText:Y,sourceTextWithLinkifyText:z,sourceTextWithLinkifyStartOffset:me,sourceTextWithLinkifyEndOffset:he,sourceTextWithLinkifyTextSelection:void 0!==me&&(null==z?void 0:z.substring(me,he)),selectableText:q,linkify:ge,range:ne,startNode:ee,endNode:te,selectedSourceBlock:Q,selectedTableBlock:J,isPrompt:"prompt"===X,readOnly:f,nativeTextSelected:le}),!!Re&&!!(ee===te||null!=Y&&Y.includes($)));function Pe(e){var t;if(null===(t=window.getSelection())||void 0===t||t.removeAllRanges(),b===e)return A(x),void p(null);O(sr(sr({},o),{},{selectionColor:e}))}var De=a.split("-"),Ge=(0,v.Z)(De,2),Le=Ge[0],Be=Ge[1],Ze="-50%",He="".concat(c.dl,"px");switch(Le){case"left":Ze="-100%";break;case"right":Ze="0%";break;case"center":Ze="-50%"}switch(Be){case"top":He="calc(-100% - ".concat(c.dl,"px)");break;case"bottom":He="".concat(1.5*c.dl,"px")}var Fe=(0,l.useState)(!0),Ke=(0,v.Z)(Fe,2),Ue=Ke[0],Ve=Ke[1],We=(0,l.useState)(!0),ze=(0,v.Z)(We,2),Ye=ze[0],qe=ze[1];(0,l.useEffect)((function(){var e=document.getElementById("messages-container");if(e){if(cr(t)&&t.current){var n=(document.body.clientWidth>c.Fz?c.Fz:document.body.clientWidth)-e.clientWidth-6,r=n>6?n:6,a=new IntersectionObserver((function(e){return function(e){if(t.current){if(e.rootBounds){var n=e.boundingClientRect,r=e.rootBounds;n.right>r.right?t.current.style.transform="translateX(".concat(r.right-n.right,"px)"):n.left<r.left&&(t.current.style.transform="translateX(".concat(r.left-n.left,"px)"))}a.unobserve(t.current)}}((0,v.Z)(e,1)[0])}),{root:null,rootMargin:"0px -".concat(6,"px 0px -").concat(r,"px"),threshold:1});return a.observe(t.current),function(){cr(t)&&t.current&&a.unobserve(t.current)}}}}),[t,Me,Z]);var Xe=(0,c.o6)({container:{operaOne:"h-9",operaGx:"h-8",operaAir:"h-8"},colorsMr:{operaOne:"mr-px",operaGx:"mr-1",operaAir:"mr-0.5"},padding:{operaOne:"px-1.5",operaGx:"pl-1.5 pr-1",operaAir:"pl-1.5 pr-1"},backgroundColor:{operaOne:"bg-levels-l5-primary"},radius:{operaOne:"rounded-aria-radius-3",operaAir:"rounded-aria-radius-4"},shadow:{operaOne:"shadow-highlightMenu",operaAir:"air-level-02"},border:{operaOne:"",operaGx:"border border-solid border-secondary-s1-selected-stroke"}},["backgroundColor","radius","shadow","border","container","padding","colorsMr"]);return(0,C.jsx)("div",{className:(0,S.AK)("fixed inline-block select-none",Xe.container),style:{left:"".concat(i,"px"),top:"".concat(s,"px")},children:(0,C.jsxs)("div",{ref:t,id:x,className:(0,S.AK)("relative left-1/2 z-1 flex h-full min-w-max max-w-max items-center justify-center overflow-hidden",Xe.padding,Xe.backgroundColor,Xe.radius,Xe.shadow,Xe.border),style:{left:Ze,top:He},children:[(0,C.jsxs)("div",{className:(0,S.AK)("flex items-center justify-center gap-[4px]",Xe.colorsMr),children:[(0,C.jsx)(nr,{selectedOption:b,option:"custom1",onClick:Pe}),(0,C.jsx)(nr,{selectedOption:b,option:"custom2",onClick:Pe}),(0,C.jsx)(nr,{selectedOption:b,option:"custom3",onClick:Pe})]}),Z&&(0,C.jsx)(ar,{showBorderCondition:Ue,setShowBorder:Ve,isLastOption:!Me,optionHandler:function(){if(!H){I.length&&R(I[0].id),T({id:o.id,title:o.text});var e,t=Rn(h);if(t)null===(e=window.getSelection())||void 0===e||e.addRange(t);(0,oe.vH)({action:ie.VV.CLICK,element:ie.Y3.REFINER,context:_?ie.hG.BROWSER_TAB:M,str_value:"Reuse"})}},optionText:j("reuse"),disabled:H}),Me&&(0,C.jsx)(ar,{showBorderCondition:Ue&&Ye,setShowBorder:qe,isLastOption:Me,optionHandler:function(){(0,oe.vH)({action:ie.VV.CLICK,element:ie.Y3.REFINER,context:_?ie.hG.BROWSER_TAB:M,str_value:"Rephrase"}),F&&Y&&$&&be&&void 0!==fe&&void 0!==pe&&void 0!==me&&void 0!==he&&void 0!==ue&&void 0!==de&&void 0!==ve&&E({highlight:o,sourceTextWithLinkifyStartOffset:me,sourceTextWithLinkifyEndOffset:he,sourceTextStartOffset:fe,sourceTextEndOffset:pe,selectableText:q,selectedText:xe,selectableTextStartOffset:ue,selectableTextEndOffset:de,sourceText:Y,sourceTextWithLinkify:z,selectedSource:be,linkify:ge,messageSourceWithLinkifyTextWithoutSelectedLink:ve})},optionText:j("rephrase")})]},x)})}));const ur=lr;var dr=n(57406),fr=n(53159);function pr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pr(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var hr=new dr.mQ({env:"development",name:"HIGHLIGHTER REPHRASE UTILS"});function vr(e,t,n,r,a,o){return gr.apply(this,arguments)}function gr(){return(gr=(0,h.Z)(b().mark((function e(t,n,r,a,o,i){var s,c;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,ft.hV)(t);case 2:return s=e.sent,c=r.split(o).join(i),e.next=6,(0,pt.X1)(s.id,{data:s.data.map((function(e){var t=e.id,s=e.message;return t===n&&(hr.info("RESPONSE WITH REPHRASED DATA READY",{id:t,message:s,oldContent:r,newContent:c,textFrom:o,textTo:i,messageData:e,_newContentFromServerWithoutLinkify:a}),e.message=c),mr({},e)}))},"updateRephrasedMessage");case 6:return e.abrupt("return",{conversationId:t,messageId:n,messageContent:c});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xr(e,t,n,r,a,o,i,s){return br.apply(this,arguments)}function br(){return br=(0,h.Z)(b().mark((function e(t,n,r,a,o,i,s,c){var l,u,d,f=arguments;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=f.length>8&&void 0!==f[8]&&f[8],e.t0=mr,e.t1={conversation_id:n.server_id,message_id:a,selected_text:i,linkify:l},e.next=5,(0,fr.Fg)();case 5:return e.t2=e.sent,u=(0,e.t0)(e.t1,e.t2),l&&Object.assign(u,{linkify_version:3}),e.next=10,(0,S.Ur)("".concat(t,"/").concat(ie.Cm.REPHRASE),{method:"POST",body:u});case 10:if(!(d=e.sent).message){e.next=15;break}return e.next=14,vr(n.id,r,c,d.message,i,d.rephrased_text);case 14:return e.abrupt("return",e.sent);case 15:case"end":return e.stop()}}),e)}))),br.apply(this,arguments)}function yr(){return(yr=(0,h.Z)(b().mark((function e(t,n,r,a){var o,i,s,c,l,u,d,f,p,m,h,g,x;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=n.highlight,i=n.selectedSource,e.prev=1,s=o.conversationId,c=o.chatMessagesRange,l=c.firstMessageId.split("-"),u=(0,v.Z)(l,2),d=u[1],e.next=6,(0,ft.hV)(s);case 6:if(f=e.sent,!((p=f.data.findIndex((function(e){return e.id===d})))>-1)){e.next=20;break}if(m=f.data,h=m[p],g=h.server_id,x=h.message,!g){e.next=17;break}return e.next=14,xr(t,f,d,g,x,i,r,a,!1);case 14:return e.abrupt("return",e.sent);case 17:throw new Error("No server_id for message");case 18:e.next=21;break;case 20:throw new Error("No message with id ".concat(d," in conversation ").concat(s));case 21:e.next=27;break;case 23:throw e.prev=23,e.t0=e.catch(1),hr.error("[REPHRASE][ERROR]",e.t0),e.t0;case 27:case"end":return e.stop()}}),e,null,[[1,23]])})))).apply(this,arguments)}var wr=n(25108),jr=Node.prototype.insertBefore;Node.prototype.insertBefore=function(e,t){var n;er();try{n=jr.call(this,e,t)}catch(t){n=null,wr.info("ERROR: Inserting an element before another element.",{newNode:e,err:t})}return n};var _r=Node.prototype.removeChild;Node.prototype.removeChild=function(e){var t;er();try{t=_r.call(this,e)}catch(n){t=null,wr.info("ERROR: Deleting an element.",{remNode:e,err:n})}return t};var Cr=Node.prototype.appendChild;Node.prototype.appendChild=function(e){var t;er();try{t=Cr.call(this,e)}catch(n){t=null,wr.info("ERROR: Adding a child to the element.",{newNode:e,err:n})}return t};var kr=Node.prototype.replaceChild;Node.prototype.replaceChild=function(e,t){var n;er();try{n=kr.call(this,e,t)}catch(r){n=null,wr.info("ERROR: Replacing a child in the element.",{node:e,child:t,err:r})}return n},wr.info("%cHIGHLIGHTER DOM GUARD READY","background:tomato;color:white");var Or=n(25108);function Sr(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Ar(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ar(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function Ar(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Er(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ir(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Er(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Er(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Nr=function(e){var t=e.children,n=e.conversation,r=e.messagesContainerRef,a=e.readOnly,o=(0,c.Su)().loggerService,i=n.id,s=(0,l.useRef)(void 0),d=(0,l.useRef)(null),f=(0,l.useState)(null),p=(0,v.Z)(f,2),m=p[0],g=p[1],x=(0,u.bCg)(i).highlights,y=(0,u.WGj)().rephraseMessagePatch,j=(0,u.nHi)().endpointPrompts,_=(0,c.Cg)().consentNeeded,k=(0,c.oH)(),O=k.isAriaInTabView,A=k.currentTab,E=(0,l.useCallback)((function(e){if(e?(document.body.classList.add("highlighter-tooltip-opened"),(null==m?void 0:m.id)!==e.id&&(0,S.HX)()):document.body.classList.remove("highlighter-tooltip-opened"),e){var t=e.chatMessagesRange.firstMessageId.split("-"),r=(0,v.Z)(t,2)[1],a=void 0===r?"":r,o=n.data.find((function(e){var t=e.id;return a&&t===a}));o&&o.server_id&&(e.messageServerId=o.server_id)}g(e)}),[]),I=(0,l.useState)(0),N=(0,v.Z)(I,2),T=N[0],R=N[1],M=(0,l.useState)(0),P=(0,v.Z)(M,2),D=P[0],G=P[1],L=(0,l.useState)("left-bottom"),B=(0,v.Z)(L,2),Z=B[0],H=B[1],F=(0,u.ljr)().remoteConfig,K=(0,u.uEF)(),U=K.setHighlight,V=K.removeHighlight,W=(0,u.WGj)().highlightToRephrase,z=(0,u.okl)(),Y=z.rephraseHighlight,q=z.setRephraseMessagePatch,X=(0,l.useRef)(null),$=(0,l.useRef)(null),Q=(0,l.useCallback)((function(e,t){var n="center",a="bottom";if(r.current){var o=r.current.getBoundingClientRect(),i=e-o.left,s=t-o.top;i>o.width*(2/3)&&(n="left"),i<o.width*(1/3)&&(n="right"),s>o.height/2&&(a="top")}return"".concat(n,"-").concat(a)}),[r]),J=(0,u._gZ)().contextType,ee=(0,l.useRef)(null),te=(0,l.useCallback)((function(e,t){e.stopPropagation(),ee.current&&clearTimeout(ee.current),ee.current=window.setTimeout((function(){ee.current=null;var n=e.clientX,r=e.clientY;R(n),G(r),H(Q(n,r)),E(t),e.stopPropagation()}),500)}),[Q,E]);(0,l.useEffect)((function(){var e=function(e){var t=$.current;if(t){var n=e.clientX,r=e.clientY,a=t.getClientRects()[0];(n<a.left||n>a.right||r<a.top||r>a.bottom)&&E(null)}};return window.addEventListener("pointerdown",e),function(){window.removeEventListener("pointerdown",e)}}),[E]);var ne=(0,l.useCallback)((function(e,t){var n=window.getSelection();if(null!=n&&n.rangeCount){var r=n.getRangeAt(0),a=r.toString().trim();if(a){var o=Tn(r);if(o){var s=Mn(i,o),c=x.find((function(e){return e.id===s}))||{chatMessagesRange:o,conversationId:i,id:s,text:a,timestamp:Date.now(),type:"highlight",tabId:null==A?void 0:A.id},l=window.getSelection(),u=(null==l?void 0:l.rangeCount)&&l.getRangeAt(0),d=u&&u.getBoundingClientRect();d?(R(e<d.right?e:d.right),G(t<d.bottom?t:d.top)):(R(e),G(t)),H(Q(e,t)),E(c)}(0,oe.vH)({action:w.VV.IMPRESSION,element:w.Y3.REFINER,context:O?w.hG.BROWSER_TAB:J,str_value:(0,rr.XR)(a)})}}}),[O,J,i,x,null==A?void 0:A.id,Q,E]),re=(0,l.useCallback)((function(e,t){X.current&&(clearTimeout(X.current),X.current=null);try{var n;null!==(n=document.getSelection())&&void 0!==n&&null!==(n=n.getRangeAt(0))&&void 0!==n&&n.collapsed||ee.current&&(clearTimeout(ee.current),ee.current=null)}catch(e){}X.current=window.setTimeout((function(){X.current=null,ne(e,t)}),500)}),[ne]);(0,l.useEffect)((function(){return function(){X.current&&clearTimeout(X.current)}}),[]),(0,l.useEffect)((function(){var e=function(){E(null)},t=r.current;return t&&t.addEventListener("scroll",e),function(){t&&t.removeEventListener("scroll",e)}}),[r,m,E]),(0,l.useEffect)((function(){if(m){var e=x.find((function(e){var t=e.id;return m.id===t}));E(e?Ir(Ir({},m),e):null)}}),[i,x]);var ae=(0,l.useCallback)((function(e){var t,n,r=e||x,a="textarea"===(null===(t=document.activeElement)||void 0===t?void 0:t.tagName.toLowerCase()),o="input"===(null===(n=document.activeElement)||void 0===n?void 0:n.tagName.toLowerCase()),i=void 0;if(!a&&!o){var s=window.getSelection();if(s&&s.rangeCount){var c=s.getRangeAt(0);c&&(i=Tn(c),s.removeAllRanges())}}er(),window.renderingHighlights=!0;var l,u=Sr(r);try{for(u.s();!(l=u.n()).done;){var f=l.value;Qn(d.current,f,te)}}catch(e){u.e(e)}finally{u.f()}if(window.renderingHighlights=!1,window.highlightsRendered=!0,!a&&!o){var p=(null==m?void 0:m.chatMessagesRange)||i;if(p){var h,v=Rn(p);if(v)null===(h=window.getSelection())||void 0===h||h.addRange(v)}}}),[x,d,te,m]);(0,l.useEffect)((function(){ae()}),[ae,m,x]);var ie=(0,l.useRef)(""),se=(0,l.useRef)(x),ce=(0,l.useRef)(W);(0,l.useEffect)((function(){ce.current=W}),[W]);var le=(0,l.useCallback)((function(e,t,n,r){var a,o=Sr(e.splice(0,e.length));try{for(o.s();!(a=o.n()).done;){var i=a.value,s=Gn(i,t,r,n);V(i.id),s&&(U(s),e.push(s))}}catch(e){o.e(e)}finally{o.f()}}),[U,V]),ue=(0,l.useCallback)((function(e,t){var n=document.getElementById(e);if(!n)throw new Error("Message element with id ".concat(e," not found"));var r=Pn(n);ie.current!==r&&(le(t,e,r,ie.current),ie.current=r)}),[le]);(0,l.useEffect)((function(){var e=d.current;if(e){var t=new MutationObserver((function(n){var r,a=!1,o=Sr(n);try{for(o.s();!(r=o.n()).done;){"childList"===r.value.type&&(a=!0)}}catch(e){o.e(e)}finally{o.f()}a&&ce.current&&(t.disconnect(),ue(ce.current.highlight.chatMessagesRange.firstMessageId,se.current),ae(se.current),t.observe(e,{childList:!0,subtree:!0}))}));return t.observe(e,{childList:!0,subtree:!0,attributes:!0,characterData:!0}),function(){t.disconnect()}}}),[d.current]),(0,l.useEffect)((function(){q(null),V("rephrase"),Y(null)}),[V,Y,q]);var de=(0,l.useRef)(null);(0,l.useEffect)((function(){var e,t=(null==W||null===(e=W.highlight)||void 0===e?void 0:e.tabId)===(null==A?void 0:A.id);if(W&&!W.progress&&t){o.info("REPHRASE","CATCHED NEW HIGHLIGHT TO REPHRASE",W),W.progress=!0,ie.current=W.selectableText,se.current=x,Y(W);var n=W.highlight;if(n){var r=n.conversationId,a=Ir({},n.chatMessagesRange);a.firstMessageOffset=W.selectableTextStartOffset,a.lastMessageOffset=W.selectableTextEndOffset;var i=Rn(a);if(i){var c=window.getSelection();null==c||c.removeAllRanges(),null==c||c.addRange(i)}var l={chatMessagesRange:a,conversationId:r,id:"rephrase",selectionColor:"rephraseStart",text:W.selectedText,timestamp:Date.now(),type:"rephrase"};de.current=l,U(l),se.current.push(l),Y(W);var u={conversationId:r,messageId:a.firstMessageId,message:W.messageSourceWithLinkifyTextWithoutSelectedLink,messageTarget:null,totalDiffLength:0};q(u),Or.info("%cSETTING TICKER","background:red;color:white"),s.current=window.setInterval((function(){if(null===u.messageTarget){var e=W.sourceTextWithLinkifyStartOffset,t=W.sourceTextWithLinkifyEndOffset,n=u.message,r=n.slice(0,e),a=function(e){for(var t=e.split(" "),n=0;n<t.length;n+=1){var r=n;t[r]=Vn(t[r])}return t.join(" ")}(n.substring(e,t)),o=n.slice(t),i="".concat(r).concat(a).concat(o);u.message=i,q(u)}else{for(var c=(0,yn.Kx)(u.message,u.messageTarget).map((function(e){return Object.assign(e,{width:Kn(e.value)})})),l=c.filter((function(e){return e.added})).sort((function(e,t){return e.width-t.width})),d=c.filter((function(e){return e.removed})).sort((function(e,t){return e.width-t.width})),f=Math.floor(1+.01*u.totalDiffLength),p=0;p<f;p+=1)d[p]&&(d[p].exec=!0),l[p]&&(l[p].exec=!0);for(var m="",h=0;h<c.length;h+=1){var v=c[h];v.exec?v.added&&(m+=v.value):v.added&&(v.added||v.removed)||(m+=v.value)}u.message=m,u.message===u.messageTarget?(clearInterval(s.current),s.current=void 0,q(null)):q(u)}}),100);var d=function(e){u.messageTarget=e;var t=(0,yn.Kx)(u.message,u.messageTarget);u.totalDiffLength=t.length,q(u)};(function(e,t,n,r){return yr.apply(this,arguments)})(j,W,F,W.messageSourceWithLinkifyTextWithoutSelectedLink).then((function(e){o.info("CONTENT HIGHLIGHTER","REPHRASE RESULT",e),d(e?e.messageContent||(0,rr.Ku)(e.messageContent):W.sourceTextWithLinkify),W.answered=!0,Y(W)})).catch((function(e){o.error("CONTENT HIGHLIGHTER","REPHRASE ERROR",e),d(W.sourceTextWithLinkify),W.answered=!0,Y(W)}))}else Or.info("rephraseHighlightAction-nothing to rephrase-setting null",W),Y(null)}}),[W,U,i,Y,V,F,o,q,j,x,null==A?void 0:A.id]);var fe=(0,l.useCallback)((0,h.Z)(b().mark((function e(){var t;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!W||null==W||!W.answered||null!=W&&W.finished||y){e.next=9;break}if(i===W.highlight.conversationId){e.next=3;break}return e.abrupt("return");case 3:setTimeout((function(){V("rephrase")}),1e3),W.finished=!0,de.current&&(de.current.timestamp=Date.now(),de.current.selectionColor="rephraseEnd",U(de.current)),Y(null),null===(t=window.getSelection())||void 0===t||t.removeAllRanges(),Or.info("%crephraseFinished","background:red;color:white",W);case 9:case"end":return e.stop()}}),e)}))),[W,Y,V,i,y,U]);(0,l.useEffect)((function(){if(W&&null!=W&&W.answered&&!y){if(i!==W.highlight.conversationId)return;o.info("CONTENT HIGHLIGHTER","CONVERSATION UPDATED","FINISHING REPHRASE"),fe()}}));(0,l.useEffect)((function(){void 0!==(null==m?void 0:m.selectionColor)?document.body.classList.add("highlighter-with-color-clicked"):document.body.classList.remove("highlighter-with-color-clicked")}),[m]),(0,l.useEffect)((function(){var e;return function t(){window.highlightsRendered||ae(),e=requestAnimationFrame(t)}(),function(){cancelAnimationFrame(e)}}),[ae]);var pe=(0,l.useCallback)((function(){var e,t=Sr(x);try{for(t.s();!(e=t.n()).done;){var n=e.value;V(n.id)}}catch(e){t.e(e)}finally{t.f()}Or.info("removeAllHighlights-highlights",x)}),[x,V]);return Object.assign(window,{highlights:x,renderAllHighlights:ae,recalculateHighlights:le,lastMessageTextContentRef:ie,rephraseMessagePatch:y,setRephraseMessagePatch:q,highlightToRephrase:W,removeAllHighlights:pe}),(0,Me.wO)(n.model)&&!_?(0,C.jsxs)("div",{children:[(0,C.jsx)("div",{onPointerUp:function(e){re(e.clientX,e.clientY)},ref:d,children:t},i),m&&(0,C.jsx)(ur,{setClickedHighlighter:g,align:Z,highlightData:m,ref:$,x:T,y:D,conversation:n,readOnly:a})]}):t};var Tr=n(15671),Rr=n(43144),Mr=n(60136),Pr=n(82963),Dr=n(61120);function Gr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,Dr.Z)(e);if(t){var a=(0,Dr.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,Pr.Z)(this,n)}}const Lr=function(e){(0,Mr.Z)(n,e);var t=Gr(n);function n(e){return(0,Tr.Z)(this,n),t.call(this,e)}return(0,Rr.Z)(n,[{key:"componentDidCatch",value:function(e){this.props.onContentHighlighterError(e)}},{key:"render",value:function(){return this.props.children}}]),n}(l.Component);var Br=n(86648),Zr=n(73009),Hr=function(e,t){var n=null!=t&&t.productSuffix?"-".concat(t.productSuffix):"",r="dark"===(null==t?void 0:t.theme)?"-dark":"";return"".concat("feature-carousel","/").concat(e).concat(n).concat(r,".png")};const Fr=function(e){var t,n=e.item,r=e.isActive,a=e.isNext,o=e.isPrevious,i=(0,ae.s0)(),s=(0,c.o6)({wrapper:{operaOne:"rounded-aria-radius-6 border border-solid border-secondary-s1-selected-stroke",operaGx:"rounded-aria-radius-3 border border-solid border-secondary-s1-selected-stroke",operaAir:"rounded-aria-radius-4 air-level-xlow"},wrapperBackground:{operaOne:"bg-levels-l5-primary",operaAir:"bg-levels-l0-extension-bg"},textWrapper:{operaOne:"text-text-t1-text-active-icons"},name:{operaOne:"text-header-l !uppercase",operaAir:"text-header-l"},description:{operaOne:"text-body-l text-text-t3-text-gray",operaGx:"text-body-l text-text-t2-text-secondary",operaAir:"text-body-l text-text-t2-text-secondary"},screenshot:{operaOne:"border border-solid border-secondary-s1-selected-stroke rounded-aria-radius-5",operaGx:"border border-solid border-secondary-s1-selected-stroke rounded-aria-radius-3",operaAir:"rounded-aria-radius-3"}},["wrapper","wrapperBackground","textWrapper","name","description","screenshot"]),u=(0,c.o6)((t=n.id,{operaOne:{light:Hr(t),dark:Hr(t,{theme:"dark"})},operaGx:{light:Hr(t,{productSuffix:"gx"}),dark:Hr(t,{theme:"dark",productSuffix:"gx"})},operaAir:Hr(t,{productSuffix:"air"})})),d=(0,l.useCallback)((function(){var e=n.onClick;if(e)return e({navigate:i})}),[n.onClick,i]);return(0,C.jsxs)("div",{className:(0,S.AK)("feature-item absolute flex w-3/5 flex-col gap-6 p-6 transition-all",s.wrapper,s.wrapperBackground,r&&"left-0 right-0 z-1 m-auto",!r&&"scale-[0.65] opacity-70",o&&"-left-8",a&&"-right-8",Boolean(n.onClick)&&"cursor-pointer hover:bg-levels-l3-cards"),onClick:d,onKeyUp:d,role:"button",tabIndex:-1,children:[(0,C.jsxs)("div",{className:(0,S.AK)("feature-intro",s.textWrapper),children:[(0,C.jsx)("div",{className:(0,S.AK)("feature-title mb-2",s.name),children:n.name}),(0,C.jsx)("div",{className:(0,S.AK)("feature-description",s.description),children:n.description})]}),u&&(0,C.jsx)("div",{className:(0,S.AK)("select-none overflow-hidden",s.screenshot),children:(0,C.jsx)("img",{className:"object-cover",src:u,alt:n.name})})]})};var Kr=n(23059);const Ur=n.p+"assets/0d8096ac3c68681980f7.svg",Vr=n.p+"assets/367d4ebde64e19f84b77.svg";const Wr=function(e){var t,n=e.adjustChatLeadingDescription,r=(0,y.$G)().t,a=(0,c.rg)().currentWindowId,o=(0,c.oH)().isAriaInTabView,i=(0,u.L6l)().handleRequestNewConversation,s=(0,u.ljr)().remoteConfig,f=function(e){var t=(0,c.oH)().isAriaInTabView,n=(0,l.useCallback)((function(){(0,oe.vH)({action:ie.VV.CLICK,element:ie.Y3.PROFILE_MEMORY,context:t?ie.hG.BROWSER_TAB:ie.hG.SIDEBAR,model:"Aria",str_value:"long_term_memory:feature_card_clicked"}),e.apply(void 0,arguments)}),[e,t]);return n}((function(e){(0,e.navigate)("/settings",{state:{initialTab:r("profile_settings_tab")}})})),p=(0,l.useState)([{id:c.t5.COMMAND_LINE,name:r("feature_carousel_item_command-line_name"),description:r("feature_carousel_item_command-line_description"),onClick:(t=(0,h.Z)(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.FM)();case 2:(0,d.z4)();case 3:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})},{id:c.t5.COMPOSE,name:r("feature_carousel_item_compose_name"),description:r("feature_carousel_item_compose_description"),onClick:function(){location.href="#prompt-studio?"}},{id:c.t5.IMAGE_UNDERSTANDING,name:r("feature_carousel_item_image-understanding_name"),description:r("feature_carousel_item_image-understanding_description"),onClick:function(){document.querySelector("#upload-image-input").click()}},{id:c.t5.IMAGE_GENERATION,name:r("feature_carousel_item_image-generation_name"),description:r("feature_carousel_item_image-generation_description"),onClick:function(){i({source:o?"tab-view":"sidebar",windowId:a,text:r("create_an_abstract_wallpaper"),id:(0,S.F0)()})}},s.longterm_memory?{id:c.t5.PROFILE_MEMORY,name:r("profile_memory_slide_title"),description:r("profile_memory_slide_subtitle"),onClick:f}:null].filter(Boolean)),g=(0,v.Z)(p,2),x=g[0],w=g[1],j=[{id:c.t5.EXPERT_TRANSLATION,name:r("feature_carousel_item_expert-translation_name"),description:(0,C.jsx)(y.cC,{i18nKey:r("feature_carousel_item_expert-translation_description")}),onClick:function(){i({source:o?"tab-view":"sidebar",windowId:a,text:r("feature_carousel_item_expert-translation_action"),id:(0,S.F0)()})}},{id:c.t5.GRAMMAR_CHECK,name:r("feature_carousel_item_grammar-check_name"),description:(0,C.jsx)(y.cC,{i18nKey:r("feature_carousel_item_grammar-check_description")}),onClick:function(){i({source:o?"tab-view":"sidebar",windowId:a,text:r("feature_carousel_item_grammar-check_action"),id:(0,S.F0)()})}},{id:c.t5.TONE_OF_VOICE,name:r("feature_carousel_item_tone_of_voice_name"),description:(0,C.jsx)(y.cC,{i18nKey:r("feature_carousel_item_tone_of_voice_description")}),onClick:function(){i({source:o?"tab-view":"sidebar",windowId:a,text:r("feature_carousel_item_tone_of_voice_action"),id:(0,S.F0)()})}},{id:c.t5.ANALYZE_AND_EDIT,name:r("feature_carousel_item_analyze_and_edit_name"),description:(0,C.jsx)(y.cC,{i18nKey:r("feature_carousel_item_analyze_and_edit_description")}),onClick:function(){i({source:o?"tab-view":"sidebar",windowId:a,text:r("feature_carousel_item_analyze_and_edit_action"),id:(0,S.F0)()})}},{id:c.t5.QUICK_SUMMARIES,name:r("feature_carousel_item_quick_summaries_name"),description:(0,C.jsx)(y.cC,{i18nKey:r("feature_carousel_item_quick_summaries_description")}),onClick:function(){i({source:o?"tab-view":"sidebar",windowId:a,text:r("feature_carousel_item_quick_summaries_action"),id:(0,S.F0)()})}}],_=(0,l.useMemo)((function(){return[x[x.length-1]].concat((0,m.Z)(x),[x[0]])}),[x]),k=(0,l.useState)(_.findIndex((function(e){return e.id===c.t5.COMPOSE}))),O=(0,v.Z)(k,2),A=O[0],E=O[1],I=function(e){return function(){var t;E((function(r){switch(e){case"left":return t=r-1<=0?x.length:r-1,n(_[t].id),t;case"right":return t=r+1>x.length?1:r+1,n(_[t].id),t}}))}};return(0,c.Xp)(c.gi.WELCOME_PAGE_CHANGE_CARD,(function(e){var t=c.t5.EMAIL,r=c.t5.EXPERT_TRANSLATION,a=c.t5.GRAMMAR_CHECK,o=c.t5.QUICK_SUMMARIES,i=c.t5.ANALYZE_AND_EDIT,s=c.t5.TONE_OF_VOICE;switch(e){case t:case r:case a:case o:case i:case s:var l=[].concat(j);w((function(){return l})),E(l.findIndex((function(e){return e.id===c.t5.ANALYZE_AND_EDIT}))+1),n(i);break;default:E(_.findIndex((function(t,n){return t.id===e&&0!==n&&n!==_.length-1})))}})),(0,C.jsxs)("div",{className:"features-carousel mb-aria-8 flex h-full flex-col",children:[(0,C.jsx)("div",{className:"flex-grow"}),(0,C.jsxs)("div",{className:"carousel relative flex flex-grow items-center justify-center",children:[(0,C.jsx)(D.hU,{border:!0,className:"absolute -left-[35%] z-10",icon:(0,c.o6)({icon:Kr,operaGx:{icon:Ur},operaAir:{icon:Vr}},"icon"),type:"secondary",onClick:I("left")}),_.map((function(e,t){var n=t===A,r=t===A+1,a=t===A-1;return(0,C.jsx)(Fr,{isActive:n,isNext:r,isPrevious:a,item:e},"carousel-item-".concat(t))})),(0,C.jsx)(D.hU,{border:!0,className:"absolute -right-[35%] z-10 rotate-180",icon:(0,c.o6)({icon:Kr,operaGx:{icon:Ur},operaAir:{icon:Vr}},"icon"),type:"secondary",onClick:I("right")})]})]})};var zr=n(22196);const Yr=n.p+"assets/6912698b643838d06158.svg";var qr=n(75282);const Xr=function(){return(0,C.jsx)("div",{id:"aria_logo",className:"h-8 w-8 leading-8",children:(0,C.jsx)(E.S,{config:{operaOne:{icon:Yr,color:"default"},operaGx:{icon:qr}},size:32})})},$r=n.p+"assets/08a88cdde60e844bacbd.svg";const Qr=function(e){var t=e.title,n=e.description,r=(0,u.J7o)().currentModel,a=(0,c.o6)({title:"mt-2",description:"",showLogo:!0,showArrowIcon:!1,operaGx:{description:"text-text-t2-text-secondary"},operaAir:{description:"text-text-t2-text-secondary"}},["title","showLogo","showArrowIcon","description"]);return(0,C.jsxs)("div",{className:"text-header-xxl z-1 select-none px-aria-7 pt-aria-7 text-text-t1-text-active-icons",children:[a.showLogo&&(0,C.jsx)(Xr,{}),(0,C.jsx)("p",{className:(0,S.AK)("uppercase",a.title),children:t}),(0,C.jsx)("div",{className:(0,S.AK)("text-header-xl mb-aria-4 mt-1",a.description),children:n}),"Aria"===r&&(0,C.jsx)("div",{id:"models-used",className:"text-header-s flex gap-aria-4 text-text-tb",children:Object.entries(Xt.Ad).map((function(e){var t=(0,v.Z)(e,2),n=t[0],r=t[1];return(0,C.jsx)("div",{className:"rounded-aria-radius-2 bg-primary-p1-cobalt-buttons px-aria-3 py-aria-2 normal-case",children:r},n)}))}),a.showArrowIcon&&(0,C.jsx)("div",{className:"mb-5 h-9 w-3",children:(0,C.jsx)(E.S,{src:$r,width:11,height:36,color:"default"})})]})};function Jr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ea(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jr(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const ta=function(e){var t=e.shadowEffectClasses,n=e.shadowEffectGradient,r=e.shapesClasses;return(0,C.jsx)("div",{className:(0,S.AK)("absolute inset-x-0 top-0 z-0 h-full",(0,c.o6)({logoShapeWrapper:{operaGx:"bg-levels-l0-extension-bg"}},"logoShapeWrapper")),children:(0,C.jsxs)("svg",{viewBox:"0 0 845 744",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,C.jsx)("g",{filter:"url(#filter0_f_105_16361)",children:(0,C.jsx)("path",{className:n?void 0:(0,S.AK)(t),fill:n?"url(#shadowEffectGradient)":"",d:"M548.289 227.337C495.446 284.283 428.281 339.83 394.016 314.141C359.751 288.453 357.634 181.159 321.187 108.499C284.526 36.3634 213.159 -1.32313 197.871 -66.0695C181.995 -130.477 221.986 -221.42 277.215 -309.883C332.445 -398.346 402.325 -483.99 481.389 -515.44C560.24 -546.366 648.112 -523.807 680.114 -450.196C712.327 -377.108 688.294 -253.152 679.09 -160.239C669.509 -67.5116 674.169 -5.48844 657.263 54.0797C640.356 113.648 601.296 171.1 548.289 227.337Z"})}),(0,C.jsx)("path",{d:"M488.116 -105.991H473.215C441.051 -105.991 420.922 -67.3482 436.952 -36.3732L617.226 311.988C633.21 342.878 673.257 343.111 689.532 312.409L769.54 161.483C777.245 146.95 777.254 128.92 769.565 114.377L736.581 51.9915C684.835 -45.8804 590.296 -105.991 488.116 -105.991Z",className:(0,S.AK)(r)}),(0,C.jsx)("path",{d:"M460.066 250.178L386.785 110.562C371.807 82.025 334.572 82.0112 319.576 110.537L5.59781 707.812C-1.45194 721.223 -1.43095 737.796 5.65275 751.184L78.8125 889.461C93.84 917.864 130.946 917.83 145.931 889.4L460.03 293.463C467.077 280.092 467.091 263.562 460.066 250.178Z",className:(0,S.AK)(r)}),(0,C.jsxs)("defs",{children:[(0,C.jsxs)("filter",{id:"filter0_f_105_16361",x:"84.3606",y:"-638.911",width:"722.013",height:"1069.5",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,C.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,C.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,C.jsx)("feGaussianBlur",{stdDeviation:"55",result:"effect1_foregroundBlur_105_16361"})]}),n&&(0,C.jsx)("linearGradient",ea(ea({id:"shadowEffectGradient"},null==n?void 0:n.gradientProps),{},{children:n.gradientColorsProps.map((function(e,t){var n;return(0,C.jsx)("stop",ea({},e),null!==(n=e.id)&&void 0!==n?n:"shadow-effect-gradient-color-".concat(t))}))}))]})]})})};const na=function(){var e=(0,u.YZY)().isGx;return(0,C.jsx)("div",{className:"bottom-gradient fixed bottom-0 left-0 right-0 -z-1 mx-auto h-[25vh] w-full blur-[90px]",children:e?(0,C.jsx)("svg",{viewBox:"0 0 1111 513",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"mx-auto w-tab-view",children:(0,C.jsx)("g",{children:(0,C.jsx)("ellipse",{className:"fill-classic-gx-a-100",cx:"555.5",cy:"783.88",rx:"511.264",ry:"474.588",transform:"rotate(-90 555.5 783.88)",fillOpacity:"0.4"})})}):(0,C.jsx)("svg",{className:"mx-auto w-tab-view",viewBox:"0 0 584 250",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,C.jsxs)("g",{children:[(0,C.jsx)("g",{children:(0,C.jsx)("path",{d:"M432.024 137.906C456.255 161.744 453.288 214.387 459.222 302.787C465.651 390.691 481.475 513.856 437.463 549.613C393.451 584.874 289.603 532.728 242.624 468.662C195.645 405.094 206.03 329.606 213.942 278.949C221.855 228.293 227.789 202.964 242.13 181.113C256.965 159.261 280.207 141.879 318.285 130.456C355.868 119.034 407.792 114.067 432.024 137.906Z",fill:"#FE57BE"})}),(0,C.jsx)("g",{children:(0,C.jsx)("path",{d:"M178.454 287.861C194.736 273.673 215.71 260.12 227.307 267.585C238.903 275.05 241.373 303.646 254.46 323.652C267.608 343.524 291.499 354.862 297.557 372.375C303.801 389.808 292.272 413.281 275.735 435.814C259.198 458.347 237.839 479.861 212.586 486.783C187.394 493.569 158.373 485.955 146.72 465.776C135.006 445.733 140.784 413.182 142.244 388.621C143.829 364.116 141.281 347.523 145.804 331.978C150.327 316.434 162.107 301.858 178.454 287.861Z",fill:"#FF7846"})}),(0,C.jsx)("g",{children:(0,C.jsx)("path",{d:"M158.918 140.54C176.392 125.312 198.902 110.766 211.348 118.778C223.793 126.79 226.444 157.48 240.49 178.952C254.6 200.278 280.241 212.447 286.742 231.242C293.444 249.952 281.071 275.143 263.323 299.327C245.575 323.51 222.651 346.6 195.549 354.028C168.512 361.312 137.366 353.14 124.859 331.483C112.288 309.972 118.489 275.037 120.055 248.678C121.756 222.379 119.022 204.57 123.876 187.887C128.731 171.204 141.374 155.561 158.918 140.54Z",fill:"#00FFE0"})}),(0,C.jsx)("g",{children:(0,C.jsx)("path",{d:"M248.28 172.7C238.752 151.961 255.376 124.793 278.555 120.433C301.602 116.147 331.279 134.799 350.54 147.13C369.877 159.592 378.854 165.527 384.016 172.973C389.177 180.419 390.522 189.375 400.709 203.128C410.69 216.827 429.458 235.527 428.941 249.384C428.555 263.166 408.754 272.18 389.788 276.017C370.692 279.93 352.431 278.667 342.41 268.816C332.335 259.17 330.556 240.73 311.929 224.381C293.227 207.902 257.753 193.645 248.28 172.7Z",fill:"#1977EA"})})]})})})};const ra=function(e){var t=e.isNewChat,n=e.isAriaInTabView,r=e.children,a=e.disableSidebarClass,o=(0,u.ND1)().isAriaPinned,i={background:"bg-surface-chatbot",operaGx:{product:"gx",background:"bg-other-o7"},operaAir:{product:"air"}};return(0,C.jsx)("div",{className:(0,S.AK)("opera-chatbot h-screen border-transparent focus:border-transparent focus:ring-0",n&&o?"sm:w-screen":"w-screen",(0,c.o6)(i,"product"),(0,c.o6)(i,"background"),t?"new-chat":"bg-right-gradient",!n&&!a&&"sidebarless:w-full-menu-dependent"),children:r})};var aa=n(25079),oa=n(60386);function ia(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ia(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ia(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const ca=function(e){var t,n,r,a,o=e.conversation,i=e.conversationId,s=e.conversationSource,f=e.setConversationId,p=e.menuStatus,g=e.setMenuStatus,x=e.addNewChat,_=e.createTimestamp,k=(0,y.$G)().t,O=(0,c.Su)().loggerService,A=(0,c.rg)().currentWindowId,E=(0,u.YZY)(),I=E.isGx,N=E.isOperaOne,T=(0,c.Cg)().consentNeeded,R=(0,c.oH)().isAriaInTabView,M=(0,ae.UO)().conversationId,P=(0,ae.s0)(),G=(0,u.ljr)().remoteConfig,L=(0,u.B9q)().newConversationRequest,B=(0,u.coc)().chatContext,H=(0,u.kGW)(i).reusableHighlights,F=(0,u.bCg)().highlightsReadyToRender,K=(0,u._gZ)().setContextType,U=(0,u.MII)().isLocalModelsEnabled,V=(0,u.hsz)().feedbackData,W=(0,u.RCK)().isAccountLessUser,z=(0,u.J7o)(),Y=z.currentModel,q=z.fetchedModels,X=z.localModels,$=(0,u.ek)().upgradeBannerSeenInSidebar,Q=(0,u.Itl)().checkIfExistInRegistry,J=(0,u.uEF)().setRenderHighlightsReady,ee=(0,u.aGe)(),te=ee.clearChatContext,ne=ee.setChatContext,re=(0,u.L6l)().handleCleanConversationRequest,oe=(0,u.oiy)().handleUpgradeBannerSeenInSidebar,ie=(0,l.useState)(""),se=(0,v.Z)(ie,2),ce=se[0],le=se[1],ue=(0,l.useState)(!1),fe=(0,v.Z)(ue,2)[1],pe=(0,l.useState)(!1),he=(0,v.Z)(pe,2),ve=he[0],ge=he[1],xe=(0,l.useState)(!1),be=(0,v.Z)(xe,2),ye=be[0],we=be[1],je=(0,l.useState)(null),_e=(0,v.Z)(je,2),Ce=_e[0],ke=_e[1],Oe=(0,l.useState)(!1),Se=(0,v.Z)(Oe,2),Ae=Se[0],Ee=Se[1],Ie=(0,l.useState)(!1),Ne=(0,v.Z)(Ie,2),Te=Ne[0],Re=Ne[1],Me=(0,l.useRef)(null),Pe=(0,l.useRef)(null),De=(0,l.useRef)(new Map),Ge=(0,l.useRef)(H.length),Le=it({conversationId:i,conversation:o}),Be=Le.isAriaModel,Ze=Le.parsedModelName,He=Le.isCloudModel,Fe=(0,Br.r)(Pe,B.working,Ae),Ke=Fe.autoScrollHandler,Ue=Fe.autoScroll,Ve=R?w.hG.BROWSER_TAB:w.hG.SIDEBAR,We=H.map((function(e){return e.title})),ze=(0,bn.Z)({conversationId:i,conversation:o,setConversationId:f,setMessage:le,highlightedTexts:We}),Ye=ze.sendMessage,qe=ze.responseInProgress,Xe=o.data.filter((function(e){return e.sender===w.CI.user})),$e=null!==Ce&&Xe.length?Xe[Ce]:null,Qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k("new_chat");o.label=e,o.labelTmp=!0};(0,l.useEffect)((function(){var e=!("selected-content-prompt"===(null==L?void 0:L.message.source));if(L)if(e)if(L.message.id===i){switch(g(!1),L.message.source){case"selected-content-prompt":K(w.hG.HIGHLIGHT);break;case"command-line":K(w.hG.COMMAND_BAR);break;default:K(R?w.hG.BROWSER_TAB:w.hG.SIDEBAR)}e&&(re(A),Ye(sa({},L.message)))}else f(L.message.id);else if("selected-content-prompt"===L.message.source)return K(w.hG.HIGHLIGHT),void(0,d.z4)();R&&M!==i&&P("/".concat(i===c.$M?"":i))}),[L,i,R]),(0,l.useEffect)((function(){var e=Array.from(De.current.values()).pop();if(!!H.length&&Ge.current<H.length&&Pe.current&&e){var t,n=new DOMRect,r=(null===(t=Pe.current)||void 0===t?void 0:t.getClientRects().item(0))||n;(e.getClientRects().item(0)||n).top>r.bottom||(0,S.hB)(e,{block:"end"})}Ge.current=H.length}),[H.length]),(0,l.useEffect)((function(){if(Ee(!0),null!==$e){var e=$e.id,t=De.current.get(e);t&&(0,S.hB)(t,{block:"nearest"})}else tt(),Ee(!1)}),[$e]),(0,l.useEffect)((function(){o.label||Qe()})),(0,l.useEffect)((function(){fe(Boolean(B.conversationId&&i&&i!==B.conversationId))}),[B,ne,te,B.conversationId,B.messageId,i]);var Je=(0,c.FL)({currentModel:Y,conversation:o}),et=(0,l.useMemo)((function(){if(o.model){var e=X.map((function(e){return e.name})).includes(o.model),t=!Be&&Q(o.model),n="Aria"===o.model;if(!e&&!t||!U&&!n&&!t)return!0}var r=new Date,a=new Date(o.lastMessageTime);return Math.floor((r.valueOf()-a.valueOf())/(24*c.kr))>=30&&""!=o.lastMessageTime}),[o.id,o.lastMessageTime,Y,o.model,X,Q]),tt=(0,l.useCallback)((function(){o.mode===ot.E.pageContext||o.mode===ot.E.writingMode?(0,S.Cp)(Pe,"instant"):(0,S.Mx)(Pe,"instant")}),[o.mode]);o.label||Qe(),(0,l.useEffect)(tt,[F,o.data.length]),(0,l.useEffect)((function(){function e(e){var t=e.key;"F1"===t&&ge((function(e){return!e})),"F2"===t&&we((function(e){return!e}))}return Ue||null!==Ce||tt(),(0,S.BB)()||window.addEventListener("keydown",e),function(){(0,S.BB)()||window.removeEventListener("keydown",e)}}),[]),(0,l.useEffect)((function(){if(o.data.length>2){var e=R?w.hG.BROWSER_TAB:w.hG.SIDEBAR;K(e)}}),[o,R,K]),(0,l.useEffect)((function(){var e=function(){var e=(0,h.Z)(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:te(!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return window.addEventListener("beforeunload",e),function(){window.removeEventListener("beforeunload",e)}}),[te]);var nt=(0,l.useState)(!1),rt=(0,v.Z)(nt,2),at=rt[0],st=rt[1];(0,l.useEffect)((function(){st(!(Ue&&qe))}),[o.data.length,Ue,qe]),(0,l.useEffect)((function(){var e=o.data.length>2;Te&&e&&oe(!0)}),[oe,Te,o.data.length]),(0,l.useEffect)((function(){function e(e,t,n){e===c.SG&&!t&&Te&&A===n&&oe(!0)}return opr.browserSidebarPrivate.onItemPanelVisibilityChanged.addListener(e),function(){opr.browserSidebarPrivate.onItemPanelVisibilityChanged.removeListener(e)}}),[A,oe,Te]);var ct,lt=(0,l.useCallback)((function(e){le(e),ke(null)}),[]),ut=function(e,t){e?De.current.set(t,e):De.current.delete(t)},dt=!et,ft=0===(null==o||null===(t=o.data)||void 0===t?void 0:t.length),mt=(null===(n=o.data.at(-1))||void 0===n||n.suggestions,(null==o?void 0:o.mode)===ot.E.pageContext),ht=(null==o?void 0:o.mode)===ot.E.writingMode,vt=ft&&void 0===(null==L?void 0:L.message),gt=!ft&&W&&!$,xt=(0,l.useState)(""),bt=(0,v.Z)(xt,2),yt=bt[0],wt=bt[1],jt=(0,l.useCallback)((function(e){Re(e),e||oe(!0)}),[oe]);return(0,C.jsx)(ra,{isNewChat:vt,isAriaInTabView:!!R,children:(0,C.jsx)(c.Lz.Provider,{value:o,children:(0,C.jsxs)("div",{id:"opera-chatbot-container",className:"opera-chatbot-container relative flex h-full w-full flex-col overflow-hidden p-0 transition-all duration-300 ease-in",children:[ve&&(0,C.jsx)(fn,{}),ye&&(0,C.jsx)(xn,{setRemoteConfigOverrideAvailable:we}),(0,C.jsx)(sn,{conversation:o,setMenuStatus:g,addNewChat:x,conversationId:i,conversationTitle:o.label,isAnimated:Boolean(o.isLabelGenerated)&&Boolean(!o.isAnimated),menuStatus:p,onAnimationFinish:function(){(0,pt.X1)(i,{isAnimated:!0})}}),(0,C.jsx)(D.P_,{}),(0,C.jsxs)("div",{className:(0,S.AK)("wrapper relative z-1 flex w-full grow flex-col overflow-x-hidden overflow-y-hidden",R&&"z-1 m-auto max-w-tab-view px-3"),children:[vt&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(ta,{shadowEffectClasses:"fill-[--aria-bg-shape-shadow-color]",shapesClasses:"fill-[--aria-bg-shape-fill-color]",shadowEffectGradient:I?{gradientColorsProps:[{id:"start-color",offset:"60.83%",stopColor:"var(--aria-bg-shape-shadow-start-color)"},{id:"stop-color",offset:"76.63%",stopColor:"var(--aria-bg-shape-shadow-stop-color)"}],gradientProps:{gradientTransform:"rotate(102)"}}:void 0}),(0,C.jsx)(Qr,{description:yt||("Aria"===Y?k("chat_lead_in"):(0,C.jsx)(j.Z,{message:null!==(r=null===(a=null===(ct=q.find((function(e){return e.family_name===(0,S.zn)(Y).split(":")[0]})))||void 0===ct?void 0:ct.description)||void 0===a?void 0:a.trim())&&void 0!==r?r:"",components:{ul:zr.Tf}})),title:"Aria"===Y?k("product_name.opera"):(0,S.zn)(Y)}),"Aria"===Y&&(0,C.jsx)(Wr,{adjustChatLeadingDescription:function(e){var t=c.t5.EXPERT_TRANSLATION,n=c.t5.GRAMMAR_CHECK,r=c.t5.QUICK_SUMMARIES,a=c.t5.ANALYZE_AND_EDIT,o=c.t5.TONE_OF_VOICE;switch(e){case t:case n:case r:case a:case o:wt(k("write_edit_refine"));break;default:wt("")}}})]}),(0,C.jsxs)("div",{ref:Pe,id:"messages-container",className:(0,S.AK)("messages z-1",ft?"w-[101%] !px-0":"pl-3 pr-1.5",!(ft&&I)&&"messages-container hover-scrollbar",function(){if(o.data.length)return G.local_models&&U?"mt-2":"mt-0"}()),onScroll:Ke,children:[!ft&&Be&&(0,C.jsx)(ln,{}),(0,C.jsx)(Lr,{onContentHighlighterError:function(e){O.error("CONTENT HIGHLIGHTER ERROR",e),O.info("SETTING HIGHLIGHTS TO NOT RENDER"),J(!1),O.info("REMOVING HIGHLIGHTED SPANS"),Jn(Pe.current),J(!0),O.info("HIGHLIGHTS CAN BE RENDERED")},children:(0,C.jsxs)(Nr,{messagesContainerRef:Pe,conversation:o,readOnly:et,children:[!ft&&(0,C.jsxs)(C.Fragment,{children:[Be&&mt&&(0,C.jsx)(de,{id:"conversation_in_context_mode",sender:w.CI.aria,message:k("conversation_in_context_mode"),noExtraButtons:!0,responseInProgress:qe,contextType:Ve,originLink:o.originLink,addNewChat:x,conversationSource:s}),Be&&ht&&(0,C.jsx)(de,{id:"conversation_in_writing_mode",sender:w.CI.aria,message:k("conversation_in_writing_mode"),noExtraButtons:!0,responseInProgress:qe,contextType:Ve,originLink:o.originLink,addNewChat:x,conversationSource:s}),!Be&&(0,C.jsx)(de,{id:"local_model_disclaimer_message",sender:w.CI.localModel,message:He?k("cloud_model_input_disclaimer",{modelName:Ze}):k("local_model_disclaimer_message"),noExtraButtons:!0,responseInProgress:qe,contextType:Ve,addNewChat:x,conversationSource:s})]}),o.data.reduce((function(e,t,n){var r=o.data[n-1],a=o.data[n+1],c=(0,l.createElement)(de,sa(sa({},t),{},{ref:function(e){return ut(e,t.id)},key:t.id,isLastMessage:!a,onRetry:!et&&!t.isRetryDisabled&&function(){Ye({text:t.message,source:R?"tab-view":"sidebar",files:t.files}),(0,S.X0)(Pe)},responseInProgress:qe,contextType:Ve,conversationSource:s,isActive:t===$e,addNewChat:x,withNewFactsIndicator:null==a?void 0:a.new_facts_remembered})),u=T&&(0,C.jsx)(de,{id:"consents",sender:w.CI.aria,message:k("consent_header"),noExtraButtons:!0,responseInProgress:qe,contextType:Ve,originLink:o.originLink,addNewChat:x,conversationSource:s,children:(0,C.jsx)(oa.H,{handleSendMessage:function(){return function(e){Ye({text:e.message,source:R?"tab-view":"sidebar",files:e.files,isForce:!0})}(t)},source:R?"tab-view":"sidebar"})},"consents-".concat(n));return t.sender===w.CI.user&&a&&a.sender===w.CI.aria?[].concat((0,m.Z)(e),[(0,C.jsx)(Z.fx,{render:function(e){var r=e.handleScreenshotClipboard,u=e.clipboardPending;return(0,C.jsxs)(l.Fragment,{children:[c,(0,l.createElement)(de,sa(sa({},a),{},{key:a.id,ref:function(e){return ut(e,a.id)},isLastMessage:o.data.length===n+2,onRetry:!et&&!t.isRetryDisabled&&function(){Ye({text:t.message,source:R?"tab-view":"sidebar",files:t.files}),(0,S.X0)(Pe)},responseInProgress:qe,contextType:Ve,conversationId:i,conversationSource:s,isActive:a.id===(null==$e?void 0:$e.id),handleScreenshotClipboard:r,screenshotClipboardPending:u,model:o.model,addNewChat:x}))]})}},"".concat(t.id,"-").concat(a.id)),(null==V?void 0:V.message_id)&&V.message_id===a.server_id&&(0,C.jsx)(Zr.x,{},V.message_id)]):t.sender===w.CI.aria&&r&&r.sender===w.CI.user?e:[].concat((0,m.Z)(e),[c,u])}),[])]})}),false,et&&(0,C.jsx)(un,{})]}),gt&&(0,C.jsx)(aa.Q,{onCloseButtonClick:function(){oe(!0)},source:R?"tab-view":"sidebar",onVisibilityChange:jt}),dt&&(0,C.jsx)(Ot,{imageHandlers:Je,messagesContainerRef:Pe,ref:Me,readOnly:et,addNewChat:x,setMessage:lt,sendMessage:function(e){Ye(e),ke(null)},message:ce,conversation:o,createTimestamp:_,onActiveUserMessageIndexChange:function(e){if(0!==Xe.length&&(null!==Ce||1!==e)){var t=Xe.length-1,n=null===Ce?t:Ce+e;n<0&&(n=0),n>t&&(n=null),ke(n),le(null===n?"":Xe[n].message)}},menuStatus:p,conversationId:o.id,setConversationId:f,disabled:Boolean(1===o.data.length)&&T}),dt&&N&&vt&&(0,C.jsx)(na,{}),at&&(0,C.jsx)(me,{conversationId:o.id,message:ce,inputRef:Me,messagesContainerRef:Pe,isUpgradeBannerVisible:gt})]})]})})})};var la=n(7492),ua=n(34134),da=n(72781),fa=n(30538),pa=n(92255),ma=n(62013),ha=n(40757),va=n(14861);const ga=function(e){var t=e.isListUnderProfileSection,n=e.profileSectionRef,r=(0,u.RCK)(),a=r.authUserDetails,o=r.authStatus,i=r.isAccountLessUser,s=(0,y.$G)().t,l={iconSize:28,operaAir:{iconSize:32,padding:"pl-2"},borderColor:{operaOne:"border-stroke-components",operaGx:"border-classic-gx-no-80 dark:border-classic-gx-no-32"},profileIcon:{operaOne:"rounded-aria-radius-3",operaGx:"rounded-aria-radius-2",operaAir:"rounded-full"},profileIconLoggedIn:{operaOne:ma,operaGx:va,operaAir:ha},profileIconNotLoggedIn:{operaOne:i?da:ma,operaGx:i?pa:va,operaAir:i?fa:ma}},d=(0,c.o6)(l,["iconSize","borderColor","profileIconLoggedIn","profileIconNotLoggedIn","profileIcon","padding"]);return(0,C.jsx)("div",{className:(0,S.AK)(t?"border-t":"","notLoggedIn"===o&&"flex flex-grow items-end","mb-3.5 border-0 border-solid",d.borderColor),ref:n,children:(0,C.jsxs)(Z.zx,{type:"menu",onClick:ua.Wu,onKeyUp:ua.Wu,tabIndex:-1,className:(0,S.AK)("text-subheader-s flex h-12 w-full justify-start gap-2",d.padding),children:[(0,C.jsx)(N.P,{sender:ie.CI.user}),a&&a.email!==c.aK?(0,C.jsx)("p",{className:"text-body-m truncate",title:(null==a?void 0:a.fullname)||(null==a?void 0:a.email),children:(null==a?void 0:a.fullname)||(null==a?void 0:a.email)}):(0,C.jsxs)("div",{className:"flex flex-col items-start",children:[(0,C.jsx)("p",{className:"text-xs text-text-t1-text-active-icons",children:s("anonymous_account")}),(0,C.jsx)("p",{className:"text-xxs text-text-t1-text-active-icons opacity-80",children:s("anonymous_account_description")})]})]})})};function xa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ba(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xa(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ya=function(){var e=(0,l.useState)(!1),t=(0,v.Z)(e,2),n=t[0],r=t[1],a=(0,Ze.YF)({open:n,onOpenChange:r}),o=a.refs,i=o.setFloating,s=o.setReference,c=a.context,u=(0,Ze.eS)(c),d=(0,Ze.qs)(c),f=(0,Ze.bQ)(c,{outsidePressEvent:"mousedown"}),p=(0,Ze.NI)([u,d,f]),m=p.getReferenceProps,h=p.getFloatingProps,g=ba({ref:s},m()),x={open:n,context:c,floatingProps:ba({ref:i},h())},b=(0,l.useCallback)((function(){r(!1)}),[r]),y=(0,l.useCallback)((function(){r(!0)}),[r]);return{referenceProps:g,dialogProps:x,open:n,onOpenChange:r,closeDialog:b,openDialog:y}},wa=function(e){var t=e.open,n=e.context,r=e.floatingProps,a=e.children,o=(0,c.o6)({overlayBackground:{operaOne:"bg-[--opera-confirmation-popup-background]",operaAir:""}},["overlayBackground"]);return(0,C.jsx)(Ze.ll,{children:t&&(0,C.jsx)(Ze.y0,{className:(0,S.AK)("z-10 grid place-items-center",o.overlayBackground),lockScroll:!0,children:(0,C.jsx)(Ze.wD,{context:n,children:(0,C.jsx)("div",ba(ba({className:"rounded"},r),{},{children:a}))})})})};function ja(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ja(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ja(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ca=function(e){var t=e.dialogProps,n=e.title,r=e.message,a=e.confirmMessage,o=e.cancelMessage,i=e.onConfirm,s=e.onCancel,l=(0,c.o6)({buttonsRow:"gap-aria-4",operaAir:{container:"air-level-02",buttonsRow:"gap-aria-5"}},["container","buttonsRow"]);return(0,C.jsx)(wa,_a(_a({},t),{},{children:(0,C.jsxs)("div",{className:(0,S.AK)("box-border flex h-auto w-93 flex-col items-center justify-center gap-4 break-words rounded-aria-radius-5 bg-levels-l5-primary p-aria-6",l.container),children:[(0,C.jsxs)("div",{className:"text-body-l w-full text-text-t1-text-active-icons",children:[!!n&&(0,C.jsx)("div",{children:n}),(0,C.jsx)("span",{children:r})]}),(0,C.jsxs)("div",{className:(0,S.AK)("flex w-full select-none flex-row",l.buttonsRow),children:[(0,C.jsx)(Z.zx,{type:"secondary",className:"w-full",onClick:s,size:"s",children:o}),(0,C.jsx)(Z.zx,{type:"primary",className:"w-full",onClick:i,size:"s",children:a})]})]})}))};const ka=n.p+"assets/d8c997123e645906d03c.svg",Oa=n.p+"assets/745aeb76875985654993.svg",Sa=n.p+"assets/367eb723245679db4a93.svg",Aa=n.p+"assets/e80d62dbaf8610c53477.svg",Ea=n.p+"assets/13023af6cd2fb4db9fb2.svg",Ia=n.p+"assets/fb3d676cda79cd750559.svg",Na=n.p+"assets/0246e88ab3b60542f582.svg",Ta=n.p+"assets/0df5751a13a271ffc000.svg";var Ra=n(13771),Ma=n(53979);const Pa=function(e){var t=e.provider,n=e.logoConfig,r=e.text,a=e.customClassName,o=(0,u.fvp)().networkEnvironment,i=(0,u.HhX)().setAccountlessLoginData,s=(0,c.oH)().isAriaInTabView,d=(0,l.useCallback)((function(){var e=s?ie.hG.BROWSER_TAB:ie.hG.SIDEBAR;i({context:e,initTime:Date.now(),source:"side_menu_".concat(t)}),(0,oe.vH)({action:ie.VV.CLICK,context:e,element:ie.Y3.ONBOARDING,str_value:"start:log_in:side_menu_".concat(t)}),(0,Ma.RB)((0,Me.B9)(t,o))}),[s,o,t,i]);return(0,C.jsxs)(D.zx,{type:"secondary",className:(0,S.AK)("text-button-m flex w-full flex-row gap-2 px-4 py-2",a),onClick:d,children:[(0,C.jsx)(E.S,{config:n,className:"h-5 w-5"}),r]})};const Da=function(){var e=(0,c.o6)({operaOne:{light:Ta,dark:Na}}),t=(0,y.$G)().t,n={border:"border border-stroke-components",separator:"border-t border-stroke-components my-2",padding:"p-4",rounded:"rounded-aria-radius-3",operaAir:{rounded:"rounded-aria-radius-4"}};return(0,C.jsxs)("div",{className:(0,S.AK)("mt-4 flex max-w-sm flex-col items-center gap-2 text-text-t1-text-active-icons",(0,c.o6)(n,"rounded"),(0,c.o6)(n,"border"),(0,c.o6)(n,"padding")),children:[(0,C.jsx)("div",{className:"mb-2",children:t("log_in_to_enable_chat_history")}),(0,C.jsx)(Pa,{provider:Ra.FU.EMAIL,text:t("log_in_via_email"),logoConfig:{icon:e,color:"var(--text-t1-text-active-icons)"},customClassName:"flex-row-reverse justify-between pr-3 text-button-m"}),(0,C.jsx)("div",{className:(0,S.AK)("w-full",(0,c.o6)(n,"separator"))}),(0,C.jsx)(Pa,{provider:Ra.FU.GOOGLE,text:"Google",logoConfig:{icon:ka,size:16,operaAir:{icon:Aa,color:"var(--text-t1-text-active-icons)"}}}),(0,C.jsx)(Pa,{provider:Ra.FU.APPLE,text:"Apple",logoConfig:{icon:Oa,size:16,operaAir:{icon:Ea,color:"var(--text-t1-text-active-icons)"}}}),(0,C.jsx)(Pa,{provider:Ra.FU.FACEBOOK,text:"Facebook",logoConfig:{icon:Sa,size:16,operaAir:{icon:Ia,color:"var(--text-t1-text-active-icons)"}}})]})};var Ga=(0,l.forwardRef)((function(e,t){var n=e.active,r=(0,l.useMemo)((function(){return{element:"w-4 h-4 flex-shrink-0",operaOne:{rounded:"rounded-[5px]",active:n?"bg-other-o1":"bg-secondary-s3-bg-icons"},operaGx:{rounded:"rounded-aria-radius-2",active:n?"bg-primary-p1-cobalt-buttons":"bg-secondary-s1-selected-stroke"},operaAir:{rounded:"rounded-full",active:n?"bg-other-o1":"bg-secondary-s2-tertiary-need-to-fix"}}}),[n]),a=(0,c.o6)(r,["element","rounded","active"]);return(0,C.jsx)("div",{className:(0,S.AK)(a.element,a.rounded,a.active),ref:t})}));const La=n.p+"assets/3cbf89edd72e893f6e28.svg";var Ba=n(65871);var Za={operaOne:Ba,operaAir:Ba,operaGx:n.p+"assets/d9a682e9e2baa3d6bfed.svg"};const Ha=function(e){var t=e.className,n=e.conversationId,r=(0,ae.oQ)(n?"/".concat(n):"/"),a=(0,u.J7o)().currentModel,o=(0,u.ND1)().isAriaPinned,i=function(){var e=(0,h.Z)(b().mark((function e(t){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.stopPropagation(),window.open("".concat(Ma.xm).concat(r)),chrome.tabs.query({windowId:chrome.windows.WINDOW_ID_CURRENT},(function(e){var t=e.find((function(e){return e.active}));t&&chrome.tabs.move(t.id,{index:e.length})})),(0,oe.vH)({action:ie.VV.CLICK,element:ie.Y3.CHAT,context:ie.hG.SIDEBAR,model:"Aria"===a?"Aria":"LocalModel",str_value:"switch_to:".concat(ie.hG.BROWSER_TAB)}),o){e.next=7;break}return e.next=7,(0,d.FM)();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=(0,c.o6)(Za);return(0,C.jsx)(Z.hU,{type:"tertiary",icon:s,className:(0,S.AK)("flex items-center","open-tab-view-icon",t),onClick:i,onKeyDown:i,tabIndex:-1,title:"Open Aria Tab view"})};var Fa={headerIconOffset:{operaOne:" px-aria-3",operaGx:"",operaAir:" px-aria-3"},closeIcon:{operaOne:Qt,operaAir:Qt,operaGx:en},closeSize:{operaOne:12,operaAir:12,operaGx:16},menuHeader:{operaOne:"dark:text-white",operaGx:""},menuTitle:{operaOne:"ml-1",operaGx:"ml-2",operaAir:"ml-2 text-text-t1-text-active-icons"},menuNewChat:{plusIcon:{icon:La,color:"var(--text-tb)",operaGx:{color:"var(--opera-gx-font-color)"}}}};const Ka=function(e){var t=e.onNewChatButtonClick,n=e.isTabViewAvailable,r=e.menuPinned,a=e.onExpandMenuIconClick,o=e.onExpandMenuIconKeyUp,i=(0,y.$G)().t,s=(0,c.o6)(Fa,["closeIcon","closeSize","menuHeader","menuTitle","headerIconOffset"]);return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{className:(0,S.AK)("mb-1 flex items-center justify-between pb-2",s.menuHeader),children:[(0,C.jsxs)("div",{className:(0,S.AK)("flex flex-row gap-aria-2",s.headerIconOffset),children:[(0,C.jsxs)("button",{onClick:t,className:"flex items-center",children:[(0,C.jsx)(N.P,{sender:ie.CI.aria,size:20,header:!0}),(0,C.jsx)("span",{className:(0,S.AK)(s.menuTitle,"text-header-m"),children:i("product_name.opera")})]}),n&&(0,C.jsx)(Ha,{className:"ml-aria-3"})]}),(0,C.jsx)("div",{className:"h-8 flex-grow"}),!r&&(0,C.jsx)(Z.hU,{border:!0,icon:s.closeIcon,type:"secondary",onClick:a,onKeyUp:o,tabIndex:-1,iconSize:s.closeSize})]}),(0,C.jsxs)(Z.zx,{type:"primary",className:"w-full justify-between",size:"m",onClick:t,children:[(0,C.jsx)("span",{children:i("new_chat")}),(0,C.jsx)(E.S,{config:Fa.menuNewChat.plusIcon})]})]})},Ua=n.p+"assets/fc38b7983fc16b181eff.svg";const Va=function e(t){var n=t.openSettingsHandler,r=(0,y.$G)().t;return(0,C.jsxs)(Z.zx,{type:"tertiary",tabIndex:0,onClick:n,className:"w-full space-x-2 self-center duration-200 ease-in-out",size:"m",testId:(0,S.wE)(e,"button","settings"),children:[(0,C.jsx)(E.S,{config:{icon:Ua,color:"var(--text-t1-text-active-icons)"}}),(0,C.jsx)("div",{children:r("settings")})]})},Wa=n.p+"assets/93a9746de1565a35ae92.svg",za=n.p+"assets/124b0bca1fa101be17ad.svg",Ya=n.p+"assets/1a2bb9f903b0d1bdf09f.svg",qa=n.p+"assets/5332e5f34690d12fd799.svg";var Xa={editIcon:{operaOne:Wa,operaGx:za},trashIcon:{operaOne:Ya,operaGx:qa}};const $a=function(e){var t=e.editId,n=e.elementPin,r=e.handleGoToConversation,a=e.id,o=e.isActive,i=e.isTabViewAvailable,s=e.label,l=e.onDeleteClick,u=e.onEditClick,d=e.serverId,f=e.setEditId,p=(0,c.o6)(Xa,["trashIcon","editIcon"]),m=function(){return r(a)};return t===a?(0,C.jsx)("div",{className:(0,S.AK)("flex !h-12 w-full items-center",p.editOuter),children:(0,C.jsx)(At,{id:a,setEditId:f,currentLabel:s})}):(0,C.jsx)(C.Fragment,{children:(0,C.jsx)(Z.j2,{type:"menu",className:(0,S.AK)("group","flex !h-12 w-full flex-row gap-1 !pr-2",o?"selected":""),tabIndex:-1,onClick:m,onKeyUp:m,children:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2 truncate",children:[n,(0,C.jsx)("span",{className:"text-body-m truncate",title:s,children:s})]}),(0,C.jsx)("div",{className:"hidden flex-grow group-hover:block"}),(0,C.jsxs)("div",{className:"hidden flex-row justify-end gap-1 group-hover:flex",children:[(0,C.jsx)(Z.hU,{className:"transition-all duration-200 ease-in-out",onClick:function(e){return function(e){e.stopPropagation(),l(a,d,s)}(e)},icon:p.trashIcon,type:"tertiary"}),(0,C.jsx)(Z.hU,{className:"transition-all duration-200 ease-in-out",onClick:function(e){return function(e){e.stopPropagation(),u(a)}(e)},tabIndex:-1,icon:p.editIcon,type:"tertiary"}),i&&(0,C.jsx)(Ha,{className:"transition-all duration-200 ease-in-out",conversationId:a})]})]})})})};function Qa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ja(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qa(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const eo=function(e){var t=e.conversationsData,n=e.conversationId,r=e.setConversationId,a=e.setMenuStatus,o=e.menuStatus,i=e.addNewChat,s=(0,y.$G)().t,d=(0,c.oH)().isAriaInTabView,f=ya(),p=ya(),m=(0,la.j)().handleSetIsContainerScrolling,g=(0,c.Au)().abortMessage,x=(0,ae.s0)(),w=(0,ae.TH)(),j=(0,ae.SN)(),_=(0,c.iP)().windowInnerWidth,k=(0,c.Su)().networkService,O=(0,u.ljr)().remoteConfig,A=(0,c.Su)().ariaVoiceReaderService,E=(0,u.lUI)().clearReusableHighlights,I=(0,l.useState)(null),N=(0,v.Z)(I,2),T=N[0],R=N[1],M=(0,l.useState)({id:"",serverId:"",label:""}),P=(0,v.Z)(M,2),D=P[0],L=P[1],B=(0,u.coc)().chatContext,Z=(0,u.RCK)(),H=Z.isAccountLessMode,F=Z.authStatus,K=Z.isLoading,U=(0,l.useRef)(null),V=(0,l.useRef)(null),W=(0,l.useRef)(null),z=(0,l.useRef)(null),Y=(0,l.useRef)(null),q=(0,l.useCallback)((function(){void 0===d||d||a(!1)}),[d,a]),X=function(){"/settings"===w.pathname?q():(a(!1),x("/settings"))},$=function(){("/"!==w.pathname||d)&&x("/"),i()},Q=(0,l.useCallback)((function(e){r(e),E(),d||q()}),[n]),J=(0,Rt.F0)(),ee=J.showBottomBorder,te=J.showTopBorder,ne=J.containerRef,re=(0,Rt.OZ)(V,W,"bottom").isListUnder,oe=(0,Rt.OZ)(V,Y,"top").isListAbove,ie=function(e){Q(e),d?x("/".concat(e)):"/"!==w.pathname&&x("/")},se=function(){(0,S.yc)(V.current,re,oe)},ce=window.innerWidth>=c.Qx,le=function(){ce&&(se(),q())},ue=function(){var e=(0,h.Z)(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!B.working){e.next=3;break}return e.next=3,g(D.id);case 3:return t.forEach((function(e){var t=e.id;return(0,pt.g$)(t,A)})),e.next=6,(0,pt.Bn)(t,k);case 6:E(),$(),f.onOpenChange(!1);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),de=function(){var e=(0,h.Z)(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!B.working||B.conversationId!==D.id){e.next=3;break}return e.next=3,g(D.id);case 3:return e.next=5,(0,pt.g$)(D.id,A);case 5:return e.next=7,(0,pt.SJ)(D.id,D.serverId,k);case 7:E(),n===D.id&&$(),p.onOpenChange(!1);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),fe=function(){q(),$()},pe=O.tab_view&&!d;(0,l.useEffect)((function(){o&&se()}),[o]),(0,l.useEffect)((function(){var e,t=function(e,t){var n;n=t,e===c.SG&&n&&ce&&se(),q()};return null===(e=opr.browserSidebarPrivate)||void 0===e||e.onItemPanelVisibilityChanged.addListener(t),window.addEventListener("resize",le),function(){var e;window.removeEventListener("resize",le),null===(e=opr.browserSidebarPrivate)||void 0===e||e.onItemPanelVisibilityChanged.removeListener(t)}}),[]),(0,l.useEffect)((function(){var e=function(e){U.current&&!U.current.contains(e.target)&&(f.open||p.open||d||q())};return window.addEventListener("mousedown",e),function(){window.removeEventListener("mousedown",e)}}),[a,U,f.open,p.open,d,q]);var me=!d&&_>=c.Qx,he=(0,l.useMemo)((function(){return{menuWrapper:{operaOne:d?"border-r border-stroke-components bg-levels-l5-primary":"rounded-aria-radius-5 bg-levels-l5-primary",operaAir:d?"border-r border-stroke-components bg-levels-l0-extension-bg":me?"rounded-none bg-levels-l0-extension-bg":"rounded-aria-radius-4 bg-levels-l0-extension-bg",operaGx:"gx bg-levels-l5-primary"},menuWrapperBackdrop:{operaAir:"air-level-02"},menuContent:{operaOne:"border-stroke-components",operaGx:"border-classic-gx-no-80 dark:border-classic-gx-no-32"},menuHeader:{operaOne:"dark:text-white",operaGx:""},menuTitle:{operaOne:"ml-1",operaGx:"ml-2",operaAir:"ml-2 text-text-t1-text-active-icons"}}}),[d,me]),ve=(0,c.o6)(he,["menuWrapper","menuWrapperBackdrop","menuContent"]),ge=function(e,t,n){p.onOpenChange(!0),L({id:e,serverId:t,label:n})},xe=function(e){R(e)},be=function(){return a(!o)},ye=(0,S.AK)("menu-wrapper p-3",(o||ce)&&"menu-wrapper-active menu-shadow left-0",ve.menuWrapper,ve.menuWrapperBackdrop),we=(0,S.AK)(te?"border-b":"",ve.menuContent,"border-0 border-solid","menu-top-content");return K?(0,C.jsxs)("div",{className:ye,ref:U,children:[(0,C.jsx)("div",{className:we,ref:W,children:(0,C.jsx)(Ka,{onNewChatButtonClick:fe,isTabViewAvailable:pe,menuPinned:me,onExpandMenuIconClick:be,onExpandMenuIconKeyUp:be})}),(0,C.jsx)("div",{className:"flex flex-1 items-center justify-center",children:(0,C.jsx)(G.Z,{sizeClass:"h-9.5 w-9.5",spinnerColoring:"gray-accent"})}),(0,C.jsx)(Va,{openSettingsHandler:X})]}):(0,C.jsxs)(l.Fragment,{children:[(0,C.jsxs)("div",{className:ye,ref:U,children:[(0,C.jsxs)("div",{className:we,ref:W,children:[(0,C.jsx)(Ka,{onNewChatButtonClick:fe,isTabViewAvailable:pe,menuPinned:me,onExpandMenuIconClick:be,onExpandMenuIconKeyUp:be}),H?(0,C.jsx)(Da,{}):t.filter((function(e){return e.label})).length>0&&(0,C.jsxs)("div",{className:"mt-aria-3 flex select-none justify-end p-aria-3 pb-aria-2",children:[(0,C.jsx)("button",Ja(Ja({},f.referenceProps),{},{className:"text-body-m text-text-t1-text-active-icons",children:s("menu_delete_all")})),(0,C.jsx)(Ca,{dialogProps:f.dialogProps,message:s("menu_delete_all_messages_confirm"),confirmMessage:s("delete_all"),cancelMessage:s("cancel"),onCancel:function(){f.onOpenChange(!1)},onConfirm:ue})]})]}),!H&&(0,C.jsx)("div",{className:"hover-scrollbar -mr-1.5 flex-grow overflow-auto py-1",onScroll:m,ref:ne,tabIndex:-1,children:(0,C.jsx)("div",{className:"flex flex-col gap-1",ref:z,children:t.length>0&&t.filter((function(e){var t=e.isLabelGenerated,n=e.label,r=e.labelTmp;return Boolean(n||r||t)})).reverse().map((function(e){var t=e.id,r=e.label,a=e.server_id,o=j||[],i=(0,v.Z)(o,1)[0],s=t===n,c=i&&i.params.conversationId===t,l=s||c;return(0,C.jsx)($a,{editId:T,elementPin:(0,C.jsx)(Ga,{active:l,ref:l?V:null}),handleGoToConversation:ie,id:t,isActive:l,isTabViewAvailable:pe,label:r,serverId:a,onDeleteClick:ge,onEditClick:xe,setEditId:R},t)}))})}),"loggedIn"===F&&!H&&(0,C.jsx)(ga,{isListUnderProfileSection:ee,profileSectionRef:Y}),(0,C.jsx)(Va,{openSettingsHandler:X})]}),p.open&&(0,C.jsx)(Ca,{message:s("menu_delete_message_confirm")+'"'.concat(D.label,'"?'),confirmMessage:s("delete"),cancelMessage:s("cancel"),onCancel:function(){L({id:"",serverId:"",label:""}),p.onOpenChange(!1)},onConfirm:de,dialogProps:p.dialogProps})]})};n(16611);var to=n(7134),no={attributes:{source:"aria-extension"}};no.styleTagTransform=Oe(),no.setAttributes=je(),no.insert=ye().bind(null,"head"),no.domAPI=xe(),no.insertStyleElement=Ce();ve()(to.Z,no);to.Z&&to.Z.locals&&to.Z.locals;var ro=function(e){var t=e.checked,n=e.onClick,r=e.icon,a=e.name,o=e.children,i=e.className,s={button:(0,S.AK)("rounded-aria-radius-3 border",t?"border-primary-p1-cobalt-buttons hover:bg-primary-p3-disabled-buttons":"border-secondary-s1-selected-stroke hover:bg-secondary-s4-surface-overlay"),operaAir:{button:(0,S.AK)("rounded-aria-radius-4 bg-p3-disabled-buttons text-text-t1-text-active-icons",t?"bg-primary-p3-disabled-buttons border-transparent hover:border-secondary-s1-selected-stroke":"hover:border-transparent bg-transparent hover:bg-secondary-s4-surface-overlay border-secondary-s1-selected-stroke")}},l=(0,c.o6)(s,["button"]);return(0,C.jsxs)("button",{className:(0,S.AK)("text-header-m flex h-8 flex-shrink-0 items-center justify-center gap-2.5 border border-solid p-2.5 text-center",l.button,i),onClick:n,children:[r&&(0,C.jsx)("span",{className:"flex h-4 items-center text-base",draggable:"false",children:r}),o||(0,C.jsx)("span",{children:a})]})},ao=function(e){var t=e.index,n=e.task,r=(0,l.useRef)(null),a=(0,u.cpB)(),o=a.promptStudioConfig,i=a.promptStudioFormData,s=(0,u.nrG)().setPromptStudioFormData,d=t===i.taskIndex,f=function(){var e,n,r,a,i=null!==(e=null===(n=o[t])||void 0===n?void 0:n.fieldsets)&&void 0!==e?e:{},c=i.tonalities,l=void 0===c?[]:c,u=i.lengths,d=void 0===u?[]:u,f=null!==(r=null===(a=o[t])||void 0===a?void 0:a.defaults)&&void 0!==r?r:{},p=f.tonality,m=void 0===p?"":p,h=f.length,v=void 0===h?"":h,g=l.map((function(e){return e.id})).indexOf(m),x=d.map((function(e){return e.id})).indexOf(v);s({taskIndex:t,toneIndex:g,lengthIndex:x})};(0,l.useEffect)((function(){t===i.taskIndex&&f()}),[]);var p={chip:{operaGx:!d&&"border-text-t3-text-gray"},chipText:{operaGx:"text-text-t2-text-secondary"}},m=(0,c.o6)(p,["chip","chipText"]);return(0,C.jsxs)(l.Fragment,{children:[(0,C.jsx)("input",{ref:r,className:"peer hidden",type:"radio",name:"tasks",id:"radio-".concat(n.id),value:n.id,checked:d,onChange:f}),(0,C.jsx)(ro,{checked:d,onClick:function(e){e.preventDefault(),r.current&&r.current.click()},className:m.chip,children:(0,C.jsx)("span",{className:m.chipText,children:n.name})})]})};const oo=function e(t){var n=t.title,r=t.children,a=t.className;return(0,C.jsxs)("div",{className:(0,S.AK)("flex flex-col gap-aria-3",a),children:[n&&(0,C.jsx)("span",{"data-testid":(0,S.wE)(e,"span","title"),className:"text-header-s",children:n}),r]})};var io=function(){var e=(0,y.$G)().t,t=(0,u.cpB)().promptStudioConfig,n=void 0===t?[]:t,r=(0,c.o6)({container:"rounded-aria-radius-3 bg-levels-l3-cards"},["container"]);return(0,C.jsx)(oo,{title:e("tasks"),children:(0,C.jsx)("div",{className:(0,S.AK)(r.container,"flex flex-wrap gap-aria-3 p-aria-4"),children:(null==n?void 0:n.map)&&n.map((function(e,t){return(0,C.jsx)("div",{children:(0,C.jsx)(ao,{index:t,task:e})},e.id)}))})})};const so=function e(t){var n,r,a=t.isFormInvalid,o=t.isDisabled,i=(0,y.$G)().t,s=(0,u.cpB)(),l=s.promptStudioConfig,d=s.promptStudioFormData,f=(0,u.nrG)().setPromptStudioFormData,p=null!==(n=null===(r=l[d.taskIndex])||void 0===r?void 0:r.fieldsets.query)&&void 0!==n?n:{},m=p.id,h=void 0===m?"":m,v=p.max_length,g=void 0===v?c.tX:v,x=p.placeholder,b=void 0===x?i("chat_lead_in"):x,w=(0,c.o6)({descriptionBackground:"bg-levels-l3-cards",operaAir:{descriptionBackground:"bg-secondary-s2-tertiary-need-to-fix"}},["descriptionBackground"]);return(0,C.jsx)(oo,{title:"".concat(i("description")," (").concat(i("required"),")"),children:(0,C.jsx)("div",{className:(0,S.AK)(),children:(0,C.jsx)(Z.Kx,{testId:(0,S.wE)(e,"textarea","descriptionTextArea"),disabled:o,className:(0,S.AK)("h-28",w.descriptionBackground),invalid:a,name:h,maxLength:g,placeholder:b,onChange:function(e){e.preventDefault();var t=e.target.value;f({description:t})},defaultValue:d.description})})})};var co=function(e){var t,n,r,a=e.style,o=e.idx,i=(0,l.useRef)(null),s=(0,u.cpB)(),c=s.promptStudioConfig,d=s.promptStudioFormData,f=(0,u.nrG)().setPromptStudioFormData,p=(null!==(t=null===(n=c[d.taskIndex])||void 0===n?void 0:n.fieldsets)&&void 0!==t?t:{}).tonalities,m=(null!==(r=(void 0===p?[]:p)[d.toneIndex])&&void 0!==r?r:{}).id,h=void 0===m?3735928559:m,v=a.id===h;return(0,C.jsxs)(l.Fragment,{children:[(0,C.jsx)("input",{ref:i,className:"peer hidden",type:"radio",id:"radio-".concat(a.id),name:"style",value:a.id,checked:a.id===h,onChange:function(){return f({toneIndex:o})}}),(0,C.jsx)(ro,{checked:v,onClick:function(e){e.preventDefault(),i.current&&i.current.click()},name:a.name,icon:a.icon})]})},lo=function(){var e,t,n=(0,y.$G)().t,r=(0,u.cpB)(),a=(null!==(e=null===(t=r.promptStudioConfig[r.promptStudioFormData.taskIndex])||void 0===t?void 0:t.fieldsets)&&void 0!==e?e:{}).tonalities,o=void 0===a?[]:a,i=(0,c.o6)({container:"rounded-aria-radius-3 bg-levels-l3-cards"},["container"]);return(0,C.jsx)(oo,{title:n("tonality"),children:(0,C.jsx)("div",{className:(0,S.AK)(i.container,"flex flex-wrap gap-aria-3 p-aria-4"),children:o.map((function(e,t){return(0,C.jsx)("div",{children:(0,C.jsx)(co,{style:e,idx:t})},e.id)}))})})},uo=function(e){var t,n,r=e.value,a=e.onChange,o=e.max,i=e.min,s=e.disabled,l=e.inputName,u=(0,c.Su)().loggerService,d=null!=i?i:0,f=function(){return r>o?(u.warn("Illegal slider value - higher than max"),o):r<d?(u.warn("Illegal slider value - lower than min"),d):r},p={headRadius:{operaOne:"rounded-aria-radius-1",operaAir:"rounded-aria-radius-5"},headBorder:{operaOne:s?"border-secondary-s1-selected-stroke":"border-primary-p1-cobalt-buttons"}};return(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)("div",{className:(0,S.AK)("relative my-1 h-1 w-full rounded-aria-radius-2 border-solid"),style:{background:(t=s?"--secondary-s1-selected-stroke":"--primary-p1-cobalt-buttons",n=r/o*100,"linear-gradient(to right, var(".concat(t,") ").concat(n,"%, var(--secondary-s4-surface-overlay) ").concat(n,"%)"))},children:[(0,C.jsx)("div",{className:"relative mx-2 my-2",children:(0,C.jsx)("div",{className:(0,S.AK)("absolute -ml-2 -mt-1.5 h-4 w-4 border-2 border-solid bg-text-tb",(0,c.o6)(p,"headRadius"),(0,c.o6)(p,"headBackground"),(0,c.o6)(p,"headBorder")),style:{left:"".concat(f()/o*100,"%")}})}),(0,C.jsx)("input",{className:"absolute -left-2 -right-2 -top-1.5 z-1 cursor-pointer opacity-0",type:"range",value:f(),name:l,min:i,max:o,onChange:function(e){a(parseInt(e.target.value))}})]})})},fo=function(){var e,t=(0,y.$G)().t,n=(0,u.cpB)(),r=n.promptStudioConfig,a=n.promptStudioFormData,o=(0,u.nrG)().setPromptStudioFormData,i=(null===(e=r[a.taskIndex])||void 0===e?void 0:e.fieldsets.lengths)||[];return(0,C.jsx)(oo,{title:t("length"),children:(0,C.jsxs)("div",{className:(0,S.AK)((0,c.o6)({container:"rounded-aria-radius-3 bg-levels-l3-cards"},"container"),"p-3"),children:[(0,C.jsx)(uo,{inputName:"length",value:a.lengthIndex,max:i.length-1,onChange:function(e){return o({lengthIndex:e})}}),(0,C.jsx)("div",{className:"mt-aria-5 flex justify-between",children:i.map((function(e,t){return(0,C.jsx)("div",{className:"text-header-m mt-2",children:e.name},t)}))})]})})},po=n(26525),mo=n.n(po),ho=n(33238),vo=function(e){var t=e.message,n=e.onSave,r=(0,y.$G)().t,a=(0,c.oH)().isAriaInTabView,o=(0,l.useState)(!1),i=(0,v.Z)(o,2),s=i[0],u=i[1],d=function(){var e=mo()((0,rr.Ku)(t));navigator.clipboard.writeText((0,rr.Ku)(e)),We({context:a?ie.hG.BROWSER_TAB:ie.hG.SIDEBAR,str_value:"CopyToClipboard"})},f=function(){var e=(0,h.Z)(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d&&d(),u(!0),setTimeout((function(){u(!1)}),1500);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=(0,c.o6)({container:"bg-levels-l5-primary flex flex-row justify-between p-3",radius:"rounded-aria-radius-3",buttonsType:"tertiary",operaAir:{radius:"rounded-aria-radius-5",buttonsType:"primary"}},["radius","container","buttonsType"]);return(0,C.jsxs)("div",{className:(0,S.AK)(p.container,p.radius),children:[(0,C.jsx)(Z.zx,{type:p.buttonsType,onClick:f,className:"h-8 w-8 !p-0",children:(0,C.jsx)(E.S,{color:"var(--text-t1-text-active-icons)",config:s?St:ho})}),(0,C.jsx)(Z.zx,{type:p.buttonsType,className:"text-button-m h-8",onClick:n,children:r("save_and_return")})]})};const go=n.p+"assets/f9936c1e145b5c8c70f6.svg",xo=n.p+"assets/0d3198b4dc9e5d627bdc.svg";var bo=function(e){var t=e.setShowDeleteConfirm,n=(0,y.$G)().t,r=(0,u.cpB)(),a=r.myStyleFormData,o=r.promptStudioFormData,i=r.myStylePersonality,s=r.myStyleDeletePersonalityLoading,l=(0,u.nrG)().setPromptStudioFormData,d=(0,c.oH)().isAriaInTabView,f=(0,c.o6)({container:"rounded-aria-radius-3 bg-levels-l3-cards"},["container"]);return(0,C.jsx)(oo,{title:n("my_style"),children:(0,C.jsxs)("div",{className:(0,S.AK)("group box-border flex h-14 items-center justify-between gap-2 p-aria-5",f.container),children:[(0,C.jsx)("span",{className:"text-header-m truncate",children:Boolean(i)?a.title?a.title:n("my_style"):n("define_style")}),i?(0,C.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,C.jsxs)("div",{className:"flex items-center justify-between gap-1 opacity-0 transition group-hover:opacity-100",children:[(0,C.jsx)(Z.hU,{type:"secondary",icon:go,className:"!h-6 !w-6",onClick:function(){We({context:d?ie.hG.BROWSER_TAB:ie.hG.SIDEBAR,element:ie.Y3.MY_STYLE}),location.hash="my-style"}}),(0,C.jsx)(Z.hU,{type:"secondary",icon:xo,className:"!h-6 !w-6",onClick:function(e){e.preventDefault(),t(!0)}})]}),(0,C.jsx)(mn,{checked:o.myStyle,setChecked:function(){return l({myStyle:!o.myStyle})}})]}):s&&(0,C.jsx)(G.Z,{})||(0,C.jsx)(Z.hU,{border:!0,type:"tertiary",icon:rn,onClick:function(){return location.hash="my-style"}})]})})};const yo=function(e){var t=e.onClick,n=void 0===t?function(){return(0,S.Yo)(c.lo)}:t,r=e.message,a=void 0===r?(0,Et.t)("error_occurred_message"):r,o=e.button,i=void 0===o||o,s=e.buttonText,l=void 0===s?(0,Et.t)("go_to_forum"):s,d=(0,u.YZY)().isGx;return(0,C.jsxs)("div",{className:(0,S.AK)(d?"rounded border-classic-gx-no-80 dark:border-classic-gx-no-32":"rounded-lg border-stroke-components font-be-vietnam","message border-red flex items-start gap-3 border border-solid p-4"),children:[(0,C.jsx)(N.P,{error:!0,sender:ie.CI.aria}),(0,C.jsxs)("div",{className:"flex flex-col items-end",children:[(0,C.jsx)("div",{className:"text-sm leading-6",children:a}),i&&(0,C.jsx)("button",{onClick:n,type:"button",className:(0,S.AK)(d?"rounded border-classic-gx-no-80 font-sf-pro dark:border-classic-gx-no-32":"rounded-lg border-stroke-components font-mono uppercase transition hover:bg-surface-on-hover-op-60","mt-4 cursor-pointer select-none border border-solid bg-transparent px-3 py-2 text-center text-xs font-bold text-text-t1-text-active-icons outline-none"),children:l})]})]})};var wo=n(88238),jo=n(47772);const _o=function(){var e=(0,u.fvp)().networkEnvironment,t=(0,u.RCK)().isAccountLessUser,n=(0,y.$G)().t,r=t&&(0,jo.dp)(),a=function(){return(0,S.Yo)(c.lo)},o=(0,l.useCallback)((function(){return(0,Ma.RB)((0,Me.B9)(Ra.FU.EMAIL,e))}),[e]),i=(0,l.useMemo)((function(){return{requestLimitReached:{message:n("chat_daily_limit_reached"),buttonText:n(r?"log_in":"go_to_forum"),onClick:r?o:a},default:{message:n("error_occurred_message"),buttonText:n("go_to_forum"),onClick:a}}}),[r,o,n]),s=(0,l.useCallback)((function(){return i[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default"]}),[i]);return{getErrorMessage:s}};function Co(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ko(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Co(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Co(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Oo=function(e){var t=e.serverId,n=e.conversationId,r=e.setConversationId,a=(0,y.$G)().t,o=(0,wo.YZ)(),i=(0,c.oH)().isAriaInTabView,s=_o().getErrorMessage,d=(0,ae.s0)(),f=(0,c.Su)().loggerService,p=ya(),m=ya(),g=(0,l.useState)(!1),x=(0,v.Z)(g,2),w=x[0],_=x[1],k=(0,l.useState)(),O=(0,v.Z)(k,2),A=O[0],E=O[1],I=(0,l.useState)(null),N=(0,v.Z)(I,2),T=N[0],R=N[1],M=(0,l.useState)(!1),P=(0,v.Z)(M,2),D=P[0],L=P[1],B=(0,l.useState)(!1),H=(0,v.Z)(B,2),F=H[0],K=H[1],U=(0,u.nHi)(),V=U.endpointPromptStudio,W=U.endpointPromptStudioSave,z=(0,u.cpB)(),Y=z.promptStudioConfig,q=z.promptStudioConfigLoading,X=z.promptStudioFormData,$=z.promptStudioOutput,Q=z.myStyleStyles,J=z.myStylePersonality,ee=(0,u.B9q)().newConversationRequest,te=(0,u.nrG)(),ne=te.setPromptStudioFormData,re=te.clearPromptStudioFormDataPartial,oe=te.clearPromptStudioFormDataFull,se=te.clearMyStyleFormDataFull,ce=te.setPromptStudioOutput,le=te.handleDeleteMyStylePersonality,ue=te.handleLoadMyStylePersonality,de=function(){var e=(0,h.Z)(b().mark((function e(t){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R(null),L(!0),e.abrupt("return",(0,S.Ur)(V,{method:"POST",mode:"cors",credentials:"include",body:t}).then((function(e){E(e)})).catch((function(e){try{var t=JSON.parse(e.message).detail;429===e.status&&"user_limit"===t&&K(!0)}catch(t){f.error("Error parsing failed"),R(e)}finally{F||R(e)}})).finally((function(){L(!1)})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fe=function(e){var t=e.prompt_params,n=e.query,r=t.task,a=function(e){var t=null!==e?"on":"off",n=Object.values(e||[]).join("").length,r=new Map;return r.set("MyStyle",t),r.set("Length",n),ze(r)}(J),o=new Map;return o.set("Generate",null),o.set("Task",r),o.set("Description",n.length),o.set("Tone",t.tonality),o.set(a,null),ze(o)},pe=function(){var e=(0,h.Z)(b().mark((function e(){var a,o,s,l,u,p;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R(null),a=$.parent,o=a.conversation_id,s=a.message,l=a.message_id,u=a.title,p=a.user_location,e.t0=S.Ur,e.t1=W,e.t2=ko,e.t3={conversation_id:o},e.next=8,(0,fr.Fg)();case 8:return e.t4=e.sent,e.t5=(0,e.t2)(e.t3,e.t4),e.t6={method:"POST",mode:"cors",credentials:"include",body:e.t5},e.abrupt("return",(0,e.t0)(e.t1,e.t6,"needsAuth","noParse").then(function(){var e=(0,h.Z)(b().mark((function e(a){var f,m,h,v;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:204===a.status&&(f="_new"===n?(0,S.nu)():n,m=p.country_code,h={countryCode:m,sender:0,id:(0,S.F0)(),message:X.description},v={countryCode:m,sender:1,id:(0,S.F0)(),message:s,server_id:l},t?(0,pt.JA)(n,{data:[h,v]}):(0,pt.m7)({id:f,server_id:o,label:null!=u?u:X.description.slice(0,c.wN),isLabelGenerated:!0,data:[h,v],lastMessageTime:String(new Date)}),We({context:i?ie.hG.BROWSER_TAB:ie.hG.SIDEBAR,str_value:"SaveResponse"}),r(f),re(),ce(null),d(-1));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){try{var t=JSON.parse(e.message).detail;429===e.status&&"user_limit"===t&&K(!0)}catch(t){f.error("Error parsing failed"),R(e)}finally{F||R(e)}})));case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,l.useEffect)((function(){(w||X.description)&&_(!Boolean(X.description.trim()))}),[X.description,w]),(0,l.useEffect)((function(){ue();var e=decodeURIComponent(window.location.hash.replace("#prompt-studio?",""));return e&&ne({description:e}),function(){f.info("PromptStudio component has been unmounted"),oe()}}),[]),(0,l.useEffect)((function(){A&&ce({message:A.message,parent:A})}),[A]);var me=function(){var e=(0,h.Z)(b().mark((function e(r){var a,o,s;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),_(!1),X.description){e.next=5;break}return _(!0),e.abrupt("return");case 5:if(null!=$&&$.message&&ce(null),a=Y[X.taskIndex],o=a.fieldsets,s={query:X.description.trim(),prompt_params:{task:a.id,length:o.lengths[X.lengthIndex].id,tonality:o.tonalities[X.toneIndex].id,my_style_version:Boolean(J)&&X.myStyle?1:null}},"_new"===n||!t){e.next=19;break}return e.t0=Object,e.t1=s,e.t2=ko,e.t3={conversation_id:t},e.next=16,(0,fr.Fg)();case 16:e.t4=e.sent,e.t5=(0,e.t2)(e.t3,e.t4),e.t0.assign.call(e.t0,e.t1,e.t5);case 19:de(s),We({context:i?ie.hG.BROWSER_TAB:ie.hG.SIDEBAR,str_value:fe(s)});case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),he=function(){return $?p.onOpenChange(!0):d(-1)},ve=(0,Rt.W6)(he);(0,l.useEffect)((function(){var e=function(e,t){for(var n=0,r=Object.entries(e);n<r.length;n++){var a=(0,v.Z)(r[n],1)[0],o="local"===t,i="conversationId"===a&&e[a].newValue!==e[a].oldValue;o&&i&&ve()}};return chrome.storage.onChanged.addListener(e),function(){chrome.storage.onChanged.removeListener(e)}}),[]),(0,l.useEffect)((function(){!o&&ee&&ve()}),[ee]);var ge=(0,l.useMemo)((function(){return s(F?"requestLimitReached":"default")}),[s,F]),xe=(0,c.o6)({outputHeaderInside:!1,outputBackground:"bg-secondary-s4-surface-overlay",operaAir:{outputHeaderInside:!0,outputBackground:"bg-secondary-s2-tertiary-need-to-fix"}},["outputHeaderInside","outputBackground"]);return q?(0,C.jsx)("div",{className:"grid h-screen place-items-center",children:(0,C.jsx)("div",{className:"loader"})}):(0,C.jsxs)("div",{className:(0,S.AK)("prompt-studio max-w-screen flex h-screen flex-col overflow-y-auto overflow-x-hidden bg-compose-bg text-text-t1-text-active-icons",i&&"tab-view"),children:[(0,C.jsx)(Z.Im,{onBackButtonClick:he,title:a("compose")}),(0,C.jsx)(Ca,{dialogProps:p.dialogProps,message:a("popup_exit_confirm"),confirmMessage:a("exit"),cancelMessage:a("cancel"),onCancel:function(){return p.onOpenChange(!1)},onConfirm:function(){re(),ce(null),d("/"),p.onOpenChange(!1)}}),(0,C.jsx)(Ca,{dialogProps:m.dialogProps,message:a("popup_delete_style_confirm"),confirmMessage:a("delete"),cancelMessage:a("cancel"),onCancel:function(){return m.onOpenChange(!1)},onConfirm:function(){le(),se(),m.onOpenChange(!1)}}),(0,C.jsxs)("div",{className:(0,S.AK)("mx-aria-4 mb-aria-4 mt-aria-6 flex h-full flex-row gap-1 overflow-hidden",i&&"z-1 mx-auto w-tab-view"),children:[(0,C.jsxs)("div",{className:"hover-scrollbar box-border h-full max-h-[calc(100vh-56px)] w-6/12 overflow-y-auto overflow-x-hidden pr-1",children:[(0,C.jsxs)("form",{className:"flex flex-col gap-aria-5",children:[(0,C.jsx)(io,{}),(0,C.jsx)(so,{isFormInvalid:w,isDisabled:F}),(0,C.jsx)(lo,{}),(0,C.jsx)(fo,{}),Q&&Boolean(Q.length)&&(0,C.jsx)(bo,{setShowDeleteConfirm:m.onOpenChange})]}),(0,C.jsx)("div",{className:(0,S.AK)("sticky bottom-0 z-1 pt-4"),children:(0,C.jsx)(Z.zx,{type:"primary",onClick:function(e){return me(e)},size:"m",className:"mt-1 w-full",disabled:D||F||w,children:D?(0,C.jsx)(G.Z,{}):a("generate")})})]}),(0,C.jsx)("div",{className:(0,S.AK)("h-auto w-6/12"),children:(0,C.jsx)("div",{className:(0,S.AK)("flex h-full flex-col"),children:(0,C.jsx)(oo,{title:xe.outputHeaderInside?"":a("output"),className:"flex-grow",children:(0,C.jsxs)("div",{className:(0,S.AK)("text-body-m relative flex h-full flex-col rounded-aria-radius-3 px-1 pb-3 pt-2",xe.outputBackground),children:[xe.outputHeaderInside&&(0,C.jsx)("div",{className:"text-header-s mb-2 ml-2 mr-1 mt-1 text-text-t3-text-gray",children:a("output")}),(0,C.jsxs)("div",{className:"flex-grow",children:[Boolean(T)&&(0,C.jsx)("div",{className:"ml-2 mr-1 mt-1",children:(0,C.jsx)(yo,{message:ge.message,buttonText:ge.buttonText,onClick:ge.onClick,button:!!ge.buttonText})}),$?!T&&(0,C.jsx)("div",{className:"relative h-full w-full",children:(0,C.jsxs)("div",{className:(0,S.AK)("prompt-studio-output hover-scrollbar absolute h-full w-full","overflow-y-scroll pl-2 pr-1 pt-1"),children:[$&&(0,C.jsx)(j.Z,{message:$.message}),(0,C.jsx)("div",{className:"h-20 w-full"})]})}):!T&&(0,C.jsx)("div",{className:"ml-2 mr-1 mt-1 text-text-t3-text-gray",children:a("waiting_for_the_description")})]}),$&&!T&&(0,C.jsx)("div",{className:"absolute bottom-3 left-3 right-3",children:(0,C.jsx)(vo,{message:$.parent.message,onSave:function(){return pe()}})})]})})})})]})]})};var So=n(79655);const Ao=function e(t){var n=t.closeMyStyle,r=t.setIsMyStyleFormDataChanged,a=(0,y.$G)().t,o=(0,u.nrG)().setMyStyleFormData,i=(0,u.cpB)(),s=i.myStyleFormData,d=i.myStylePersonality,f=(0,l.useState)(!1),p=(0,v.Z)(f,2),m=p[0],h=p[1],g=(0,l.useState)(Boolean(d)&&s.title||a("my_style")),x=(0,v.Z)(g,2),b=x[0],w=x[1],j=(0,l.useRef)(null),_=function(e,t){e.preventDefault();var n=e.target.value;switch(t){case"global":o({title:b||a("my_style")});break;case"local":w(n||a("my_style"))}},k=(0,c.o6)({editMode:"",borderColor:"border-secondary-s1-selected-stroke",operaOne:{bgHeader:"bg-levels-l1-chat-bg-bg-elements"},operaGx:{borderColor:"border-image-1-header",editMode:"px-3"},operaAir:{borderColor:"border-transparent"}},["editMode","borderColor","bgHeader"]);return(0,C.jsxs)("div",{className:(0,S.AK)(k.bgHeader,"relative box-border flex h-14 w-full items-center justify-between border-b p-3",k.borderColor),children:[(0,C.jsx)(Z.xE,{onClick:n}),m?(0,C.jsxs)("div",{className:(0,S.AK)("flex w-full flex-row gap-2",k.editMode,"max-w-xs"),children:[(0,C.jsx)(Z.oi,{className:"flex-grow",ref:j,maxLength:20,placeholder:a("my_style"),defaultValue:b,onChange:function(e){_(e,"local"),r(!0)},onKeyUp:function(e){"Enter"===e.key&&!1===e.shiftKey&&(_(e,"global"),h(!1))}}),(0,C.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,C.jsx)(D.hU,{dataTestId:(0,S.wE)(e,"span","decline"),type:"secondary",tabIndex:0,icon:P,onClick:function(){w(s.title||a("my_style")),h(!1),r(!1)},onKeyUp:function(e){"Enter"===e.key&&!1===e.shiftKey&&(w(s.title||a("my_style")),h(!1))}}),(0,C.jsx)(D.hU,{dataTestId:(0,S.wE)(e,"span","submit"),type:"primary",tabIndex:0,icon:St,onClick:function(e){_(e,"global"),h(!1),r(!Boolean(d))},onKeyUp:function(e){"Enter"===e.key&&0==e.shiftKey&&(_(e,"global"),h(!1))}})]})]}):(0,C.jsx)(Tt,{textStyle:"text-subheader-m",isTooltipEnabled:!0,value:b,isAnimated:!1,onClick:function(){h(!0),setTimeout((function(){return j.current.focus()}))}}),(0,C.jsx)("div",{className:"h-4 w-4"})]})};const Eo=function e(t){var n=t.style,r=t.isFormInvalid,a=t.setIsFormInvalid,o=t.setIsMyStyleFormDataChanged,i=n.id,s=n.label,c=n.placeholder,d=n.value,f=(0,u.nrG)().setMyStyleFormData,p=(0,u.cpB)().myStyleFormData,m=(0,l.useRef)(null),h=(0,l.useRef)(null);return(0,C.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,C.jsx)("div",{className:(0,S.AK)("text-header-s","block"),children:s}),(0,C.jsx)("div",{ref:m,"data-testid":(0,S.wE)(e,"div","sectionContainer"),children:(0,C.jsx)(Z.Kx,{className:(0,S.AK)("h-32"),name:i,id:i,invalid:r,ref:h,testId:(0,S.wE)(e,"textarea","section".concat((0,S.aD)(i))),maxLength:1e3,placeholder:c,defaultValue:d,onInput:function(e){e.preventDefault(),a(!1);var t=e.target.value;o(p[i]!==t),f((0,g.Z)({},i,t))}})})]},i)};var Io=function(e){var t=e.className,n=(0,y.$G)().t,r=(0,ae.s0)(),a=(0,u.nrG)().clearMyStyleFormDataPartial,o=(0,c.o6)({buttonTertiary:{operaGx:"h-8",operaAir:"!bg-secondary-s2-tertiary-need-to-fix"},buttonPrimary:{operaGx:"h-8"}},["buttonTertiary","buttonPrimary"]);return(0,C.jsxs)("div",{className:(0,S.AK)("align-center flex w-full flex-row justify-end gap-2",t),children:[(0,C.jsx)(Z.zx,{className:(0,S.AK)("text-button-s",o.buttonTertiary),type:"tertiary",onClick:function(e){e.preventDefault(),a(),r(-1)},children:n("discard")}),(0,C.jsx)(Z.zx,{className:(0,S.AK)("text-button-s",o.buttonPrimary),type:"primary",children:n("save")})]})};const No=n.p+"assets/9f4cc0a8a23fb9dd2781.svg",To=n.p+"assets/2179f0be6a7943d619de.svg",Ro=n.p+"assets/9322ca2d4aa264e4a765.svg";var Mo=function(e){var t=e.position,n=(0,u.YZY)().isGx;return(0,C.jsxs)(C.Fragment,{children:[t===Ve.LEFT&&(0,C.jsx)("div",{className:"fixed ".concat(t," inset-y-1/4"),children:n?(0,C.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"237",height:"436",viewBox:"0 0 237 436",fill:"none",children:[(0,C.jsx)("g",{opacity:"0.4",filter:"url(#filter0_f_3303_63238)",children:(0,C.jsx)("path",{d:"M-49.4573 103.795C-28.5027 103.602 -6.87301 127.821 34.2122 163.727C75.297 199.201 135.837 245.93 132.203 280.707C128.352 315.268 60.3281 337.875 11.9293 330.477C-36.2531 323.295 -64.5943 285.89 -83.201 260.378C-101.808 234.866 -110.248 221.247 -113.506 205.474C-116.548 189.484 -113.975 171.772 -102.333 150.182C-90.9073 128.808 -70.412 103.987 -49.4573 103.795Z",fill:"var(--opera-gx-accent-color)"})}),(0,C.jsx)("defs",{children:(0,C.jsxs)("filter",{id:"filter0_f_3303_63238",x:"-218.399",y:"0.0774078",width:"454.478",height:"435.525",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,C.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,C.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,C.jsx)("feGaussianBlur",{stdDeviation:"51.8597",result:"effect1_foregroundBlur_3303_63238"})]})})]}):(0,C.jsx)("img",{src:No,alt:"",draggable:"false"})}),t===Ve.BOTTOM_RIGHT&&(0,C.jsx)("div",{className:"fixed ".concat(t),children:n?(0,C.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"185",height:"247",viewBox:"0 0 185 247",fill:"none",children:[(0,C.jsx)("g",{opacity:"0.4",filter:"url(#filter0_f_3303_63237)",children:(0,C.jsx)("path",{d:"M125.785 364.561C110.831 349.88 112.663 317.46 109 263.019C105.033 208.883 95.2676 133.033 122.428 111.011C149.589 89.2961 213.675 121.41 242.667 160.865C271.658 200.014 265.25 246.503 260.367 277.699C255.484 308.896 251.822 324.494 242.972 337.952C233.817 351.409 219.474 362.114 195.975 369.148C172.782 376.183 140.739 379.241 125.785 364.561Z",fill:"var(--opera-gx-accent-color)"})}),(0,C.jsx)("defs",{children:(0,C.jsxs)("filter",{id:"filter0_f_3303_63237",x:"0.280533",y:"0.280533",width:"368.037",height:"478.447",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,C.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,C.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,C.jsx)("feGaussianBlur",{stdDeviation:"51.8597",result:"effect1_foregroundBlur_3303_63237"})]})})]}):(0,C.jsx)("img",{src:Ro,alt:"",draggable:"false"})}),t===Ve.TOP_RIGHT&&(0,C.jsx)("div",{className:"fixed ".concat(t),children:n?(0,C.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"216",height:"212",viewBox:"0 0 216 212",fill:"none",children:[(0,C.jsx)("g",{opacity:"0.4",filter:"url(#filter0_f_3303_63236)",children:(0,C.jsx)("path",{d:"M221.797 73.8339C228.01 87.3414 217.169 105.035 202.053 107.875C187.022 110.666 167.669 98.5185 155.107 90.4874C142.497 82.3713 136.642 78.5059 133.276 73.6565C129.911 68.8071 129.033 62.9737 122.39 54.0164C115.881 45.0949 103.641 32.9155 103.978 23.8905C104.23 14.9146 117.143 9.04417 129.512 6.54474C141.965 3.99629 153.875 4.81885 160.409 11.2351C166.98 17.5174 168.14 29.5272 180.288 40.1748C192.484 50.9072 215.619 60.1925 221.797 73.8339Z",fill:"var(--opera-gx-accent-color)"})}),(0,C.jsx)("defs",{children:(0,C.jsxs)("filter",{id:"filter0_f_3303_63236",x:"0.253189",y:"-98.5163",width:"327.048",height:"310.517",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,C.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,C.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,C.jsx)("feGaussianBlur",{stdDeviation:"51.8597",result:"effect1_foregroundBlur_3303_63236"})]})})]}):(0,C.jsx)("img",{src:To,alt:"",draggable:"false"})})]})},Po=function(){return(0,C.jsx)("div",{className:"grid h-screen place-items-center",children:(0,C.jsx)(G.Z,{sizeClass:"h-20 w-20",spinnerColoring:"gray-accent"})})};function Do(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Go(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Do(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Do(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Lo=function(e){return e.map((function(e){return Go(Go({},e),{},{value:e.value||""})}))},Bo=n(23493),Zo=n.n(Bo);function Ho(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Fo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fo(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function Fo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const Ko=function(){var e=(0,c.oH)().isAriaInTabView,t=(0,wo.YZ)(),n=(0,ae.s0)(),r=(0,y.$G)().t,a=ya(),o=(0,u.YZY)().isOperaOne,i=(0,u.nHi)().endpointMyStyle,s=(0,u.cpB)(),d=s.myStyleFormData,f=s.myStyleStyles,p=s.promptStudioConfigLoading,m=s.myStylePersonality,g=(0,u.B9q)().newConversationRequest,x=(0,u.nrG)(),w=x.setPromptStudioFormData,j=x.clearMyStyleFormDataPartial,_=(0,l.useState)(f?Lo(f):[]),k=(0,v.Z)(_,2),O=k[0],A=k[1],E=(0,l.useState)(!1),I=(0,v.Z)(E,2),N=I[0],T=I[1],R=(0,l.useState)(!1),M=(0,v.Z)(R,2),P=M[0],D=M[1],G=(0,l.useState)(!1),L=(0,v.Z)(G,2),B=L[0],Z=L[1],H=(0,l.useState)(!1),F=(0,v.Z)(H,2),K=F[0],U=F[1];(0,l.useEffect)((function(){a.onOpenChange(P||B)}),[a,P,B]);var V=Zo()((function(){return n(-1)}),250*c.KP),W=Zo()((function(){return n("/")}),250*c.KP);(0,l.useEffect)((function(){setTimeout((function(){A((function(e){var t,n=Lo(e),r=Ho(n);try{for(r.s();!(t=r.n()).done;){var a=t.value,o=d[a.id]||(null==m?void 0:m[a.id]);o&&(a.value=o)}}catch(e){r.e(e)}finally{r.f()}return n}))}),0)}),[d,m]),(0,l.useEffect)((function(){return window.onbeforeunload=function(){j()},function(){window.onbeforeunload=null}}),[]);var z=function(){var t=new Map;t.set("Save",null),O.forEach((function(e,n){e.value.length&&t.set("q".concat(n+1),e.value.length)})),We({context:e?ie.hG.BROWSER_TAB:ie.hG.SIDEBAR,element:ie.Y3.MY_STYLE,str_value:ze(t)})},Y=function(){var e=(0,h.Z)(b().mark((function e(t){var n,r,a,o;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!O.every((function(e){return!e.value}))){e.next=4;break}return T(!0),e.abrupt("return");case 4:n={},r=Ho(O);try{for(r.s();!(a=r.n()).done;)o=a.value,n[o.id]=o.value}catch(e){r.e(e)}finally{r.f()}return e.prev=7,e.next=10,(0,S.Ur)(i,{method:"PUT",credentials:"include",mode:"cors",body:n});case 10:z(),w({myStyle:!0}),e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(7),e.t0;case 17:V();case 18:case"end":return e.stop()}}),e,null,[[7,14]])})));return function(t){return e.apply(this,arguments)}}(),q=(0,Rt.W6)((function(){return K?Z(!0):W()}));(0,l.useEffect)((function(){var e=function(e,t){for(var n=0,r=Object.entries(e);n<r.length;n++){var a=(0,v.Z)(r[n],1)[0],o="local"===t,i="conversationId"===a&&e[a].newValue!==e[a].oldValue;o&&i&&q()}};return chrome.storage.onChanged.addListener(e),function(){chrome.storage.onChanged.removeListener(e)}}),[]),(0,l.useEffect)((function(){!t&&g&&q()}),[g]);var X=(0,l.useCallback)((function(){j(),P&&V(),B&&W(),a.onOpenChange(!1)}),[j,P,V,B,W,a]),$=(0,l.useCallback)((function(){D(!1),Z(!1),a.onOpenChange(!1)}),[]);return!O||p?(0,C.jsx)(Po,{}):(0,C.jsxs)("div",{className:(0,S.AK)("relative box-border flex h-screen justify-center overflow-y-auto bg-compose-bg pb-7 text-text-t1-text-active-icons",e&&"tab-view"),children:[o&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(Mo,{position:Ve.LEFT}),(0,C.jsx)(Mo,{position:Ve.BOTTOM_RIGHT}),(0,C.jsx)(Mo,{position:Ve.TOP_RIGHT})]}),O&&(0,C.jsxs)("div",{className:"relative z-1 flex w-full flex-col items-center gap-8",children:[(0,C.jsx)(Ao,{closeMyStyle:function(){return K?D(!0):V()},setIsMyStyleFormDataChanged:U}),(0,C.jsx)(Ca,{dialogProps:a.dialogProps,message:r("popup_exit_confirm"),confirmMessage:r("exit"),cancelMessage:r("cancel"),onCancel:$,onConfirm:X}),(0,C.jsxs)("form",{className:"gap-8",onSubmit:Y,children:[(0,C.jsxs)("div",{className:"flex max-w-md flex-col gap-6",children:[(0,C.jsx)("span",{className:(0,S.AK)("text-header-s","text-text-t3-text-gray"),title:r("train_aria_to_write_in_your_own_style"),children:r("train_aria_to_write_in_your_own_style")}),O.map((function(e){return(0,C.jsx)(Eo,{style:e,isFormInvalid:N,setIsFormInvalid:T,setIsMyStyleFormDataChanged:U},e.id)}))]}),(0,C.jsx)(Io,{className:"mt-8"})]})]})]})},Uo=n.p+"assets/d7a6c05a1e25e642f6ab.svg";const Vo=function(){var e=(0,y.$G)().t,t={ariaTheme:{operaOne:"bg-levels-l1-chat-bg-bg-elements",operaGx:"bg-levels-l0-extension-bg",operaAir:"bg-levels-l5-primary"},wrapper:{operaOne:"bg-levels-l1-chat-bg-bg-elements",operaGx:"bg-levels-l0-extension-bg"},wrapperBefore:{operaOne:"before:bg-[--aria-theme-smoke-bg] before:absolute before:inset-0 before:h-full before:w-full",operaGx:"before:bg-aria-theme-smoke-gx before:absolute before:inset-0 before:h-full before:w-full"},wrapperAfter:{operaOne:"after:bg-glow-effect-bottom-shapes after:bg-full-all after:absolute after:inset-0 after:top-[42%] after:h-full after:w-full after:bg-bottom after:bg-no-repeat after:blur-[56px]",operaGx:"",operaAir:""}};return(0,C.jsxs)("div",{id:"oops_view",className:(0,S.AK)("relative box-border flex min-h-screen flex-col overflow-hidden px-aria-12",(0,c.o6)(t,"wrapper"),(0,c.o6)(t,"wrapperBefore"),(0,c.o6)(t,"wrapperAfter")),children:[(0,C.jsx)("div",{className:(0,S.AK)("aria-theme absolute left-0 top-0 h-full w-full",(0,c.o6)(t,"ariaTheme"))}),(0,C.jsxs)("div",{className:"z-1 mt-60 flex flex-col gap-8 text-text-t1-text-active-icons",children:[(0,C.jsx)("div",{children:(0,C.jsx)("p",{className:"text-header-xxl my-0",children:e("ooops")})}),(0,C.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[(0,C.jsx)("img",{className:"h-8 w-8",src:Uo,alt:"error icon"}),(0,C.jsxs)("div",{className:"text-body-l flex w-full flex-col justify-center gap-1",children:[(0,C.jsx)("p",{className:"my-0",children:e("your_ai_chat_got_tired_and_stopped_working")}),(0,C.jsx)("p",{className:"my-0",children:e("please_try_refreshing")})]})]}),(0,C.jsx)("div",{className:"mt-8",children:(0,C.jsx)(D.zx,{onClick:function(){return window.location.reload()},type:"tertiary",children:e("refresh")})})]})]})};function Wo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wo(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Yo=function(e){var t=e.width,n=e.height,r=e.flex,a=e.className,o=void 0===a?"":a,i=zo(zo(zo({},t&&{width:t}),n&&{height:n}),r&&{flex:r,minHeight:n}),s=(0,c.o6)({container:"bg-shimmer",operaGx:{container:"bg-shimmer-gx"}},["container"]).container;return(0,C.jsx)("div",{className:(0,S.AK)("animate-placeHolderShimmer rounded-aria-radius-2 bg-shimmer ",o,s),style:i})};var qo=function(e){var t=e.isAriaInTabView;return(0,C.jsx)(ra,{isNewChat:!1,isAriaInTabView:t,disableSidebarClass:!0,children:(0,C.jsxs)("div",{className:"flex h-full flex-col",children:[(0,C.jsx)(on,{isBorderLess:!0,children:(0,C.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,C.jsx)(Yo,{height:"32px",width:"32px"}),(0,C.jsx)(Yo,{height:"21px",width:"119px"}),(0,C.jsx)(Yo,{height:"32px",width:"32px"})]})}),(0,C.jsx)("div",{className:(0,S.AK)("wrapper relative z-1 flex w-full grow flex-col overflow-x-hidden overflow-y-hidden",t&&"z-1 m-auto max-w-tab-view px-3","h-full pb-3.5"),children:(0,C.jsxs)("div",{className:"flex h-full flex-col justify-between",children:[(0,C.jsx)("div",{className:"text-header-xxl z-1 select-none px-aria-6 pt-aria-7 text-text-t1-text-active-icons",children:(0,C.jsxs)("div",{className:"flex flex-col gap-aria-4",children:[(0,C.jsx)(Yo,{height:"32px",width:"32px",className:"mb-3"}),(0,C.jsx)(Yo,{height:"47px",width:"162px"}),(0,C.jsx)(Yo,{height:"21px",width:"264px"}),(0,C.jsx)(Yo,{height:"21px",width:"264px"})]})}),(0,C.jsxs)("div",{className:"flex flex-col gap-22",children:[(0,C.jsx)("div",{className:"features-carousel flex h-full flex-col",children:(0,C.jsx)("div",{className:"carousel relative flex flex-grow items-center justify-center",children:(0,C.jsxs)("div",{className:"flex w-full items-center justify-center gap-1 px-3",children:[(0,C.jsx)(Yo,{height:"164px",flex:1}),(0,C.jsx)(Yo,{height:"256px",flex:3}),(0,C.jsx)(Yo,{height:"164px",flex:1})]})})}),(0,C.jsxs)("div",{className:"flex gap-1 px-3",children:[(0,C.jsx)(Yo,{height:"48px",width:"100%"}),(0,C.jsx)(Yo,{height:"48px",width:"24px"})]})]})]})})]})})},Xo=function(e){var t,n,r,a,o,i,s=e.children,d=e.wrapperStyles,f=e.viewIsReady,p=(0,ae.s0)(),m=(0,c.oH)().isAriaInTabView,h=(0,c.eh)().isPrivateMode,v=(0,u.ljr)().remoteConfig;t=(0,c.$D)().isCurrentBrowserThemeDark,n=(0,Rt.L1)().isCurrentThemeDark,r=(0,u.YZY)(),a=r.isGx,o=r.isAir,i=(0,u.Vgz)().setDarkThemeEnabled,(0,l.useEffect)((function(){i(t)}),[a,i,t]),(0,l.useEffect)((function(){null===n?((0,S.Dc)((0,S.$o)(),a,o),i((0,S.$o)())):i(n)}),[i,n,a,o]);var g=void 0!==f&&!f||!v;return(0,l.useEffect)((function(){h&&p({pathname:"/private-mode"})}),[h]),g?(0,C.jsx)(qo,{isAriaInTabView:!!m}):(0,C.jsx)("div",{className:d,children:s})},$o=n(76324),Qo=(0,Rr.Z)((function e(t){var n=this;(0,Tr.Z)(this,e),(0,g.Z)(this,"handle",(function(e){var t,r;switch(e.data.message.cmd){case"already-logged-in":n.storeCommandsOverrides.handleAuthorizedOnboardingCompleted(e.data.message.email),n.storeCommandsOverrides.authStateChanged({details:{email:e.data.message.email,fullname:e.data.message.fullname,picture:null!==(t=e.data.message.picture)&&void 0!==t?t:"",username:e.data.message.username},productionOnly:!1,status:"loggedIn"}),chrome.runtime.sendMessage({cmd:"use-mock-auth",token:null!==(r=e.data.message.token)&&void 0!==r?r:""});break;case"use-oa-auth":n.storeCommandsOverrides.authStateChanged({details:void 0,productionOnly:!0,status:"notLoggedIn"}),chrome.runtime.sendMessage({cmd:"use-oa-auth"});break;default:n.loggerService.error("Unknown command")}})),this.loggerService=new $o.m({name:"External Command Service",env:(0,S.a)()}),this.storeCommandsOverrides=t}));const Jo=function(){var e=(0,y.$G)().t,t=(0,u.YZY)().isGx,n=(0,d.Bh)(),r={ariaTheme:{operaOne:"bg-levels-l1-chat-bg-bg-elements",operaGx:"bg-levels-l0-extension-bg",operaAir:"bg-levels-l5-primary"},privateModeAvailability:{operaOne:"text-text-t1-text-active-icons",operaGx:"text-text-t1-text-active-icons",operaAir:"text-text-t2-text-secondary"},productDescription:{operaOne:"mb-aria-7",operaGx:" mb-aria-7",operaAir:"mb-aria-6"},productName:{operaOne:"mt-aria-3 mb-1",operaGx:"mt-aria-3 mb-1",operaAir:"my-aria-3"},switchModeButton:{operaOne:"mt-aria-5 px-aria-4 rounded-aria-radius-3 justify-center",operaGx:"mt-aria-5 rounded min-w-36 !justify-start",operaAir:"mt-aria-6 justify-center px-aria-6"},wrapper:{operaOne:"bg-levels-l1-chat-bg-bg-elements",operaGx:"bg-levels-l0-extension-bg"},wrapperBefore:{operaOne:"before:bg-[--aria-theme-smoke-bg] before:absolute before:inset-0 before:h-full before:w-full",operaGx:"before:bg-aria-theme-smoke-gx before:absolute before:inset-0 before:h-full before:w-full"},wrapperAfter:{operaOne:"after:bg-glow-effect-bottom-shapes after:bg-full-all after:absolute after:inset-0 after:top-[42%] after:h-full after:w-full after:bg-bottom after:bg-no-repeat after:blur-[56px]",operaGx:"",operaAir:""}},a=(0,c.o6)(r,"switchModeButton");return(0,C.jsxs)("div",{id:"private_mode",className:(0,S.AK)("relative box-border flex min-h-screen flex-col overflow-hidden px-aria-12",(0,c.o6)(r,"wrapper"),(0,c.o6)(r,"wrapperBefore"),(0,c.o6)(r,"wrapperAfter")),children:[(0,C.jsx)("div",{className:(0,S.AK)("aria-theme absolute left-0 top-0 h-full w-full",(0,c.o6)(r,"ariaTheme"))}),(0,C.jsx)("div",{className:"flex basis-64"}),(0,C.jsxs)("div",{className:"z-1 flex flex-col",children:[(0,C.jsx)(Xr,{}),(0,C.jsx)("div",{className:(0,S.AK)("text-header-xxl !uppercase text-text-t1-text-active-icons",(0,c.o6)(r,"productName")),children:e("product_name.opera")}),(0,C.jsx)("div",{className:(0,S.AK)("text-header-xl !uppercase text-text-t1-text-active-icons",(0,c.o6)(r,"productDescription")),children:e("onboarding_description".concat(t?".opera_gx":""))}),(0,C.jsxs)("div",{className:(0,S.AK)("text-body-l",(0,c.o6)(r,"privateModeAvailability")),children:[e("private_mode_availability"),n&&" ".concat(e("private_mode_help"))]}),n&&(0,C.jsx)(D.zx,{className:(0,S.AK)("box-border flex !h-10 w-fit items-center rounded border-none bg-buttons-primary-bg py-aria-3 text-text-tb",a),onClick:function(){(0,d.Vy)(),(0,d.$T)()},type:"primary",children:e("private_mode_button_title")})]})]})};const ei=function(){var e,t=(0,u.YZY)(),n=t.isOperaOne,r=t.isGx,a=(0,u.Uwy)().userCapabilities,o=(0,u.Itl)().fetchedCloudModels,i=(e=(0,c.TL)(),{handleResolveCloudModels:(0,l.useCallback)((function(){e(u.uJR.request())}),[e])}).handleResolveCloudModels,s=!(null==a||!a.has_internal_access);(0,l.useEffect)((function(){(n||r)&&s&&0===(null==o?void 0:o.length)&&i()}),[a])},ti=n.p+"assets/d2997d4288440b6c4c4a.svg",ni=n.p+"assets/6ec825e05b24db6ea6b0.svg",ri=n.p+"assets/404f7a90cd8ce83e30c8.svg",ai=n.p+"assets/18174ac973928d67db26.svg",oi=n.p+"assets/e0920cfc21543bd7f9e0.svg",ii=n.p+"assets/bade451f8a67f35ae0b9.svg",si=n.p+"assets/c7bdb33cb7a8acb563b8.svg",ci=n.p+"assets/75f78366b2f7adaf7d2c.svg",li=n.p+"assets/df9cb083733effd6a90b.svg",ui=n.p+"assets/18737c6250fbbb2f0aaf.svg",di=n.p+"assets/740fa2b284e7191e12f9.svg",fi=n.p+"assets/a2ddd971520f0d37145d.svg",pi=n.p+"assets/c4eb6025e616ec800c00.svg",mi=n.p+"assets/5887feb6b3dbed3d4328.svg",hi=n.p+"assets/29f43fb588a968ca6b53.svg",vi=n.p+"assets/76b7a023fed501defe5d.svg",gi=n.p+"assets/057b75a5e4f77e5a3839.svg",xi=n.p+"assets/6afa4adc6b70aecfe2c3.svg",bi=n.p+"assets/9832e78460151f4cc193.svg",yi=n.p+"assets/f6a455f040f73a2b2502.svg",wi=n.p+"assets/62469514a6d4066e0f28.svg",ji=n.p+"assets/c501bdd101ca8c0e8327.svg",_i=n.p+"assets/136011a1c5ce576ad4ca.svg",Ci=n.p+"assets/1b0293427b3b9017a904.svg";var ki=n(50748);const Oi=n.p+"assets/83086224f81da1a81228.svg";var Si=n(37435),Ai=n(57074);const Ei=function(e){var t=e.downloading,n=void 0!==t&&t,r=e.modelId,a=e.onClick;return(0,C.jsx)(D.zx,{className:"flex !h-8 w-8 cursor-pointer flex-col items-center justify-center rounded-aria-radius-3 bg-secondary-s3-bg-icons duration-200 ease-in-out hover:bg-levels-l2-hover",onClick:function(){null==a||a(r)},type:"secondary",children:(0,C.jsx)(E.S,{config:{operaOne:{dark:n?P:Ai,light:n?Oi:Si}}})})},Ii=n.p+"assets/24b12ecade0f68153d0d.svg",Ni=n.p+"assets/9ecc638ab961ea5f42dc.svg";function Ti(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ri(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ti(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ti(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Mi=function(){var e=(0,y.$G)().t,t=(0,c.o6)({operaOne:{light:Ii,dark:Ni}});return(0,C.jsx)(D.u,{placement:"bottom",offsetValue:20,title:e("not_recommended"),delay:c.XT,children:function(e){var n=e.ref,r=e.referenceProps;return(0,C.jsx)("span",Ri(Ri({className:"flex",ref:n},r),{},{children:(0,C.jsx)("img",{src:t,alt:"",draggable:"false"})}))}})};var Pi=n(25108),Di=function(){function e(){(0,Tr.Z)(this,e)}return(0,Rr.Z)(e,null,[{key:"abortModelPull",value:function(e,t){var n=this.abortControllersPool.get(e);n?n.abort(t):Pi.error("Object with key",e,"does not exists")}},{key:"abortAll",value:function(e){this.abortControllersPool.forEach((function(t){t.abort(e)})),this.abortControllersPool.clear()}},{key:"createModelPullAbort",value:function(e){var t=this,n=new AbortController,r=e;return r||(r=crypto.randomUUID()),n.signal.addEventListener("abort",(function(e){var n=e.target.reason;Pi.error("ABORT REASON:",n),t.abortControllersPool.delete(r)})),this.abortControllersPool.set(r,n),{id:r,signal:n.signal}}}]),e}();(0,g.Z)(Di,"abortControllersPool",new Map);var Gi=n(28721),Li=n(25108);function Bi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bi(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Hi=function(e){var t=e.setShowDeleteConfirm,n=e.setModelNameInPopup,r=(0,c.Su)().loggerService,a=(0,y.$G)().t,o=(0,W.Z)().pushNotification,i=(0,c.oH)().isAriaInTabView,s=(0,l.useState)([]),f=(0,v.Z)(s,2),p=f[0],m=f[1],g=(0,l.useState)(!1),x=(0,v.Z)(g,2),w=x[0],j=x[1],_=(0,l.useState)("NO_ACCELERATION"),k=(0,v.Z)(_,2),O=k[0],A=k[1],E=(0,l.useState)(!1),I=(0,v.Z)(E,2),N=I[0],T=I[1],R=(0,l.useState)(!1),M=(0,v.Z)(R,2),P=M[0],L=M[1],B=(0,l.useState)(""),Z=(0,v.Z)(B,2),H=Z[0],F=Z[1],K=(0,u.J7o)(),U=K.fetchedModels,V=K.localModels,z=K.localModelsServiceStatus,Y=(0,u.nHi)().endpointLocalModels,q=(0,u.Qck)(),X=q.addModel,$=q.updateModel,Q=q.addModelList,J=q.removeLocalModel,ee=q.setFetchedModels,te=(0,l.useMemo)((function(){return U.flatMap((function(e){var t=e.tags,n=e.reference_url;return t.map((function(e){return Zi(Zi({},e),{},{reference_url:n})}))}))}),[U]),ne=(0,l.useMemo)((function(){return te.filter((function(e){return!V.some((function(t){return t.name===e.detailed_name}))}))}),[te,V]),re=(0,c.o6)({downloadAccLibDisclaimer:{operaOne:"font-be-vietnam",operaGx:"font-inter"},downloadStatus:{operaOne:"font-be-vietnam",operaGx:"font-inter"},downloadWarning:{operaOne:"font-be-vietnam",operaGx:"font-inter"}},["modelListWrapper","downloadAccLibDisclaimer","downloadStatus","downloadWarning"]),ae=re.downloadAccLibDisclaimer,se=re.downloadStatus,ce=re.downloadWarning;(0,l.useEffect)((function(){(0,h.Z)(b().mark((function e(){var t;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Li.info("Fetching local models list"),e.next=3,(0,S.Ur)(Y,{method:"GET"});case 3:t=e.sent,ee(t);case 5:case"end":return e.stop()}}),e)})))()}),[]);var le=(0,l.useCallback)(function(){var e=(0,h.Z)(b().mark((function e(t,n){var a,o,s,l,u,d,f,p,m,h,v,g,x,y;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.getReader(),o=new TextDecoder("utf-8"),s=[],l=Date.now(),u={inProgress:null,status:null,timestamp:l,total:null},d=Zo()((function(e){$(e)}),c.sh),e.prev=6;case 7:return e.next=10,a.read();case 10:if(f=e.sent,p=f.done,m=f.value,!p){e.next=24;break}return r.info("PULLING MODEL",n.id,"DONE"),(0,oe.vH)({action:ie.VV.MODEL_DOWNLOADED,element:ie.Y3.AI_SETTING,context:i?ie.hG.BROWSER_TAB:ie.hG.SIDEBAR,model:null,str_value:n.id}),e.t0=Q,e.t1=Ut,e.next=20,(0,S._f)();case 20:return e.t2=e.sent,e.t3=(0,e.t1)(e.t2),(0,e.t0)(e.t3),e.abrupt("break",33);case 24:if(!m){e.next=31;break}if(h=JSON.parse(Wt(m,s,o)),v=h.status,g=h.completed,x=h.total,!(y=h.error)){e.next=29;break}throw Error(y);case 29:u=Zi(Zi({},u),{},{error:y,inProgress:g,status:v,timestamp:l,total:x}),d(Zi(Zi({},n),{},{download:u}));case 31:e.next=7;break;case 33:return e.prev=33,d.flush(),e.finish(33);case 36:case"end":return e.stop()}}),e,null,[[6,,33,36]])})));return function(t,n){return e.apply(this,arguments)}}(),[Q,r,$,i]),ue=(0,l.useCallback)((function(e){var t=V.find((function(t){return t.id===e}));if(t)return t;var n=ne.find((function(t){return t.detailed_name===e}));if(n){var r=n.detailed_name,a=n.disk_usage;return{id:e,name:r,size:a}}return{id:e,name:"",size:""}}),[ne,V]),de=(0,l.useCallback)(function(){var e=(0,h.Z)(b().mark((function e(t){var n,i,s,c,l,u,d,f,p,m;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ue(t),i=Di.createModelPullAbort(t),(s=i.signal).addEventListener("abort",(function(e){var t,r,a=e.target.reason,o=Error(a);$(Zi(Zi({},n),{},{download:{timestamp:null!==(t=null===(r=n.download)||void 0===r?void 0:r.timestamp)&&void 0!==t?t:Date.now(),status:null,inProgress:null,total:null,error:o.message||o.name}}))})),e.prev=3,r.info("PULLING MODEL",t,"STARTED..."),u=Zi(Zi({},n),{},{download:{timestamp:null!==(c=null===(l=n.download)||void 0===l?void 0:l.timestamp)&&void 0!==c?c:null,status:"progress",inProgress:null,total:null}}),V.some((function(e){return e.id===n.id}))?$(u):X(u),e.next=9,ki.Z.pullModel({name:t,stream:!0},s);case 9:if(!(d=e.sent).body){e.next=13;break}return e.next=13,le(d.body,n);case 13:e.next=20;break;case 15:e.prev=15,e.t0=e.catch(3),m=a("chat_error_processing_request"),e.t0 instanceof DOMException&&"AbortError"===e.t0.name||(r.error("PULL MODEL",t,"ERROR",e.t0),Di.abortModelPull(t),o(m,"error")),$(Zi(Zi({},n),{},{download:{timestamp:null!==(f=null===(p=n.download)||void 0===p?void 0:p.timestamp)&&void 0!==f?f:null,total:null,inProgress:null,status:null,error:m}}));case 20:case"end":return e.stop()}}),e,null,[[3,15]])})));return function(t){return e.apply(this,arguments)}}(),[X,ue,V,r,le,a,$]),fe=(0,l.useCallback)((function(e){if(e.download){var r=e.size,o=e.download,i=o.error,s=o.inProgress,c=o.status;return i&&"USER_ABORT"!==i?(0,C.jsx)(D.zx,{className:"h-aria-7",type:"secondary",onClick:function(){return de(e.id)},children:a("retry")}):s||!r||c&&"success"!==c&&"writing manifest"!==c?(0,C.jsx)(Ei,{modelId:e.id,onClick:function(e){Di.abortModelPull(e,"USER_ABORT"),J(e)},downloading:Boolean(c)}):(0,C.jsx)(D.zx,{className:"h-aria-7",type:"secondary",onClick:function(){n(e.name),t(!0)},children:a("delete")})}return(0,C.jsx)(Ei,{modelId:e.id,onClick:de,downloading:!1})}),[de,J,n,t,a]),pe=(0,l.useCallback)((function(e){var t,n=null!==(t=e.download)&&void 0!==t?t:{},r=n.error,o=n.inProgress,i=void 0===o?"":o,s=n.status,c=n.total;return(0,C.jsxs)("div",{className:"flex",children:[(0,C.jsxs)("div",{className:"flex items-center justify-center",children:[(null==e?void 0:e.isNotRecommended)&&!s&&(0,C.jsx)(Mi,{}),s&&"success"!=s&&(0,C.jsxs)("div",{className:"mr-2 flex max-w-[170px] flex-col items-center justify-center gap-2 truncate whitespace-break-spaces break-words text-xxs",children:[(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(G.Z,{spinnerColoring:"gray-accent"}),(0,C.jsx)("p",{className:(0,S.AK)("whitespace-nowrap text-text-t3-text-gray",se),children:a("downloading",{status:[void 0,0,100].includes(Vt(i,c,e.download))?"":new Intl.NumberFormat(navigator.language,{style:"percent"}).format(Vt(i,c,e.download)/100)})})]}),r&&"USER_ABORT"!==r&&(0,C.jsx)("p",{className:(0,S.AK)("w-full text-other-warning",ce),children:r})]})]}),fe(e)]})}),[se,ce,fe,a]),me=(0,l.useCallback)((function(e){var t=e.target.value.trim();F(t.toLocaleLowerCase())}),[]),he=(0,l.useCallback)((0,h.Z)(b().mark((function e(){var t,n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,L(!0),r.info("Loading acceleration library"),e.next=5,(0,d.qP)();case 5:if(t=e.sent,r.info("Hardware acceleration library download status:",t),"SUCCESS"!==t){e.next=10;break}return e.next=10,(0,d.f6)();case 10:return e.next=12,(0,d.vy)();case 12:n=e.sent,T(n),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),r.error("Loading acceleration library error:",e.t0);case 19:return e.prev=19,L(!1),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[0,16,19,22]])}))),[]),ve=(0,l.useCallback)((function(){return(0,C.jsx)("span",{className:(0,S.AK)("inline-block w-full text-center font-normal normal-case text-text-t3-text-gray",ae),children:P?(0,C.jsxs)("span",{className:"flex w-full items-center justify-between text-xxs uppercase",children:[a("local_models_hardware_acceleration_lib_downloading",{libraryName:O}),(0,C.jsx)(G.Z,{spinnerColoring:"gray-accent"})]}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("span",{children:a("local_models_hardware_acceleration_lib_suggestion")}),(0,C.jsx)("span",{children:" "}),(0,C.jsx)("button",{onClick:he,className:"underline",children:a("download_file_button_title")})]})})}),[P,ae,he,O,a]),ge=(0,l.useCallback)((0,h.Z)(b().mark((function e(){var t,n,r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.VZ)();case 2:return t=e.sent,e.next=5,(0,d.vy)();case 5:return n=e.sent,e.next=8,(0,d.ix)();case 8:r=e.sent,j(t),T(n),A(r);case 12:case"end":return e.stop()}}),e)}))),[]),xe=(0,l.useMemo)((function(){return ne.filter((function(e){var t=e.detailed_name;if(H){var n=H.toLocaleLowerCase();return t.toLocaleLowerCase().indexOf(n)>-1}return!0})).map((function(e){var t=V.find((function(t){return t.id===e.tag}))||{id:e.detailed_name,name:e.detailed_name,size:e.disk_usage,isNotRecommended:e.not_recommended,reference_url:e.reference_url};return{action:pe(t),title:"".concat(t.name," (").concat(t.size,")"),reference_url:t.reference_url,id:(0,Gi.Z)()}}))}),[ne,H,V]);(0,l.useEffect)((function(){var e=V.sort(zt).map((function(e){var t,n,r=e.name,a=e.size,o=(null===(t=te.find((function(t){return t.detailed_name===(null==e?void 0:e.tag)})))||void 0===t?void 0:t.not_recommended)||!1,i=null===(n=te.find((function(t){return t.detailed_name===(null==e?void 0:e.tag)})))||void 0===n?void 0:n.reference_url;return{action:pe(Zi(Zi({},e),{},{isNotRecommended:o})),title:"".concat(r," (").concat(a,")"),reference_url:i}}));w&&!N&&e.push({title:ve()}),m(e)}),[pe,N,w,ve,V,te]),(0,l.useEffect)((function(){"UNAVAILABLE"===z&&Di.abortAll(a("chat_error_processing_request"))}),[z]),(0,l.useEffect)((function(){ge()}),[ge]);var be=(0,l.useMemo)((function(){return!!p.length}),[p]);return(0,C.jsxs)("div",{className:"flex h-full flex-col gap-aria-6",children:[be&&(0,C.jsx)(Xi,{collapsible:!0,items:p,title:a("downloaded_local_models_list_title",{localModelsCount:p.length}),maxHeight:Math.min(p.length*c.Dl,4*c.Dl)+c.lV},"downloaded-models"),(0,C.jsx)(Xi,{items:xe,onSearchBarInput:me,searchBar:!0,searchBarPlaceholder:a("search_local_model_placeholder")},"available-models")]})};var Fi=n(66688),Ki=n(39142);const Ui=function e(t){var n=t.onInput,r=t.placeholder,a=void 0===r?(0,Et.t)("search"):r;return(0,C.jsx)("div",{children:(0,C.jsx)("input",{"data-testid":(0,S.wE)(e,"input","search"),className:"text-body-l min-h-aria-9 w-full rounded-aria-radius-3 border border-transparent bg-levels-l0-extension-bg p-aria-2 pl-aria-3 text-left text-text-t1-text-active-icons placeholder:text-text-t3-text-gray focus:border-cobalt-blue focus:outline-none",onInput:n,placeholder:a})})},Vi=n.p+"assets/70eba12308e7984fd14b.svg",Wi=n.p+"assets/3be6ad1b3df0e5831c59.svg";const zi=function(e){var t,n,r=e.item,a=e.index,o=e.isLast,i=e.getItemState,s=e.handleItemToggling,c=(0,y.$G)().t,u=r.title,d=r.description,f=void 0===d?"":d,p=r.icon,m=r.reference_url,h=r.onItemClick,v=r.action,g=(0,l.useCallback)((function(){null==h||h(r)}),[r,h]);return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{role:"button",onClick:g,onKeyDown:g,tabIndex:0,className:(0,S.AK)("flex p-aria-2",h&&"cursor-pointer"),children:(0,C.jsxs)("div",{className:"flex w-full items-center gap-aria-4",children:[p&&(0,C.jsx)("div",{className:"inline-flex h-12 w-12 min-w-[3rem] items-center justify-center rounded-xl bg-extra-content-bg p-1",children:p}),(0,C.jsxs)("div",{className:"flex flex-grow flex-col gap-aria-1 overflow-hidden",children:[(0,C.jsx)("p",{className:"text-header-s-bold text-text-t1-text-active-icons",children:u}),m&&(0,C.jsx)(pn.h,{className:"text-body-s text-text-t3-text-gray underline",to:m,testName:u.toString(),children:c("terms_of_service")}),Boolean(f)&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{className:(0,S.AK)("text-ellipsis break-words text-xxs text-text-t1-text-active-icons",null!==(t=i(a))&&void 0!==t&&t.isShortened?"max-h-6 truncate whitespace-nowrap":""),children:(0,C.jsx)(j.Z,{message:f.trim(),components:{ul:zr.Tf}})}),f.length>80&&(0,C.jsx)("div",{role:"button",tabIndex:-1,className:"bold underline",onClick:s(a),onKeyDown:s(a),children:null!==(n=i(a))&&void 0!==n&&n.isShortened?c("show_more"):c("show_less")})]})]}),v]})}),!o&&(0,C.jsx)("div",{className:"my-aria-3 h-px w-full bg-secondary-s1-selected-stroke"})]})};var Yi=(0,l.memo)((function(e){var t=e.data,n=e.index,r=e.style,a=t.items,o=t.handleItemToggling,i=t.getItemState,s=a[n],c=n===a.length-1;return(0,C.jsx)("div",{style:r,children:(0,C.jsx)(zi,{index:n,item:s,handleItemToggling:o,getItemState:i,isLast:c})})}),Fi.wy);Yi.displayName="ModelRowWrapper";const qi=Yi;const Xi=function(e){var t=e.collapsible,n=void 0!==t&&t,r=e.items,a=e.onSearchBarInput,o=e.searchBar,i=void 0!==o&&o,s=e.searchBarPlaceholder,u=e.title,d=void 0===u?"":u,f=e.maxHeight,p=(0,Rt.L1)().isCurrentThemeDark,m=(0,l.useState)([]),h=(0,v.Z)(m,2),g=h[0],x=h[1],b=(0,l.useState)(!1),y=(0,v.Z)(b,2),w=y[0],j=y[1],_=(0,l.useCallback)((function(e){var t;return null!==(t=g.find((function(t){return t.index===e})))&&void 0!==t?t:{index:e,isShortened:!0}}),[g]),k=(0,l.useCallback)((function(e){return function(t){var n;t.stopPropagation(),x([{index:e,isShortened:!(null!==(n=_(e))&&void 0!==n&&n.isShortened)}])}}),[_]),O=Yt(r,k,_),A=(0,c.o6)({modelListWrapper:{operaOne:"rounded-aria-radius-4 font-normal font-mono",operaGx:"rounded-aria-radius-2 font-bold font-inter"}},"modelListWrapper");return(0,C.jsx)("div",{className:(0,S.AK)("border border-secondary-s1-selected-stroke p-aria-3",A,!w&&"flex-1"),style:{maxHeight:f},children:(0,C.jsx)("div",{className:"h-full border border-none border-secondary-s1-selected-stroke",children:(0,C.jsxs)("div",{className:"flex h-full flex-col",children:[!!d&&(0,C.jsxs)("div",{className:"flex h-7 items-center justify-between p-1",children:[function(e){return(0,C.jsx)("p",{className:"text-header-s-bold text-text-t1-text-active-icons",children:e})}(d),n&&(0,C.jsx)("button",{onClick:function(){j((function(e){return!e}))},children:(0,C.jsx)("img",{className:(0,S.AK)("h-4 w-4",w?"rotate-0":"rotate-180"),src:p?Vi:Wi,alt:"Chevron bottom icon"})})]}),(0,C.jsx)("div",{className:"flex-1",children:(0,C.jsxs)("div",{className:(0,S.AK)("flex h-full flex-col gap-aria-3",w&&"hidden"),children:[i&&(0,C.jsx)("div",{children:(0,C.jsx)(Ui,{onInput:a,placeholder:s})}),(0,C.jsx)("div",{className:"flex-1",children:(0,C.jsx)(Ki.ZP,{children:function(e){var t=e.height,n=e.width;return(0,C.jsx)(Fi.S_,{height:t,width:n,itemCount:r.length,itemSize:function(){return c.Dl},itemData:O,children:qi})}})})]})})]})})})};const $i=function(){var e=(0,y.$G)().t,t=(0,c.Su)().loggerService,n=(0,c.oH)().isAriaInTabView,r=(0,u.MII)(),a=r.isLocalModelsEnabled,o=r.isLocalModelsEnabledPending,i=(0,u.C7C)(),s=i.setLocalModels,f=i.setLocalModelsPending,p=(0,u.Qck)().setModel,m=(0,u.C7C)().setLocalModelsChangedByUser,v=(0,l.useCallback)(function(){var e=(0,h.Z)(b().mark((function e(n){var r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,f(!0),!n){e.next=9;break}return e.next=5,(0,d.xM)();case 5:(r=e.sent)&&s(r),e.next=14;break;case 9:return e.next=11,(0,d.Pv)();case 11:e.sent&&s(!1),p("Aria");case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),t.error("LOCAL MODELS ENABLE ERROR",e.t0);case 19:return e.prev=19,f(!1),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[0,16,19,22]])})));return function(t){return e.apply(this,arguments)}}(),[t,s,f,p]),g=(0,l.useCallback)((function(e){(0,oe.vH)({action:ie.VV.SETTINGS_CHANGED,element:ie.Y3.AI_SETTING,context:n?ie.hG.BROWSER_TAB:ie.hG.SIDEBAR,model:null,str_value:"local_model:".concat(e?"enabled":"disabled")}),m(!0),v(e)}),[n,v,m]);return(0,C.jsxs)("div",{className:"flex flex-row items-center justify-between gap-3 rounded-aria-radius-4 border border-secondary-s1-selected-stroke p-aria-4",children:[(0,C.jsxs)("div",{className:"flex flex-col gap-aria-3",children:[(0,C.jsx)("p",{className:"text-header-s-bold w-full text-left text-text-t1-text-active-icons",children:e("enable_local_models_toggle_title")}),(0,C.jsx)("p",{className:"text-body-s text-text-t3-text-gray",children:e("local_models_legal_disclaimer")})]}),(0,C.jsx)(mn,{checked:a,disabled:o,setChecked:g})]})},Qi=n.p+"assets/50d25218d5fc38c8c792.svg",Ji=n.p+"assets/ebe5521cb0a5123a75f2.svg";const es=function(e){var t=e.setShowDeleteConfirm,n=e.setModelNameInPopup,r=(0,u.MII)(),a=r.isLocalModelsEnabled,o=r.isLocalModelsEnabledPending,i=(0,u.RCK)().isAccountLessMode,s=(0,u.C7C)().setSelectedLocalModel,d=(0,u.HhX)().setAccountlessLoginData,f=(0,u.fvp)().networkEnvironment,p=(0,y.$G)().t,m=(0,c.oH)().isAriaInTabView;(0,l.useEffect)((function(){return function(){return s(null)}}),[s]);var h=(0,l.useMemo)((function(){return!a&&o?(0,C.jsx)("div",{className:"flex w-full flex-col items-center overflow-hidden",children:(0,C.jsx)(E.S,{className:"animate-spin",config:{dark:Ji,light:Qi},size:32})}):a?(0,C.jsx)(Hi,{setShowDeleteConfirm:t,setModelNameInPopup:n}):void 0}),[a,o,n,t]),v=(0,l.useCallback)((function(){var e=m?ie.hG.BROWSER_TAB:ie.hG.SIDEBAR;d({context:e,initTime:Date.now(),source:"ai_benchmark"}),(0,oe.vH)({action:ie.VV.CLICK,context:e,element:ie.Y3.ONBOARDING,str_value:"start:log_in:ai_benchmark"}),(0,Ma.RB)((0,Me.B9)(Ra.FU.EMAIL,f))}),[m,f,d]);return(0,C.jsxs)("div",{className:(0,S.AK)("flex h-full flex-col gap-aria-6 overflow-hidden",!m&&"px-aria-4"),children:[(0,C.jsx)("div",{children:(0,C.jsxs)("div",{className:(0,S.AK)("flex justify-between gap-aria-3 rounded-xlg border border-secondary-s1-selected-stroke p-aria-4",i?"flex-col items-start":"items-center"),children:[(0,C.jsx)("p",{className:"text-header-s-bold rounded-aria-radius-4 text-text-t1-text-active-icons",children:"AI BENCHMARK"}),i?(0,C.jsx)("div",{className:"text-body-s text-text-gray",children:(0,C.jsx)(y.cC,{i18nKey:p("consent_login_for_free"),components:{link1:(0,C.jsx)("span",{className:"underline",role:"button",tabIndex:-1,onClick:v,onKeyUp:v})}})}):(0,C.jsx)(D.zx,{type:"tertiary",size:"xs",onClick:function(){var e="production"===f?"https://www.devicetest.ai":"https://staging.route53.devicetest.ai";(0,S.Yo)(e)},children:p("go_to_test")})]})}),(0,C.jsx)("div",{children:(0,C.jsx)($i,{})}),(0,C.jsx)("div",{className:"flex-1",children:h})]})};var ts=function(e){var t=e.icon,n=e.toggleConfig,r=e.testname,a=e.header,o=e.description,i=n.checked,s=n.setChecked,l={iconWrapper:{operaOne:"bg-secondary-s1-selected-stroke border border-secondary-s1-selected-stroke rounded-xl pl-aria-2.5 pt-aria-2.5",operaGx:"rounded-aria-radius-3 bg-secondary-s3-bg-icons pl-[7px] pt-[7px]",operaAir:"rounded-aria-radius-2"},wrapper:{operaGx:"rounded-aria-radius-3 border-image-1-header"}},u=(0,c.o6)(l,"iconWrapper");return(0,C.jsxs)("div",{className:(0,S.AK)("flex justify-between",(0,c.o6)(l,"wrapper")),children:[(0,C.jsxs)("div",{className:"flex gap-5",children:[t?(0,C.jsx)("div",{className:(0,S.AK)(u,"box-border h-[51px] w-[51px] min-w-[51px] overflow-hidden border border-secondary-s1-selected-stroke"),children:(0,C.jsx)("img",{src:t,alt:"",className:"w-full rounded-tl-aria-radius-2"})}):(0,C.jsx)("div",{className:"h-aria-9 w-aria-9 min-w-aria-9 rounded-xl bg-secondary-s3-bg-icons"}),(0,C.jsxs)("div",{className:"flex flex-col justify-center gap-aria-2",children:[(0,C.jsx)("p",{className:"text-header-m text-text-t1-text-active-icons",children:a}),(0,C.jsx)("p",{className:"text-body-s pr-10 text-text-t1-text-active-icons",children:o})]})]}),(0,C.jsx)(mn,{testName:r,checked:i,setChecked:s})]})};const ns=n.p+"assets/9ddbb7c1d730ad89a289.svg",rs=n.p+"assets/f72656b73d5a3b2d097e.svg";var as=function(){var e,t,n=(0,y.$G)().t,r=(0,u.ALE)().profileMemoryEnabled,a=(0,u.jRd)().handleProfileMemoryChanged,o=(e=a,t=(0,c.oH)().isAriaInTabView,(0,l.useCallback)((function(n){(0,oe.vH)({action:ie.VV.CLICK,element:ie.Y3.AI_SETTING,context:t?ie.hG.BROWSER_TAB:ie.hG.SIDEBAR,model:"Aria",str_value:"long_term_memory:".concat(n?"enabled":"disabled")}),e(n)}),[e,t])),i=(0,c.o6)({operaOne:{dark:ns,light:rs}});return(0,C.jsx)(ts,{description:n("profile_settings_usage_subtitle"),icon:i,header:n("profile_memory_input_action"),toggleConfig:{checked:r,setChecked:o}})},os=function(){return(0,C.jsx)("div",{className:"w-full p-aria-3",children:(0,C.jsx)(G.Z,{})})},is=function(){var e=(0,y.$G)().t;return(0,C.jsx)("span",{className:"text-aria-body-s text-text-t3-text-gray",children:e("profile_settings_empty_memoty_title")})},ss=function(){var e,t,n=(0,y.$G)().t,r=(0,u.QIv)().handleClearMemory,a=(e=r,t=(0,c.oH)().isAriaInTabView,(0,l.useCallback)((function(){(0,oe.vH)({action:ie.VV.CLICK,element:ie.Y3.PROFILE_MEMORY,context:t?ie.hG.BROWSER_TAB:ie.hG.SIDEBAR,model:"Aria",str_value:"long_term_memory:clear_confirmation"}),e()}),[e,t])),o=ya();return(0,C.jsxs)(l.Fragment,{children:[(0,C.jsx)(Z.zx,{type:"tertiary",size:"xs",onClick:o.openDialog,children:n("profile_settings_clear_memory")}),(0,C.jsx)(Ca,{dialogProps:o.dialogProps,message:n("profile_memory_clear_alert_title"),confirmMessage:n("profile_memory_clear_alert_confirm"),cancelMessage:n("profile_memory_clear_alert_cancel"),onCancel:o.closeDialog,onConfirm:a})]})};const cs=n.p+"assets/3e864b6efea03a4ca582.svg";var ls=n(95422),us=function(){var e,t,n=(0,c.o6)({operaOne:{light:cs,dark:ls}}),r=(e=function(){(0,S.Yo)(c.Fl)},t=(0,c.oH)().isAriaInTabView,(0,l.useCallback)((function(){(0,oe.vH)({action:ie.VV.CLICK,element:ie.Y3.PROFILE_MEMORY,context:t?ie.hG.BROWSER_TAB:ie.hG.SIDEBAR,model:"Aria",str_value:"long_term_memory:redirect_faq_link"}),e()}),[e,t]));return(0,C.jsx)("div",{role:"button",onClick:r,onKeyUp:r,className:"cursor-pointer",tabIndex:-1,children:(0,C.jsx)(E.S,{config:n,className:"!block"})})},ds=function(){var e=(0,c.o6)({operaOne:Ya,operaGx:qa});return(0,C.jsx)(E.S,{className:"!block transition-colors",config:e})},fs=function(e){var t=e.itemDescription,n=e.value,r=e.onDeleteRequested;return(0,C.jsxs)("div",{className:"group flex cursor-pointer flex-row items-center items-center gap-aria-2 px-aria-4 py-aria-3",onClick:r,onKeyUp:r,tabIndex:-1,role:"button",children:[(0,C.jsx)("div",{className:"flex-1",children:(0,C.jsxs)("span",{className:"",children:[t,": ",n]})}),(0,C.jsx)("div",{className:"hidden group-hover:block",children:(0,C.jsx)(ds,{})})]})},ps=function(){var e=(0,y.$G)().t;return(0,C.jsx)("span",{className:"text-aria-header-s text-text-t1-text-active-icons",children:e("profile_settings_personalization")})},ms=function(e){var t=e.itemRemoveRequest,n=e.setItemRemoveRequest,r=(0,y.$G)().t,a=ya(),o=(0,u.QIv)().handleRemoveMemoryItem;(0,l.useEffect)((function(){t?a.openDialog():a.closeDialog()}),[t,a]);var i,s,d=function(){n(void 0)},f=(i=function(){t&&(d(),o({targetItem:t}))},s=(0,c.oH)().isAriaInTabView,(0,l.useCallback)((function(){(0,oe.vH)({action:ie.VV.CLICK,element:ie.Y3.PROFILE_MEMORY,context:s?ie.hG.BROWSER_TAB:ie.hG.SIDEBAR,model:"Aria",str_value:"long_term_memory:remove_item_confirmation"}),i()}),[i,s]));return(0,C.jsx)(Ca,{dialogProps:a.dialogProps,message:r("profile_memory_remove_item_alert_title"),confirmMessage:r("profile_memory_remove_item_alert_confirm"),cancelMessage:r("profile_memory_remove_item_alert_cancel"),onCancel:d,onConfirm:f})};function hs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hs(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var gs=(0,C.jsx)("div",{className:"mx-aria-4 h-px bg-secondary-s1-selected-stroke"}),xs=function(e){var t,n,r=e.memory,a=(0,l.useState)(void 0),o=(0,v.Z)(a,2),i=o[0],s=o[1],d=(0,u.Ojm)().profileClearMomoryError;return t=d,n=(0,y.$G)().t,(0,c.GV)({trigger:t,errorMessage:n("profile_memory_failed_cleaning")}),(0,C.jsxs)("div",{className:"flex flex-col gap-aria-5",children:[(0,C.jsx)("div",{children:(0,C.jsxs)("div",{className:"overflow-hidden rounded-aria-radius-3 border border-secondary-s1-selected-stroke",children:[(0,C.jsx)("div",{className:"bg-secondary-s1-selected-stroke px-aria-4 py-aria-3",children:(0,C.jsxs)("div",{className:"flex flex-row items-center gap-aria-2",children:[(0,C.jsx)("div",{className:"flex-1",children:(0,C.jsx)(ps,{})}),(0,C.jsx)("div",{children:(0,C.jsx)(us,{})})]})}),(0,C.jsx)("div",{className:"py-aria-2",children:(0,C.jsx)(Z.hn,{separator:gs,children:r.map((function(e){return(0,l.createElement)(fs,vs(vs({},e),{},{key:e.id,onDeleteRequested:function(){s(e.id)}}))}))})})]})}),(0,C.jsx)("div",{children:(0,C.jsx)(ss,{})}),(0,C.jsx)(ms,{itemRemoveRequest:i,setItemRemoveRequest:s})]})},bs=function(){var e=(0,u.Ojm)(),t=e.profileLoading,n=e.profileViewModel,r=function(e){var t=e.profileViewModel,n=e.profileLoading,r=n&&!t;return{shouldRenderEmptySection:t&&0===t.memory.length||!n&&!t,shouldRenderLoader:r}}({profileViewModel:n,profileLoading:t}),a=r.shouldRenderEmptySection;return r.shouldRenderLoader?(0,C.jsx)(os,{}):a?(0,C.jsx)(is,{}):n?(0,C.jsx)(xs,{memory:n.memory}):void 0},ys=function(){var e,t,n=(0,u.Bwc)().handleLoadProfile,r=(0,u.RCK)().isAccountLessUser,a=(0,u.ALE)().profileMemoryEnabled,o=(0,u.Ojm)().profileLoadingError;return e=o,t=(0,y.$G)().t,(0,c.GV)({trigger:e,errorMessage:t("profile_memory_failed_loading")}),(0,l.useEffect)((function(){r||n()}),[r]),(0,C.jsx)("div",{className:"w-full",children:(0,C.jsxs)(Z.oX.Wrapper,{children:[(0,C.jsx)(Z.oX.Section,{children:(0,C.jsx)(as,{})}),a&&(0,C.jsx)(Z.oX.Section,{children:(0,C.jsx)(bs,{})})]})})};function ws(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function js(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ws(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ws(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _s=function e(t){var n=t.conversationId,r=(0,ae.s0)(),a=(0,y.$G)().t,o=(0,ae.TH)().state,i=(0,W.Z)().pushNotification,s=(0,c.oH)().isAriaInTabView,d=ya(),f=(0,c.o6)({operaOne:{light:oi,dark:ii}}),p=(0,c.o6)({operaOne:{light:ri,dark:ai}}),m=(0,c.o6)({operaOne:{dark:ma,light:ha},operaGx:va,operaAir:ma}),g=(0,c.o6)({operaOne:{light:ti,dark:ni}}),x=(0,c.o6)({operaAir:{light:gi,dark:gi},operaOne:{light:yi,dark:wi},operaGx:{light:xi,dark:bi}}),j=(0,c.o6)({operaAir:{light:si,dark:si},operaOne:{light:ui,dark:di},operaGx:{light:ci,dark:li}}),_=(0,c.o6)({operaAir:{light:fi,dark:fi},operaOne:{light:hi,dark:vi},operaGx:{light:pi,dark:mi}}),k=(0,c.o6)({operaAir:{light:ji,dark:ji},operaOne:{light:_i,dark:Ci}}),O=(0,u.B9q)().newConversationRequest,A=(0,u.YWL)().isDarkThemeEnabled,E=(0,u.GgQ)().isSiaEnabled,I=(0,u.J0e)().isSourceLinksEnabled,N=(0,u.ljr)().remoteConfig,T=(0,u.J7o)(),R=T.localModelsServiceStatus,M=T.localModels,P=(0,u.Ql$)().appVersion,G=(0,u.pb4)().audience,L=(0,u.fvp)().networkEnvironment,B=(0,u.kq0)().isWritingModeShortcutEnabled,H=(0,u.RCK)().isAccountLessMode,F=(0,u.Qck)(),K=F.addModelList,U=F.updateModel,V=F.removeLocalModel,z=(0,u.Vgz)().setDarkThemeEnabled,Y=(0,u.kgU)().setIsSiaEnabled,q=(0,u.A4D)().setSourceLinksEnabled,X=(0,u.cvs)(),$=X.setWritingModeShortcutEnabled,Q=X.wasWritingModeShortcutEnabledManually,J=(0,u.HhX)().setAccountlessLoginData,ee=(0,l.useMemo)((function(){var e=[{icon:f,name:a("general")}];return(null==G?void 0:G.identifier)===Xt.$p&&N.local_models&&e.push({icon:p,name:a("local_models")}),N.longterm_memory&&e.push({icon:m,name:a("profile_settings_tab")}),e.push({icon:g,name:a("feedback")}),e}),[H,G,N,a,N]),te=(0,l.useState)((function(){var e=(null==o?void 0:o.initialTab)&&ee.find((function(e){return e.name===o.initialTab}));return null!=e?e:ee[0]})),ne=(0,v.Z)(te,2),re=ne[0],se=ne[1],ce=(0,l.useState)(!1),le=(0,v.Z)(ce,2),ue=le[0],de=le[1],fe=(0,l.useState)(""),pe=(0,v.Z)(fe,2),me=pe[0],he=pe[1],ve=function(e){return function(){e.name===a("feedback")?(0,S.Yo)(c.lo):se(e)}},ge=(0,l.useCallback)((function(e){(0,oe.vH)({action:w.VV.SETTINGS_CHANGED,element:w.Y3.AI_SETTING,context:s?ie.hG.BROWSER_TAB:ie.hG.SIDEBAR,str_value:e?"theme_switch:enabled":"theme_switch:disabled"}),z(e)}),[s,z]),xe=(0,l.useCallback)((function(e){(0,oe.vH)({action:w.VV.SETTINGS_CHANGED,element:w.Y3.AI_SETTING,context:s?ie.hG.BROWSER_TAB:ie.hG.SIDEBAR,str_value:e?"sia:enabled":"sia:disabled"}),Y(e)}),[s,Y]),be=(0,l.useCallback)((function(e){(0,oe.vH)({action:w.VV.SETTINGS_CHANGED,element:w.Y3.AI_SETTING,context:s?ie.hG.BROWSER_TAB:ie.hG.SIDEBAR,str_value:e?"source_links:enabled":"source_links:disabled"}),q(e)}),[s,q]),ye=(0,l.useCallback)((function(e){(0,oe.vH)({action:w.VV.SETTINGS_CHANGED,element:w.Y3.AI_SETTING,context:s?ie.hG.BROWSER_TAB:ie.hG.SIDEBAR,str_value:e?"writing_mode_shortcut:enabled":"writing_mode_shortcut:disabled"}),$(e),Q(!0)}),[s,$,Q]),we=(0,l.useCallback)(function(){var e=(0,h.Z)(b().mark((function e(t){var n,r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=M.find((function(e){return e.name===t})))){e.next=19;break}return r={timestamp:null,status:null,inProgress:null,total:null},U(js(js({},n),{},{download:r})),e.prev=4,e.next=7,ki.Z.deleteModel(n.id||t);case 7:V(t),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),i(a("loading_wrong"),"error");case 13:return e.prev=13,he(""),d.onOpenChange(!1),e.finish(13);case 17:e.next=20;break;case 19:throw new Error("Could not find the model to delete | modelName: ".concat(t,", model ").concat(n));case 20:case"end":return e.stop()}}),e,null,[[4,10,13,17]])})));return function(t){return e.apply(this,arguments)}}(),[d,M,i,V,a,U]);(0,l.useEffect)((function(){var e=!("selected-content-prompt"===(null==O?void 0:O.message.source));O&&e&&r("/")}),[O,n]),(0,l.useEffect)((function(){de(!0)}),[me]);var je=function(){var e=(0,h.Z)(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("RUNNING"!==R){e.next=8;break}return e.t0=K,e.t1=Ut,e.next=5,(0,S._f)();case 5:e.t2=e.sent,e.t3=(0,e.t1)(e.t2),(0,e.t0)(e.t3);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,l.useEffect)((function(){je()}),[R]);var _e=(0,c.o6)({generalSectionWrapper:{operaOne:"px-aria-4",operaGx:""},mainWrapper:{operaOne:"opera-one bg-levels-l1-chat-bg-bg-elements",operaGx:"gx px-3 bg-levels-l0-extension-bg"},showThemeToggle:{operaOne:!0,operaAir:!1}},["mainWrapper","generalSectionWrapper","showThemeToggle"]),Ce=[{description:a("theme_description"),header:a("theme"),icon:x,shouldShow:_e.showThemeToggle,testname:"theme",toggleConfig:{checked:!!A,setChecked:ge}},{description:a("sia_setting_description"),header:a("google_suggestions"),icon:j,shouldShow:!0,testname:"sia",toggleConfig:{checked:E,setChecked:xe}},{description:a("source_links_setting_description"),header:a("source_links"),icon:_,shouldShow:!0,testname:"source_links",toggleConfig:{checked:I,setChecked:be}},{description:a("writing_mode_setting_description"),header:a("writing_mode_shortcut"),icon:k,shouldShow:N.use_writing_mode,testname:"writing_mode",toggleConfig:{checked:B,setChecked:ye}}].filter((function(e){return e.shouldShow})),ke=(0,l.useCallback)((function(){var e=s?ie.hG.BROWSER_TAB:ie.hG.SIDEBAR;J({context:e,initTime:Date.now(),source:"settings"}),(0,oe.vH)({action:w.VV.CLICK,context:e,element:w.Y3.ONBOARDING,str_value:"start:log_in:settings"}),(0,Ma.RB)((0,Me.B9)(Ra.FU.EMAIL,L))}),[L,J,s]),Oe=(0,l.useCallback)((function(){we(me),(0,oe.vH)({action:w.VV.MODEL_DELETED,element:w.Y3.AI_SETTING,context:s?ie.hG.BROWSER_TAB:ie.hG.SIDEBAR,model:null,str_value:(0,S.zn)(me)}),d.onOpenChange(!1)}),[d,we,s,me]);return(0,C.jsxs)("div",{className:(0,S.AK)("bg-right-gradient relative flex h-full w-full flex-col text-text-t1-text-active-icons",_e.mainWrapper,!s&&"sidebarless:w-full-menu-dependent"),children:[(0,C.jsx)(D.P_,{}),(0,C.jsxs)("div",{children:[(0,C.jsx)(Z.Im,{title:a("settings")}),ue&&""!==me&&(0,C.jsx)(Ca,{dialogProps:d.dialogProps,message:a("are_you_sure_you_want_to_delete_model",{model:(0,S.zn)(me)}),confirmMessage:a("delete"),cancelMessage:a("cancel"),onCancel:function(){d.onOpenChange(!1)},onConfirm:Oe})]}),(0,C.jsx)("div",{className:"flex-1",children:(0,C.jsxs)("div",{className:(0,S.AK)("flex h-full flex-col px-aria-3",s&&"z-1 mx-auto max-w-tab-view"),children:[(0,C.jsx)("div",{className:"flex-0",children:(0,C.jsx)("div",{className:"pb-aria-9 pt-aria-4",children:(0,C.jsx)("div",{className:"flex flex-row items-center justify-center gap-aria-5",children:ee.map((function(e){var t=re.name===e.name;return(0,C.jsx)(Z.hU,{className:(0,S.AK)("mx-5 !h-8 !w-8",!t&&"border-none"),icon:e.icon,type:t?"secondary":"tertiary",tabIndex:-1,onKeyDown:ve(e),onClick:ve(e),caption:e.name},e.name)}))})})}),(0,C.jsxs)("div",{className:"flex-1",children:[re.name===a("general")&&(0,C.jsxs)("div",{children:[(0,C.jsx)(Z.oX.Wrapper,{children:Ce.map((function(e){return(0,C.jsx)(Z.oX.Section,{children:(0,C.jsx)(ts,{icon:e.icon,header:e.header,description:e.description,toggleConfig:e.toggleConfig})},e.header)}))}),(0,C.jsxs)("div",{className:"text-body-s mt-aria-6 flex flex-col justify-around gap-2 p-aria-4 text-center text-text-t2-text-secondary opacity-80",children:[(0,C.jsx)("span",{children:H?(0,C.jsx)(y.cC,{i18nKey:a("consent_login_for_free"),components:{link1:(0,C.jsx)("span",{role:"button",tabIndex:-1,className:"underline",onClick:ke,onKeyUp:ke})}}):(0,C.jsx)(y.cC,{i18nKey:a("menu_to_log_out"),components:{link1:(0,C.jsx)("span",{role:"button",tabIndex:-1,className:"underline",onClick:function(){return(0,ua.Wu)()},onKeyUp:function(){return(0,ua.Wu)()}})}})}),(0,C.jsx)("span",{children:(0,C.jsx)(y.cC,{i18nKey:a("privacy_policy_and_terms_of_service"),components:{link1:(0,C.jsx)(pn.h,{className:"cursor-pointer text-inherit underline",to:"https://legal.opera.com/privacy"}),link2:(0,C.jsx)(pn.h,{className:"cursor-pointer text-inherit underline",to:"https://legal.opera.com/terms"})}})}),(0,C.jsx)("span",{children:(0,C.jsx)(pn.h,{className:"uppercase underline",to:c.Fl,children:a("faq")})}),(0,C.jsxs)("span",{"data-testid":(0,S.wE)(e,"span","aria-version"),children:[(0,C.jsx)(y.cC,{i18nKey:a("aria_version",{appVersion:P})}),!(0,S.BB)()&&(0,C.jsxs)("span",{children:["-",(0,S.a)()]}),!(0,S.BB)()&&"production"!==L&&(0,C.jsxs)("span",{children:["-",L.toUpperCase()]})]})]})]}),re.name===a("local_models")&&(0,C.jsx)(es,{setShowDeleteConfirm:d.onOpenChange,setModelNameInPopup:he}),re.name===a("profile_settings_tab")&&(0,C.jsx)(ys,{})]})]})})]})};function Cs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ks(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cs(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Os=function(){var e,t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();chrome.storage.local.set((0,g.Z)({},"conversationId_timestamp",e))};t();var n=(0,f.Au)().abortMessage,r=(0,f.oH)().isAriaInTabView,a=(0,Rt.hq)(),o=a.conversationId,i=a.updateConversationId,s=(0,f.iP)().windowInnerWidth,c=(0,f.Su)().networkService,p=(0,u.nHi)().endpointLocalModels,x=(0,u.coc)().chatContext,y=(0,u.RCK)(),w=y.authStatus,j=y.authUserDetails,_=y.isAccountLessUser,k=(0,u.MII)(),O=k.isLocalModelsEnabled,A=k.isLocalModelsEnabledSetByUser,E=(0,u.J7o)().fetchedModels,I=(0,u.pb4)().audience,N=(0,u.Mel)().conversationId,T=(0,u.ND1)().isAriaPinned,R=(0,u.jA1)().handleAuthorizedOnboardingCompleted,M=(0,u.nrG)().handleLoadPromptStudioConfig,P=(0,u.lUI)().clearReusableHighlights,D=(0,u.HhX)(),G=D.handleAuthFlowRequested,L=D.authStateChanged,B=(0,u.Qck)().setModel,Z=(0,u.C7C)().setLocalModels,H=(0,u.Qck)().setFetchedModels,F=(0,u.pKK)().setCliServerConversationId,K=(0,u.Pt2)().handleAriaPinned,U=(0,l.useState)(Date.now()),V=(0,v.Z)(U,2),W=V[0],z=V[1],Y=(0,l.useState)([]),q=(0,v.Z)(Y,2),X=q[0],$=q[1],Q=(0,l.useState)(null),J=(0,v.Z)(Q,2),ee=J[0],te=J[1],ne=(0,l.useState)(null),re=(0,v.Z)(ne,2),ae=re[0],oe=re[1],ie=(0,l.useState)(!1),se=(0,v.Z)(ie,2),ce=se[0],le=se[1],ue=(0,l.useState)(!1),de=(0,v.Z)(ue,2),fe=de[0],me=de[1],he=(0,l.useRef)(null),ve=(0,l.useRef)(o);t(),(0,f.T5)(r?"tab-view":"sidebar"),ei(),(0,f.G0)();var ge=function(){var e=(0,h.Z)(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.xM)().then((function(e){e&&!E.length&&(0,h.Z)(b().mark((function e(){var t;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,S.Ur)(p,{method:"GET"});case 2:t=e.sent,H(t);case 4:case"end":return e.stop()}}),e)})))()})).catch((function(e){Z(e),B("Aria")}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),xe=function(){var e=(0,h.Z)(b().mark((function e(t){var n,r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.timestamp,(r=new Date).setHours(0,0,0,0),!("number"==typeof n&&n<r.getTime())){e.next=7;break}return e.next=6,(0,pt.tK)(Xt.CZ,{});case 6:t={};case 7:oe(t);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),be=function(){chrome.storage.local.get((function(e){var t=e[Xt.Fl]?e[Xt.Fl]:[];x.working||(t=(0,S.mX)(t));var n=t,r=(0,v.Z)(n,1)[0];if(r&&_){var a=r.id,o=r.lastMessageTime,i=new Date(o).getTime();Date.now()-i>=pe.s0&&(0,pt.fV)(a)}$((0,m.Z)(t));var s=e[Xt.CZ]||{};xe(ks({},s))}))},ye=function(){z(Date.now()),i(pe.$M),B("Aria")},we=(0,l.useCallback)((function(){var e,t=null===(e=X.find((function(e){return e.id===ve.current})))||void 0===e?void 0:e.server_id;(0,pt.SJ)(ve.current,t,c),F("")}),[X,F,c]);(0,l.useEffect)((function(){void 0!==r&&o&&me(!0)}),[X.length,o,r]),(0,l.useEffect)((function(){G({openAuthWhenUnauthorized:!1,forceAuthorization:!0}),M(),!O&&!A&&"localModelsPrivate"in opr&&(null==I?void 0:I.identifier)===Xt.$p&&(Z(!0),ge()),O&&ge()}),[]),(0,l.useEffect)((function(){if("loggedIn"===w&&void 0!==j){var e=j.email;he.current!==e&&(le(!1),(0,Xt.Re)(e),(0,Xt.UK)(e),be())}else(0,Xt.Re)("anonymous"),(0,Xt.UK)("anonymous"),be();"notLoggedIn"!==w||j||P()}),[j,w]),(0,l.useEffect)((function(){var e,t=function(){var e=(0,h.Z)(b().mark((function e(t,n,r){var a,o,s,c,l;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.zT)();case 2:return a=e.sent,e.next=5,opr.browserSidebarPrivate.getWindowId.asPromise();case 5:return o=e.sent,e.t0=parseInt,e.next=9,new Promise((function(e){return chrome.storage.local.get(["conversationId_timestamp"],(function(t){return e(t.conversationId_timestamp)}))}));case 9:e.t1=e.sent,s=(0,e.t0)(e.t1),c=a!==T,o===r&&(l=Date.now(),n?!c&&null!==ee&&l-ee>Xt.f4&&(!s||l-s>Xt.f4)&&i(pe.$M):te(l)),K(a);case 14:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();return null===(e=opr.browserSidebarPrivate.onItemPanelVisibilityChanged)||void 0===e||e.addListener(t),function(){var e;null===(e=opr.browserSidebarPrivate.onItemPanelVisibilityChanged)||void 0===e||e.removeListener(t)}}),[te,ee,i,T,K]),(0,l.useEffect)((function(){var e=function(){var e=(0,h.Z)(b().mark((function e(t){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();x.working&&ve.current!==pe.$M&&ve.current!==o&&e(o),_&&ve.current!==pe.$M&&ve.current!==o&&we(),ve.current=o}),[o,x,n]),(0,l.useEffect)((function(){var e=function(e,t){for(var n=0,r=Object.entries(e);n<r.length;n++){var a=(0,v.Z)(r[n],1)[0];"local"===t&&(a===Xt.Fl?$((0,m.Z)(e[a].newValue||[])):a===Xt.CZ&&xe(ks({},e[a].newValue||{})))}};return chrome.storage.onChanged.addListener(e),function(){chrome.storage.onChanged.removeListener(e)}}),[$]),(0,l.useEffect)((function(){function e(){return(e=(0,h.Z)(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=K,e.next=3,(0,d.zT)();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),(0,l.useEffect)((function(){if(N!==pe.$M){var e=X.some((function(e){return e.id===N}));!r&&e&&(i(N),Oe.navigate("/"))}}),[N,X]),(0,l.useEffect)((function(){r?(document.body.classList.add("tab-view"),document.body.classList.remove("sidepanel-view")):(document.body.classList.remove("tab-view"),document.body.classList.add("sidepanel-view"))}),[r]),window.addEventListener("message",(function(e){e.source==window&&e.data&&"FROM_SELENIUM"===e.data.type&&new Qo({authStateChanged:L,handleAuthorizedOnboardingCompleted:R}).handle(e)}),!1);var je=!r&&s>=pe.Qx,_e=(0,f.o6)({wrapperStyles:{operaOne:"opera-one bg-levels-l5-primary",operaGx:"gx bg-levels-l1-chat-bg-bg-elements"}},["wrapperStyles"]),Ce=(0,S.AK)("flex h-full",_e.wrapperStyles,r?"tab-view":je?"sidebar-view":"sidebar-view gap-x-0.5");(0,f.Xp)(pe.gi.WELCOME_PAGE_START_NEW_CHAT,(function(){"#"!==location.href&&(location.href="#"),ye()}));var ke=(0,C.jsxs)(Xo,{wrapperStyles:Ce,viewIsReady:fe,children:[(0,C.jsx)(eo,{conversationsData:X,conversationId:o,setConversationId:i,setMenuStatus:le,menuStatus:ce,addNewChat:ye}),(0,C.jsx)(ca,{conversation:X.find((function(e){return e.id===o}))||{id:o,label:"",data:[],server_id:"",lastMessageTime:""},conversationId:o,conversationSource:r?"tab-view":"sidebar",setConversationId:i,createTimestamp:W,menuStatus:ce,setMenuStatus:le,addNewChat:ye,chatWarning:ae})]}),Oe=(0,So.cP)([{path:"/",element:ke,errorElement:(0,C.jsx)(Vo,{})},{path:"/settings",element:(0,C.jsxs)(Xo,{wrapperStyles:Ce,children:[(0,C.jsx)(eo,{conversationsData:X,conversationId:o,setConversationId:i,setMenuStatus:le,menuStatus:ce,addNewChat:ye}),(0,C.jsx)(_s,{conversationId:o})]}),errorElement:(0,C.jsx)(Vo,{})},{path:"/prompt-studio",element:(0,C.jsx)(Xo,{children:(0,C.jsx)(Oo,{chatWarning:ae,conversationId:o,setConversationId:i,serverId:null===(e=X.find((function(e){return e.id===o})))||void 0===e?void 0:e.server_id})}),errorElement:(0,C.jsx)(Vo,{})},{path:"/my-style",element:(0,C.jsx)(Xo,{children:(0,C.jsx)(Ko,{})}),errorElement:(0,C.jsx)(Vo,{})},{path:"/private-mode",element:(0,C.jsx)(Jo,{})},{path:"/:conversationId",element:ke,errorElement:(0,C.jsx)(Vo,{})},{path:"*",element:(0,C.jsx)(Vo,{})}]);return(0,C.jsx)(So.pG,{fallbackElement:(0,C.jsx)(Po,{}),router:Oe})};(0,n(77031).j)("chat");var Ss=document.getElementById("root");document.body.parentNode&&Ss&&(0,s.s)(Ss).render((0,C.jsx)(c.fC,{children:(0,C.jsx)(p,{children:(0,C.jsx)(Os,{})})}))},18540:(e,t,n)=>{var r;n.d(t,{$M:()=>c,Ch:()=>l,Fr:()=>f,J9:()=>u,SG:()=>i,U8:()=>a,V5:()=>m,VW:()=>s,ht:()=>p,re:()=>o,sO:()=>d});var a="chrome-extension://igpdmclhhlcpoindmhkhillbfhdgoegm",o="ariaActiveSidebarConversation",i="Aria",s="AriaVoiceData",c="_new",l=["organize_tabs","rich_response","longterm_memory"],u=["longterm_memory"],d=["longterm_memory","organize_tabs"],f=["longterm_memory"],p={"command-line":["rich_response","longterm_memory"],"selected-content-prompt":["rich_response","longterm_memory"]},m=new RegExp(/mac/).test(null===(r=window.navigator)||void 0===r?void 0:r.platform.toLowerCase())},68209:(e,t,n)=>{n.d(t,{$:()=>a,D:()=>r});var r={TEXT:"text",IMAGE_GENERATION:"image"},a={ANTHROPIC:"anthropic",GOOGLE:"google",OPENAI:"openai",AI_CLUSTER:"ai_cluster"}},57717:(e,t,n)=>{n.d(t,{B7:()=>r,CX:()=>o,Dv:()=>i,Fz:()=>s,dl:()=>a});var r=200,a=8,o=8,i=["message-temporary"],s=720},55989:(e,t,n)=>{n.d(t,{p:()=>r});var r="aria_image"},50198:(e,t,n)=>{n.d(t,{$M:()=>r.$M,$Y:()=>g.$Y,B7:()=>l.B7,CX:()=>l.CX,Ch:()=>r.Ch,Cr:()=>y.Cr,DH:()=>g.DH,Dl:()=>g.Dl,Dv:()=>l.Dv,E$:()=>d.E$,FU:()=>a.FU,Fb:()=>d.Fb,Fk:()=>p.Fk,Fl:()=>x.F,Fr:()=>r.Fr,Fz:()=>l.Fz,Gc:()=>p.Gc,Go:()=>y.Go,J9:()=>r.J9,JH:()=>y.JH,KP:()=>v.KP,Lz:()=>p.Lz,MP:()=>i.M,Qc:()=>y.Qc,Qx:()=>i.Q,SG:()=>r.SG,U8:()=>r.U8,Ud:()=>d.Ud,V4:()=>y.V4,V5:()=>r.V5,V6:()=>d.V6,VW:()=>r.VW,XT:()=>g.XT,Y9:()=>p.Y9,YE:()=>g.YE,YF:()=>y.YF,YO:()=>g.YO,Z$:()=>b.Z$,ZT:()=>m.JH,Zv:()=>w.Z,_U:()=>m._U,_e:()=>g._e,a8:()=>h.a8,aK:()=>o.a,b$:()=>c.b,bC:()=>p.bC,bX:()=>g.bX,bb:()=>y.bb,dl:()=>l.dl,eF:()=>h.eF,gi:()=>f.gi,gp:()=>g.gp,ht:()=>r.ht,jE:()=>b.jE,jn:()=>y.jn,jv:()=>h.jv,kr:()=>v.kr,lV:()=>g.lV,lo:()=>x.l,mh:()=>p.mh,or:()=>o.o,pj:()=>u.p,qB:()=>b.qB,re:()=>r.re,s0:()=>d.s0,sO:()=>r.sO,sh:()=>v.sh,t5:()=>s.t,tX:()=>d.tX,tZ:()=>y.tZ,uj:()=>g.Uo,un:()=>g.un,v5:()=>y.v5,vH:()=>y.vH,vR:()=>g.vR,wN:()=>d.wN,x4:()=>v.x4,yo:()=>y.yo});var r=n(18540),a=n(13771),o=n(53533),i=n(97358),s=n(27715),c=n(57214),l=(n(50143),n(57717)),u=n(55989),d=n(31622),f=n(14473),p=n(29033),m=n(17125),h=(n(65517),n(96995)),v=(n(83065),n(56336)),g=n(53706),x=n(5407),b=n(90102),y=n(91904),w=n(55550)},31622:(e,t,n)=>{n.d(t,{E$:()=>d,Eg:()=>u,Fb:()=>o,Ud:()=>c,V6:()=>s,s0:()=>l,tX:()=>a,wN:()=>i});var r=n(56336),a=6e3,o=1,i=64,s=a-300,c=(r.EB,30),l=48*r.kr,u=1024,d=128},53706:(e,t,n)=>{n.d(t,{$Y:()=>f,DH:()=>a,Dl:()=>h,Uo:()=>d,XT:()=>u,YE:()=>s,YO:()=>c,_e:()=>m,bX:()=>o,gp:()=>l,lV:()=>v,un:()=>i,vR:()=>p});var r=n(56336),a=r.sh,o=48,i=50,s=6*r.sh,c=-12,l=64,u=250,d=40,f=200,p="Command+/",m="Ctrl+/",h=56,v=46},5407:(e,t,n)=>{n.d(t,{F:()=>r,l:()=>a});var r="https://help.opera.com/en/browser-ai-faq",a="https://forums.opera.com/category/61/opera-browser-ai"},68279:(e,t,n)=>{n.d(t,{Au:()=>a.A,Cg:()=>s.C,FL:()=>l.F,G0:()=>c.G,GC:()=>h.G,GV:()=>w.G,Gt:()=>y.G,Su:()=>m.S,T4:()=>v.T,T5:()=>o.T,XI:()=>u.X,Xp:()=>f.X,a:()=>y.a,eh:()=>d.e,fg:()=>i.f,iP:()=>x.i,o6:()=>g.o,oH:()=>r.Z,rf:()=>b.r,u:()=>p.u});var r=n(95579),a=(n(38824),n(32045)),o=n(66330),i=n(42965),s=n(17059),c=n(7066),l=n(83470),u=n(21044),d=(n(2065),n(5355)),f=n(59830),p=n(91906),m=n(82503),h=n(69332),v=n(53576),g=(n(34928),n(7332)),x=n(32888),b=n(48469),y=n(25370),w=n(45670)},32045:(e,t,n)=>{n.d(t,{A:()=>d});var r=n(15861),a=n(64687),o=n.n(a),i=n(60243),s=n(4916),c=n(76756),l=n(23586),u=n(67294),d=function(){var e=(0,c.Su)().loggerService,t=(0,l.aGe)().clearChatContext,n=(0,l.coc)().chatContext,a=(0,l.RCK)().authUserDetails,d=(0,u.useCallback)((function(t){return new Promise((function(n){var c=0,l=setInterval((0,r.Z)(o().mark((function r(){var u,d,f,p;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(u=function(){e.infoColor("abortMessage -> ensureAbortCompletion -> DONE","tomato"),clearInterval(l),n()},i.Fl){r.next=8;break}if(!(d=(null!=a?a:{}).email)){r.next=7;break}(0,i.Re)(d),r.next=8;break;case 7:return r.abrupt("return",u());case 8:return r.next=10,(0,s.hV)(t);case 10:if((f=r.sent)&&null!=f&&f.data){r.next=13;break}return r.abrupt("return",u());case 13:if(p=Boolean(f.data.at(-1).aborted),e.infoColor("abortMessage -> ensureAbortCompletion","tomato","isLastMessageAborted: ".concat(p),f),!p){r.next=17;break}return r.abrupt("return",u());case 17:++c>=20&&(c=0,e.infoColor("abortMessage -> ensureAbortCompletion timeout - ABANDON","red"),clearInterval(l));case 19:case"end":return r.stop()}}),r)}))),50)}))}),[a,e]),f=(0,u.useCallback)((0,r.Z)(o().mark((function r(){var a,i=arguments;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=i.length>0&&void 0!==i[0]?i[0]:"conversationId not provided for the log",e.infoColor("abortMessage","tomato",a,n),t(!0),r.next=5,d(a);case 5:case"end":return r.stop()}}),r)}))),[n,t,e,d]);return{abortMessage:f}}},66330:(e,t,n)=>{n.d(t,{T:()=>i});var r=n(67294),a=n(23586),o=n(82503),i=function(e){var t=(0,o.S)().ariaVoiceReaderService,n=(0,a.dQQ)().setAriaVoiceState;(0,r.useEffect)((function(){function r(t){var r=t.detail.messageId;n({isPlaying:!0,messageId:void 0===r?null:r,source:e})}function a(){n({isPlaying:!1,messageId:null,source:""})}return t.addListener("readstart",r),t.addListener("readstop",a),function(){t.removeListener("readstart",r),t.removeListener("readstop",a)}}),[t,n,e])}},96531:(e,t,n)=>{n.d(t,{KH:()=>E,OP:()=>w,Pn:()=>k,fD:()=>C,gk:()=>S,k9:()=>j,l0:()=>I,q$:()=>A,qN:()=>_,sS:()=>O,zj:()=>y});var r=n(4942),a=n(93324),o=n(15861),i=n(64687),s=n.n(i),c=n(28721),l=n(92612),u=n(76324),d=n(76756),f=n(38856),p=n(50198),m=n(25108),h="http://localhost/",v="base64-image/",g=new u.m({env:(0,f.a)(),name:"File Upload utils"}),x=function(){var e=(0,o.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,caches.open("ImageCache");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=(0,o.Z)(s().mark((function e(t,n){var r,a,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x();case 2:return r=e.sent,a=new Request(h+v+t,{}),o=new Response(n,{headers:{"Content-Type":"text/plain"}}),e.next=7,r.put(a,o);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y=function(){var e=(0,o.Z)(s().mark((function e(t){var n,r,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x();case 2:return n=e.sent,r=new Request(h+v+t),e.next=6,n.match(r);case 6:if(!(a=e.sent)){e.next=13;break}return e.next=10,a.text();case 10:return e.abrupt("return",e.sent);case 13:return e.abrupt("return",null);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=(0,o.Z)(s().mark((function e(t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&0!==t.length){e.next=2;break}return e.abrupt("return",void 0);case 2:return e.prev=2,e.next=5,Promise.all(t.map(function(){var e=(0,o.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(t.image_id);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:return n=e.sent,e.abrupt("return",n.filter((function(e){return Boolean(e)})).map((function(e){return null==e?void 0:e.split("base64,")[1]})));case 9:return e.prev=9,e.t0=e.catch(2),m.error("Error fetching images from CacheStorage:",e.t0),e.abrupt("return",void 0);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=(0,o.Z)(s().mark((function e(t){var n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x();case 2:return n=e.sent,r=new Request(h+v+t),e.next=6,n.delete(r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=(0,o.Z)(s().mark((function e(){var t,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x();case 2:return t=e.sent,e.next=5,t.keys();case 5:null!=(n=e.sent)&&n.length&&n.forEach((function(e){return t.delete(e)}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(e){return new Promise((function(t,n){var r=new FileReader;r.onload=function(){t(r.result)},r.onerror=function(e){return n(e)},r.readAsDataURL(e)}))},k=function(){var e=(0,o.Z)(s().mark((function e(t){var n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C(t);case 3:return n=e.sent,r=(0,c.Z)(),e.next=7,b(r,n);case 7:return e.abrupt("return",{image_id:r,file:t});case 10:throw e.prev=10,e.t0=e.catch(0),m.error("Error during save image to CacheStorage",e.t0),e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),O=function(e){if(0===e)return"0 Bytes";var t=Math.floor(Math.log(e)/Math.log(l.vW));return parseFloat((e/Math.pow(l.vW,t)).toFixed(2))+" "+["Bytes","KB","MB","GB","TB"][t]},S=function(e,t){var n;if(!e.startsWith("data:")&&!e.startsWith("http"))return g.error("Invalid data URL"),null;var o=e.split(","),i=(0,a.Z)(o,2),s=i[0],c=i[1],l=s.match(/:(.*?);/);if(!l)return g.error("Unable to extract MIME type"),null;for(var u=l[1],d=atob(c),f=new Uint8Array(d.length),m=0;m<d.length;m++)f[m]=d.charCodeAt(m);var h=null!==(n=function(e){var t;if(!e.startsWith("data:"))return g.error("Invalid data URL"),null;var n=e.split(","),o=(0,a.Z)(n,1)[0].match(/:(.*?);/);if(!o)return g.error("Unable to extract MIME type"),null;var i=o[1],s=(t={},(0,r.Z)(t,"image/png",".png"),(0,r.Z)(t,"image/jpeg",".jpeg"),(0,r.Z)(t,"image/jpg",".jpg"),(0,r.Z)(t,"image/gif",".gif"),(0,r.Z)(t,"image/webp",".webp"),t);if(!(i in s))return g.error("Unsupported MIME type:",i),null;var c=(new Date).getTime();return"".concat(p.pj,"_").concat(c).concat(s[i])}(e))&&void 0!==n?n:"";return new File([f],t||h,{type:u})},A=function(){var e=(0,o.Z)(s().mark((function e(t){var n,r,a,o,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.startsWith("http")){e.next=3;break}return g.error("Invalid data src URL"),e.abrupt("return",null);case 3:return e.next=5,fetch(t);case 5:if((n=e.sent).ok){e.next=8;break}throw new Error("Failed to fetch image");case 8:return e.next=10,n.blob();case 10:return r=e.sent,a=(new Date).getTime(),o=r.type.split("/")[1],i="".concat(p.pj,"_").concat(a,".").concat(o),e.abrupt("return",new File([r],i,{type:r.type}));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(e){var t;return p.v5.includes(d.nS.getFileExtension(null!==(t=null==e?void 0:e.name)&&void 0!==t?t:""))},I=function(e){var t;return!p.v5.includes(d.nS.getFileExtension(null!==(t=null==e?void 0:e.name)&&void 0!==t?t:""))}},95579:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(93324),a=n(67294),o=n(53979);function i(){var e=(0,a.useState)(),t=(0,r.Z)(e,2),n=t[0],i=t[1],s=(0,a.useState)(void 0),c=(0,r.Z)(s,2),l=c[0],u=c[1];return(0,a.useEffect)((function(){(0,o.nU)((function(e){i(e);var t=(e||{windowId:chrome.tabs.TAB_ID_NONE}).windowId;u(t>chrome.tabs.TAB_ID_NONE)}))}),[]),{currentTab:n,isAriaInTabView:l}}},76756:(e,t,n)=>{n.d(t,{$D:()=>i.$D,$M:()=>s.$M,$Y:()=>s.$Y,Au:()=>o.Au,B7:()=>s.B7,Bz:()=>r.Bz,CX:()=>s.CX,Cg:()=>o.Cg,Dl:()=>s.Dl,Dv:()=>s.Dv,E$:()=>s.E$,FL:()=>o.FL,Fb:()=>s.Fb,Fk:()=>s.Fk,Fl:()=>s.Fl,Fz:()=>s.Fz,GV:()=>o.GV,Gc:()=>s.Gc,Go:()=>s.Go,HA:()=>r.HA,JH:()=>s.JH,KP:()=>s.KP,Lz:()=>i.Lz,Qc:()=>s.Qc,Qx:()=>s.Qx,SG:()=>s.SG,Su:()=>o.Su,T4:()=>o.T4,TL:()=>r.TL,U8:()=>s.U8,Ud:()=>s.Ud,V4:()=>s.V4,V5:()=>s.V5,V6:()=>s.V6,VW:()=>s.VW,XI:()=>o.XI,XT:()=>s.XT,Xp:()=>o.Xp,YE:()=>s.YE,YF:()=>s.YF,Z$:()=>s.Z$,_U:()=>s._U,_e:()=>s._e,aK:()=>s.aK,b$:()=>s.b$,bC:()=>s.bC,bb:()=>s.bb,dl:()=>s.dl,eh:()=>o.eh,fC:()=>c.f,fg:()=>o.fg,gi:()=>s.gi,iP:()=>o.iP,ix:()=>r.ix,jE:()=>s.jE,jn:()=>s.jn,kr:()=>s.kr,lV:()=>s.lV,lo:()=>s.lo,mQ:()=>a.mQ,nS:()=>a.nS,o6:()=>o.o6,oH:()=>o.oH,qB:()=>s.qB,re:()=>s.re,rf:()=>o.rf,rg:()=>o.a,sh:()=>s.sh,t5:()=>s.t5,tX:()=>s.tX,tZ:()=>s.tZ,u:()=>o.u,uj:()=>s.uj,uk:()=>s.Lz,v5:()=>s.v5,vR:()=>s.vR,vz:()=>r.vz,wN:()=>s.wN,x4:()=>s.x4});var r=n(45477),a=n(57406),o=n(68279),i=n(38185),s=n(50198),c=n(870)},32461:(e,t,n)=>{n.d(t,{FL:()=>s.F,FQ:()=>o.F,Q:()=>c.Q,fv:()=>r.f,lj:()=>i.l,nH:()=>a.n});var r=n(89758),a=n(38860),o=n(12887),i=n(65688),s=n(5206),c=n(87921)},65688:(e,t,n)=>{n.d(t,{l:()=>o});var r=n(76756),a=n(58606),o=function(){return{remoteConfig:(0,r.ix)(a.I1),remoteConfigLoading:(0,r.ix)(a.IH),remoteConfigOverride:(0,r.ix)(a.lE)}}},59565:(e,t,n)=>{n.d(t,{FL:()=>o.FL,FQ:()=>o.FQ,I1:()=>i.I1,Ir:()=>i.Ir,Q:()=>o.Q,Tu:()=>r.T,cq:()=>a.cq,fv:()=>o.fv,gZ:()=>i.gZ,lj:()=>o.lj,nH:()=>o.nH});var r=n(27996),a=n(97909),o=n(32461),i=n(58606)},52452:(e,t,n)=>{n.d(t,{A4:()=>o.A4,AL:()=>o.AL,C7:()=>o.C7,Dy:()=>s.D,FL:()=>a.FL,FQ:()=>a.FQ,Gs:()=>i.Gs,Hk:()=>i.Hk,I1:()=>a.I1,Ir:()=>a.Ir,J0:()=>o.J0,MI:()=>o.MI,ND:()=>i.ND,Os:()=>i.Os,Pt:()=>i.Pt,Q:()=>a.Q,Qk:()=>i.Qk,Ql:()=>r.Ql,S6:()=>i.S6,VG:()=>i.VG,Vg:()=>o.Vg,YW:()=>o.YW,YZ:()=>r.YZ,_g:()=>r._g,cq:()=>a.cq,cv:()=>o.cv,ek:()=>i.ek,fv:()=>a.fv,gZ:()=>a.gZ,hN:()=>r.hN,iB:()=>r.iB,jA:()=>i.jA,jN:()=>i.jN,jR:()=>o.jR,kq:()=>o.kq,lj:()=>a.lj,ln:()=>i.ln,nH:()=>a.nH,oi:()=>i.oi,pb:()=>r.pb,qe:()=>r.qe,sn:()=>i.sn});var r=n(23269),a=n(59565),o=n(68988),i=n(26808),s=n(84543)},75334:(e,t,n)=>{n.d(t,{Hk:()=>i,Os:()=>c,Qk:()=>s,S6:()=>a,ln:()=>o});var r=n(91757),a=(0,r.createAction)("ARIA_OPENED")(),o=(0,r.createAction)("ARIA_PINNED")(),i=(0,r.createAction)("UPGRADE_BANNER_SEEN_IN_SIDEBAR")(),s=(0,r.createAction)("UPGRADE_BANNER_SEEN_ONCE")(),c=(0,r.createAction)("ONBOARDING_COMPLETED")()},45293:(e,t,n)=>{n.d(t,{Gs:()=>r.G,ND:()=>i.N,Pt:()=>o.P,ek:()=>s.e,jA:()=>a.j,oi:()=>c.o});var r=n(28400),a=n(40946),o=n(99563),i=n(26237),s=n(45147),c=n(8685)},8685:(e,t,n)=>{n.d(t,{o:()=>i});var r=n(76756),a=n(67294),o=n(23586),i=function(){var e=(0,r.TL)();return{handleUpgradeBannerSeenInSidebar:(0,a.useCallback)((function(t){e((0,o.HkR)(t))}),[e]),handleUpgradeBannerSeenOnce:(0,a.useCallback)((function(){e((0,o.Qkn)())}),[e])}}},45147:(e,t,n)=>{n.d(t,{e:()=>o});var r=n(76756),a=n(47696),o=function(){return{upgradeBannerSeenInSidebar:(0,r.ix)(a.jV),upgradeBannerSeenOnce:(0,r.ix)(a.FY)}}},28400:(e,t,n)=>{n.d(t,{G:()=>o});var r=n(76756),a=n(47696),o=function(e){var t=e.userIdentity;return{authorizedOnboardingCompletedOnce:(0,r.ix)((0,a.sn)(t))}}},26808:(e,t,n)=>{n.d(t,{Gs:()=>a.Gs,Hk:()=>i.Hk,ND:()=>a.ND,Os:()=>i.Os,Pt:()=>a.Pt,Qk:()=>i.Qk,S6:()=>i.S6,VG:()=>o.VG,ek:()=>a.ek,jA:()=>a.jA,jN:()=>o.jN,ln:()=>i.ln,oi:()=>a.oi,qd:()=>r.q,sn:()=>o.sn});var r=n(27976),a=n(45293),o=n(47696),i=n(75334)},47696:(e,t,n)=>{n.d(t,{FY:()=>c,VG:()=>o,jN:()=>i,jV:()=>s,sn:()=>a});var r=(0,n(76756).Bz)("ariaAppInteractions"),a=function(e){return function(t){return!!e&&Boolean(function(e){return r(e).authorizedOnboardingCompletedOnce}(t)[e])}},o=function(e){return r(e).isAriaMounted},i=function(e){return r(e).isAriaPinned},s=function(e){return r(e).upgradeBannerSeenInSidebar},c=function(e){return r(e).upgradeBannerSeenOnceOnCli}},98690:(e,t,n)=>{n.d(t,{Q:()=>o});var r=n(76756),a=n(33638),o=function(){return{appVersion:(0,r.ix)(a.q$)}}},95796:(e,t,n)=>{n.d(t,{_:()=>s});var r=n(76756),a=n(67294),o=n(33638),i=n(30093),s=function(){var e=(0,r.ix)(o.qe),t=(0,r.TL)(),n=(0,a.useCallback)((function(e){t((0,i.V)(e))}),[t]);return{contextType:e,setContextType:n}}},33019:(e,t,n)=>{n.d(t,{A4:()=>s.A,AL:()=>d.A,C7:()=>i.C,J0:()=>c.J,MI:()=>o.M,Vg:()=>u.V,YW:()=>l.Y,cv:()=>r.c,jR:()=>f.j,kq:()=>a.k});var r=n(8087),a=n(22760),o=n(19920),i=n(24578),s=n(2080),c=n(76437),l=n(74912),u=n(80943),d=n(96475),f=n(27755)},96475:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(76756),a=n(20851),o=function(){return{profileMemoryEnabled:(0,r.ix)(a.Dl)}}},76437:(e,t,n)=>{n.d(t,{J:()=>o});var r=n(76756),a=n(20851),o=function(){return{isSourceLinksEnabled:(0,r.ix)(a.NU)}}},68988:(e,t,n)=>{n.d(t,{A4:()=>a.A4,AL:()=>a.AL,C7:()=>a.C7,J0:()=>a.J0,MI:()=>a.MI,Vg:()=>a.Vg,YW:()=>a.YW,_e:()=>r._,cv:()=>a.cv,jR:()=>a.jR,kq:()=>a.kq});var r=n(38063),a=(n(4559),n(33019));n(20851)},20851:(e,t,n)=>{n.d(t,{$R:()=>s,DT:()=>l,Dl:()=>f,J:()=>c,NU:()=>i,UD:()=>o,_0:()=>u,qS:()=>a,xr:()=>d});var r=(0,n(76756).Bz)("ariaAppUserSettings"),a=function(e){return r(e).localModelsEnabled},o=function(e){return r(e).localModelsEnabledPending},i=function(e){return r(e).sourceLinksEnabled},s=function(e){return r(e).darkThemeEnabled},c=function(e){return r(e).selectedLocalModel},l=function(e){return r(e).localModelsChangedByUser},u=function(e){return r(e).writingModeShortcutEnabled},d=function(e){return r(e).isWritingModeShortcutEnabledManually},f=function(e){return r(e).profileMemoryEnabled}},6882:(e,t,n)=>{n.d(t,{Bw:()=>o.Bw,C$:()=>r.C,Dp:()=>a.Dp,Hh:()=>a.Hh,Hq:()=>a.Hq,I0:()=>a.I0,LF:()=>a.LF,Oj:()=>o.Oj,QA:()=>a.QA,QD:()=>a.QD,QI:()=>o.QI,RC:()=>a.RC,_4:()=>a._4,cv:()=>a.cv,hr:()=>o.hr,iz:()=>a.iz,mW:()=>o.mW,uo:()=>a.uo,uy:()=>a.uy,wV:()=>o.wV,x8:()=>a.x8,xU:()=>a.xU});var r=n(35787),a=n(14134),o=n(40455)},65540:(e,t,n)=>{n.d(t,{R:()=>a.R,d:()=>r.d});var r=n(81421),a=n(99715)},81421:(e,t,n)=>{n.d(t,{d:()=>i});var r=n(67294),a=n(50533),o=n(1700),i=function(){var e=(0,a.I0)();return{setAriaVoiceState:(0,r.useCallback)((function(t){e((0,o.d)(t))}),[e]),setIsVoiceMode:(0,r.useCallback)((function(t){e((0,o.G)(t))}),[e])}}},99715:(e,t,n)=>{n.d(t,{R:()=>o});var r=n(76756),a=n(67458),o=function(){return{ariaVoiceState:(0,r.ix)(a.T),isVoiceMode:(0,r.ix)(a.Y)}}},36012:(e,t,n)=>{n.d(t,{R_:()=>r.R,az:()=>a.a,dQ:()=>r.d});n(1700);var r=n(65540),a=n(49180);n(67458)},64825:(e,t,n)=>{n.d(t,{I:()=>r.I});var r=n(55241)},55241:(e,t,n)=>{n.d(t,{I:()=>o});var r=n(76756),a=n(23586);function o(){var e=(0,r.ix)(a.bsc);return{fetchedCloudModels:e,checkIfExistInRegistry:function(t){return!!t&&e.some((function(e){return e.name===t}))}}}},19484:(e,t,n)=>{n.d(t,{It:()=>a.I,WM:()=>o.W,bs:()=>i.b,cW:()=>r.c,uJ:()=>r.u});var r=n(65515),a=n(64825),o=n(30694),i=n(29016)},70026:(e,t,n)=>{n.d(t,{a:()=>i});var r=n(76756),a=n(67294),o=n(23586),i=function(){var e=(0,r.TL)();return{setChatContext:(0,a.useCallback)((function(t){e((0,o.GSX)(t))}),[e]),clearChatContext:(0,a.useCallback)((function(t){e((0,o.O_$)(t))}),[e])}}},22492:(e,t,n)=>{n.d(t,{h:()=>a.h,t:()=>r.t});var r=n(48413),a=n(76966)},48413:(e,t,n)=>{n.d(t,{t:()=>i});var r=n(76756),a=n(67294),o=n(23586),i=function(){var e=(0,r.TL)(),t=(0,a.useCallback)((function(){e((0,o.us$)())}),[e]),n=(0,a.useCallback)((function(t){e((0,o.NkU)(t))}),[e]);return{clearFeedbackState:t,handleSaveFeedback:(0,a.useCallback)((function(){e(o.d0z.request())}),[e]),setFeedbackData:n}}},76966:(e,t,n)=>{n.d(t,{h:()=>o});var r=n(76756),a=n(15262),o=function(){return{feedbackData:(0,r.ix)(a.uR),saveFeedbackLoading:(0,r.ix)(a.iG),saveFeedbackSuccessful:(0,r.ix)(a.ys)}}},40048:(e,t,n)=>{n.d(t,{BW:()=>o.B,Nk:()=>r.Nk,d0:()=>r.d0,hs:()=>a.h,tk:()=>a.t,uR:()=>i.uR,us:()=>r.us});var r=n(16087),a=n(22492),o=n(19776),i=n(15262)},79577:(e,t,n)=>{n.d(t,{$u:()=>d,A2:()=>c,BB:()=>u,P:()=>a,Rr:()=>s,ZC:()=>l,fX:()=>i,mX:()=>o,oh:()=>f});var r=n(91757),a=(0,r.createAction)("CLEAR_HIGHLIGHTS")(),o=(0,r.createAction)("CLEAR_REUSABLE_HIGHLIGHTS")(),i=(0,r.createAction)("SET_HIGHLIGHT")(),s=(0,r.createAction)("SET_RENDER_HIGHLIGHTS_READY")(),c=(0,r.createAction)("REMOVE_HIGHLIGHT")(),l=(0,r.createAction)("REUSE_HIGHLIGHT")(),u=(0,r.createAction)("REMOVE_REUSABLE_HIGHLIGHT")(),d=(0,r.createAction)("REPHRASE_HIGHLIGHT")(),f=(0,r.createAction)("SET_REPHRASE_MESSAGE_PATCH")()},19755:(e,t,n)=>{n.d(t,{WG:()=>s.W,bC:()=>o.b,kG:()=>i.k,lU:()=>a.l,ok:()=>c.o,uE:()=>r.u});var r=n(60148),a=n(55888),o=n(8583),i=n(16663),s=n(69345),c=n(47771)},92616:(e,t,n)=>{n.d(t,{$u:()=>r.$u,A2:()=>r.A2,BB:()=>r.BB,E3:()=>a.E,EP:()=>o.EP,P:()=>r.P,QP:()=>o.QP,Rr:()=>r.Rr,WG:()=>i.WG,Xe:()=>o.Xe,ZC:()=>r.ZC,bC:()=>i.bC,bh:()=>o.bh,fX:()=>r.fX,kG:()=>i.kG,lU:()=>i.lU,mX:()=>r.mX,oX:()=>o.oX,oh:()=>r.oh,ok:()=>i.ok,uE:()=>i.uE});var r=n(79577),a=n(10664),o=n(56696),i=n(19755)},83544:(e,t,n)=>{n.d(t,{$u:()=>o.$u,A2:()=>o.A2,B9:()=>c.B9,BB:()=>o.BB,Cg:()=>i.Cg,EP:()=>o.EP,ES:()=>r.E,Fu:()=>u.Fu,GS:()=>l.GS,Gg:()=>i.Gg,HW:()=>f.HW,It:()=>p.It,J7:()=>u.J7,KH:()=>c.KH,L6:()=>c.L6,My:()=>f.My,Nk:()=>d.Nk,Nq:()=>a.dQ,O_:()=>l.O_,P:()=>o.P,QP:()=>o.QP,Qc:()=>u.Qc,R_:()=>a.R_,Rr:()=>o.Rr,Uw:()=>f.Uw,WG:()=>o.WG,Xe:()=>o.Xe,Z8:()=>f.Z8,ZC:()=>o.ZC,aG:()=>l.aG,bC:()=>o.bC,bh:()=>o.bh,bs:()=>p.bs,cW:()=>p.cW,co:()=>l.co,d0:()=>d.d0,dQ:()=>i.dQ,eg:()=>s.eg,fX:()=>o.fX,hs:()=>d.hs,jg:()=>u.jg,k0:()=>u.k0,kG:()=>o.kG,kg:()=>i.kg,lU:()=>o.lU,mX:()=>o.mX,oX:()=>o.oX,oh:()=>o.oh,ok:()=>o.ok,pw:()=>f.pw,tk:()=>d.tk,uE:()=>o.uE,uJ:()=>p.uJ,uR:()=>d.uR,us:()=>d.us,wF:()=>f.wF,xW:()=>u.xW});var r=n(78075),a=n(36012),o=n(92616),i=n(58391),s=n(91117),c=n(697),l=n(83648),u=n(42638),d=n(40048),f=n(58109),p=n(19484)},94235:(e,t,n)=>{n.d(t,{B:()=>a.B,L:()=>r.L});var r=n(11218),a=n(30519)},30519:(e,t,n)=>{n.d(t,{B:()=>o});var r=n(76756),a=n(42130),o=function(){var e=(0,r.rg)().currentWindowId;return{newConversationRequest:(0,r.ix)((0,a.p)(e))}}},697:(e,t,n)=>{n.d(t,{B9:()=>a.B,KH:()=>o.K,L6:()=>a.L,X_:()=>r.X});var r=n(94311),a=n(94235),o=n(44946)},42130:(e,t,n)=>{n.d(t,{p:()=>a});var r=(0,n(76756).Bz)("ariaChatMessaging"),a=function(e){return function(t){return r(t).newConversationRequest[e]}}},35871:(e,t,n)=>{n.d(t,{G:()=>a.G,k:()=>r.k});var r=n(6949),a=n(91178)},91178:(e,t,n)=>{n.d(t,{G:()=>o});var r=n(76756),a=n(47239),o=function(){return{isSiaEnabled:(0,r.ix)(a.q),siaPolicyUpdateImpressionTimestamp:(0,r.ix)(a.b)}}},58391:(e,t,n)=>{n.d(t,{Cg:()=>r.C,Gg:()=>a.G,XM:()=>o.X,dQ:()=>r.d,kg:()=>a.k});var r=n(52652),a=n(35871),o=n(48308);n(47239)},55980:(e,t,n)=>{n.d(t,{$I:()=>d,FG:()=>b,Is:()=>s,Iy:()=>p,Kd:()=>o,Kv:()=>x,T2:()=>m,Y7:()=>c,ap:()=>h,bx:()=>l,cg:()=>f,co:()=>u,fZ:()=>v,i7:()=>g,sP:()=>a,vF:()=>i});var r=n(91757),a=(0,r.createAction)("ADD_CLI_ARIA_MESSAGE_TASK")(),o=(0,r.createAction)("CLI_CLEAR")(),i=(0,r.createAction)("REMOVE_CLI_SET_ARIA_MESSAGE_TASK")(),s=(0,r.createAction)("CLI_SET_ARIA_MESSAGE")(),c=(0,r.createAction)("CLI_SET_CONVERSATION")(),l=(0,r.createAction)("CLI_SET_CONVERSATION_ID")(),u=(0,r.createAction)("CLI_SET_USER_MESSAGE")(),d=(0,r.createAction)("CLI_SET_USER_QUERY")(),f=(0,r.createAction)("CLI_SAVE_USER_QUERY_IN_HISTORY")(),p=(0,r.createAction)("CLI_SET_VISIBLE")(),m=(0,r.createAction)("SET_CLI_HINTS_VISIBLE")(),h=(0,r.createAction)("CLI_SET_IS_OPENED_WITH_TAB_ORGANIZE")(),v=(0,r.createAction)("CLI_SET_IS_OPENED_WITH_KEYBOARD_SHORTCUT")(),g=(0,r.createAction)("CLI_SET_TAB_ORGANIZE_TASK_STATE")(),x=(0,r.createAction)("SET_SAVED_PROMPT_NON_LOGGED_IN_REQUEST")(),b=((0,r.createAction)("CLI_SET_SELECTED_WRITING_MODE")(),(0,r.createAction)("SET_CLI_SERVER_CONVERSATION_ID_CHANGED")())},13294:(e,t,n)=>{n.d(t,{Dq:()=>o.Dq,JV:()=>o.JV,Kd:()=>r.Kd,L1:()=>o.L1,L4:()=>o.L4,Me:()=>a.M,TB:()=>o.TB,UJ:()=>o.UJ,_l:()=>o._l,a1:()=>o.a1,a4:()=>o.a4,bt:()=>o.bt,cb:()=>o.cb,fF:()=>o.fF,kN:()=>o.kN,mu:()=>o.mu,pK:()=>a.p,v3:()=>o.v3,yN:()=>o.yN});var r=n(55980),a=n(21790),o=(n(43159),n(53627))},36468:(e,t,n)=>{n.d(t,{Ch:()=>r.C,Dq:()=>a.Dq,JV:()=>a.JV,Kd:()=>a.Kd,L1:()=>a.L1,L4:()=>a.L4,LC:()=>o.LC,M2:()=>i.M2,M6:()=>i.M6,MO:()=>i.MO,Me:()=>a.Me,TB:()=>a.TB,TJ:()=>i.TJ,UJ:()=>a.UJ,Vr:()=>i.Vr,X3:()=>s.X3,Yw:()=>i.Yw,Zo:()=>s.Zo,_l:()=>a._l,a1:()=>a.a1,a4:()=>a.a4,b0:()=>i.b0,bY:()=>i.bY,bt:()=>a.bt,bx:()=>i.bx,cb:()=>a.cb,fF:()=>a.fF,hR:()=>i.hR,kN:()=>a.kN,mu:()=>a.mu,pK:()=>a.pK,pq:()=>o.pq,uC:()=>i.uC,v3:()=>a.v3,yN:()=>a.yN});var r=n(77961),a=n(13294),o=n(55936),i=n(76194),s=(n(99145),n(52220),n(59120))},21063:(e,t,n)=>{n.d(t,{X:()=>r.X});var r=n(16240);n(30335)},16240:(e,t,n)=>{n.d(t,{X:()=>i});var r=n(76756),a=n(68528),o=n(39157),i=function(){var e=(0,r.ix)(a.I);return{cliMode:e,mainModeEnabled:e===o.E.main,pageContextEnabled:e===o.E.pageContext,writingModeEnabled:e===o.E.writingMode}}},59120:(e,t,n)=>{n.d(t,{X3:()=>a.X,Zo:()=>r.Zo});var r=n(68881),a=n(21063);n(71681),n(68528)},88948:(e,t,n)=>{n.d(t,{b:()=>r.b,s:()=>a.b});var r=n(98684),a=n(4261)},98684:(e,t,n)=>{n.d(t,{b:()=>i});var r=n(76756),a=n(67294),o=n(23586),i=function(){var e=(0,o.RCK)().authUserDetails,t=(0,r.TL)(),n=(0,a.useCallback)((function(e){t((0,o.MOf)(e))}),[t]),i=(0,a.useCallback)((function(e){t((0,o.VrG)(e))}),[t]),s=(0,a.useCallback)((function(e){t((0,o.hRt)(e))}),[t]),c=(0,a.useCallback)((function(e){t((0,o.uCM)(e))}),[t]);return{setPageContextHintsVisible:n,setIsPageContextDisclaimerAcknowledged:i,setPageContextData:s,setPageContextQueryHistory:(0,a.useCallback)((function(n){var r;t((0,o.TJx)({userEmail:null!==(r=null==e?void 0:e.email)&&void 0!==r?r:"",query:n}))}),[null==e?void 0:e.email,t]),setPageContent:c}}},4261:(e,t,n)=>{n.d(t,{b:()=>o});var r=n(76756),a=n(23586),o=function(){var e,t=(0,a.RCK)().authUserDetails,n=(0,r.ix)(a.bx1),o=(0,r.ix)(a.Yw1),i=(0,r.ix)(a.M2z),s=o.url,c=o.title,l=o.pageContent;return{isPageContextDisclaimerAcknowledged:n,pageContextData:o,pageContextHintsVisible:i,pageContextUserQueryHistory:(0,r.ix)((0,a.M6B)(null!==(e=null==t?void 0:t.email)&&void 0!==e?e:"")),pageContent:l,pageTitle:c,pageUrl:s}}},76194:(e,t,n)=>{n.d(t,{M2:()=>o.M2,M6:()=>o.M6,MO:()=>r.MO,TJ:()=>r.TJ,Vr:()=>r.Vr,Yw:()=>o.Yw,b0:()=>a.b,bY:()=>a.s,bx:()=>o.bx,hR:()=>r.hR,uC:()=>r.uC});var r=n(24448),a=n(88948),o=(n(71689),n(3046))},30273:(e,t,n)=>{n.d(t,{ST:()=>a.ST,Yj:()=>r.Y,ZH:()=>a.ZH,af:()=>a.af,cd:()=>a.cd,cp:()=>o.c,d3:()=>a.d3,nr:()=>o.n,uP:()=>a.uP});var r=n(10769),a=(n(98536),n(51835)),o=n(64897);n(80571)},46357:(e,t,n)=>{n.d(t,{eo:()=>o.e,nT:()=>a.nT,xn:()=>a.xn,y0:()=>r.y,zL:()=>a.zL});var r=n(44084),a=n(63812),o=n(5983)},23586:(e,t,n)=>{n.d(t,{$ue:()=>o.$u,A2l:()=>o.A2,A4D:()=>a.A4,ALE:()=>a.AL,B9q:()=>o.B9,BBh:()=>o.BB,Bwc:()=>r.Bw,C$7:()=>r.C$,C7C:()=>a.C7,CgJ:()=>o.Cg,Chu:()=>c.Ch,Dps:()=>r.Dp,Dqy:()=>c.Dq,Dyq:()=>a.Dy,EPM:()=>o.EP,ESZ:()=>o.ES,FLN:()=>a.FL,FQG:()=>a.FQ,Fuj:()=>o.Fu,GSX:()=>o.GS,GgQ:()=>o.Gg,Gsb:()=>a.Gs,HWD:()=>o.HW,HhX:()=>r.Hh,HkR:()=>a.Hk,Hqn:()=>r.Hq,I0D:()=>r.I0,Itl:()=>o.It,J0e:()=>a.J0,J7o:()=>o.J7,JV6:()=>c.JV,Kd2:()=>c.Kd,L1I:()=>c.L1,L4c:()=>c.L4,L6l:()=>o.L6,LFT:()=>r.LF,M2z:()=>c.M2,M6B:()=>c.M6,MII:()=>a.MI,MOf:()=>c.MO,Mel:()=>c.Me,Myq:()=>o.My,ND1:()=>a.ND,NkU:()=>o.Nk,O_$:()=>o.O_,Ojm:()=>r.Oj,OsJ:()=>a.Os,PaA:()=>o.P,Pt2:()=>a.Pt,QAE:()=>r.QA,QD0:()=>r.QD,QIv:()=>r.QI,QPz:()=>o.QP,QaV:()=>a.Q,Qck:()=>o.Qc,Qkn:()=>a.Qk,Ql$:()=>a.Ql,RCK:()=>r.RC,R_9:()=>o.R_,Rrh:()=>o.Rr,S69:()=>a.S6,TB7:()=>c.TB,TJx:()=>c.TJ,UJK:()=>c.UJ,Uwy:()=>o.Uw,VGT:()=>a.VG,Vgz:()=>a.Vg,VrG:()=>c.Vr,WGj:()=>o.WG,X36:()=>c.X3,XeE:()=>o.Xe,YWL:()=>a.YW,YZY:()=>a.YZ,YjF:()=>i.Yj,Yw1:()=>c.Yw,Z8D:()=>o.Z8,ZCt:()=>o.ZC,_4k:()=>r._4,_gZ:()=>a._g,_lj:()=>c._l,a1r:()=>c.a1,a49:()=>c.a4,aGe:()=>o.aG,af2:()=>i.af,b0J:()=>c.b0,bCg:()=>o.bC,bYW:()=>c.bY,bhD:()=>o.bh,bsc:()=>o.bs,bt_:()=>c.bt,bx1:()=>c.bx,cWx:()=>o.cW,cby:()=>c.cb,coc:()=>o.co,cpB:()=>i.cp,cvO:()=>r.cv,cvs:()=>a.cv,d0z:()=>o.d0,d3f:()=>i.d3,dQK:()=>o.dQ,dQQ:()=>o.Nq,ek:()=>a.ek,eo9:()=>s.eo,fFO:()=>c.fF,fXj:()=>o.fX,fvp:()=>a.fv,hNR:()=>a.hN,hRt:()=>c.hR,hrK:()=>r.hr,hsz:()=>o.hs,iBZ:()=>a.iB,izr:()=>r.iz,jA1:()=>a.jA,jNK:()=>a.jN,jRd:()=>a.jR,jgP:()=>o.jg,k0X:()=>o.k0,kGW:()=>o.kG,kN6:()=>c.kN,kgU:()=>o.kg,kq0:()=>a.kq,lUI:()=>o.lU,ljr:()=>a.lj,ln5:()=>a.ln,mWg:()=>r.mW,mXV:()=>o.mX,mum:()=>c.mu,nHi:()=>a.nH,nT6:()=>s.nT,nrG:()=>i.nr,oXt:()=>o.oX,ohC:()=>o.oh,oiy:()=>a.oi,okl:()=>o.ok,pKK:()=>c.pK,pb4:()=>a.pb,pws:()=>o.pw,qeR:()=>a.qe,snu:()=>a.sn,tkH:()=>o.tk,uCM:()=>c.uC,uEF:()=>o.uE,uJR:()=>o.uJ,uP4:()=>i.uP,uoF:()=>r.uo,us$:()=>o.us,uyU:()=>r.uy,v3S:()=>c.v3,wFS:()=>o.wF,wV8:()=>r.wV,x8b:()=>r.x8,xUq:()=>r.xU,xWE:()=>o.xW,yN4:()=>c.yN,zLZ:()=>s.zL});n(60772);var r=n(6882),a=n(52452),o=n(83544),i=n(30273),s=n(46357),c=n(36468)},31372:(e,t,n)=>{n.d(t,{CI:()=>a.CI,Cm:()=>a.Cm,VV:()=>a.VV,Y3:()=>a.Y3,YS:()=>a.YS,hG:()=>a.hG,kk:()=>r.k});var r=n(82414),a=(n(28248),n(26382))},41807:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(8081),a=n.n(r),o=n(23645),i=n.n(o)()(a());i.push([e.id,"@keyframes inputJump {\n  0% {\n    transform: scale(100%);\n  }\n  50% {\n    transform: scale(96%);\n  }\n  100% {\n    transform: scale(100%);\n  }\n}\n\n@keyframes inputDustOpacityStart {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 100%;\n  }\n}\n\n@keyframes inputDustOpacityEnd {\n  0% {\n    opacity: 100%;\n  }\n  100% {\n    opacity: 0;\n  }\n}\n\n@keyframes inputDustScaleUp {\n  0% {\n    transform: scale(1);\n  }\n  100% {\n    transform: scale(1.1);\n  }\n}\n\n@keyframes inputSidebarDustScaleUp {\n  0% {\n    transform: translate(-50%, -50%) scale(0);\n  }\n  100% {\n    transform: translate(-50%, -50%) scale(1);\n  }\n}\n\n@keyframes scale-in {\n  0% {\n    opacity: 0;\n    transform-origin: top left;\n    transform: scale(0);\n  }\n  100% {\n    opacity: 1;\n    transform-origin: top left;\n    transform: scale(1);\n  }\n}\n\n@keyframes appear {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n\n@keyframes typing {\n  from {\n    max-width: 0;\n  }\n  to {\n    max-width: 100%;\n  }\n}\n\n@keyframes blink {\n  50% {\n    opacity: 0;\n  }\n}\n\n.input-animation-wrapper.active .input-wrapper {\n  animation: inputJump 0.4s ease-in-out;\n  position: relative;\n  z-index: 2;\n}\n\n.input-animation-wrapper .gradient-wrapper {\n  opacity: 0;\n  position: relative;\n  transform: translateY(-25px);\n  z-index: 1;\n}\n\n.input-animation-wrapper.active .gradient-wrapper {\n  animation: cubic-bezier(0.61, 1, 0.88, 1), cubic-bezier(0.22, 1, 0.36, 1);\n  animation-duration: 0.1s, 1.25s;\n  animation-name: inputDustOpacityStart, inputDustOpacityEnd;\n}\n\n.input-animation-wrapper .gradient-wrapper .gradient {\n  position: absolute;\n}\n\n.input-animation-wrapper .gradient-wrapper .gradient:nth-of-type(1) {\n  left: var(--input-animation-position-orange-left);\n  top: var(--input-animation-position-orange-top);\n  transform: translateY(var(--input-animation-position-orange-top)) scale(0);\n}\n\n.input-animation-wrapper .gradient-wrapper .gradient:nth-of-type(2) {\n  left: var(--input-animation-position-pink-left);\n  top: var(--input-animation-position-pink-top);\n  transform: translateY(var(--input-animation-position-pink-top)) scale(0);\n}\n\n.input-animation-wrapper .gradient-wrapper .gradient:nth-of-type(3) {\n  left: var(--input-animation-position-purple-left);\n  top: var(--input-animation-position-purple-top);\n  transform: translateY(var(--input-animation-position-purple-top)) scale(0);\n}\n\n.input-animation-wrapper .gradient-wrapper .gradient:nth-of-type(4) {\n  left: var(--input-animation-position-green-left);\n  top: var(--input-animation-position-green-top);\n  transform: translateY(var(--input-animation-position-green-top)) scale(0);\n}\n\n.input-animation-wrapper.active .gradient-wrapper .gradient:nth-of-type(1) {\n  animation-duration: var(--input-animation-duration-orange);\n}\n\n.input-animation-wrapper.active .gradient-wrapper .gradient:nth-of-type(2) {\n  animation-duration: var(--input-animation-duration-pink);\n}\n\n.input-animation-wrapper.active .gradient-wrapper .gradient:nth-of-type(3) {\n  animation-duration: var(--input-animation-duration-purple);\n}\n\n.input-animation-wrapper.active .gradient-wrapper .gradient:nth-of-type(4) {\n  animation-duration: var(--input-animation-duration-green);\n}\n\n.input-animation-wrapper.active .gradient-wrapper .gradient {\n  animation: cubic-bezier(0.22, 1, 0.36, 1);\n  animation-name: inputSidebarDustScaleUp;\n}\n",""]);const s=i},29403:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(8081),a=n.n(r),o=n(23645),i=n.n(o)()(a());i.push([e.id,".SoGJRn3mWHqzjIkElDNO::-moz-selection {\n  cursor: pointer;\n  color: var(--opera-chatbot-message-highlight-color);\n  background-color: var(--opera-chatbot-message-highlight-bg);\n  margin: calc(-1 * var(--opera-chatbot-message-highlight-bg-padding-y)) 0;\n  padding: var(--opera-chatbot-message-highlight-bg-padding-y) 0;\n}\n\n.SoGJRn3mWHqzjIkElDNO,\n.SoGJRn3mWHqzjIkElDNO::selection {\n  cursor: pointer;\n  color: var(--opera-chatbot-message-highlight-color);\n  background-color: var(--opera-chatbot-message-highlight-bg);\n  margin: calc(-1 * var(--opera-chatbot-message-highlight-bg-padding-y)) 0;\n  padding: var(--opera-chatbot-message-highlight-bg-padding-y) 0;\n}\n\n.V9JCZCXVouXlgmVd36dA {\n  margin: calc(-1 * var(--opera-chatbot-message-highlight-bg-padding-y)) -4px;\n  padding: var(--opera-chatbot-message-highlight-bg-padding-y) 4px;\n}\n\n.SoGJRn3mWHqzjIkElDNO._tpqmaR6UqvrbPkEZC2b {\n  background-color: var(--opera-chatbot-message-highlight-bg-custom-1);\n}\n\n.SoGJRn3mWHqzjIkElDNO.po4tXK2v_MrBqBs9b5TV {\n  background-color: var(--opera-chatbot-message-highlight-bg-custom-2);\n}\n\n.SoGJRn3mWHqzjIkElDNO.DiqR_MGM63AscFTkv9OB {\n  background-color: var(--opera-chatbot-message-highlight-bg-custom-3);\n}\n\n@keyframes hE4aZy8Cmm1yuDbmDjg7 {\n  0% {\n    background-color: var(--opera-chatbot-message-highlight-rephrase-init-background-color-start);\n  }\n  50% {\n    background-color: var(--opera-chatbot-message-highlight-rephrase-init-background-color-end);\n  }\n  100% {\n    background-color: var(--opera-chatbot-message-highlight-rephrase-init-background-color-start);\n  }\n}\n\n.SoGJRn3mWHqzjIkElDNO.wBZlFP6W8EbH02KmqHzF::-moz-selection {\n  cursor: default;\n  background-color: var(--opera-chatbot-message-highlight-rephrase-init-background-color-start);\n  animation: hE4aZy8Cmm1yuDbmDjg7 1s infinite;\n}\n\n.SoGJRn3mWHqzjIkElDNO.wBZlFP6W8EbH02KmqHzF,\n.SoGJRn3mWHqzjIkElDNO.wBZlFP6W8EbH02KmqHzF::selection {\n  cursor: default;\n  background-color: var(--opera-chatbot-message-highlight-rephrase-init-background-color-start);\n  animation: hE4aZy8Cmm1yuDbmDjg7 1s infinite;\n}\n\n@keyframes nSzK7pZkWNSIX3JTVjxj {\n  0% {\n    background-color: var(--opera-chatbot-message-highlight-rephrase-done-background-color-start);\n  }\n  100% {\n    background-color: var(--opera-chatbot-message-highlight-rephrase-done-background-color-end);\n  }\n}\n\n.SoGJRn3mWHqzjIkElDNO.dZnLVyMbu529eUNWUoOk::-moz-selection {\n  cursor: default;\n  background-color: var(--opera-chatbot-message-highlight-rephrase-done-background-color-start);\n  animation: nSzK7pZkWNSIX3JTVjxj 1s forwards;\n}\n\n.SoGJRn3mWHqzjIkElDNO.dZnLVyMbu529eUNWUoOk,\n.SoGJRn3mWHqzjIkElDNO.dZnLVyMbu529eUNWUoOk::selection {\n  cursor: default;\n  background-color: var(--opera-chatbot-message-highlight-rephrase-done-background-color-start);\n  animation: nSzK7pZkWNSIX3JTVjxj 1s forwards;\n}\n",""]),i.locals={highlighter:"SoGJRn3mWHqzjIkElDNO",highlighterLinkified:"V9JCZCXVouXlgmVd36dA",custom1:"_tpqmaR6UqvrbPkEZC2b",custom2:"po4tXK2v_MrBqBs9b5TV",custom3:"DiqR_MGM63AscFTkv9OB",rephraseStart:"wBZlFP6W8EbH02KmqHzF",blinkingBackground:"hE4aZy8Cmm1yuDbmDjg7",rephraseEnd:"dZnLVyMbu529eUNWUoOk",fadeOutBackground:"nSzK7pZkWNSIX3JTVjxj"};const s=i},7134:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(8081),a=n.n(r),o=n(23645),i=n.n(o)()(a());i.push([e.id,"/**\n * TODO: Please do unification of markdown styles and variables like below with\n * chatbot styles in separate change \n */\n.prompt-studio-output .markdown table a {\n  background-color: var(--opera-chatbot-table-link-bg);\n}\n.prompt-studio-output .markdown .table-wrapper {\n  margin: 24px 0;\n  overflow-x: auto;\n  overflow-y: hidden;\n  padding-block-end: 4px;\n}\n.prompt-studio-output .markdown .table-wrapper::-webkit-scrollbar {\n  height: 6px;\n}\n.prompt-studio-output .markdown table {\n  border-radius: 16px;\n  background: transparent;\n  border-collapse: separate;\n  border-spacing: 1px;\n  width: 100%;\n  overflow: hidden;\n  overflow-wrap: break-word;\n}\n.prompt-studio-output .markdown table th {\n  font-weight: 700;\n  font-size: 14px;\n  line-height: 20px;\n}\n.prompt-studio-output .markdown table td,\n.prompt-studio-output .markdown table th {\n  padding: 8px;\n  background-color: var(--opera-chatbot-table-bg);\n}\n",""]);const s=i}},a={};function o(e){var t=a[e];if(void 0!==t)return t.exports;var n=a[e]={id:e,loaded:!1,exports:{}};return r[e].call(n.exports,n,n.exports,o),n.loaded=!0,n.exports}o.m=r,e=[],o.O=(t,n,r,a)=>{if(!n){var i=1/0;for(u=0;u<e.length;u++){for(var[n,r,a]=e[u],s=!0,c=0;c<n.length;c++)(!1&a||i>=a)&&Object.keys(o.O).every((e=>o.O[e](n[c])))?n.splice(c--,1):(s=!1,a<i&&(i=a));if(s){e.splice(u--,1);var l=r();void 0!==l&&(t=l)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[n,r,a]},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,o.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var a=Object.create(null);o.r(a);var i={};t=t||[null,n({}),n([]),n(n)];for(var s=2&r&&e;"object"==typeof s&&!~t.indexOf(s);s=n(s))Object.getOwnPropertyNames(s).forEach((t=>i[t]=()=>e[t]));return i.default=()=>e,o.d(a,i),a},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),o.j=85,o.p="",(()=>{o.b=document.baseURI||self.location.href;var e={85:0};o.O.j=t=>0===e[t];var t=(t,n)=>{var r,a,[i,s,c]=n,l=0;if(i.some((t=>0!==e[t]))){for(r in s)o.o(s,r)&&(o.m[r]=s[r]);if(c)var u=c(o)}for(t&&t(n);l<i.length;l++)a=i[l],o.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return o.O(u)},n=self.webpackChunkaria_extension=self.webpackChunkaria_extension||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var i=o.O(void 0,[216,592],(()=>o(76808)));i=o.O(i)})();