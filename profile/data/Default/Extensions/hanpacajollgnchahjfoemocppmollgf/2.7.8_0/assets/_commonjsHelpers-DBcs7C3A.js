const r={};let d=!1;function N(){d=!0,chrome.runtime.onMessage.addListener((e,t,n)=>{if(e.isSendMessageToBackgroundMessage&&r[e.type]){const a=r[e.type].map(s=>s(...e.args)).pop();return a.then?(a.then(s=>{n(s)}),!0):n(a)}})}const o={};let T=!1;function M(){T=!0,chrome.runtime.onMessageExternal.addListener((e,t,n)=>{var a,s;if((a=t==null?void 0:t.url)!=null&&a.startsWith("https://esuit.dev")&&o[e.type]){const c=o[e.type].map(i=>i(e.args,t)).pop();if(e.callbackFnName&&(s=t.tab)!=null&&s.id){const i=t.tab.id;c&&c.then?c.then(l=>{chrome.scripting.executeScript({target:{tabId:i},world:"MAIN",args:[l??!1,e.callbackFnName],func:(p,u)=>{try{window[u](p)}catch(f){console.error(f)}}})}):chrome.scripting.executeScript({target:{tabId:i},world:"MAIN",args:[c??!1,e.callbackFnName],func:(l,p)=>{try{window[p](l)}catch(u){console.error(u)}}})}return!0}})}async function S(e,...t){if(R()){if(r[e])return r[e].map(n=>n(...t)).pop();throw new Error(`no handler for ${e}`)}return await chrome.runtime.sendMessage({isSendMessageToBackgroundMessage:!0,type:e,args:t})}function y(e,t){return!d&&N(),r[e]=r[e]||[],r[e].push(t),()=>{const n=r.indexOf(t);r.splice(n,1)}}function P(e,t){return!T&&M(),o[e]=o[e]||[],o[e].push(t),()=>{const n=o.indexOf(t);o.splice(n,1)}}function R(){return!!~location.pathname.indexOf("service-worker-loader.js")}var A=(e=>(e[e.FREE=0]="FREE",e[e.BASIC=1]="BASIC",e[e.PREMIUM=2]="PREMIUM",e))(A||{}),g=(e=>(e[e.SUBSCRIPTION=0]="SUBSCRIPTION",e[e.ONETIME_PAYMENT=1]="ONETIME_PAYMENT",e))(g||{}),O=(e=>(e[e.ONE_MONTH=1]="ONE_MONTH",e[e.THREE_MONTH=3]="THREE_MONTH",e[e.SIX_MONTH=6]="SIX_MONTH",e[e.A_YEAR=12]="A_YEAR",e))(O||{}),I=(e=>(e[e.STRIPE=0]="STRIPE",e[e.PAYPAL=1]="PAYPAL",e))(I||{}),_=(e=>(e[e.FACEBOOK=0]="FACEBOOK",e[e.INSTAGRAM=1]="INSTAGRAM",e))(_||{}),h=(e=>(e.SUBSCRIPTION="paypal_subscription",e.PAYMENT="paypal_payment",e))(h||{}),m=(e=>(e.RETURN_PAGE="RETURN_PAGE",e.RETURN_EXT="RETURN_EXT",e.RETURN_EXT_LOCAL="RETURN_EXT_LOCAL",e))(m||{}),w=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function b(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}export{m as M,A as T,w as c,b as g,S as k,y as m,P as w};
