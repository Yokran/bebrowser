var background=function(e){"use strict";var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},t(e,n)};function n(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}function r(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))}function o(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}function a(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function i(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}function s(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}function c(e){return this instanceof c?(this.v=e,this):new c(e)}function l(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),a=[];return r=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),i("next"),i("throw"),i("return",(function(e){return function(t){return Promise.resolve(t).then(e,u)}})),r[Symbol.asyncIterator]=function(){return this},r;function i(e,t){o[e]&&(r[e]=function(t){return new Promise((function(n,r){a.push([e,t,n,r])>1||s(e,t)}))},t&&(r[e]=t(r[e])))}function s(e,t){try{!function(e){e.value instanceof c?Promise.resolve(e.value.v).then(l,u):d(a[0][2],e)}(o[e](t))}catch(e){d(a[0][3],e)}}function l(e){s("next",e)}function u(e){s("throw",e)}function d(e,t){e(t),a.shift(),a.length&&s(a[0][0],a[0][1])}}function u(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=a(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,o){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,o,(t=e[n](t)).done,t.value)}))}}}function d(){let e=new Uint32Array(1);return crypto.getRandomValues(e),e[0]}function p(){return crypto.randomUUID()}function g(){const e=new Uint32Array(28);return crypto.getRandomValues(e),Array.from(e,(e=>("0"+e.toString(16)).slice(-2))).join("")}function h(e){if(void 0!==e)try{return JSON.parse(atob(e.split(".")[1]))}catch(e){return null}}"function"==typeof SuppressedError&&SuppressedError;const f=[{langCode:"AR",langCodeForSpeech:"ar-AR",langCodeForIta:"ar"},{langCode:"BG",langCodeForSpeech:"bg-BG",langCodeForIta:"bg"},{langCode:"CS",langCodeForSpeech:"cs-CZ",langCodeForIta:"cs"},{langCode:"DA",langCodeForSpeech:"da-DK",langCodeForIta:"da"},{langCode:"DE",langCodeForSpeech:"de-DE",supportsFormality:!0,langCodeForIta:"de"},{langCode:"EL",langCodeForSpeech:"el-GR",langCodeForIta:"el"},{langCode:"EN-GB",langCodeForSpeech:"en",voice:"Google UK English Male",langCodeForIta:"en-GB"},{langCode:"EN-US",langCodeForSpeech:"en",voice:"Google UK English Male",langCodeForIta:"en-US"},{langCode:"ES",langCodeForSpeech:"es-ES",voice:"Google espa√±ol",label:"ES",supportsFormality:!0,langCodeForIta:"es"},{langCode:"ET",langCodeForSpeech:"et",langCodeForIta:"et"},{langCode:"FI",langCodeForSpeech:"fi-FI",voice:"Satu",langCodeForIta:"fi"},{langCode:"FR",langCodeForSpeech:"fr-FR",voice:"Thomas",supportsFormality:!0,langCodeForIta:"fr"},{langCode:"HU",langCodeForSpeech:"hu-HU",langCodeForIta:"hu"},{langCode:"ID",langCodeForSpeech:"id-ID",langCodeForIta:"id"},{langCode:"IT",langCodeForSpeech:"it-IT",supportsFormality:!0,langCodeForIta:"it"},{langCode:"JA",langCodeForSpeech:"ja-JP",supportsFormality:!0,langCodeForIta:"ja"},{langCode:"KO",langCodeForSpeech:"ko-KR",langCodeForIta:"ko"},{langCode:"LT",langCodeForSpeech:"lt",langCodeForIta:"lt"},{langCode:"LV",langCodeForSpeech:"lv",langCodeForIta:"lv"},{langCode:"NB",langCodeForSpeech:"nb-NO",langCodeForIta:"nb"},{langCode:"NL",langCodeForSpeech:"nl-NL",voice:"Google Nederlands",label:"NL",supportsFormality:!0,langCodeForIta:"nl"},{langCode:"PL",langCodeForSpeech:"pl-PL",supportsFormality:!0,langCodeForIta:"pl"},{langCode:"PT-BR",langCodeForSpeech:"pt-PT",supportsFormality:!0,langCodeForIta:"pt-BR"},{langCode:"PT-PT",langCodeForSpeech:"pt-PT",supportsFormality:!0,langCodeForIta:"pt-PT"},{langCode:"RO",langCodeForSpeech:"ro-RO",langCodeForIta:"ro"},{langCode:"RU",langCodeForSpeech:"ru-RU",supportsFormality:!0,langCodeForIta:"ru"},{langCode:"SK",langCodeForSpeech:"sk-SK",langCodeForIta:"sk"},{langCode:"SL",langCodeForSpeech:"sl",langCodeForIta:"sl"},{langCode:"SV",langCodeForSpeech:"sv-SE",langCodeForIta:"sv"},{langCode:"TR",langCodeForSpeech:"tr-TR",langCodeForIta:"tr"},{langCode:"UK",langCodeForSpeech:"uk-UA",langCodeForIta:"uk"},{langCode:"ZH",langCodeForSpeech:"zh-CN",langCodeForIta:"zh-Hans"},{langCode:"ZH-HANT",langCodeForSpeech:"zh-HANT",langCodeForIta:"zh-Hant"}],m=[{langCode:"EN",langCodeForIta:"en"},{langCode:"PT",langCodeForIta:"pt"}],_=["EN-GB","EN-US","EN","DE","FR","ES","PT-PT","PT-BR","PT","IT"],v=["ES","FR","IT","PT","PT-BR","PT-PT"],T=0,y="inline",E="automatic",S="manual",I="input",b="input_alternatives",A="side_panel",w="customization",N=1,O=2,R=3,L={notLoggedIn:1500,loggedInFree:5e3},C={notLoggedIn:2e3,loggedInFree:2e3},P=1,x=2,k=3,D=1,U=2,M=1,G=2,$=3,V="HINT_KEYBOARD_SHORTCUT",F="SHOW_ADS_FOR_MS_ADDINS",j="NOTIFICATION_TYPE_REQUIRE_LOGIN_POLICY",W="INLINE_TRANSLATION_TRIGGER_ICON",q="INLINE_TRANSLATION_SETTINGS_ICON",B="INLINE_TRANSLATION_SETTING_POPUP",H="INPUT_TRANSLATION_SETTING_USE_ADVANCED_WINDOW",J="INPUT_TRANSLATION_TRIGGER_ICON",Y="INPUT_IMPROVE_TRIGGER_ICON",z="INPUT_TRANSLATION_SETTINGS_ICON",X="INPUT_TRANSLATION_SETTING_POPUP",K="SETTINGS_PAGE_FPT",Q="SETTINGS_PAGE_READING",Z="SETTINGS_PAGE_WRITING",ee="SETTINGS_PAGE_INTEGRATIONS",te="FPT_HIDE_MODAL",ne="INPUT_TRANSLATION_READ_MORE_LINK",re="INLINE_TRANSLATION_READ_MORE_LINK",oe="FPT_TRANSLATION_READ_MORE_LINK",ae="EXTENSION_HUB_TOGGLE_SWITCH",ie="HUB_CUSTOMIZE_SHORTCUT",se="HUB_LOGIN_BUTTON",ce="HUB_UPGRADE_TO_PRO_LINK",le="HUB_TRY_PRO_LINK",ue="SETTINGS_PAGE_CUSTOMIZE_SHORTCUT_BUTTON",de="HUB_FPT_ENABLE_CHECKBOX",pe="HUB_FPT_DISABLE_CHECKBOX",ge="DEEPL_WRITE_ICON",he="gmailOnboardingPopup",fe="gmailOnboardingIcon",me="gmailCharLimitLogin",_e="gmailFeedbackSurvey",ve="HUB_VIEW_INTEGRATIONS",Te="HUB_CLOSE_CUSTOMIZATIONS_WIDGET",ye="GSLIDES_FEEDBACK_SURVEY",Ee="GSLIDES_CHAR_LIMIT_LOGIN",Se="ZENDESK_TRY_PRO_LINK",Ie="ONBOARDING_SIGN_UP",be="ONBOARDING_SKIP_SIGN_UP",Ae="ONBOARDING_LOGIN_LINK",we="ONBOARDING_SEE_ALL_INTEGRATIONS",Ne="ICON_TOGGLE_IN_HUB_TRANSLATOR",Oe="ICON_TOGGLE_IN_HUB_WRITE",Re="MANAGE_ICON_SETTINGS",Le="WRITE_LANGUAGE_SWITCHED_IN_HUB",Ce="WRITE_LANGUAGE_SWITCHED_IN_SETTINGS",Pe="SIDE_PANEL_ICON_ON_WEBSITE",xe="HUB_ONBOARDING_LINK",ke="INLINE_SELECTION_TRANSLATE_ICON",De="INLINE_SELECTION__WRITE_ICON",Ue="INPUT_SELECTION_TRANSLATE_ICON",Me="INPUT_SELECTION__WRITE_ICON",Ge="INLINE_SELECTION_TRIGGER_OFF_ICON",$e="INPUT_SELECTION_TRIGGER_OFF_ICON",Ve="SIDE_PANEL_LOGIN_BUTTON",Fe="SIDE_PANEL_SETTINGS_BUTTON",je="SIDE_PANEL_LOGOUT_BUTTON",We="SIDE_PANEL_UPGRADE_BUTTON",qe="SIDE_PANEL_TRANSLATOR_TAB",Be="SIDE_PANEL_TRANSLATOR_TARGET_LANG",He="SIDE_PANEL_TRANSLATOR_SOURCE_LANG",Je="SIDE_PANEL_TRANSLATION_DIR_INDICATOR",Ye="SIDE_PANEL_SOURCE_TEXT_FIELD",ze="SIDE_PANEL_TARGET_TEXT_FIELD",Xe="REVIEW_WINDOW_CLOSE_ICON",Ke="REVIEW_WINDOW_TRANSLATE_ALTERNATIVES",Qe="REVIEW_WINDOW_WRITE_ALTERNATIVES",Ze="trigger-translation",et="change-language",tt="CLICK_ON_SHORTCUT_NOTIFICATION",nt="CLICK_ON_INLINE_TRANSLATION_SHOW_ALTERNATIVES",rt="CLICK_ON_INLINE_TRANSLATION_CLOSE_ICON",ot="CLICK_ON_LOGOUT_MENU_ENTRY",at="DISABLE_PER_SITE",it="DISABLE_EVERYWHERE",st="ENABLE_EVERYWHERE",ct="ENABLE_PER_SITE",lt="INPUT_TRANSLATION",ut="INLINE_TRANSLATION",dt="FULL_PAGE_TRANSLATION",pt=1,gt=2,ht=3,ft=4,mt="OPEN_PAGE",_t="BACK_BUTTON",vt="NEXT_BUTTON",Tt="NAVIGATION",yt=0,Et=1,St=2,It=3,bt=4,At="cofdbpoegempjloogbagkncekinflcnj",wt="fancfknaplihpclbhbpclnmmjcjanbaf",Nt="ocpdpnakdghopjcifldjidbdmfobmmoi",Ot="firefox-extension@deepl.com",Rt={deepl:1,linguee:2,google_translate:3,word_365:4,power_point_365:5,jira:6,confluence:7,gmail:8},Lt="DEFAULT",Ct="GDOCS",Pt="ZENDESK",xt="WHATSAPP_WEB",kt="TWITTER",Dt="GMAIL",Ut="GSLIDES",Mt="LINKEDIN",Gt="YOUTUBE",$t="source",Vt="target",Ft="translate",jt="write",Wt="USER",qt="EXTENSION",Bt="USER",Ht="AUTOMATIC",Jt="OPEN_TICKET",Yt="DETECT_TICKET_LANGUAGE",zt="SWITCH_TICKET_LANGUAGE",Xt="ENABLE_AUTOTRANSLATE",Kt="DISABLE_AUTOTRANSLATE",Qt="TRANSLATE_MESSAGE",Zt="TRANSLATE_INPUT",en="ERROR",tn="TRANSLATION",nn="LOGIN",rn="CHAT",on="MESSAGE",an={TRANSLATOR:"TRANSLATOR",WRITE:"WRITE",API:"API",DOC_TRANSLATOR:"DOC_TRANSLATOR"},sn="free",cn="pro",ln="none",un="TEXT_REFINEMENT_REQUEST",dn="GDOCS_INSERT_COPY",pn="GDOCS_DISCARD_COPY",gn="GDOCS_CHAR_LIMIT_REACHED",hn="RESULT_ACCEPTED",fn="RESULT_REVERTED",mn="GET_ALTERNATIVES_FOR_INPUT",_n="ERROR",vn="RESULT_ACCEPTED",Tn="RESULT_REVERTED",yn="ALTERNATIVES_OPENED",En="SEGMENTATION_SELECTED",Sn="ALTERNATIVE_SELECTED",In="READING_VIEW_TRANSLATE",bn="COMPOSE_VIEW_TRANSLATE",An="COMPOSE_VIEW_IMPROVE",wn="ANONYMOUS_USER_LIMIT_EXCEEDED",Nn="FREE_ACCOUNT_LIMIT_EXCEEDED",On="WRITE_ANONYMOUS_USER_LIMIT_EXCEEDED",Rn="WRITE_FREE_ACCOUNT_LIMIT_EXCEEDED",Ln="PRO_TRIAL",Cn="LOGIN",Pn="SIGNUP",xn="word",kn="sentence",Dn="None",Un="Pro",Mn="Free",Gn="simple",$n="business",Vn="academic",Fn="casual",jn="enthusiastic",Wn="friendly",qn="confident",Bn="diplomatic",Hn="auto",Jn="formal",Yn="informal",zn="admin",Xn="development",Kn="normal",Qn="sideload",Zn="other",er="permissions_increase",tr="unknown",nr="inline",rr="input",or="input_alternatives",ar="customization",ir="translation",sr="improvement",cr="login",lr="auto_login",ur="translate",dr="write",pr="new_session",gr="recreated_session",hr="error",fr="user_interaction",mr="connection",_r="session",vr="update_target_language",Tr="update_source_language",yr="update_formality",Er="update_style",Sr="select_alternative",Ir={chrome:"Chrome",edge:"Edge",brave:"Brave",firefox:"Firefox",opera:"Opera",safari:"Safari"};function br(e,t){let n;try{switch(e){case Ir.chrome:case Ir.brave:n=t.split("Chrome/")[1].split(" ")[0];break;case Ir.edge:n=t.split("Edg/")[1].split(" ")[0];break;case Ir.firefox:n=t.split("Firefox/")[1].split(" ")[0];break;case Ir.opera:n=t.split("OPR/")[1].split(" ")[0];break;case Ir.safari:n=t.split("Version/")[1].split(" ")[0]}}catch(t){console.error(`Could not get the browsers (${e}) version from user agent`,t)}try{!n&&(null===navigator||void 0===navigator?void 0:navigator.userAgentData)&&function(e){return e===Ir.chrome||e===Ir.edge||e===Ir.brave||e===Ir.opera}(e)&&(n=Ar(e).version)}catch(t){console.error(`Could not get the chromium browsers (${e}) version`,t)}return n&&"string"==typeof n?n:"unknown_browser_version"}function Ar(e){if(!navigator.userAgentData||!e)return;const t=new RegExp(`${e}`,"i");return navigator.userAgentData.brands.filter((e=>t.test(e.brand)))[0]}const wr="unknown_user_agent",Nr="unknown_platform",Or="unknown_browser",Rr="unknown_browser_version",Lr="unknown_browser_language";function Cr(){var e,t;const n=(null===navigator||void 0===navigator?void 0:navigator.userAgent)||wr,r=(null===(e=null===navigator||void 0===navigator?void 0:navigator.userAgentData)||void 0===e?void 0:e.platform)||(null===navigator||void 0===navigator?void 0:navigator.platform)||Nr;let o=Or,a=Rr,i=(null===navigator||void 0===navigator?void 0:navigator.language)||Lr;(null===(t=null===chrome||void 0===chrome?void 0:chrome.i18n)||void 0===t?void 0:t.getUILanguage)&&(i=chrome.i18n.getUILanguage());try{o=Pr(n),a=br(o,n)}catch(e){console.error("Could not get the name of the brower",e)}return{userAgent:n,platform:r,browser:o,browserVersion:a,browserLang:i}}const Pr=e=>{let t=Or;try{const n=e.match(/chrome|chromium|crios/i),r=e.match(/edg/i)||Ar(Ir.edge),o=e.match(/firefox|fxios/i),a=e.match(/opr\//i)||Ar(Ir.opera),i=e.match(/safari/i),s=Ar(Ir.brave);n?(t=Ir.chrome,r&&(t=Ir.edge),a&&(t=Ir.opera),s&&(t=Ir.brave)):r?t=Ir.edge:o?t=Ir.firefox:a?t=Ir.opera:i&&(t=Ir.safari)}catch(e){console.error("Could not get the name of the brower",e)}return t};function xr(){if({IS_PROD:!0,BASE_URLS:{dapApi:"https://s.deepl.com/chrome/statistics",toolingApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.42.0",toolingApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.42.0",toolingWriteApiPro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.42.0",toolingWriteApi:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.42.0",classicApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.42.0",classicApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.42.0",classicApiWrite:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.42.0",classicApiWritePro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.42.0",classicApiGlossary:"https://api.deepl.com/termbases/jsonrpc?client=chrome-extension,1.42.0",interactiveTextApiFree:"https://ita-free.www.deepl.com/v1",interactiveTextApiPro:"https://ita-pro.www.deepl.com/v1",oneShotApiPro:"https://oneshot-pro.deepl.com/v1",login:"https://www.deepl.com/auth/login",token:"https://w.deepl.com/oidc/token",cookieBearerExchange:"https://w.deepl.com/oidc/cookie_bearer_exchange",logout:"https://www.deepl.com/auth/logout",feedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",newFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",sidepanelShareFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_2reZXhr31K2MeDI",firefoxFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eyfDZqQmXuNTFOK",uninstallSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU",gslidesFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_9XBLSAbDmLq5emO",deeplDomain:"https://www.deepl.com",deeplPro:"https://www.deepl.com/pro",deeplProWrite:"https://www.deepl.com/pro-write",deeplTranslator:"https://www.deepl.com/translator",deeplDoctrans:"https://www.deepl.com/translator/files",deeplTermsOfServiceFree:"https://www.deepl.com/en/pro-license?tab=free",deeplCreateAccount:"https://www.deepl.com/signup",extensionStorePage:"https://bit.ly/DeepL-Chrome",supportArticle:"https://support.deepl.com/hc/articles/4407580229522",deeplSupport:"https://support.deepl.com/hc",chromeWebstore:"https://chrome.google.com/webstore/detail/deepl-translate-reading-w/cofdbpoegempjloogbagkncekinflcnj",edgeWebstore:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-reading-/fancfknaplihpclbhbpclnmmjcjanbaf",firefoxWebstore:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate",firefoxShortcutDocs:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",firefoxPrivacyPolicy:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate/privacy/",clientStateApi:"https://w.deepl.com/web",experimentsEndpoint:"https://experimentation.deepl.com/experiments",gmailFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_db8ItFTmYBcZjYW",customerSegmentationSurveyFree:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2071",customerSegmentationSurveyPro:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2070",arabicSurvey:"https://deepl.qualtrics.com/jfe/form/SV_ekTrC2ePp0wn7xQ",msAddinsDeepLAds:"https://www.deepl.com/en/microsoft-365",getFreeAccount:"https://www.deepl.com/en/signup?cta=free-login-signup",uninstallPage:"https://www.deepl.com/extension-uninstall"},APP_VERSION:"1.42.0",FEATURE_FLAGS:{TRANSLATE_INPUT:!0,PAGE_TRANSLATION:!0,IMPROVE_WRITING:!0,DOCUMENT_TRANSLATION:!0,RECOMMEND_TO_A_FRIEND:!0,PRO_LOGIN:!0,WEBPAGE_CUSTOMIZER:!0,GDOCS_INTEGRATION:!0,ZENDESK_INTEGRATION:!0,GMAIL_INTEGRATION:!0,GSLIDES_INTEGRATION:!0,ON_INSTALL_ONBOARDING:!0,WHATSAPP_TRANSLATE_ALL_CHAT:!1,DEEPL_WRITE_GENERAL:!1,DEEPL_WRITE_GDOCS:!0,SHOW_CUSTOMER_SEGMENTATION_SURVEY:!1,ARABIC_SURVEY:!0,BATCH_TRANSLATE_HTML_REQUEST:!0,SIDE_PANEL_FIREFOX:!1}}.browserBuild)return{IS_PROD:!0,BASE_URLS:{dapApi:"https://s.deepl.com/chrome/statistics",toolingApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.42.0",toolingApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.42.0",toolingWriteApiPro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.42.0",toolingWriteApi:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.42.0",classicApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.42.0",classicApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.42.0",classicApiWrite:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.42.0",classicApiWritePro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.42.0",classicApiGlossary:"https://api.deepl.com/termbases/jsonrpc?client=chrome-extension,1.42.0",interactiveTextApiFree:"https://ita-free.www.deepl.com/v1",interactiveTextApiPro:"https://ita-pro.www.deepl.com/v1",oneShotApiPro:"https://oneshot-pro.deepl.com/v1",login:"https://www.deepl.com/auth/login",token:"https://w.deepl.com/oidc/token",cookieBearerExchange:"https://w.deepl.com/oidc/cookie_bearer_exchange",logout:"https://www.deepl.com/auth/logout",feedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",newFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",sidepanelShareFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_2reZXhr31K2MeDI",firefoxFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eyfDZqQmXuNTFOK",uninstallSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU",gslidesFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_9XBLSAbDmLq5emO",deeplDomain:"https://www.deepl.com",deeplPro:"https://www.deepl.com/pro",deeplProWrite:"https://www.deepl.com/pro-write",deeplTranslator:"https://www.deepl.com/translator",deeplDoctrans:"https://www.deepl.com/translator/files",deeplTermsOfServiceFree:"https://www.deepl.com/en/pro-license?tab=free",deeplCreateAccount:"https://www.deepl.com/signup",extensionStorePage:"https://bit.ly/DeepL-Chrome",supportArticle:"https://support.deepl.com/hc/articles/4407580229522",deeplSupport:"https://support.deepl.com/hc",chromeWebstore:"https://chrome.google.com/webstore/detail/deepl-translate-reading-w/cofdbpoegempjloogbagkncekinflcnj",edgeWebstore:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-reading-/fancfknaplihpclbhbpclnmmjcjanbaf",firefoxWebstore:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate",firefoxShortcutDocs:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",firefoxPrivacyPolicy:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate/privacy/",clientStateApi:"https://w.deepl.com/web",experimentsEndpoint:"https://experimentation.deepl.com/experiments",gmailFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_db8ItFTmYBcZjYW",customerSegmentationSurveyFree:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2071",customerSegmentationSurveyPro:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2070",arabicSurvey:"https://deepl.qualtrics.com/jfe/form/SV_ekTrC2ePp0wn7xQ",msAddinsDeepLAds:"https://www.deepl.com/en/microsoft-365",getFreeAccount:"https://www.deepl.com/en/signup?cta=free-login-signup",uninstallPage:"https://www.deepl.com/extension-uninstall"},APP_VERSION:"1.42.0",FEATURE_FLAGS:{TRANSLATE_INPUT:!0,PAGE_TRANSLATION:!0,IMPROVE_WRITING:!0,DOCUMENT_TRANSLATION:!0,RECOMMEND_TO_A_FRIEND:!0,PRO_LOGIN:!0,WEBPAGE_CUSTOMIZER:!0,GDOCS_INTEGRATION:!0,ZENDESK_INTEGRATION:!0,GMAIL_INTEGRATION:!0,GSLIDES_INTEGRATION:!0,ON_INSTALL_ONBOARDING:!0,WHATSAPP_TRANSLATE_ALL_CHAT:!1,DEEPL_WRITE_GENERAL:!1,DEEPL_WRITE_GDOCS:!0,SHOW_CUSTOMER_SEGMENTATION_SURVEY:!1,ARABIC_SURVEY:!0,BATCH_TRANSLATE_HTML_REQUEST:!0,SIDE_PANEL_FIREFOX:!1}}.browserBuild.toLowerCase()===Ir.firefox.toLowerCase();const e=chrome.runtime.getURL("");return Cr().browser===Ir.firefox||/moz-extension:\/\//gm.test(e)}const kr={share_feedback_survey:"DOCS_GOOGLE_COM_FEEDBACK_FORM",new_share_feedback_survey:"NEW_FEEDBACK_FORM",sidepanel_share_feedback_survey:"SIDEPANEL_SHARE_FEEDBACK_FORM",try_DeepL_Pro:"DEEPL_COM_PRO",try_DeepL_Pro_Write:"DEEPL_COM_PRO_WRITE",show_more_translation:"DEEPL_COM_TRANSLATOR",deepl_translator_home:"DEEPL_COM_HOMEPAGE",deepl_write_home:"DEEPL_COM_WRITE",deepl_terms_of_service_free:"DEEPL_COM_TERMS_OF_SERVICE_FREE",deepl_create_account:"DEEPL_CREATE_ACCOUNT",deepl_translator_docs:"DEEPL_COM_DOCTRANS",shortcut_settings:"SHORTCUT_SETTINGS",support_article:"SUPPORT_ARTICLE",chrome_write_a_review:"CHROME_WRITE_A_REVIEW",edge_write_a_review:"EDGE_WRITE_A_REVIEW",gmail_feedback_survey:"GMAIL_FEEDBACK_SURVEY",gslides_feedback_survey:"GSLIDES_FEEDBACK_SURVEY",firefox_write_a_review:"FIREFOX_WRITE_A_REVIEW",external:{whatsapp:"EXTERNAL_WHATSAPP",twitter:"EXTERNAL_TWITTER",youtube:"EXTERNAL_YOUTUBE",facebook:"EXTERNAL_FACEBOOK",github:"EXTERNAL_GITHUB",discord:"EXTERNAL_DISCORD",telegram:"EXTERNAL_TELEGRAM",reddit:"EXTERNAL_REDDIT",gmail:"EXTERNAL_GMAIL",gdocs:"EXTERNAL_GDOCS",gslides:"EXTERNAL_GSLIDES",linkedIn:"EXTERNAL_LINKEDIN",msOffice:"EXTERNAL_MS_OFFICE"},deepl_support:"DEEPL_SUPPORT",firefox_feedback_survey:"FIREFOX_FEEDBACK_SURVEY",firefox_shortcut_docs:"FIREFOX_SHORTCUT_DOCS",firefox_privacy_policy:"FIREFOX_PRIVACY_POLICY",customer_segmentation_survey_free:"CUSTOMER_SEGMENTATION_SURVEY_FREE",customer_segmentation_survey_pro:"CUSTOMER_SEGMENTATION_SURVEY_PRO",arabic_survey:"ARABIC_SURVEY",ms_office_addins_ads:"ADDINS_ADS",get_free_account:"GET_FREE_ACCOUNT"},Dr={DOCS_GOOGLE_COM_FEEDBACK_FORM:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",SIDEPANEL_SHARE_FEEDBACK_FORM:"https://deepl.qualtrics.com/jfe/form/SV_2reZXhr31K2MeDI",NEW_FEEDBACK_FORM:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",DEEPL_COM_PRO:"https://www.deepl.com/pro",DEEPL_COM_PRO_WRITE:"https://www.deepl.com/pro-write",DEEPL_COM_TRANSLATOR:"https://www.deepl.com/translator",DEEPL_COM_WRITE:{dapApi:"https://s.deepl.com/chrome/statistics",toolingApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.42.0",toolingApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.42.0",toolingWriteApiPro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.42.0",toolingWriteApi:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.42.0",classicApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.42.0",classicApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.42.0",classicApiWrite:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.42.0",classicApiWritePro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.42.0",classicApiGlossary:"https://api.deepl.com/termbases/jsonrpc?client=chrome-extension,1.42.0",interactiveTextApiFree:"https://ita-free.www.deepl.com/v1",interactiveTextApiPro:"https://ita-pro.www.deepl.com/v1",oneShotApiPro:"https://oneshot-pro.deepl.com/v1",login:"https://www.deepl.com/auth/login",token:"https://w.deepl.com/oidc/token",cookieBearerExchange:"https://w.deepl.com/oidc/cookie_bearer_exchange",logout:"https://www.deepl.com/auth/logout",feedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",newFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",sidepanelShareFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_2reZXhr31K2MeDI",firefoxFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eyfDZqQmXuNTFOK",uninstallSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU",gslidesFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_9XBLSAbDmLq5emO",deeplDomain:"https://www.deepl.com",deeplPro:"https://www.deepl.com/pro",deeplProWrite:"https://www.deepl.com/pro-write",deeplTranslator:"https://www.deepl.com/translator",deeplDoctrans:"https://www.deepl.com/translator/files",deeplTermsOfServiceFree:"https://www.deepl.com/en/pro-license?tab=free",deeplCreateAccount:"https://www.deepl.com/signup",extensionStorePage:"https://bit.ly/DeepL-Chrome",supportArticle:"https://support.deepl.com/hc/articles/4407580229522",deeplSupport:"https://support.deepl.com/hc",chromeWebstore:"https://chrome.google.com/webstore/detail/deepl-translate-reading-w/cofdbpoegempjloogbagkncekinflcnj",edgeWebstore:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-reading-/fancfknaplihpclbhbpclnmmjcjanbaf",firefoxWebstore:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate",firefoxShortcutDocs:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",firefoxPrivacyPolicy:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate/privacy/",clientStateApi:"https://w.deepl.com/web",experimentsEndpoint:"https://experimentation.deepl.com/experiments",gmailFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_db8ItFTmYBcZjYW",customerSegmentationSurveyFree:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2071",customerSegmentationSurveyPro:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2070",arabicSurvey:"https://deepl.qualtrics.com/jfe/form/SV_ekTrC2ePp0wn7xQ",msAddinsDeepLAds:"https://www.deepl.com/en/microsoft-365",getFreeAccount:"https://www.deepl.com/en/signup?cta=free-login-signup",uninstallPage:"https://www.deepl.com/extension-uninstall"}.deeplWrite,DEEPL_COM_DOCTRANS:"https://www.deepl.com/translator/files",DEEPL_COM_TERMS_OF_SERVICE_FREE:"https://www.deepl.com/en/pro-license?tab=free",DEEPL_CREATE_ACCOUNT:"https://www.deepl.com/signup",SHORTCUT_SETTINGS:"chrome://extensions/shortcuts",SUPPORT_ARTICLE:"https://support.deepl.com/hc/articles/4407580229522",CHROME_WEBSTORE:"https://chrome.google.com/webstore/detail/deepl-translate-reading-w/cofdbpoegempjloogbagkncekinflcnj",FIREFOX_WEBSTORE:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate",EDGE_WEBSTORE:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-reading-/fancfknaplihpclbhbpclnmmjcjanbaf",GMAIL_FEEDBACK_SURVEY:"https://deepl.qualtrics.com/jfe/form/SV_db8ItFTmYBcZjYW",GSLIDES_FEEDBACK_SURVEY:"https://deepl.qualtrics.com/jfe/form/SV_9XBLSAbDmLq5emO",EXTERNAL:{WHATSAPP:"https://web.whatsapp.com",TWITTER:"https://www.twitter.com",YOUTUBE:"https://www.youtube.com",FACEBOOK:"https://www.facebook.com",GITHUB:"https://www.github.com",DISCORD:"https://www.discord.com",TELEGRAM:"https://web.telegram.org",REDDIT:"https://www.reddit.com",GMAIL:"https://www.gmail.com",GDOCS:"https://docs.google.com",GSLIDES:"https://slides.google.com",LINKEDIN:"https://www.linkedin.com/",MSOFFICE:"https://www.office.com/"},DEEPL_SUPPORT:"https://support.deepl.com/hc",FIREFOX_FEEDBACK:"https://deepl.qualtrics.com/jfe/form/SV_eyfDZqQmXuNTFOK",FIREFOX_SHORTCUT_DOCS:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",FIREFOX_PRIVACY_POLICY:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate/privacy/",CUSTOMER_SEGMENTATION_SURVEY_FREE:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2071",CUSTOMER_SEGMENTATION_SURVEY_PRO:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2070",ARABIC_SURVEY:"https://deepl.qualtrics.com/jfe/form/SV_ekTrC2ePp0wn7xQ",MSOFFICE_ADDINS_ADS:"https://www.deepl.com/en/microsoft-365",GET_FREE_ACCOUNT:"https://www.deepl.com/en/signup?cta=free-login-signup"};function Ur(e){if(void 0!==e.destination)switch(e.destination){case kr.share_feedback_survey:return Dr.DOCS_GOOGLE_COM_FEEDBACK_FORM;case kr.sidepanel_share_feedback_survey:return Dr.SIDEPANEL_SHARE_FEEDBACK_FORM;case kr.new_share_feedback_survey:return Dr.NEW_FEEDBACK_FORM;case kr.try_DeepL_Pro:return e.utmContent?Gr(Dr.DEEPL_COM_PRO,[["utm_source","browser_extension"],["utm_medium","chrome"],["utm_content",null==e?void 0:e.utmContent]]):Dr.DEEPL_COM_PRO;case kr.try_DeepL_Pro_Write:return(null==e?void 0:e.utmContent)?Gr(Dr.DEEPL_COM_PRO_WRITE,[["utm_source","browser_extension"],["utm_medium","chrome"],["utm_content",null==e?void 0:e.utmContent]]):Dr.DEEPL_COM_PRO_WRITE;case kr.show_more_translation:return e?function({sourceLang:e,targetLang:t,textToShare:n}){if(!e||!t||!n)return"";const r=new URL(Dr.DEEPL_COM_TRANSLATOR),o=`${e.toLowerCase()}/${t.toLowerCase()}/${encodeURIComponent(n)}`;return r.hash=o,r.href}(e):void console.error("Invalid action.");case kr.deepl_translator_home:return(null==e?void 0:e.utmContent)?Gr(Dr.DEEPL_COM_TRANSLATOR,[["utm_source","browser_extension"],["utm_medium","chrome"],["utm_content",null==e?void 0:e.utmContent]]):Dr.DEEPL_COM_TRANSLATOR;case kr.deepl_write_home:return(null==e?void 0:e.utmContent)?Gr(Dr.DEEPL_COM_WRITE,[["utm_source","browser_extension"],["utm_medium","chrome"],["utm_content",null==e?void 0:e.utmContent]]):Dr.DEEPL_COM_WRITE;case kr.deepl_translator_docs:return(null==e?void 0:e.utmContent)?Gr(Dr.DEEPL_COM_DOCTRANS,[["utm_source","browser_extension"],["utm_medium","chrome"],["utm_content",null==e?void 0:e.utmContent]]):Dr.DEEPL_COM_DOCTRANS;case kr.deepl_terms_of_service_free:return Dr.DEEPL_COM_TERMS_OF_SERVICE_FREE;case kr.shortcut_settings:return Dr.SHORTCUT_SETTINGS;case kr.support_article:return Dr.SUPPORT_ARTICLE;case kr.external.whatsapp:return Dr.EXTERNAL.WHATSAPP;case kr.external.twitter:return Dr.EXTERNAL.TWITTER;case kr.external.youtube:return Dr.EXTERNAL.YOUTUBE;case kr.external.facebook:return Dr.EXTERNAL.FACEBOOK;case kr.external.github:return Dr.EXTERNAL.GITHUB;case kr.external.discord:return Dr.EXTERNAL.DISCORD;case kr.external.telegram:return Dr.EXTERNAL.TELEGRAM;case kr.external.reddit:return Dr.EXTERNAL.REDDIT;case kr.external.gmail:return Dr.EXTERNAL.GMAIL;case kr.external.gdocs:return Dr.EXTERNAL.GDOCS;case kr.external.gslides:return Dr.EXTERNAL.GSLIDES;case kr.external.linkedIn:return Dr.EXTERNAL.LINKEDIN;case kr.external.msOffice:return Dr.EXTERNAL.MSOFFICE;case kr.deepl_support:return Dr.DEEPL_SUPPORT;case kr.chrome_write_a_review:return Dr.CHROME_WEBSTORE;case kr.edge_write_a_review:return Dr.EDGE_WEBSTORE;case kr.gmail_feedback_survey:return Dr.GMAIL_FEEDBACK_SURVEY;case kr.gslides_feedback_survey:return Dr.GSLIDES_FEEDBACK_SURVEY;case kr.firefox_write_a_review:return Dr.FIREFOX_WEBSTORE;case kr.firefox_privacy_policy:return Dr.FIREFOX_PRIVACY_POLICY;case kr.firefox_feedback_survey:return Dr.FIREFOX_FEEDBACK;case kr.firefox_shortcut_docs:return Dr.FIREFOX_SHORTCUT_DOCS;case kr.deepl_create_account:if(e){let t=[];if(e.utmContent){t=[...[["utm_source","browser_extension"],["utm_medium","chrome"],["utm_content",e.utmContent]]]}if(e.redirectToOnboarding&&!xr()){const e=`${chrome.runtime.getURL("")}onboarding.html`;t.push(["redirectUri",e])}return Gr(Dr.DEEPL_CREATE_ACCOUNT,t)}return Dr.DEEPL_CREATE_ACCOUNT;case kr.customer_segmentation_survey_free:return Dr.CUSTOMER_SEGMENTATION_SURVEY_FREE;case kr.customer_segmentation_survey_pro:return Dr.CUSTOMER_SEGMENTATION_SURVEY_PRO;case kr.arabic_survey:return Dr.ARABIC_SURVEY;case kr.ms_office_addins_ads:return Dr.MSOFFICE_ADDINS_ADS;case kr.get_free_account:return Dr.GET_FREE_ACCOUNT;default:return}}function Mr(e){const t=Ur(e),{openInSameTab:n}=e;if(!t)return;const r=new URL(t).href;n?chrome.tabs.query({active:!0,currentWindow:!0},(function(e){const t=e[0];t.id&&chrome.tabs.update(t.id,{url:r})})):chrome.tabs.create({url:r,active:!0})}function Gr(e,t){if(0===t.length||!e)return;const n=new URL(e);return t.forEach((e=>{2===e.length&&n.searchParams.append(e[0],e[1])})),n.href}const $r=Object.prototype.toString;function Vr(e){switch($r.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return Kr(e,Error)}}function Fr(e,t){return $r.call(e)===`[object ${t}]`}function jr(e){return Fr(e,"ErrorEvent")}function Wr(e){return Fr(e,"DOMError")}function qr(e){return Fr(e,"String")}function Br(e){return"object"==typeof e&&null!==e&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function Hr(e){return null===e||Br(e)||"object"!=typeof e&&"function"!=typeof e}function Jr(e){return Fr(e,"Object")}function Yr(e){return"undefined"!=typeof Event&&Kr(e,Event)}function zr(e){return Boolean(e&&e.then&&"function"==typeof e.then)}function Xr(e){return"number"==typeof e&&e!=e}function Kr(e,t){try{return e instanceof t}catch(e){return!1}}function Qr(e){return!("object"!=typeof e||null===e||!e.__isVue&&!e._isVue)}function Zr(e,t=0){return"string"!=typeof e||0===t||e.length<=t?e:`${e.slice(0,t)}...`}function eo(e,t){let n=e;const r=n.length;if(r<=150)return n;t>r&&(t=r);let o=Math.max(t-60,0);o<5&&(o=0);let a=Math.min(o+140,r);return a>r-5&&(a=r),a===r&&(o=Math.max(a-140,0)),n=n.slice(o,a),o>0&&(n=`'{snip} ${n}`),a<r&&(n+=" {snip}"),n}function to(e,t){if(!Array.isArray(e))return"";const n=[];for(let t=0;t<e.length;t++){const r=e[t];try{Qr(r)?n.push("[VueViewModel]"):n.push(String(r))}catch(e){n.push("[value cannot be serialized]")}}return n.join(t)}function no(e,t,n=!1){return!!qr(e)&&(Fr(t,"RegExp")?t.test(e):!!qr(t)&&(n?e===t:e.includes(t)))}function ro(e,t=[],n=!1){return t.some((t=>no(e,t,n)))}function oo(e,t,n=250,r,o,a,i){if(!(a.exception&&a.exception.values&&i&&Kr(i.originalException,Error)))return;const s=a.exception.values.length>0?a.exception.values[a.exception.values.length-1]:void 0;var c,l;s&&(a.exception.values=(c=ao(e,t,o,i.originalException,r,a.exception.values,s,0),l=n,c.map((e=>(e.value&&(e.value=Zr(e.value,l)),e)))))}function ao(e,t,n,r,o,a,i,s){if(a.length>=n+1)return a;let c=[...a];if(Kr(r[o],Error)){io(i,s);const a=e(t,r[o]),l=c.length;so(a,o,l,s),c=ao(e,t,n,r[o],o,[a,...c],a,l)}return Array.isArray(r.errors)&&r.errors.forEach(((r,a)=>{if(Kr(r,Error)){io(i,s);const l=e(t,r),u=c.length;so(l,`errors[${a}]`,u,s),c=ao(e,t,n,r,o,[l,...c],l,u)}})),c}function io(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,..."AggregateError"===e.type&&{is_exception_group:!0},exception_id:t}}function so(e,t,n,r){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}function co(e){return e&&e.Math==Math?e:void 0}const lo="object"==typeof globalThis&&co(globalThis)||"object"==typeof window&&co(window)||"object"==typeof self&&co(self)||"object"==typeof global&&co(global)||function(){return this}()||{};function uo(){return lo}function po(e,t,n){const r=n||lo,o=r.__SENTRY__=r.__SENTRY__||{};return o[e]||(o[e]=t())}const go=uo();function ho(e,t={}){if(!e)return"<unknown>";try{let n=e;const r=5,o=[];let a=0,i=0;const s=" > ",c=s.length;let l;const u=Array.isArray(t)?t:t.keyAttrs,d=!Array.isArray(t)&&t.maxStringLength||80;for(;n&&a++<r&&(l=fo(n,u),!("html"===l||a>1&&i+o.length*c+l.length>=d));)o.push(l),i+=l.length,n=n.parentNode;return o.reverse().join(s)}catch(e){return"<unknown>"}}function fo(e,t){const n=e,r=[];let o,a,i,s,c;if(!n||!n.tagName)return"";if(go.HTMLElement&&n instanceof HTMLElement&&n.dataset&&n.dataset.sentryComponent)return n.dataset.sentryComponent;r.push(n.tagName.toLowerCase());const l=t&&t.length?t.filter((e=>n.getAttribute(e))).map((e=>[e,n.getAttribute(e)])):null;if(l&&l.length)l.forEach((e=>{r.push(`[${e[0]}="${e[1]}"]`)}));else if(n.id&&r.push(`#${n.id}`),o=n.className,o&&qr(o))for(a=o.split(/\s+/),c=0;c<a.length;c++)r.push(`.${a[c]}`);const u=["aria-label","type","name","title","alt"];for(c=0;c<u.length;c++)i=u[c],s=n.getAttribute(i),s&&r.push(`[${i}="${s}"]`);return r.join("")}function mo(){try{return go.document.location.href}catch(e){return""}}function _o(e){return go.document&&go.document.querySelector?go.document.querySelector(e):null}function vo(e){if(!go.HTMLElement)return null;let t=e;for(let e=0;e<5;e++){if(!t)return null;if(t instanceof HTMLElement&&t.dataset.sentryComponent)return t.dataset.sentryComponent;t=t.parentNode}return null}const To="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,yo=["debug","info","warn","error","log","assert","trace"],Eo={};function So(e){if(!("console"in lo))return e();const t=lo.console,n={},r=Object.keys(Eo);r.forEach((e=>{const r=Eo[e];n[e]=t[e],t[e]=r}));try{return e()}finally{r.forEach((e=>{t[e]=n[e]}))}}const Io=function(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return To?yo.forEach((n=>{t[n]=(...t)=>{e&&So((()=>{lo.console[n](`Sentry Logger [${n}]:`,...t)}))}})):yo.forEach((e=>{t[e]=()=>{}})),t}(),bo=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function Ao(e,t=!1){const{host:n,path:r,pass:o,port:a,projectId:i,protocol:s,publicKey:c}=e;return`${s}://${c}${t&&o?`:${o}`:""}@${n}${a?`:${a}`:""}/${r?`${r}/`:r}${i}`}function wo(e){const t=bo.exec(e);if(!t)return void So((()=>{console.error(`Invalid Sentry Dsn: ${e}`)}));const[n,r,o="",a,i="",s]=t.slice(1);let c="",l=s;const u=l.split("/");if(u.length>1&&(c=u.slice(0,-1).join("/"),l=u.pop()),l){const e=l.match(/^\d+/);e&&(l=e[0])}return No({host:a,pass:o,path:c,projectId:l,port:i,protocol:n,publicKey:r})}function No(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function Oo(e){const t="string"==typeof e?wo(e):No(e);if(t&&function(e){if(!To)return!0;const{port:t,projectId:n,protocol:r}=e;return!(["protocol","publicKey","host","projectId"].find((t=>!e[t]&&(Io.error(`Invalid Sentry Dsn: ${t} missing`),!0)))||(n.match(/^\d+$/)?function(e){return"http"===e||"https"===e}(r)?t&&isNaN(parseInt(t,10))&&(Io.error(`Invalid Sentry Dsn: Invalid port ${t}`),1):(Io.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),1):(Io.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),1)))}(t))return t}class Ro extends Error{constructor(e,t="warn"){super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=t}}function Lo(e,t,n){if(!(t in e))return;const r=e[t],o=n(r);"function"==typeof o&&Po(o,r),e[t]=o}function Co(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch(n){To&&Io.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function Po(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,Co(e,"__sentry_original__",t)}catch(e){}}function xo(e){return e.__sentry_original__}function ko(e){if(Vr(e))return{message:e.message,name:e.name,stack:e.stack,...Uo(e)};if(Yr(e)){const t={type:e.type,target:Do(e.target),currentTarget:Do(e.currentTarget),...Uo(e)};return"undefined"!=typeof CustomEvent&&Kr(e,CustomEvent)&&(t.detail=e.detail),t}return e}function Do(e){try{return t=e,"undefined"!=typeof Element&&Kr(t,Element)?ho(e):Object.prototype.toString.call(e)}catch(e){return"<unknown>"}var t}function Uo(e){if("object"==typeof e&&null!==e){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}return{}}function Mo(e){return Go(e,new Map)}function Go(e,t){if(function(e){if(!Jr(e))return!1;try{const t=Object.getPrototypeOf(e).constructor.name;return!t||"Object"===t}catch(e){return!0}}(e)){const n=t.get(e);if(void 0!==n)return n;const r={};t.set(e,r);for(const n of Object.keys(e))void 0!==e[n]&&(r[n]=Go(e[n],t));return r}if(Array.isArray(e)){const n=t.get(e);if(void 0!==n)return n;const r=[];return t.set(e,r),e.forEach((e=>{r.push(Go(e,t))})),r}return e}const $o=/\(error: (.*)\)/,Vo=/captureMessage|captureException/;function Fo(...e){const t=e.sort(((e,t)=>e[0]-t[0])).map((e=>e[1]));return(e,n=0)=>{const r=[],o=e.split("\n");for(let e=n;e<o.length;e++){const n=o[e];if(n.length>1024)continue;const a=$o.test(n)?n.replace($o,"$1"):n;if(!a.match(/\S*Error: /)){for(const e of t){const t=e(a);if(t){r.push(t);break}}if(r.length>=50)break}}return function(e){if(!e.length)return[];const t=Array.from(e);/sentryWrapped/.test(t[t.length-1].function||"")&&t.pop();t.reverse(),Vo.test(t[t.length-1].function||"")&&(t.pop(),Vo.test(t[t.length-1].function||"")&&t.pop());return t.slice(0,50).map((e=>({...e,filename:e.filename||t[t.length-1].filename,function:e.function||"?"})))}(r)}}const jo="<anonymous>";function Wo(e){try{return e&&"function"==typeof e&&e.name||jo}catch(e){return jo}}const qo={},Bo={};function Ho(e,t){qo[e]=qo[e]||[],qo[e].push(t)}function Jo(e,t){Bo[e]||(t(),Bo[e]=!0)}function Yo(e,t){const n=e&&qo[e];if(n)for(const r of n)try{r(t)}catch(t){To&&Io.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${Wo(r)}\nError:`,t)}}function zo(e){const t="console";Ho(t,e),Jo(t,Xo)}function Xo(){"console"in lo&&yo.forEach((function(e){e in lo.console&&Lo(lo.console,e,(function(t){return Eo[e]=t,function(...t){Yo("console",{args:t,level:e});const n=Eo[e];n&&n.apply(lo.console,t)}}))}))}function Ko(){const e=lo,t=e.crypto||e.msCrypto;let n=()=>16*Math.random();try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t&&t.getRandomValues&&(n=()=>{const e=new Uint8Array(1);return t.getRandomValues(e),e[0]})}catch(e){}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,(e=>(e^(15&n())>>e/4).toString(16)))}function Qo(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function Zo(e){const{message:t,event_id:n}=e;if(t)return t;const r=Qo(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function ea(e,t,n){const r=e.exception=e.exception||{},o=r.values=r.values||[],a=o[0]=o[0]||{};a.value||(a.value=t||""),a.type||(a.type="Error")}function ta(e,t){const n=Qo(e);if(!n)return;const r=n.mechanism;if(n.mechanism={type:"generic",handled:!0,...r,...t},t&&"data"in t){const e={...r&&r.data,...t.data};n.mechanism.data=e}}function na(e){if(e&&e.__sentry_captured__)return!0;try{Co(e,"__sentry_captured__",!0)}catch(e){}return!1}function ra(e){return Array.isArray(e)?e:[e]}const oa=lo;let aa,ia,sa;function ca(e){Ho("dom",e),Jo("dom",la)}function la(){if(!oa.document)return;const e=Yo.bind(null,"dom"),t=ua(e,!0);oa.document.addEventListener("click",t,!1),oa.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach((t=>{const n=oa[t]&&oa[t].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(Lo(n,"addEventListener",(function(t){return function(n,r,o){if("click"===n||"keypress"==n)try{const r=this,a=r.__sentry_instrumentation_handlers__=r.__sentry_instrumentation_handlers__||{},i=a[n]=a[n]||{refCount:0};if(!i.handler){const r=ua(e);i.handler=r,t.call(this,n,r,o)}i.refCount++}catch(e){}return t.call(this,n,r,o)}})),Lo(n,"removeEventListener",(function(e){return function(t,n,r){if("click"===t||"keypress"==t)try{const n=this,o=n.__sentry_instrumentation_handlers__||{},a=o[t];a&&(a.refCount--,a.refCount<=0&&(e.call(this,t,a.handler,r),a.handler=void 0,delete o[t]),0===Object.keys(o).length&&delete n.__sentry_instrumentation_handlers__)}catch(e){}return e.call(this,t,n,r)}})))}))}function ua(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;const r=function(e){try{return e.target}catch(e){return null}}(n);if(function(e,t){return"keypress"===e&&(!t||!t.tagName||"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&!t.isContentEditable)}(n.type,r))return;Co(n,"_sentryCaptured",!0),r&&!r._sentryId&&Co(r,"_sentryId",Ko());const o="keypress"===n.type?"input":n.type;if(!function(e){if(e.type!==ia)return!1;try{if(!e.target||e.target._sentryId!==sa)return!1}catch(e){}return!0}(n)){e({event:n,name:o,global:t}),ia=n.type,sa=r?r._sentryId:void 0}clearTimeout(aa),aa=oa.setTimeout((()=>{sa=void 0,ia=void 0}),1e3)}}const da=uo();function pa(){if(!("fetch"in da))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(e){return!1}}function ga(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function ha(){if("string"==typeof EdgeRuntime)return!0;if(!pa())return!1;if(ga(da.fetch))return!0;let e=!1;const t=da.document;if(t&&"function"==typeof t.createElement)try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(e=ga(n.contentWindow.fetch)),t.head.removeChild(n)}catch(e){To&&Io.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return e}function fa(e){const t="fetch";Ho(t,e),Jo(t,ma)}function ma(){ha()&&Lo(lo,"fetch",(function(e){return function(...t){const{method:n,url:r}=function(e){if(0===e.length)return{method:"GET",url:""};if(2===e.length){const[t,n]=e;return{url:va(t),method:_a(n,"method")?String(n.method).toUpperCase():"GET"}}const t=e[0];return{url:va(t),method:_a(t,"method")?String(t.method).toUpperCase():"GET"}}(t),o={args:t,fetchData:{method:n,url:r},startTimestamp:Date.now()};return Yo("fetch",{...o}),e.apply(lo,t).then((e=>(Yo("fetch",{...o,endTimestamp:Date.now(),response:e}),e)),(e=>{throw Yo("fetch",{...o,endTimestamp:Date.now(),error:e}),e}))}}))}function _a(e,t){return!!e&&"object"==typeof e&&!!e[t]}function va(e){return"string"==typeof e?e:e?_a(e,"url")?e.url:e.toString?e.toString():"":""}let Ta=null;function ya(e){const t="error";Ho(t,e),Jo(t,Ea)}function Ea(){Ta=lo.onerror,lo.onerror=function(e,t,n,r,o){return Yo("error",{column:r,error:o,line:n,msg:e,url:t}),!(!Ta||Ta.__SENTRY_LOADER__)&&Ta.apply(this,arguments)},lo.onerror.__SENTRY_INSTRUMENTED__=!0}let Sa=null;function Ia(e){const t="unhandledrejection";Ho(t,e),Jo(t,ba)}function ba(){Sa=lo.onunhandledrejection,lo.onunhandledrejection=function(e){return Yo("unhandledrejection",e),!(Sa&&!Sa.__SENTRY_LOADER__)||Sa.apply(this,arguments)},lo.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const Aa=uo();const wa=lo;let Na;function Oa(e){const t="history";Ho(t,e),Jo(t,Ra)}function Ra(){if(!function(){const e=Aa.chrome,t=e&&e.app&&e.app.runtime,n="history"in Aa&&!!Aa.history.pushState&&!!Aa.history.replaceState;return!t&&n}())return;const e=wa.onpopstate;function t(e){return function(...t){const n=t.length>2?t[2]:void 0;if(n){const e=Na,t=String(n);Na=t;Yo("history",{from:e,to:t})}return e.apply(this,t)}}wa.onpopstate=function(...t){const n=wa.location.href,r=Na;Na=n;if(Yo("history",{from:r,to:n}),e)try{return e.apply(this,t)}catch(e){}},Lo(wa.history,"pushState",t),Lo(wa.history,"replaceState",t)}const La=lo,Ca="__sentry_xhr_v3__";function Pa(e){Ho("xhr",e),Jo("xhr",xa)}function xa(){if(!La.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;Lo(e,"open",(function(e){return function(...t){const n=Date.now(),r=qr(t[0])?t[0].toUpperCase():void 0,o=function(e){if(qr(e))return e;try{return e.toString()}catch(e){}return}(t[1]);if(!r||!o)return e.apply(this,t);this[Ca]={method:r,url:o,request_headers:{}},"POST"===r&&o.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const a=()=>{const e=this[Ca];if(e&&4===this.readyState){try{e.status_code=this.status}catch(e){}Yo("xhr",{args:[r,o],endTimestamp:Date.now(),startTimestamp:n,xhr:this})}};return"onreadystatechange"in this&&"function"==typeof this.onreadystatechange?Lo(this,"onreadystatechange",(function(e){return function(...t){return a(),e.apply(this,t)}})):this.addEventListener("readystatechange",a),Lo(this,"setRequestHeader",(function(e){return function(...t){const[n,r]=t,o=this[Ca];return o&&qr(n)&&qr(r)&&(o.request_headers[n.toLowerCase()]=r),e.apply(this,t)}})),e.apply(this,t)}})),Lo(e,"send",(function(e){return function(...t){const n=this[Ca];if(!n)return e.apply(this,t);void 0!==t[0]&&(n.body=t[0]);return Yo("xhr",{args:[n.method,n.url],startTimestamp:Date.now(),xhr:this}),e.apply(this,t)}}))}function ka(){return!("undefined"!=typeof __SENTRY_BROWSER_BUNDLE__&&__SENTRY_BROWSER_BUNDLE__)&&"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)}function Da(){return"undefined"!=typeof window&&(!ka()||void 0!==lo.process&&"renderer"===lo.process.type)}function Ua(e,t=100,n=1/0){try{return Ga("",e,t,n)}catch(e){return{ERROR:`**non-serializable** (${e})`}}}function Ma(e,t=3,n=102400){const r=Ua(e,t);return o=r,function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(o))>n?Ma(e,t-1,n):r;var o}function Ga(e,t,n=1/0,r=1/0,o=function(){const e="function"==typeof WeakSet,t=e?new WeakSet:[];return[function(n){if(e)return!!t.has(n)||(t.add(n),!1);for(let e=0;e<t.length;e++)if(t[e]===n)return!0;return t.push(n),!1},function(n){if(e)t.delete(n);else for(let e=0;e<t.length;e++)if(t[e]===n){t.splice(e,1);break}}]}()){const[a,i]=o;if(null==t||["number","boolean","string"].includes(typeof t)&&!Xr(t))return t;const s=function(e,t){try{if("domain"===e&&t&&"object"==typeof t&&t._events)return"[Domain]";if("domainEmitter"===e)return"[DomainEmitter]";if("undefined"!=typeof global&&t===global)return"[Global]";if("undefined"!=typeof window&&t===window)return"[Window]";if("undefined"!=typeof document&&t===document)return"[Document]";if(Qr(t))return"[VueViewModel]";if(Jr(n=t)&&"nativeEvent"in n&&"preventDefault"in n&&"stopPropagation"in n)return"[SyntheticEvent]";if("number"==typeof t&&t!=t)return"[NaN]";if("function"==typeof t)return`[Function: ${Wo(t)}]`;if("symbol"==typeof t)return`[${String(t)}]`;if("bigint"==typeof t)return`[BigInt: ${String(t)}]`;const r=function(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}(t);return/^HTML(\w*)Element$/.test(r)?`[HTMLElement: ${r}]`:`[object ${r}]`}catch(e){return`**non-serializable** (${e})`}var n}(e,t);if(!s.startsWith("[object "))return s;if(t.__sentry_skip_normalization__)return t;const c="number"==typeof t.__sentry_override_normalization_depth__?t.__sentry_override_normalization_depth__:n;if(0===c)return s.replace("object ","");if(a(t))return"[Circular ~]";const l=t;if(l&&"function"==typeof l.toJSON)try{return Ga("",l.toJSON(),c-1,r,o)}catch(e){}const u=Array.isArray(t)?[]:{};let d=0;const p=ko(t);for(const e in p){if(!Object.prototype.hasOwnProperty.call(p,e))continue;if(d>=r){u[e]="[MaxProperties ~]";break}const t=p[e];u[e]=Ga(e,t,c-1,r,o),d++}return i(t),u}const $a=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;function Va(...e){let t="",n=!1;for(let r=e.length-1;r>=-1&&!n;r--){const o=r>=0?e[r]:"/";o&&(t=`${o}/${t}`,n="/"===o.charAt(0))}return t=function(e,t){let n=0;for(let t=e.length-1;t>=0;t--){const r=e[t];"."===r?e.splice(t,1):".."===r?(e.splice(t,1),n++):n&&(e.splice(t,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}(t.split("/").filter((e=>!!e)),!n).join("/"),(n?"/":"")+t||"."}function Fa(e){let t=0;for(;t<e.length&&""===e[t];t++);let n=e.length-1;for(;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}function ja(e,t){return function(e){const t=e.length>1024?`<truncated>${e.slice(-1024)}`:e,n=$a.exec(t);return n?n.slice(1):[]}(e)[2]}var Wa;function qa(e){return new Ha((t=>{t(e)}))}function Ba(e){return new Ha(((t,n)=>{n(e)}))}!function(e){e[e.PENDING=0]="PENDING";e[e.RESOLVED=1]="RESOLVED";e[e.REJECTED=2]="REJECTED"}(Wa||(Wa={}));class Ha{constructor(e){Ha.prototype.__init.call(this),Ha.prototype.__init2.call(this),Ha.prototype.__init3.call(this),Ha.prototype.__init4.call(this),this._state=Wa.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(e){this._reject(e)}}then(e,t){return new Ha(((n,r)=>{this._handlers.push([!1,t=>{if(e)try{n(e(t))}catch(e){r(e)}else n(t)},e=>{if(t)try{n(t(e))}catch(e){r(e)}else r(e)}]),this._executeHandlers()}))}catch(e){return this.then((e=>e),e)}finally(e){return new Ha(((t,n)=>{let r,o;return this.then((t=>{o=!1,r=t,e&&e()}),(t=>{o=!0,r=t,e&&e()})).then((()=>{o?n(r):t(r)}))}))}__init(){this._resolve=e=>{this._setResult(Wa.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(Wa.REJECTED,e)}}__init3(){this._setResult=(e,t)=>{this._state===Wa.PENDING&&(zr(t)?t.then(this._resolve,this._reject):(this._state=e,this._value=t,this._executeHandlers()))}}__init4(){this._executeHandlers=()=>{if(this._state===Wa.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach((e=>{e[0]||(this._state===Wa.RESOLVED&&e[1](this._value),this._state===Wa.REJECTED&&e[2](this._value),e[0]=!0)}))}}}function Ja(e){const t=[];function n(e){return t.splice(t.indexOf(e),1)[0]}return{$:t,add:function(r){if(!(void 0===e||t.length<e))return Ba(new Ro("Not adding Promise because buffer limit was reached."));const o=r();return-1===t.indexOf(o)&&t.push(o),o.then((()=>n(o))).then(null,(()=>n(o).then(null,(()=>{})))),o},drain:function(e){return new Ha(((n,r)=>{let o=t.length;if(!o)return n(!0);const a=setTimeout((()=>{e&&e>0&&n(!1)}),e);t.forEach((e=>{qa(e).then((()=>{--o||(clearTimeout(a),n(!0))}),r)}))}))}}}function Ya(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}const za=["fatal","error","warning","log","info","debug"];function Xa(e){return"warn"===e?"warning":za.includes(e)?e:"log"}function Ka(){return Date.now()/1e3}const Qa=function(){const{performance:e}=lo;if(!e||!e.now)return Ka;const t=Date.now()-e.now(),n=null==e.timeOrigin?t:e.timeOrigin;return()=>(n+e.now())/1e3}(),Za=(()=>{const{performance:e}=lo;if(!e||!e.now)return;const t=36e5,n=e.now(),r=Date.now(),o=e.timeOrigin?Math.abs(e.timeOrigin+n-r):t,a=o<t,i=e.timing&&e.timing.navigationStart,s="number"==typeof i?Math.abs(i+n-r):t;return a||s<t?o<=s?e.timeOrigin:i:r})(),ei="baggage",ti="sentry-",ni=/^sentry-/;function ri(e){if(!qr(e)&&!Array.isArray(e))return;let t={};if(Array.isArray(e))t=e.reduce(((e,t)=>{const n=ai(t);for(const t of Object.keys(n))e[t]=n[t];return e}),{});else{if(!e)return;t=ai(e)}const n=Object.entries(t).reduce(((e,[t,n])=>{if(t.match(ni)){e[t.slice(7)]=n}return e}),{});return Object.keys(n).length>0?n:void 0}function oi(e){if(!e)return;return function(e){if(0===Object.keys(e).length)return;return Object.entries(e).reduce(((e,[t,n],r)=>{const o=`${encodeURIComponent(t)}=${encodeURIComponent(n)}`,a=0===r?o:`${e},${o}`;return a.length>8192?(To&&Io.warn(`Not adding key: ${t} with val: ${n} to baggage header due to exceeding baggage size limits.`),e):a}),"")}(Object.entries(e).reduce(((e,[t,n])=>(n&&(e[`${ti}${t}`]=n),e)),{}))}function ai(e){return e.split(",").map((e=>e.split("=").map((e=>decodeURIComponent(e.trim()))))).reduce(((e,[t,n])=>(e[t]=n,e)),{})}const ii=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function si(e){if(!e)return;const t=e.match(ii);if(!t)return;let n;return"1"===t[3]?n=!0:"0"===t[3]&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}function ci(e,t){const n=si(e),r=ri(t),{traceId:o,parentSpanId:a,parentSampled:i}=n||{};return n?{traceId:o||Ko(),parentSpanId:a||Ko().substring(16),spanId:Ko().substring(16),sampled:i,dsc:r||{}}:{traceId:o||Ko(),spanId:Ko().substring(16)}}function li(e=Ko(),t=Ko().substring(16),n){let r="";return void 0!==n&&(r=n?"-1":"-0"),`${e}-${t}${r}`}function ui(e,t=[]){return[e,t]}function di(e,t){const[n,r]=e;return[n,[...r,t]]}function pi(e,t){const n=e[1];for(const e of n){if(t(e,e[0].type))return!0}return!1}function gi(e,t){return(t||new TextEncoder).encode(e)}function hi(e,t){const[n,r]=e;let o=JSON.stringify(n);function a(e){"string"==typeof o?o="string"==typeof e?o+e:[gi(o,t),e]:o.push("string"==typeof e?gi(e,t):e)}for(const e of r){const[t,n]=e;if(a(`\n${JSON.stringify(t)}\n`),"string"==typeof n||n instanceof Uint8Array)a(n);else{let e;try{e=JSON.stringify(n)}catch(t){e=JSON.stringify(Ua(n))}a(e)}}return"string"==typeof o?o:function(e){const t=e.reduce(((e,t)=>e+t.length),0),n=new Uint8Array(t);let r=0;for(const t of e)n.set(t,r),r+=t.length;return n}(o)}function fi(e,t){const n="string"==typeof e.data?gi(e.data,t):e.data;return[Mo({type:"attachment",length:n.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),n]}const mi={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket"};function _i(e){return mi[e]}function vi(e){if(!e||!e.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function Ti(e,t,n,r){const o=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:Ao(r)},...o&&{trace:Mo({...o})}}}function yi(e,t=Date.now()){const n=parseInt(`${e}`,10);if(!isNaN(n))return 1e3*n;const r=Date.parse(`${e}`);return isNaN(r)?6e4:r-t}function Ei(e,t,n=Date.now()){return function(e,t){return e[t]||e.all||0}(e,t)>n}function Si(e,{statusCode:t,headers:n},r=Date.now()){const o={...e},a=n&&n["x-sentry-rate-limits"],i=n&&n["retry-after"];if(a)for(const e of a.trim().split(",")){const[t,n,,,a]=e.split(":",5),i=parseInt(t,10),s=1e3*(isNaN(i)?60:i);if(n)for(const e of n.split(";"))"metric_bucket"===e&&a&&!a.split(";").includes("custom")||(o[e]=r+s);else o.all=r+s}else i?o.all=r+yi(i,r):429===t&&(o.all=r+6e4);return o}function Ii(e,t){const n={type:t.name||t.constructor.name,value:t.message},r=function(e,t){return e(t.stack||"",1)}(e,t);return r.length&&(n.stacktrace={frames:r}),n}function bi(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],a=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=a(n)):"call"!==o&&"optionalCall"!==o||(n=a(((...e)=>n.call(t,...e))),t=void 0)}return n}const Ai="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,wi="production";function Ni(){return po("globalEventProcessors",(()=>[]))}function Oi(e){Ni().push(e)}function Ri(e,t,n,r=0){return new Ha(((o,a)=>{const i=e[r];if(null===t||"function"!=typeof i)o(t);else{const s=i({...t},n);Ai&&i.id&&null===s&&Io.log(`Event processor "${i.id}" dropped event`),zr(s)?s.then((t=>Ri(e,t,n,r+1).then(o))).then(null,a):Ri(e,s,n,r+1).then(o).then(null,a)}}))}function Li(e){const t=Qa(),n={sid:Ko(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(e){return Mo({sid:`${e.sid}`,init:e.init,started:new Date(1e3*e.started).toISOString(),timestamp:new Date(1e3*e.timestamp).toISOString(),status:e.status,errors:e.errors,did:"number"==typeof e.did||"string"==typeof e.did?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}(n)};return e&&Ci(n,e),n}function Ci(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||Qa(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:Ko()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{const t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}function Pi(e,t){let n={};"ok"===e.status&&(n={status:"exited"}),Ci(e,n)}function xi(e){const{spanId:t,traceId:n}=e.spanContext(),{data:r,op:o,parent_span_id:a,status:i,tags:s,origin:c}=Mi(e);return Mo({data:r,op:o,parent_span_id:a,span_id:t,status:i,tags:s,trace_id:n,origin:c})}function ki(e){const{traceId:t,spanId:n}=e.spanContext();return li(t,n,Gi(e))}function Di(e){return"number"==typeof e?Ui(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?Ui(e.getTime()):Qa()}function Ui(e){return e>9999999999?e/1e3:e}function Mi(e){return function(e){return"function"==typeof e.getSpanJSON}(e)?e.getSpanJSON():"function"==typeof e.toJSON?e.toJSON():{}}function Gi(e){const{traceFlags:t}=e.spanContext();return Boolean(1&t)}function $i(e,t,n,r,o,a){const{normalizeDepth:i=3,normalizeMaxBreadth:s=1e3}=e,c={...t,event_id:t.event_id||n.event_id||Ko(),timestamp:t.timestamp||Ka()},l=n.integrations||e.integrations.map((e=>e.name));!function(e,t){const{environment:n,release:r,dist:o,maxValueLength:a=250}=t;"environment"in e||(e.environment="environment"in t?n:wi);void 0===e.release&&void 0!==r&&(e.release=r);void 0===e.dist&&void 0!==o&&(e.dist=o);e.message&&(e.message=Zr(e.message,a));const i=e.exception&&e.exception.values&&e.exception.values[0];i&&i.value&&(i.value=Zr(i.value,a));const s=e.request;s&&s.url&&(s.url=Zr(s.url,a))}(c,e),function(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}(c,l),void 0===t.type&&function(e,t){const n=lo._sentryDebugIds;if(!n)return;let r;const o=Vi.get(t);o?r=o:(r=new Map,Vi.set(t,r));const a=Object.keys(n).reduce(((e,o)=>{let a;const i=r.get(o);i?a=i:(a=t(o),r.set(o,a));for(let t=a.length-1;t>=0;t--){const r=a[t];if(r.filename){e[r.filename]=n[o];break}}return e}),{});try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.filename&&(e.debug_id=a[e.filename])}))}))}catch(e){}}(c,e.stackParser);const u=function(e,t){if(!t)return e;const n=e?e.clone():new cs;return n.update(t),n}(r,n.captureContext);n.mechanism&&ta(c,n.mechanism);const d=o&&o.getEventProcessors?o.getEventProcessors():[],p=function(){ss||(ss=new cs);return ss}().getScopeData();if(a){as(p,a.getScopeData())}if(u){as(p,u.getScopeData())}const g=[...n.attachments||[],...p.attachments];g.length&&(n.attachments=g),os(c,p);return Ri([...d,...Ni(),...p.eventProcessors],c,n).then((e=>(e&&function(e){const t={};try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.debug_id&&(e.abs_path?t[e.abs_path]=e.debug_id:e.filename&&(t[e.filename]=e.debug_id),delete e.debug_id)}))}))}catch(e){}if(0===Object.keys(t).length)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.keys(t).forEach((e=>{n.push({type:"sourcemap",code_file:e,debug_id:t[e]})}))}(e),"number"==typeof i&&i>0?function(e,t,n){if(!e)return null;const r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map((e=>({...e,...e.data&&{data:Ua(e.data,t,n)}})))},...e.user&&{user:Ua(e.user,t,n)},...e.contexts&&{contexts:Ua(e.contexts,t,n)},...e.extra&&{extra:Ua(e.extra,t,n)}};e.contexts&&e.contexts.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=Ua(e.contexts.trace.data,t,n)));e.spans&&(r.spans=e.spans.map((e=>{const r=Mi(e).data;return r&&(e.data=Ua(r,t,n)),e})));return r}(e,i,s):e)))}const Vi=new WeakMap;function Fi(e){if(e)return function(e){return e instanceof cs||"function"==typeof e}(e)||function(e){return Object.keys(e).some((e=>ji.includes(e)))}(e)?{captureContext:e}:e}const ji=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function Wi(e,t){return ms().captureException(e,Fi(t))}function qi(e,t){const n="string"==typeof t?t:void 0,r="string"!=typeof t?{captureContext:t}:void 0;return ms().captureMessage(e,n,r)}function Bi(e,t){return ms().captureEvent(e,t)}function Hi(e,t){ms().addBreadcrumb(e,t)}function Ji(e,t){ms().setContext(e,t)}function Yi(...e){const t=ms();if(2===e.length){const[n,r]=e;return n?t.withScope((()=>(t.getStackTop().scope=n,r(n)))):t.withScope(r)}return t.withScope(e[0])}function zi(){return ms().getClient()}function Xi(){return ms().getScope()}function Ki(e){const t=zi(),n=_s(),r=Xi(),{release:o,environment:a=wi}=t&&t.getOptions()||{},{userAgent:i}=lo.navigator||{},s=Li({release:o,environment:a,user:r.getUser()||n.getUser(),...i&&{userAgent:i},...e}),c=n.getSession();return c&&"ok"===c.status&&Ci(c,{status:"exited"}),Qi(),n.setSession(s),r.setSession(s),s}function Qi(){const e=_s(),t=Xi(),n=t.getSession()||e.getSession();n&&Pi(n),Zi(),e.setSession(),t.setSession()}function Zi(){const e=_s(),t=Xi(),n=zi(),r=t.getSession()||e.getSession();r&&n&&n.captureSession&&n.captureSession(r)}function es(e=!1){e?Qi():Zi()}function ts(e){return e.transaction}function ns(e,t,n){const r=t.getOptions(),{publicKey:o}=t.getDsn()||{},{segment:a}=n&&n.getUser()||{},i=Mo({environment:r.environment||wi,release:r.release,user_segment:a,public_key:o,trace_id:e});return t.emit&&t.emit("createDsc",i),i}function rs(e){const t=zi();if(!t)return{};const n=ns(Mi(e).trace_id||"",t,Xi()),r=ts(e);if(!r)return n;const o=r&&r._frozenDynamicSamplingContext;if(o)return o;const{sampleRate:a,source:i}=r.metadata;null!=a&&(n.sample_rate=`${a}`);const s=Mi(r);return i&&"url"!==i&&(n.transaction=s.description),n.sampled=String(Gi(r)),t.emit&&t.emit("createDsc",n),n}function os(e,t){const{fingerprint:n,span:r,breadcrumbs:o,sdkProcessingMetadata:a}=t;!function(e,t){const{extra:n,tags:r,user:o,contexts:a,level:i,transactionName:s}=t,c=Mo(n);c&&Object.keys(c).length&&(e.extra={...c,...e.extra});const l=Mo(r);l&&Object.keys(l).length&&(e.tags={...l,...e.tags});const u=Mo(o);u&&Object.keys(u).length&&(e.user={...u,...e.user});const d=Mo(a);d&&Object.keys(d).length&&(e.contexts={...d,...e.contexts});i&&(e.level=i);s&&(e.transaction=s)}(e,t),r&&function(e,t){e.contexts={trace:xi(t),...e.contexts};const n=ts(t);if(n){e.sdkProcessingMetadata={dynamicSamplingContext:rs(t),...e.sdkProcessingMetadata};const r=Mi(n).description;r&&(e.tags={transaction:r,...e.tags})}}(e,r),function(e,t){e.fingerprint=e.fingerprint?ra(e.fingerprint):[],t&&(e.fingerprint=e.fingerprint.concat(t));e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}(e,n),function(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}(e,o),function(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}(e,a)}function as(e,t){const{extra:n,tags:r,user:o,contexts:a,level:i,sdkProcessingMetadata:s,breadcrumbs:c,fingerprint:l,eventProcessors:u,attachments:d,propagationContext:p,transactionName:g,span:h}=t;is(e,"extra",n),is(e,"tags",r),is(e,"user",o),is(e,"contexts",a),is(e,"sdkProcessingMetadata",s),i&&(e.level=i),g&&(e.transactionName=g),h&&(e.span=h),c.length&&(e.breadcrumbs=[...e.breadcrumbs,...c]),l.length&&(e.fingerprint=[...e.fingerprint,...l]),u.length&&(e.eventProcessors=[...e.eventProcessors,...u]),d.length&&(e.attachments=[...e.attachments,...d]),e.propagationContext={...e.propagationContext,...p}}function is(e,t,n){if(n&&Object.keys(n).length){e[t]={...e[t]};for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[t][r]=n[r])}}let ss;class cs{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=ls()}static clone(e){return e?e.clone():new cs}clone(){const e=new cs;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},e._user=this._user,e._level=this._level,e._span=this._span,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._requestSession=this._requestSession,e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e}setClient(e){this._client=e}getClient(){return this._client}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,segment:void 0,username:void 0},this._session&&Ci(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSpan(e){return this._span=e,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const e=this._span;return e&&e.transaction}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const t="function"==typeof e?e(this):e;if(t instanceof cs){const e=t.getScopeData();this._tags={...this._tags,...e.tags},this._extra={...this._extra,...e.extra},this._contexts={...this._contexts,...e.contexts},e.user&&Object.keys(e.user).length&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint.length&&(this._fingerprint=e.fingerprint),t.getRequestSession()&&(this._requestSession=t.getRequestSession()),e.propagationContext&&(this._propagationContext=e.propagationContext)}else if(Jr(t)){const t=e;this._tags={...this._tags,...t.tags},this._extra={...this._extra,...t.extra},this._contexts={...this._contexts,...t.contexts},t.user&&(this._user=t.user),t.level&&(this._level=t.level),t.fingerprint&&(this._fingerprint=t.fingerprint),t.requestSession&&(this._requestSession=t.requestSession),t.propagationContext&&(this._propagationContext=t.propagationContext)}return this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=ls(),this}addBreadcrumb(e,t){const n="number"==typeof t?t:100;if(n<=0)return this;const r={timestamp:Ka(),...e},o=this._breadcrumbs;return o.push(r),this._breadcrumbs=o.length>n?o.slice(-n):o,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}getAttachments(){return this.getScopeData().attachments}clearAttachments(){return this._attachments=[],this}getScopeData(){const{_breadcrumbs:e,_attachments:t,_contexts:n,_tags:r,_extra:o,_user:a,_level:i,_fingerprint:s,_eventProcessors:c,_propagationContext:l,_sdkProcessingMetadata:u,_transactionName:d,_span:p}=this;return{breadcrumbs:e,attachments:t,contexts:n,tags:r,extra:o,user:a,level:i,fingerprint:s||[],eventProcessors:c,propagationContext:l,sdkProcessingMetadata:u,transactionName:d,span:p}}applyToEvent(e,t={},n=[]){os(e,this.getScopeData());return Ri([...n,...Ni(),...this._eventProcessors],e,t)}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,t){const n=t&&t.event_id?t.event_id:Ko();if(!this._client)return Io.warn("No client configured on scope - will not capture exception!"),n;const r=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:r,...t,event_id:n},this),n}captureMessage(e,t,n){const r=n&&n.event_id?n.event_id:Ko();if(!this._client)return Io.warn("No client configured on scope - will not capture message!"),r;const o=new Error(e);return this._client.captureMessage(e,t,{originalException:e,syntheticException:o,...n,event_id:r},this),r}captureEvent(e,t){const n=t&&t.event_id?t.event_id:Ko();return this._client?(this._client.captureEvent(e,{...t,event_id:n},this),n):(Io.warn("No client configured on scope - will not capture event!"),n)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((e=>{e(this)})),this._notifyingListeners=!1)}}function ls(){return{traceId:Ko(),spanId:Ko().substring(16)}}const us="7.120.3",ds=parseFloat(us),ps=100;class gs{constructor(e,t,n,r=ds){let o,a;this._version=r,t?o=t:(o=new cs,o.setClient(e)),n?a=n:(a=new cs,a.setClient(e)),this._stack=[{scope:o}],e&&this.bindClient(e),this._isolationScope=a}isOlderThan(e){return this._version<e}bindClient(e){const t=this.getStackTop();t.client=e,t.scope.setClient(e),e&&e.setupIntegrations&&e.setupIntegrations()}pushScope(){const e=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:e}),e}popScope(){return!(this.getStack().length<=1)&&!!this.getStack().pop()}withScope(e){const t=this.pushScope();let n;try{n=e(t)}catch(e){throw this.popScope(),e}return zr(n)?n.then((e=>(this.popScope(),e)),(e=>{throw this.popScope(),e})):(this.popScope(),n)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(e,t){const n=this._lastEventId=t&&t.event_id?t.event_id:Ko(),r=new Error("Sentry syntheticException");return this.getScope().captureException(e,{originalException:e,syntheticException:r,...t,event_id:n}),n}captureMessage(e,t,n){const r=this._lastEventId=n&&n.event_id?n.event_id:Ko(),o=new Error(e);return this.getScope().captureMessage(e,t,{originalException:e,syntheticException:o,...n,event_id:r}),r}captureEvent(e,t){const n=t&&t.event_id?t.event_id:Ko();return e.type||(this._lastEventId=n),this.getScope().captureEvent(e,{...t,event_id:n}),n}lastEventId(){return this._lastEventId}addBreadcrumb(e,t){const{scope:n,client:r}=this.getStackTop();if(!r)return;const{beforeBreadcrumb:o=null,maxBreadcrumbs:a=ps}=r.getOptions&&r.getOptions()||{};if(a<=0)return;const i={timestamp:Ka(),...e},s=o?So((()=>o(i,t))):i;null!==s&&(r.emit&&r.emit("beforeAddBreadcrumb",s,t),n.addBreadcrumb(s,a))}setUser(e){this.getScope().setUser(e),this.getIsolationScope().setUser(e)}setTags(e){this.getScope().setTags(e),this.getIsolationScope().setTags(e)}setExtras(e){this.getScope().setExtras(e),this.getIsolationScope().setExtras(e)}setTag(e,t){this.getScope().setTag(e,t),this.getIsolationScope().setTag(e,t)}setExtra(e,t){this.getScope().setExtra(e,t),this.getIsolationScope().setExtra(e,t)}setContext(e,t){this.getScope().setContext(e,t),this.getIsolationScope().setContext(e,t)}configureScope(e){const{scope:t,client:n}=this.getStackTop();n&&e(t)}run(e){const t=fs(this);try{e(this)}finally{fs(t)}}getIntegration(e){const t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch(t){return Ai&&Io.warn(`Cannot retrieve integration ${e.id} from the current Hub`),null}}startTransaction(e,t){const n=this._callExtensionMethod("startTransaction",e,t);if(Ai&&!n){this.getClient()?Io.warn("Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':\nSentry.addTracingExtensions();\nSentry.init({...});\n"):Io.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")}return n}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(e=!1){if(e)return this.endSession();this._sendSessionUpdate()}endSession(){const e=this.getStackTop().scope,t=e.getSession();t&&Pi(t),this._sendSessionUpdate(),e.setSession()}startSession(e){const{scope:t,client:n}=this.getStackTop(),{release:r,environment:o=wi}=n&&n.getOptions()||{},{userAgent:a}=lo.navigator||{},i=Li({release:r,environment:o,user:t.getUser(),...a&&{userAgent:a},...e}),s=t.getSession&&t.getSession();return s&&"ok"===s.status&&Ci(s,{status:"exited"}),this.endSession(),t.setSession(i),i}shouldSendDefaultPii(){const e=this.getClient(),t=e&&e.getOptions();return Boolean(t&&t.sendDefaultPii)}_sendSessionUpdate(){const{scope:e,client:t}=this.getStackTop(),n=e.getSession();n&&t&&t.captureSession&&t.captureSession(n)}_callExtensionMethod(e,...t){const n=hs().__SENTRY__;if(n&&n.extensions&&"function"==typeof n.extensions[e])return n.extensions[e].apply(this,t);Ai&&Io.warn(`Extension method ${e} couldn't be found, doing nothing.`)}}function hs(){return lo.__SENTRY__=lo.__SENTRY__||{extensions:{},hub:void 0},lo}function fs(e){const t=hs(),n=Ts(t);return ys(t,e),n}function ms(){const e=hs();if(e.__SENTRY__&&e.__SENTRY__.acs){const t=e.__SENTRY__.acs.getCurrentHub();if(t)return t}return function(e=hs()){t=e,t&&t.__SENTRY__&&t.__SENTRY__.hub&&!Ts(e).isOlderThan(ds)||ys(e,new gs);var t;return Ts(e)}(e)}function _s(){return ms().getIsolationScope()}function vs(e,t={}){const n=hs();return n.__SENTRY__&&n.__SENTRY__.acs?n.__SENTRY__.acs.runWithAsyncContext(e,t):e()}function Ts(e){return po("hub",(()=>new gs),e)}function ys(e,t){if(!e)return!1;return(e.__SENTRY__=e.__SENTRY__||{}).hub=t,!0}function Es(e){return(e||ms()).getScope().getTransaction()}const Ss=si;let Is=!1;function bs(){const e=Es();if(e){const t="internal_error";Ai&&Io.log(`[Tracing] Transaction: ${t} -> Global error occured`),e.setStatus(t)}}var As;function ws(e){if(e<400&&e>=100)return"ok";if(e>=400&&e<500)switch(e){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if(e>=500&&e<600)switch(e){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"}bs.tag="sentry_tracingErrorCallback",function(e){e.Ok="ok";e.DeadlineExceeded="deadline_exceeded";e.Unauthenticated="unauthenticated";e.PermissionDenied="permission_denied";e.NotFound="not_found";e.ResourceExhausted="resource_exhausted";e.InvalidArgument="invalid_argument";e.Unimplemented="unimplemented";e.Unavailable="unavailable";e.InternalError="internal_error";e.UnknownError="unknown_error";e.Cancelled="cancelled";e.AlreadyExists="already_exists";e.FailedPrecondition="failed_precondition";e.Aborted="aborted";e.OutOfRange="out_of_range";e.DataLoss="data_loss"}(As||(As={}));const Ns=ws;function Os(e,t){e.setTag("http.status_code",String(t)),e.setData("http.response.status_code",t);const n=ws(t);"unknown_error"!==n&&e.setStatus(n)}function Rs(e,t,n=()=>{}){let r;try{r=e()}catch(e){throw t(e),n(),e}return function(e,t,n){if(zr(e))return e.then((e=>(n(),e)),(e=>{throw t(e),n(),e}));return n(),e}(r,t,n)}function Ls(e){if("boolean"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;const t=zi(),n=e||t&&t.getOptions();return!!n&&(n.enableTracing||"tracesSampleRate"in n||"tracesSampler"in n)}function Cs(e){if(!Ls())return;const t=ks(e),n=ms(),r=e.scope?e.scope.getSpan():Ps();if(e.onlyIfParent&&!r)return;const o=(e.scope||Xi()).clone();return xs(n,{parentSpan:r,spanContext:t,forceTransaction:e.forceTransaction,scope:o})}function Ps(){return Xi().getSpan()}function xs(e,{parentSpan:t,spanContext:n,forceTransaction:r,scope:o}){if(!Ls())return;const a=_s();let i;if(t&&!r)i=t.startChild(n);else if(t){const r=rs(t),{traceId:o,spanId:a}=t.spanContext(),s=Gi(t);i=e.startTransaction({traceId:o,parentSpanId:a,parentSampled:s,...n,metadata:{dynamicSamplingContext:r,...n.metadata}})}else{const{traceId:t,dsc:r,parentSpanId:s,sampled:c}={...a.getPropagationContext(),...o.getPropagationContext()};i=e.startTransaction({traceId:t,parentSpanId:s,parentSampled:c,...n,metadata:{dynamicSamplingContext:r,...n.metadata}})}return o.setSpan(i),function(e,t,n){e&&(Co(e,Us,n),Co(e,Ds,t))}(i,o,a),i}function ks(e){if(e.startTime){const t={...e};return t.startTimestamp=Di(e.startTime),delete t.startTime,t}return e}const Ds="_sentryScope",Us="_sentryIsolationScope";let Ms;function Gs(e){return Ms?Ms.get(e):void 0}function $s(e){const t=Gs(e);if(!t)return;const n={};for(const[,[e,r]]of t)n[e]||(n[e]=[]),n[e].push(Mo(r));return n}const Vs="sentry.source",Fs="sentry.sample_rate",js="sentry.op",Ws="sentry.origin";class qs{constructor(e=1e3){this._maxlen=e,this.spans=[]}add(e){this.spans.length>this._maxlen?e.spanRecorder=void 0:this.spans.push(e)}}class Bs{constructor(e={}){this._traceId=e.traceId||Ko(),this._spanId=e.spanId||Ko().substring(16),this._startTime=e.startTimestamp||Qa(),this.tags=e.tags?{...e.tags}:{},this.data=e.data?{...e.data}:{},this.instrumenter=e.instrumenter||"sentry",this._attributes={},this.setAttributes({[Ws]:e.origin||"manual",[js]:e.op,...e.attributes}),this._name=e.name||e.description,e.parentSpanId&&(this._parentSpanId=e.parentSpanId),"sampled"in e&&(this._sampled=e.sampled),e.status&&(this._status=e.status),e.endTimestamp&&(this._endTime=e.endTimestamp),void 0!==e.exclusiveTime&&(this._exclusiveTime=e.exclusiveTime),this._measurements=e.measurements?{...e.measurements}:{}}get name(){return this._name||""}set name(e){this.updateName(e)}get description(){return this._name}set description(e){this._name=e}get traceId(){return this._traceId}set traceId(e){this._traceId=e}get spanId(){return this._spanId}set spanId(e){this._spanId=e}set parentSpanId(e){this._parentSpanId=e}get parentSpanId(){return this._parentSpanId}get sampled(){return this._sampled}set sampled(e){this._sampled=e}get attributes(){return this._attributes}set attributes(e){this._attributes=e}get startTimestamp(){return this._startTime}set startTimestamp(e){this._startTime=e}get endTimestamp(){return this._endTime}set endTimestamp(e){this._endTime=e}get status(){return this._status}set status(e){this._status=e}get op(){return this._attributes[js]}set op(e){this.setAttribute(js,e)}get origin(){return this._attributes[Ws]}set origin(e){this.setAttribute(Ws,e)}spanContext(){const{_spanId:e,_traceId:t,_sampled:n}=this;return{spanId:e,traceId:t,traceFlags:n?1:0}}startChild(e){const t=new Bs({...e,parentSpanId:this._spanId,sampled:this._sampled,traceId:this._traceId});t.spanRecorder=this.spanRecorder,t.spanRecorder&&t.spanRecorder.add(t);const n=ts(this);if(t.transaction=n,Ai&&n){const r=`[Tracing] Starting '${e&&e.op||"< unknown op >"}' span on transaction '${Mi(t).description||"< unknown name >"}' (${n.spanContext().spanId}).`;Io.log(r),this._logMessage=r}return t}setTag(e,t){return this.tags={...this.tags,[e]:t},this}setData(e,t){return this.data={...this.data,[e]:t},this}setAttribute(e,t){void 0===t?delete this._attributes[e]:this._attributes[e]=t}setAttributes(e){Object.keys(e).forEach((t=>this.setAttribute(t,e[t])))}setStatus(e){return this._status=e,this}setHttpStatus(e){return Os(this,e),this}setName(e){this.updateName(e)}updateName(e){return this._name=e,this}isSuccess(){return"ok"===this._status}finish(e){return this.end(e)}end(e){if(this._endTime)return;const t=ts(this);if(Ai&&t&&t.spanContext().spanId!==this._spanId){const e=this._logMessage;e&&Io.log(e.replace("Starting","Finishing"))}this._endTime=Di(e)}toTraceparent(){return ki(this)}toContext(){return Mo({data:this._getData(),description:this._name,endTimestamp:this._endTime,op:this.op,parentSpanId:this._parentSpanId,sampled:this._sampled,spanId:this._spanId,startTimestamp:this._startTime,status:this._status,tags:this.tags,traceId:this._traceId})}updateWithContext(e){return this.data=e.data||{},this._name=e.name||e.description,this._endTime=e.endTimestamp,this.op=e.op,this._parentSpanId=e.parentSpanId,this._sampled=e.sampled,this._spanId=e.spanId||this._spanId,this._startTime=e.startTimestamp||this._startTime,this._status=e.status,this.tags=e.tags||{},this._traceId=e.traceId||this._traceId,this}getTraceContext(){return xi(this)}getSpanJSON(){return Mo({data:this._getData(),description:this._name,op:this._attributes[js],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:this._status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[Ws],_metrics_summary:$s(this),profile_id:this._attributes.profile_id,exclusive_time:this._exclusiveTime,measurements:Object.keys(this._measurements).length>0?this._measurements:void 0})}isRecording(){return!this._endTime&&!!this._sampled}toJSON(){return this.getSpanJSON()}_getData(){const{data:e,_attributes:t}=this,n=Object.keys(e).length>0,r=Object.keys(t).length>0;if(n||r)return n&&r?{...e,...t}:n?e:t}}class Hs extends Bs{constructor(e,t){super(e),this._contexts={},this._hub=t||ms(),this._name=e.name||"",this._metadata={...e.metadata},this._trimEnd=e.trimEnd,this.transaction=this;const n=this._metadata.dynamicSamplingContext;n&&(this._frozenDynamicSamplingContext={...n})}get name(){return this._name}set name(e){this.setName(e)}get metadata(){return{source:"custom",spanMetadata:{},...this._metadata,...this._attributes[Vs]&&{source:this._attributes[Vs]},...this._attributes[Fs]&&{sampleRate:this._attributes[Fs]}}}set metadata(e){this._metadata=e}setName(e,t="custom"){this._name=e,this.setAttribute(Vs,t)}updateName(e){return this._name=e,this}initSpanRecorder(e=1e3){this.spanRecorder||(this.spanRecorder=new qs(e)),this.spanRecorder.add(this)}setContext(e,t){null===t?delete this._contexts[e]:this._contexts[e]=t}setMeasurement(e,t,n=""){this._measurements[e]={value:t,unit:n}}setMetadata(e){this._metadata={...this._metadata,...e}}end(e){const t=Di(e),n=this._finishTransaction(t);if(n)return this._hub.captureEvent(n)}toContext(){return Mo({...super.toContext(),name:this._name,trimEnd:this._trimEnd})}updateWithContext(e){return super.updateWithContext(e),this._name=e.name||"",this._trimEnd=e.trimEnd,this}getDynamicSamplingContext(){return rs(this)}setHub(e){this._hub=e}getProfileId(){if(void 0!==this._contexts&&void 0!==this._contexts.profile)return this._contexts.profile.profile_id}_finishTransaction(e){if(void 0!==this._endTime)return;this._name||(Ai&&Io.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>"),super.end(e);const t=this._hub.getClient();if(t&&t.emit&&t.emit("finishTransaction",this),!0!==this._sampled)return Ai&&Io.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),void(t&&t.recordDroppedEvent("sample_rate","transaction"));const n=this.spanRecorder?this.spanRecorder.spans.filter((e=>e!==this&&Mi(e).timestamp)):[];if(this._trimEnd&&n.length>0){const e=n.map((e=>Mi(e).timestamp)).filter(Boolean);this._endTime=e.reduce(((e,t)=>e>t?e:t))}const{scope:r,isolationScope:o}={scope:(a=this)[Ds],isolationScope:a[Us]};var a;const{metadata:i}=this,{source:s}=i,c={contexts:{...this._contexts,trace:xi(this)},spans:n,start_timestamp:this._startTime,tags:this.tags,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{...i,capturedSpanScope:r,capturedSpanIsolationScope:o,...Mo({dynamicSamplingContext:rs(this)})},_metrics_summary:$s(this),...s&&{transaction_info:{source:s}}};return Object.keys(this._measurements).length>0&&(Ai&&Io.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),c.measurements=this._measurements),Ai&&Io.log(`[Tracing] Finishing ${this.op} transaction: ${this._name}.`),c}}const Js={idleTimeout:1e3,finalTimeout:3e4,heartbeatInterval:5e3},Ys=["heartbeatFailed","idleTimeout","documentHidden","finalTimeout","externalFinish","cancelled"];class zs extends qs{constructor(e,t,n,r){super(r),this._pushActivity=e,this._popActivity=t,this.transactionSpanId=n}add(e){if(e.spanContext().spanId!==this.transactionSpanId){const t=e.end;e.end=(...n)=>(this._popActivity(e.spanContext().spanId),t.apply(e,n)),void 0===Mi(e).timestamp&&this._pushActivity(e.spanContext().spanId)}super.add(e)}}class Xs extends Hs{constructor(e,t,n=Js.idleTimeout,r=Js.finalTimeout,o=Js.heartbeatInterval,a=!1,i=!1){super(e,t),this._idleHub=t,this._idleTimeout=n,this._finalTimeout=r,this._heartbeatInterval=o,this._onScope=a,this.activities={},this._heartbeatCounter=0,this._finished=!1,this._idleTimeoutCanceledPermanently=!1,this._beforeFinishCallbacks=[],this._finishReason=Ys[4],this._autoFinishAllowed=!i,a&&(Ai&&Io.log(`Setting idle transaction on scope. Span ID: ${this.spanContext().spanId}`),t.getScope().setSpan(this)),i||this._restartIdleTimeout(),setTimeout((()=>{this._finished||(this.setStatus("deadline_exceeded"),this._finishReason=Ys[3],this.end())}),this._finalTimeout)}end(e){const t=Di(e);if(this._finished=!0,this.activities={},"ui.action.click"===this.op&&this.setAttribute("finishReason",this._finishReason),this.spanRecorder){Ai&&Io.log("[Tracing] finishing IdleTransaction",new Date(1e3*t).toISOString(),this.op);for(const e of this._beforeFinishCallbacks)e(this,t);this.spanRecorder.spans=this.spanRecorder.spans.filter((e=>{if(e.spanContext().spanId===this.spanContext().spanId)return!0;Mi(e).timestamp||(e.setStatus("cancelled"),e.end(t),Ai&&Io.log("[Tracing] cancelling span since transaction ended early",JSON.stringify(e,void 0,2)));const{start_timestamp:n,timestamp:r}=Mi(e),o=n&&n<t,a=(this._finalTimeout+this._idleTimeout)/1e3,i=r&&n&&r-n<a;if(Ai){const t=JSON.stringify(e,void 0,2);o?i||Io.log("[Tracing] discarding Span since it finished after Transaction final timeout",t):Io.log("[Tracing] discarding Span since it happened after Transaction was finished",t)}return o&&i})),Ai&&Io.log("[Tracing] flushing IdleTransaction")}else Ai&&Io.log("[Tracing] No active IdleTransaction");if(this._onScope){const e=this._idleHub.getScope();e.getTransaction()===this&&e.setSpan(void 0)}return super.end(e)}registerBeforeFinishCallback(e){this._beforeFinishCallbacks.push(e)}initSpanRecorder(e){if(!this.spanRecorder){const t=e=>{this._finished||this._pushActivity(e)},n=e=>{this._finished||this._popActivity(e)};this.spanRecorder=new zs(t,n,this.spanContext().spanId,e),Ai&&Io.log("Starting heartbeat"),this._pingHeartbeat()}this.spanRecorder.add(this)}cancelIdleTimeout(e,{restartOnChildSpanChange:t}={restartOnChildSpanChange:!0}){this._idleTimeoutCanceledPermanently=!1===t,this._idleTimeoutID&&(clearTimeout(this._idleTimeoutID),this._idleTimeoutID=void 0,0===Object.keys(this.activities).length&&this._idleTimeoutCanceledPermanently&&(this._finishReason=Ys[5],this.end(e)))}setFinishReason(e){this._finishReason=e}sendAutoFinishSignal(){this._autoFinishAllowed||(Ai&&Io.log("[Tracing] Received finish signal for idle transaction."),this._restartIdleTimeout(),this._autoFinishAllowed=!0)}_restartIdleTimeout(e){this.cancelIdleTimeout(),this._idleTimeoutID=setTimeout((()=>{this._finished||0!==Object.keys(this.activities).length||(this._finishReason=Ys[1],this.end(e))}),this._idleTimeout)}_pushActivity(e){this.cancelIdleTimeout(void 0,{restartOnChildSpanChange:!this._idleTimeoutCanceledPermanently}),Ai&&Io.log(`[Tracing] pushActivity: ${e}`),this.activities[e]=!0,Ai&&Io.log("[Tracing] new activities count",Object.keys(this.activities).length)}_popActivity(e){if(this.activities[e]&&(Ai&&Io.log(`[Tracing] popActivity ${e}`),delete this.activities[e],Ai&&Io.log("[Tracing] new activities count",Object.keys(this.activities).length)),0===Object.keys(this.activities).length){const e=Qa();this._idleTimeoutCanceledPermanently?this._autoFinishAllowed&&(this._finishReason=Ys[5],this.end(e)):this._restartIdleTimeout(e+this._idleTimeout/1e3)}}_beat(){if(this._finished)return;const e=Object.keys(this.activities).join("");e===this._prevHeartbeatString?this._heartbeatCounter++:this._heartbeatCounter=1,this._prevHeartbeatString=e,this._heartbeatCounter>=3?this._autoFinishAllowed&&(Ai&&Io.log("[Tracing] Transaction finished because of no change for 3 heart beats"),this.setStatus("deadline_exceeded"),this._finishReason=Ys[0],this.end()):this._pingHeartbeat()}_pingHeartbeat(){Ai&&Io.log(`pinging Heartbeat -> current counter: ${this._heartbeatCounter}`),setTimeout((()=>{this._beat()}),this._heartbeatInterval)}}function Ks(e,t,n){if(!Ls(t))return e.sampled=!1,e;if(void 0!==e.sampled)return e.setAttribute(Fs,Number(e.sampled)),e;let r;return"function"==typeof t.tracesSampler?(r=t.tracesSampler(n),e.setAttribute(Fs,Number(r))):void 0!==n.parentSampled?r=n.parentSampled:void 0!==t.tracesSampleRate?(r=t.tracesSampleRate,e.setAttribute(Fs,Number(r))):(r=1,e.setAttribute(Fs,r)),Qs(r)?r?(e.sampled=Math.random()<r,e.sampled?(Ai&&Io.log(`[Tracing] starting ${e.op} transaction - ${Mi(e).description}`),e):(Ai&&Io.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(r)})`),e)):(Ai&&Io.log("[Tracing] Discarding transaction because "+("function"==typeof t.tracesSampler?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0")),e.sampled=!1,e):(Ai&&Io.warn("[Tracing] Discarding transaction because of invalid sample rate."),e.sampled=!1,e)}function Qs(e){return Xr(e)||"number"!=typeof e&&"boolean"!=typeof e?(Ai&&Io.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`),!1):!(e<0||e>1)||(Ai&&Io.warn(`[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got ${e}.`),!1)}function Zs(){const e=this.getScope().getSpan();return e?{"sentry-trace":ki(e)}:{}}function ec(e,t){const n=this.getClient(),r=n&&n.getOptions()||{},o=r.instrumenter||"sentry",a=e.instrumenter||"sentry";o!==a&&(Ai&&Io.error(`A transaction was started with instrumenter=\`${a}\`, but the SDK is configured with the \`${o}\` instrumenter.\nThe transaction will not be sampled. Please use the ${o} instrumentation to start transactions.`),e.sampled=!1);let i=new Hs(e,this);return i=Ks(i,r,{name:e.name,parentSampled:e.parentSampled,transactionContext:e,attributes:{...e.data,...e.attributes},...t}),i.isRecording()&&i.initSpanRecorder(r._experiments&&r._experiments.maxSpans),n&&n.emit&&n.emit("startTransaction",i),i}function tc(e,t,n,r,o,a,i,s=!1){const c=e.getClient(),l=c&&c.getOptions()||{};let u=new Xs(t,e,n,r,i,o,s);return u=Ks(u,l,{name:t.name,parentSampled:t.parentSampled,transactionContext:t,attributes:{...t.data,...t.attributes},...a}),u.isRecording()&&u.initSpanRecorder(l._experiments&&l._experiments.maxSpans),c&&c.emit&&c.emit("startTransaction",u),u}function nc(){const e=hs();e.__SENTRY__&&(e.__SENTRY__.extensions=e.__SENTRY__.extensions||{},e.__SENTRY__.extensions.startTransaction||(e.__SENTRY__.extensions.startTransaction=ec),e.__SENTRY__.extensions.traceHeaders||(e.__SENTRY__.extensions.traceHeaders=Zs),Is||(Is=!0,ya(bs),Ia(bs)))}function rc(e,t,n){const r=Es();r&&r.setMeasurement(e,t,n)}function oc(e,t,n,r){const o=vi(n),a=e.type&&"replay_event"!==e.type?e.type:"event";!function(e,t){t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]])}(e,n&&n.sdk);const i=Ti(e,o,r,t);delete e.sdkProcessingMetadata;return ui(i,[[{type:a},e]])}function ac(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function ic(e,t){return n={sentry_key:e.publicKey,sentry_version:"7",...t&&{sentry_client:`${t.name}/${t.version}`}},Object.keys(n).map((e=>`${encodeURIComponent(e)}=${encodeURIComponent(n[e])}`)).join("&");var n}function sc(e,t={}){const n="string"==typeof t?t:t.tunnel,r="string"!=typeof t&&t._metadata?t._metadata.sdk:void 0;return n||`${function(e){return`${ac(e)}${e.projectId}/envelope/`}(e)}?${ic(e,r)}`}const cc=[];function lc(e){const t=e.defaultIntegrations||[],n=e.integrations;let r;t.forEach((e=>{e.isDefaultInstance=!0})),r=Array.isArray(n)?[...t,...n]:"function"==typeof n?ra(n(t)):t;const o=function(e){const t={};return e.forEach((e=>{const{name:n}=e,r=t[n];r&&!r.isDefaultInstance&&e.isDefaultInstance||(t[n]=e)})),Object.keys(t).map((e=>t[e]))}(r),a=function(e,t){for(let n=0;n<e.length;n++)if(!0===t(e[n]))return n;return-1}(o,(e=>"Debug"===e.name));if(-1!==a){const[e]=o.splice(a,1);o.push(e)}return o}function uc(e,t){for(const n of t)n&&n.afterAllSetup&&n.afterAllSetup(e)}function dc(e,t,n){if(n[t.name])Ai&&Io.log(`Integration skipped because it was already installed: ${t.name}`);else{if(n[t.name]=t,-1===cc.indexOf(t.name)&&(t.setupOnce(Oi,ms),cc.push(t.name)),t.setup&&"function"==typeof t.setup&&t.setup(e),e.on&&"function"==typeof t.preprocessEvent){const n=t.preprocessEvent.bind(t);e.on("preprocessEvent",((t,r)=>n(t,r,e)))}if(e.addEventProcessor&&"function"==typeof t.processEvent){const n=t.processEvent.bind(t),r=Object.assign(((t,r)=>n(t,r,e)),{id:t.name});e.addEventProcessor(r)}Ai&&Io.log(`Integration installed: ${t.name}`)}}function pc(e,t){return Object.assign((function(...e){return t(...e)}),{id:e})}function gc(e){return e.replace(/[^\w\-./]+/gi,"")}const hc=[["\n","\\n"],["\r","\\r"],["\t","\\t"],["\\","\\\\"],["|","\\u{7c}"],[",","\\u{2c}"]];function fc(e){return[...e].reduce(((e,t)=>e+function(e){for(const[t,n]of hc)if(e===t)return n;return e}(t)),"")}function mc(e,t,n,r){const o={sent_at:(new Date).toISOString()};n&&n.sdk&&(o.sdk={name:n.sdk.name,version:n.sdk.version}),r&&t&&(o.dsn=Ao(t));const a=function(e){const t=function(e){let t="";for(const n of e){const e=Object.entries(n.tags),r=e.length>0?`|#${e.map((([e,t])=>`${e}:${t}`)).join(",")}`:"";t+=`${n.name}@${n.unit}:${n.metric}|${n.metricType}${r}|T${n.timestamp}\n`}return t}(e);return[{type:"statsd",length:t.length},t]}(e);return ui(o,[a])}const _c="Not capturing exception because it's already been captured.";class vc{constructor(e){if(this._options=e,this._integrations={},this._integrationsInitialized=!1,this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=Oo(e.dsn):Ai&&Io.warn("No DSN provided, client will not send events."),this._dsn){const t=sc(this._dsn,e);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:t})}}captureException(e,t,n){if(na(e))return void(Ai&&Io.log(_c));let r=t&&t.event_id;return this._process(this.eventFromException(e,t).then((e=>this._captureEvent(e,t,n))).then((e=>{r=e}))),r}captureMessage(e,t,n,r){let o=n&&n.event_id;const a=Br(e)?e:String(e),i=Hr(e)?this.eventFromMessage(a,t,n):this.eventFromException(e,n);return this._process(i.then((e=>this._captureEvent(e,n,r))).then((e=>{o=e}))),o}captureEvent(e,t,n){if(t&&t.originalException&&na(t.originalException))return void(Ai&&Io.log(_c));let r=t&&t.event_id;const o=(e.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(e,t,o||n).then((e=>{r=e}))),r}captureSession(e){"string"!=typeof e.release?Ai&&Io.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),Ci(e,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const t=this._transport;return t?(this.metricsAggregator&&this.metricsAggregator.flush(),this._isClientDoneProcessing(e).then((n=>t.flush(e).then((e=>n&&e))))):qa(!0)}close(e){return this.flush(e).then((e=>(this.getOptions().enabled=!1,this.metricsAggregator&&this.metricsAggregator.close(),e)))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}setupIntegrations(e){(e&&!this._integrationsInitialized||this._isEnabled()&&!this._integrationsInitialized)&&this._setupIntegrations()}init(){this._isEnabled()&&this._setupIntegrations()}getIntegrationById(e){return this.getIntegrationByName(e)}getIntegrationByName(e){return this._integrations[e]}getIntegration(e){try{return this._integrations[e.id]||null}catch(t){return Ai&&Io.warn(`Cannot retrieve integration ${e.id} from the current Client`),null}}addIntegration(e){const t=this._integrations[e.name];dc(this,e,this._integrations),t||uc(this,[e])}sendEvent(e,t={}){this.emit("beforeSendEvent",e,t);let n=oc(e,this._dsn,this._options._metadata,this._options.tunnel);for(const e of t.attachments||[])n=di(n,fi(e,this._options.transportOptions&&this._options.transportOptions.textEncoder));const r=this._sendEnvelope(n);r&&r.then((t=>this.emit("afterSendEvent",e,t)),null)}sendSession(e){const t=function(e,t,n,r){const o=vi(n);return ui({sent_at:(new Date).toISOString(),...o&&{sdk:o},...!!r&&t&&{dsn:Ao(t)}},["aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(t)}recordDroppedEvent(e,t,n){if(this._options.sendClientReports){const r="number"==typeof n?n:1,o=`${e}:${t}`;Ai&&Io.log(`Recording outcome: "${o}"${r>1?` (${r} times)`:""}`),this._outcomes[o]=(this._outcomes[o]||0)+r}}captureAggregateMetrics(e){Ai&&Io.log(`Flushing aggregated metrics, number of metrics: ${e.length}`);const t=mc(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(t)}on(e,t){this._hooks[e]||(this._hooks[e]=[]),this._hooks[e].push(t)}emit(e,...t){this._hooks[e]&&this._hooks[e].forEach((e=>e(...t)))}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=function(e,t){const n={};return t.forEach((t=>{t&&dc(e,t,n)})),n}(this,e),uc(this,e),this._integrationsInitialized=!0}_updateSessionFromEvent(e,t){let n=!1,r=!1;const o=t.exception&&t.exception.values;if(o){r=!0;for(const e of o){const t=e.mechanism;if(t&&!1===t.handled){n=!0;break}}}const a="ok"===e.status;(a&&0===e.errors||a&&n)&&(Ci(e,{...n&&{status:"crashed"},errors:e.errors||Number(r||n)}),this.captureSession(e))}_isClientDoneProcessing(e){return new Ha((t=>{let n=0;const r=setInterval((()=>{0==this._numProcessing?(clearInterval(r),t(!0)):(n+=1,e&&n>=e&&(clearInterval(r),t(!1)))}),1)}))}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(e,t,n,r=_s()){const o=this.getOptions(),a=Object.keys(this._integrations);return!t.integrations&&a.length>0&&(t.integrations=a),this.emit("preprocessEvent",e,t),$i(o,e,t,n,this,r).then((e=>{if(null===e)return e;const t={...r.getPropagationContext(),...n?n.getPropagationContext():void 0};if(!(e.contexts&&e.contexts.trace)&&t){const{traceId:r,spanId:o,parentSpanId:a,dsc:i}=t;e.contexts={trace:{trace_id:r,span_id:o,parent_span_id:a},...e.contexts};const s=i||ns(r,this,n);e.sdkProcessingMetadata={dynamicSamplingContext:s,...e.sdkProcessingMetadata}}return e}))}_captureEvent(e,t={},n){return this._processEvent(e,t,n).then((e=>e.event_id),(e=>{if(Ai){const t=e;"log"===t.logLevel?Io.log(t.message):Io.warn(t)}}))}_processEvent(e,t,n){const r=this.getOptions(),{sampleRate:o}=r,a=yc(e),i=Tc(e),s=e.type||"error",c=`before send for type \`${s}\``;if(i&&"number"==typeof o&&Math.random()>o)return this.recordDroppedEvent("sample_rate","error",e),Ba(new Ro(`Discarding event because it's not included in the random sample (sampling rate = ${o})`,"log"));const l="replay_event"===s?"replay":s,u=(e.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(e,t,n,u).then((n=>{if(null===n)throw this.recordDroppedEvent("event_processor",l,e),new Ro("An event processor returned `null`, will not send event.","log");if(t.data&&!0===t.data.__sentry__)return n;const o=function(e,t,n){const{beforeSend:r,beforeSendTransaction:o}=e;if(Tc(t)&&r)return r(t,n);if(yc(t)&&o){if(t.spans){const e=t.spans.length;t.sdkProcessingMetadata={...t.sdkProcessingMetadata,spanCountBeforeProcessing:e}}return o(t,n)}return t}(r,n,t);return function(e,t){const n=`${t} must return \`null\` or a valid event.`;if(zr(e))return e.then((e=>{if(!Jr(e)&&null!==e)throw new Ro(n);return e}),(e=>{throw new Ro(`${t} rejected with ${e}`)}));if(!Jr(e)&&null!==e)throw new Ro(n);return e}(o,c)})).then((r=>{if(null===r){if(this.recordDroppedEvent("before_send",l,e),a){const t=1+(e.spans||[]).length;this.recordDroppedEvent("before_send","span",t)}throw new Ro(`${c} returned \`null\`, will not send event.`,"log")}const o=n&&n.getSession();if(!a&&o&&this._updateSessionFromEvent(o,r),a){const e=(r.sdkProcessingMetadata&&r.sdkProcessingMetadata.spanCountBeforeProcessing||0)-(r.spans?r.spans.length:0);e>0&&this.recordDroppedEvent("before_send","span",e)}const i=r.transaction_info;if(a&&i&&r.transaction!==e.transaction){const e="custom";r.transaction_info={...i,source:e}}return this.sendEvent(r,t),r})).then(null,(e=>{if(e instanceof Ro)throw e;throw this.captureException(e,{data:{__sentry__:!0},originalException:e}),new Ro(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${e}`)}))}_process(e){this._numProcessing++,e.then((e=>(this._numProcessing--,e)),(e=>(this._numProcessing--,e)))}_sendEnvelope(e){if(this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport)return this._transport.send(e).then(null,(e=>{Ai&&Io.error("Error while sending event:",e)}));Ai&&Io.error("Transport disabled")}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.keys(e).map((t=>{const[n,r]=t.split(":");return{reason:n,category:r,quantity:e[t]}}))}}function Tc(e){return void 0===e.type}function yc(e){return"transaction"===e.type}function Ec(e){const t=zi();t&&t.addEventProcessor&&t.addEventProcessor(e)}const Sc="c",Ic="g",bc="s",Ac="d";const wc={[Sc]:class{constructor(e){this._value=e}get weight(){return 1}add(e){this._value+=e}toString(){return`${this._value}`}},[Ic]:class{constructor(e){this._last=e,this._min=e,this._max=e,this._sum=e,this._count=1}get weight(){return 5}add(e){this._last=e,e<this._min&&(this._min=e),e>this._max&&(this._max=e),this._sum+=e,this._count++}toString(){return`${this._last}:${this._min}:${this._max}:${this._sum}:${this._count}`}},[Ac]:class{constructor(e){this._value=[e]}get weight(){return this._value.length}add(e){this._value.push(e)}toString(){return this._value.join(":")}},[bc]:class{constructor(e){this.first=e,this._value=new Set([e])}get weight(){return this._value.size}add(e){this._value.add(e)}toString(){return Array.from(this._value).map((e=>"string"==typeof e?function(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return t>>>0}(e):e)).join(":")}}};function Nc(e){const t=ms().getStackTop();t.client=e,t.scope.setClient(e)}function Oc(e,t,n=Ja(e.bufferSize||30)){let r={};function o(o){const a=[];if(pi(o,((t,n)=>{const o=_i(n);if(Ei(r,o)){const r=Rc(t,n);e.recordDroppedEvent("ratelimit_backoff",o,r)}else a.push(t)})),0===a.length)return qa();const i=ui(o[0],a),s=t=>{pi(i,((n,r)=>{const o=Rc(n,r);e.recordDroppedEvent(t,_i(r),o)}))};return n.add((()=>t({body:hi(i,e.textEncoder)}).then((e=>(void 0!==e.statusCode&&(e.statusCode<200||e.statusCode>=300)&&Ai&&Io.warn(`Sentry responded with status code ${e.statusCode} to sent event.`),r=Si(r,e),e)),(e=>{throw s("network_error"),e})))).then((e=>e),(e=>{if(e instanceof Ro)return Ai&&Io.error("Skipped sending event because buffer is full."),s("queue_overflow"),qa();throw e}))}return o.__sentry__baseTransport__=!0,{send:o,flush:e=>n.drain(e)}}function Rc(e,t){if("event"===t||"transaction"===t)return Array.isArray(e)?e[1]:void 0}function Lc(e,t){Ai&&Io.info(`[Offline]: ${e}`,t)}function Cc(e){return t=>{const n=e(t),r=t.createStore?t.createStore(t):void 0;let o,a=5e3;function i(e,n,r){return o=["replay_event","replay_recording","client_report"],!pi(e,((e,t)=>o.includes(t)))&&(!t.shouldStore||t.shouldStore(e,n,r));var o}function s(e){r&&(o&&clearTimeout(o),o=setTimeout((async()=>{o=void 0;const e=await r.pop();e&&(Lc("Attempting to send previously queued event"),l(e).catch((e=>{Lc("Failed to retry sending",e)})))}),e),"number"!=typeof o&&o.unref&&o.unref())}function c(){o||(s(a),a=Math.min(2*a,36e5))}async function l(e){try{const t=await n.send(e);let r=100;if(t)if(t.headers&&t.headers["retry-after"])r=yi(t.headers["retry-after"]);else if((t.statusCode||0)>=400)return t;return s(r),a=5e3,t}catch(t){if(r&&await i(e,t,a))return await r.insert(e),c(),Lc("Error sending. Event queued",t),{};throw t}}return t.flushAtStartup&&c(),{send:l,flush:e=>n.flush(e)}}}function Pc(e,t){let n;return pi(e,((e,r)=>(t.includes(r)&&(n=Array.isArray(e)?e[1]:void 0),!!n))),n}function xc(e){return[{type:"span"},e]}function kc(e,t){const n=t&&function(e){return void 0!==e.getClient}(t)?t.getClient():t,r=n&&n.getDsn(),o=n&&n.getOptions().tunnel;return function(e,t){return!!t&&e.includes(t.host)}(e,r)||function(e,t){if(!t)return!1;return Dc(e)===Dc(t)}(e,o)}function Dc(e){return"/"===e[e.length-1]?e.slice(0,-1):e}const Uc=new Map,Mc=new Set;function Gc(e,t){return function(e){if(lo._sentryModuleMetadata)for(const t of Object.keys(lo._sentryModuleMetadata)){const n=lo._sentryModuleMetadata[t];if(Mc.has(t))continue;Mc.add(t);const r=e(t);for(const e of r.reverse())if(e.filename){Uc.set(e.filename,n);break}}}(e),Uc.get(t)}const $c="ModuleMetadata",Vc=()=>({name:$c,setupOnce(){},setup(e){"function"==typeof e.on&&e.on("beforeEnvelope",(e=>{pi(e,((e,t)=>{if("event"===t){const t=Array.isArray(e)?e[1]:void 0;t&&(!function(e){try{e.exception.values.forEach((e=>{if(e.stacktrace)for(const t of e.stacktrace.frames||[])delete t.module_metadata}))}catch(e){}}(t),e[1]=t)}}))}))},processEvent:(e,t,n)=>(function(e,t){try{t.exception.values.forEach((t=>{if(t.stacktrace)for(const n of t.stacktrace.frames||[]){if(!n.filename)continue;const t=Gc(e,n.filename);t&&(n.module_metadata=t)}}))}catch(e){}}(n.getOptions().stackParser,e),e)}),Fc=pc($c,Vc),jc=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/],Wc=[/^.*\/healthcheck$/,/^.*\/healthy$/,/^.*\/live$/,/^.*\/ready$/,/^.*\/heartbeat$/,/^.*\/health$/,/^.*\/healthz$/],qc="InboundFilters",Bc=(e={})=>({name:qc,setupOnce(){},processEvent(t,n,r){const o=r.getOptions(),a=function(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:jc],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[],...e.disableTransactionDefaults?[]:Wc],ignoreInternal:void 0===e.ignoreInternal||e.ignoreInternal}}(e,o);return function(e,t){if(t.ignoreInternal&&function(e){try{return"SentryError"===e.exception.values[0].type}catch(e){}return!1}(e))return Ai&&Io.warn(`Event dropped due to being internal Sentry Error.\nEvent: ${Zo(e)}`),!0;if(function(e,t){if(e.type||!t||!t.length)return!1;return function(e){const t=[];e.message&&t.push(e.message);let n;try{n=e.exception.values[e.exception.values.length-1]}catch(e){}n&&n.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`));Ai&&0===t.length&&Io.error(`Could not extract message for event ${Zo(e)}`);return t}(e).some((e=>ro(e,t)))}(e,t.ignoreErrors))return Ai&&Io.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${Zo(e)}`),!0;if(function(e,t){if("transaction"!==e.type||!t||!t.length)return!1;const n=e.transaction;return!!n&&ro(n,t)}(e,t.ignoreTransactions))return Ai&&Io.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${Zo(e)}`),!0;if(function(e,t){if(!t||!t.length)return!1;const n=Jc(e);return!!n&&ro(n,t)}(e,t.denyUrls))return Ai&&Io.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${Zo(e)}.\nUrl: ${Jc(e)}`),!0;if(!function(e,t){if(!t||!t.length)return!0;const n=Jc(e);return!n||ro(n,t)}(e,t.allowUrls))return Ai&&Io.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${Zo(e)}.\nUrl: ${Jc(e)}`),!0;return!1}(t,a)?null:t}}),Hc=pc(qc,Bc);function Jc(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch(e){}return t?function(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&"<anonymous>"!==n.filename&&"[native code]"!==n.filename)return n.filename||null}return null}(t):null}catch(t){return Ai&&Io.error(`Cannot extract url for event ${Zo(e)}`),null}}let Yc;const zc="FunctionToString",Xc=new WeakMap,Kc=()=>({name:zc,setupOnce(){Yc=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=xo(this),n=Xc.has(zi())&&void 0!==t?t:this;return Yc.apply(n,e)}}catch(e){}},setup(e){Xc.set(e,!0)}}),Qc=pc(zc,Kc),Zc="LinkedErrors",el=pc(Zc,((e={})=>{const t=e.limit||5,n=e.key||"cause";return{name:Zc,setupOnce(){},preprocessEvent(e,r,o){const a=o.getOptions();oo(Ii,a.stackParser,a.maxValueLength,n,t,e,r)}}}));var tl=Object.freeze({__proto__:null,FunctionToString:Qc,InboundFilters:Hc,LinkedErrors:el});class nl{constructor(e){this._client=e,this._buckets=new Map,this._interval=setInterval((()=>this.flush()),5e3)}add(e,t,n,r="none",o={},a=Qa()){const i=Math.floor(a),s=t.replace(/[^\w\-.]+/gi,"_");const c=function(e){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[gc(n)]=fc(String(e[n])));return t}(o),l=function(e){return e.replace(/[^\w]+/gi,"_")}(r),u=function(e,t,n,r){return`${e}${t}${n}${Object.entries(Mo(r)).sort(((e,t)=>e[0].localeCompare(t[0])))}`}(e,s,l,c);let d=this._buckets.get(u);const p=d&&"s"===e?d.metric.weight:0;d?(d.metric.add(n),d.timestamp<i&&(d.timestamp=i)):(d={metric:new wc[e](n),timestamp:i,metricType:e,name:s,unit:l,tags:c},this._buckets.set(u,d));!function(e,t,n,r,o,a){const i=Ps();if(i){const s=Gs(i)||new Map,c=`${e}:${t}@${r}`,l=s.get(a);if(l){const[,e]=l;s.set(a,[c,{min:Math.min(e.min,n),max:Math.max(e.max,n),count:e.count+=1,sum:e.sum+=n,tags:e.tags}])}else s.set(a,[c,{min:n,max:n,count:1,sum:n,tags:o}]);Ms||(Ms=new WeakMap),Ms.set(i,s)}}(e,s,"string"==typeof n?d.metric.weight-p:n,l,o,u)}flush(){if(0!==this._buckets.size){if(this._client.captureAggregateMetrics){const e=Array.from(this._buckets).map((([,e])=>e));this._client.captureAggregateMetrics(e)}this._buckets.clear()}}close(){clearInterval(this._interval),this.flush()}}const rl="MetricsAggregator",ol=()=>({name:rl,setupOnce(){},setup(e){e.metricsAggregator=new nl(e)}});function al(e,t,n,r={}){const o=zi(),a=Xi();if(o){if(!o.metricsAggregator)return void(Ai&&Io.warn("No metrics aggregator enabled. Please add the MetricsAggregator integration to use metrics APIs"));const{unit:i,tags:s,timestamp:c}=r,{release:l,environment:u}=o.getOptions(),d=a.getTransaction(),p={};l&&(p.release=l),u&&(p.environment=u),d&&(p.transaction=Mi(d).description||""),Ai&&Io.log(`Adding value of ${n} to ${e} metric ${t}`),o.metricsAggregator.add(e,t,n,i,{...p,...s},c)}}const il={increment:function(e,t=1,n){al("c",e,t,n)},distribution:function(e,t,n){al("d",e,t,n)},set:function(e,t,n){al("s",e,t,n)},gauge:function(e,t,n){al("g",e,t,n)},MetricsAggregator:pc(rl,ol),metricsAggregatorIntegration:ol},sl=tl,cl="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,ll=lo;function ul(){ll.document?ll.document.addEventListener("visibilitychange",(()=>{const e=Es();if(ll.document.hidden&&e){const t="cancelled",{op:n,status:r}=Mi(e);cl&&Io.log(`[Tracing] Transaction: ${t} -> since tab moved to the background, op: ${n}`),r||e.setStatus(t),e.setTag("visibilitychange","document.hidden"),e.end()}})):cl&&Io.warn("[Tracing] Could not set up background tab detection due to lack of global document")}const dl=(e,t,n)=>{let r,o;return a=>{t.value>=0&&(a||n)&&(o=t.value-(r||0),(o||void 0===r)&&(r=t.value,t.delta=o,e(t)))}},pl=()=>ll.__WEB_VITALS_POLYFILL__?ll.performance&&(performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]||(()=>{const e=ll.performance.timing,t=ll.performance.navigation.type,n={entryType:"navigation",startTime:0,type:2==t?"back_forward":1===t?"reload":"navigate"};for(const t in e)"navigationStart"!==t&&"toJSON"!==t&&(n[t]=Math.max(e[t]-e.navigationStart,0));return n})()):ll.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0],gl=()=>{const e=pl();return e&&e.activationStart||0},hl=(e,t)=>{const n=pl();let r="navigate";return n&&(r=ll.document&&ll.document.prerendering||gl()>0?"prerender":n.type.replace(/_/g,"-")),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:`v3-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:r}},fl=(e,t,n)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const r=new PerformanceObserver((e=>{t(e.getEntries())}));return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch(e){}},ml=(e,t)=>{const n=r=>{"pagehide"!==r.type&&"hidden"!==ll.document.visibilityState||(e(r),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};ll.document&&(addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0))};let _l=-1;const vl=()=>(_l<0&&(ll.document&&ll.document.visibilityState&&(_l="hidden"!==ll.document.visibilityState||ll.document.prerendering?1/0:0),ml((({timeStamp:e})=>{_l=e}),!0)),{get firstHiddenTime(){return _l}});let Tl=0,yl=1/0,El=0;const Sl=e=>{e.forEach((e=>{e.interactionId&&(yl=Math.min(yl,e.interactionId),El=Math.max(El,e.interactionId),Tl=El?(El-yl)/7+1:0)}))};let Il;const bl=()=>{"interactionCount"in performance||Il||(Il=fl("event",Sl,{type:"event",buffered:!0,durationThreshold:0}))},Al=()=>Il?Tl:performance.interactionCount||0,wl=[],Nl={},Ol=e=>{const t=wl[wl.length-1],n=Nl[e.interactionId];if(n||wl.length<10||e.duration>t.latency){if(n)n.entries.push(e),n.latency=Math.max(n.latency,e.duration);else{const t={id:e.interactionId,latency:e.duration,entries:[e]};Nl[t.id]=t,wl.push(t)}wl.sort(((e,t)=>t.latency-e.latency)),wl.splice(10).forEach((e=>{delete Nl[e.id]}))}},Rl=(e,t)=>{t=t||{},bl();const n=hl("INP");let r;const o=e=>{e.forEach((e=>{if(e.interactionId&&Ol(e),"first-input"===e.entryType){!wl.some((t=>t.entries.some((t=>e.duration===t.duration&&e.startTime===t.startTime))))&&Ol(e)}}));const t=(()=>{const e=Math.min(wl.length-1,Math.floor(Al()/50));return wl[e]})();t&&t.latency!==n.value&&(n.value=t.latency,n.entries=t.entries,r())},a=fl("event",o,{durationThreshold:t.durationThreshold||40});r=dl(e,n,t.reportAllChanges),a&&(a.observe({type:"first-input",buffered:!0}),ml((()=>{o(a.takeRecords()),n.value<0&&Al()>0&&(n.value=0,n.entries=[]),r(!0)})))},Ll={},Cl=e=>{ll.document&&(ll.document.prerendering?addEventListener("prerenderingchange",(()=>Cl(e)),!0):"complete"!==ll.document.readyState?addEventListener("load",(()=>Cl(e)),!0):setTimeout(e,0))},Pl={},xl={};let kl,Dl,Ul,Ml,Gl;function $l(e,t=!1){return Jl("lcp",e,ql,Ul,t)}function Vl(e,t){return Yl(e,t),xl[e]||(!function(e){const t={};"event"===e&&(t.durationThreshold=0);fl(e,(t=>{Fl(e,{entries:t})}),t)}(e),xl[e]=!0),zl(e,t)}function Fl(e,t){const n=Pl[e];if(n&&n.length)for(const r of n)try{r(t)}catch(t){cl&&Io.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${Wo(r)}\nError:`,t)}}function jl(){return((e,t={})=>{const n=hl("CLS",0);let r,o=0,a=[];const i=e=>{e.forEach((e=>{if(!e.hadRecentInput){const t=a[0],i=a[a.length-1];o&&0!==a.length&&e.startTime-i.startTime<1e3&&e.startTime-t.startTime<5e3?(o+=e.value,a.push(e)):(o=e.value,a=[e]),o>n.value&&(n.value=o,n.entries=a,r&&r())}}))},s=fl("layout-shift",i);if(s){r=dl(e,n,t.reportAllChanges);const o=()=>{i(s.takeRecords()),r(!0)};return ml(o),o}})((e=>{Fl("cls",{metric:e}),kl=e}),{reportAllChanges:!0})}function Wl(){return(e=>{const t=vl(),n=hl("FID");let r;const o=e=>{e.startTime<t.firstHiddenTime&&(n.value=e.processingStart-e.startTime,n.entries.push(e),r(!0))},a=e=>{e.forEach(o)},i=fl("first-input",a);r=dl(e,n),i&&ml((()=>{a(i.takeRecords()),i.disconnect()}),!0)})((e=>{Fl("fid",{metric:e}),Dl=e}))}function ql(){return(e=>{const t=vl(),n=hl("LCP");let r;const o=e=>{const o=e[e.length-1];if(o){const e=Math.max(o.startTime-gl(),0);e<t.firstHiddenTime&&(n.value=e,n.entries=[o],r())}},a=fl("largest-contentful-paint",o);if(a){r=dl(e,n);const t=()=>{Ll[n.id]||(o(a.takeRecords()),a.disconnect(),Ll[n.id]=!0,r(!0))};return["keydown","click"].forEach((e=>{ll.document&&addEventListener(e,t,{once:!0,capture:!0})})),ml(t,!0),t}})((e=>{Fl("lcp",{metric:e}),Ul=e}))}function Bl(){return((e,t)=>{t=t||{};const n=hl("TTFB"),r=dl(e,n,t.reportAllChanges);Cl((()=>{const e=pl();if(e){if(n.value=Math.max(e.responseStart-gl(),0),n.value<0||n.value>performance.now())return;n.entries=[e],r(!0)}}))})((e=>{Fl("ttfb",{metric:e}),Ml=e}))}function Hl(){return Rl((e=>{Fl("inp",{metric:e}),Gl=e}))}function Jl(e,t,n,r,o=!1){let a;return Yl(e,t),xl[e]||(a=n(),xl[e]=!0),r&&t({metric:r}),zl(e,t,o?a:void 0)}function Yl(e,t){Pl[e]=Pl[e]||[],Pl[e].push(t)}function zl(e,t,n){return()=>{n&&n();const r=Pl[e];if(!r)return;const o=r.indexOf(t);-1!==o&&r.splice(o,1)}}function Xl(e){return"number"==typeof e&&isFinite(e)}function Kl(e,{startTimestamp:t,...n}){return t&&e.startTimestamp>t&&(e.startTimestamp=t),e.startChild({startTimestamp:t,...n})}function Ql(e){return e/1e3}function Zl(){return ll.addEventListener&&ll.performance}let eu,tu,nu=0,ru={};function ou(){const e=Zl();if(e&&Za){e.mark&&ll.performance.mark("sentry-tracing-init");const t=Jl("fid",(({metric:e})=>{const t=e.entries[e.entries.length-1];if(!t)return;const n=Ql(Za),r=Ql(t.startTime);cl&&Io.log("[Measurements] Adding FID"),ru.fid={value:e.value,unit:"millisecond"},ru["mark.fid"]={value:n+r,unit:"second"}}),Wl,Dl),n=function(e,t=!1){return Jl("cls",e,jl,kl,t)}((({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(cl&&Io.log("[Measurements] Adding CLS"),ru.cls={value:e.value,unit:""},tu=t)}),!0),r=$l((({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(cl&&Io.log("[Measurements] Adding LCP"),ru.lcp={value:e.value,unit:"millisecond"},eu=t)}),!0),o=function(e){return Jl("ttfb",e,Bl,Ml)}((({metric:e})=>{e.entries[e.entries.length-1]&&(cl&&Io.log("[Measurements] Adding TTFB"),ru.ttfb={value:e.value,unit:"millisecond"})}));return()=>{t(),n(),r(),o()}}return()=>{}}function au(){Vl("longtask",(({entries:e})=>{for(const t of e){const e=Es();if(!e)return;const n=Ql(Za+t.startTime),r=Ql(t.duration);e.startChild({description:"Main UI thread blocked",op:"ui.long-task",origin:"auto.ui.browser.metrics",startTimestamp:n,endTimestamp:n+r})}}))}function iu(){Vl("event",(({entries:e})=>{for(const t of e){const e=Es();if(!e)return;if("click"===t.name){const n=Ql(Za+t.startTime),r=Ql(t.duration),o={description:ho(t.target),op:`ui.interaction.${t.name}`,origin:"auto.ui.browser.metrics",startTimestamp:n,endTimestamp:n+r},a=vo(t.target);a&&(o.attributes={"ui.component_name":a}),e.startChild(o)}}}))}function su(e,t){if(Zl()&&Za){const n=function(e,t){return n=({metric:n})=>{if(void 0===n.value)return;const r=n.entries.find((e=>e.duration===n.value&&void 0!==cu[e.name])),o=zi();if(!r||!o)return;const a=cu[r.name],i=o.getOptions(),s=Ql(Za+r.startTime),c=Ql(n.value),l=void 0!==r.interactionId?e[r.interactionId]:void 0;if(void 0===l)return;const{routeName:u,parentContext:d,activeTransaction:p,user:g,replayId:h}=l,f=void 0!==g?g.email||g.id||g.ip_address:void 0,m=void 0!==p?p.getProfileId():void 0,_=new Bs({startTimestamp:s,endTimestamp:s+c,op:`ui.interaction.${a}`,name:ho(r.target),attributes:{release:i.release,environment:i.environment,transaction:u,...void 0!==f&&""!==f?{user:f}:{},...void 0!==m?{profile_id:m}:{},...void 0!==h?{replay_id:h}:{}},exclusiveTime:n.value,measurements:{inp:{value:n.value,unit:"millisecond"}}}),v=function(e,t,n){if(!Ls(t))return!1;let r;return r=void 0!==e&&"function"==typeof t.tracesSampler?t.tracesSampler({transactionContext:e,name:e.name,parentSampled:e.parentSampled,attributes:{...e.data,...e.attributes},location:ll.location}):void 0!==e&&void 0!==e.sampled?e.sampled:void 0!==t.tracesSampleRate?t.tracesSampleRate:1,Qs(r)?!0===r?n:!1===r?0:r*n:(cl&&Io.warn("[Tracing] Discarding interaction span because of invalid sample rate."),!1)}(d,i,t);if(v&&Math.random()<v){const e=_?function(e,t){const n={sent_at:(new Date).toISOString()};return t&&(n.dsn=Ao(t)),ui(n,e.map(xc))}([_],o.getDsn()):void 0,t=o&&o.getTransport();t&&e&&t.send(e).then(null,(e=>{cl&&Io.error("Error while sending interaction:",e)}))}},Jl("inp",n,Hl,Gl);var n}(e,t);return()=>{n()}}return()=>{}}const cu={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};function lu(e){const t=Zl();if(!t||!ll.performance.getEntries||!Za)return;cl&&Io.log("[Tracing] Adding & adjusting spans using Performance API");const n=Ql(Za),r=t.getEntries(),{op:o,start_timestamp:a}=Mi(e);if(r.slice(nu).forEach((t=>{const r=Ql(t.startTime),o=Ql(t.duration);if(!("navigation"===e.op&&a&&n+r<a))switch(t.entryType){case"navigation":!function(e,t,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach((r=>{uu(e,t,r,n)})),uu(e,t,"secureConnection",n,"TLS/SSL","connectEnd"),uu(e,t,"fetch",n,"cache","domainLookupStart"),uu(e,t,"domainLookup",n,"DNS"),function(e,t,n){t.responseEnd&&(Kl(e,{op:"browser",origin:"auto.browser.browser.metrics",description:"request",startTimestamp:n+Ql(t.requestStart),endTimestamp:n+Ql(t.responseEnd)}),Kl(e,{op:"browser",origin:"auto.browser.browser.metrics",description:"response",startTimestamp:n+Ql(t.responseStart),endTimestamp:n+Ql(t.responseEnd)}))}(e,t,n)}(e,t,n);break;case"mark":case"paint":case"measure":{!function(e,t,n,r,o){const a=o+n,i=a+r;Kl(e,{description:t.name,endTimestamp:i,op:t.entryType,origin:"auto.resource.browser.metrics",startTimestamp:a})}(e,t,r,o,n);const a=vl(),i=t.startTime<a.firstHiddenTime;"first-paint"===t.name&&i&&(cl&&Io.log("[Measurements] Adding FP"),ru.fp={value:t.startTime,unit:"millisecond"}),"first-contentful-paint"===t.name&&i&&(cl&&Io.log("[Measurements] Adding FCP"),ru.fcp={value:t.startTime,unit:"millisecond"});break}case"resource":!function(e,t,n,r,o,a){if("xmlhttprequest"===t.initiatorType||"fetch"===t.initiatorType)return;const i=Ya(n),s={};du(s,t,"transferSize","http.response_transfer_size"),du(s,t,"encodedBodySize","http.response_content_length"),du(s,t,"decodedBodySize","http.decoded_response_content_length"),"renderBlockingStatus"in t&&(s["resource.render_blocking_status"]=t.renderBlockingStatus);i.protocol&&(s["url.scheme"]=i.protocol.split(":").pop());i.host&&(s["server.address"]=i.host);s["url.same_origin"]=n.includes(ll.location.origin);const c=a+r,l=c+o;Kl(e,{description:n.replace(ll.location.origin,""),endTimestamp:l,op:t.initiatorType?`resource.${t.initiatorType}`:"resource.other",origin:"auto.resource.browser.metrics",startTimestamp:c,data:s})}(e,t,t.name,r,o,n)}})),nu=Math.max(r.length-1,0),function(e){const t=ll.navigator;if(!t)return;const n=t.connection;n&&(n.effectiveType&&e.setTag("effectiveConnectionType",n.effectiveType),n.type&&e.setTag("connectionType",n.type),Xl(n.rtt)&&(ru["connection.rtt"]={value:n.rtt,unit:"millisecond"}));Xl(t.deviceMemory)&&e.setTag("deviceMemory",`${t.deviceMemory} GB`);Xl(t.hardwareConcurrency)&&e.setTag("hardwareConcurrency",String(t.hardwareConcurrency))}(e),"pageload"===o){!function(e){const t=pl();if(!t)return;const{responseStart:n,requestStart:r}=t;r<=n&&(cl&&Io.log("[Measurements] Adding TTFB Request Time"),e["ttfb.requestTime"]={value:n-r,unit:"millisecond"})}(ru),["fcp","fp","lcp"].forEach((e=>{if(!ru[e]||!a||n>=a)return;const t=ru[e].value,r=n+Ql(t),o=Math.abs(1e3*(r-a)),i=o-t;cl&&Io.log(`[Measurements] Normalized ${e} from ${t} to ${o} (${i})`),ru[e].value=o}));const t=ru["mark.fid"];t&&ru.fid&&(Kl(e,{description:"first input delay",endTimestamp:t.value+Ql(ru.fid.value),op:"ui.action",origin:"auto.ui.browser.metrics",startTimestamp:t.value}),delete ru["mark.fid"]),"fcp"in ru||delete ru.cls,Object.keys(ru).forEach((e=>{rc(e,ru[e].value,ru[e].unit)})),function(e){eu&&(cl&&Io.log("[Measurements] Adding LCP Data"),eu.element&&e.setTag("lcp.element",ho(eu.element)),eu.id&&e.setTag("lcp.id",eu.id),eu.url&&e.setTag("lcp.url",eu.url.trim().slice(0,200)),e.setTag("lcp.size",eu.size));tu&&tu.sources&&(cl&&Io.log("[Measurements] Adding CLS Data"),tu.sources.forEach(((t,n)=>e.setTag(`cls.source.${n+1}`,ho(t.node)))))}(e)}eu=void 0,tu=void 0,ru={}}function uu(e,t,n,r,o,a){const i=a?t[a]:t[`${n}End`],s=t[`${n}Start`];s&&i&&Kl(e,{op:"browser",origin:"auto.browser.browser.metrics",description:o||n,startTimestamp:r+Ql(s),endTimestamp:r+Ql(i)})}function du(e,t,n,r){const o=t[n];null!=o&&o<2147483647&&(e[r]=o)}function pu(e,t,n,r,o="auto.http.browser"){if(!Ls()||!e.fetchData)return;const a=t(e.fetchData.url);if(e.endTimestamp&&a){const t=e.fetchData.__span;if(!t)return;const n=r[t];return void(n&&(!function(e,t){if(t.response){Os(e,t.response.status);const n=t.response&&t.response.headers&&t.response.headers.get("content-length");if(n){const t=parseInt(n);t>0&&e.setAttribute("http.response_content_length",t)}}else t.error&&e.setStatus("internal_error");e.end()}(n,e),delete r[t]))}const i=Xi(),s=zi(),{method:c,url:l}=e.fetchData,u=function(e){try{return new URL(e).href}catch(e){return}}(l),d=u?Ya(u).host:void 0,p=a?Cs({name:`${c} ${l}`,onlyIfParent:!0,attributes:{url:l,type:"fetch","http.method":c,"http.url":u,"server.address":d,[Ws]:o},op:"http.client"}):void 0;if(p&&(e.fetchData.__span=p.spanContext().spanId,r[p.spanContext().spanId]=p),n(e.fetchData.url)&&s){const t=e.args[0];e.args[1]=e.args[1]||{};const n=e.args[1];n.headers=function(e,t,n,r,o){const a=o||n.getSpan(),i=_s(),{traceId:s,spanId:c,sampled:l,dsc:u}={...i.getPropagationContext(),...n.getPropagationContext()},d=a?ki(a):li(s,c,l),p=oi(u||(a?rs(a):ns(s,t,n))),g=r.headers||("undefined"!=typeof Request&&Kr(e,Request)?e.headers:void 0);if(g){if("undefined"!=typeof Headers&&Kr(g,Headers)){const e=new Headers(g);return e.append("sentry-trace",d),p&&e.append(ei,p),e}if(Array.isArray(g)){const e=[...g,["sentry-trace",d]];return p&&e.push([ei,p]),e}{const e="baggage"in g?g.baggage:void 0,t=[];return Array.isArray(e)?t.push(...e):e&&t.push(e),p&&t.push(p),{...g,"sentry-trace":d,baggage:t.length>0?t.join(","):void 0}}}return{"sentry-trace":d,baggage:p}}(t,s,i,n,p)}return p}const gu=["localhost",/^\/(?!\/)/],hu={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,tracingOrigins:gu,tracePropagationTargets:gu};function fu(e){const{traceFetch:t,traceXHR:n,tracePropagationTargets:r,tracingOrigins:o,shouldCreateSpanForRequest:a,enableHTTPTimings:i}={traceFetch:hu.traceFetch,traceXHR:hu.traceXHR,...e},s="function"==typeof a?a:e=>!0,c=e=>function(e,t){return ro(e,t||gu)}(e,r||o),l={};t&&fa((e=>{const t=pu(e,s,c,l);if(t){const n=vu(e.fetchData.url),r=n?Ya(n).host:void 0;t.setAttributes({"http.url":n,"server.address":r})}i&&t&&mu(t)})),n&&Pa((e=>{const t=function(e,t,n,r){const o=e.xhr,a=o&&o[Ca];if(!Ls()||!o||o.__sentry_own_request__||!a)return;const i=t(a.url);if(e.endTimestamp&&i){const e=o.__sentry_xhr_span_id__;if(!e)return;const t=r[e];return void(t&&void 0!==a.status_code&&(Os(t,a.status_code),t.end(),delete r[e]))}const s=Xi(),c=_s(),l=vu(a.url),u=l?Ya(l).host:void 0,d=i?Cs({name:`${a.method} ${a.url}`,onlyIfParent:!0,attributes:{type:"xhr","http.method":a.method,"http.url":l,url:a.url,"server.address":u,[Ws]:"auto.http.browser"},op:"http.client"}):void 0;d&&(o.__sentry_xhr_span_id__=d.spanContext().spanId,r[o.__sentry_xhr_span_id__]=d);const p=zi();if(o.setRequestHeader&&n(a.url)&&p){const{traceId:e,spanId:t,sampled:n,dsc:r}={...c.getPropagationContext(),...s.getPropagationContext()};!function(e,t,n){try{e.setRequestHeader("sentry-trace",t),n&&e.setRequestHeader(ei,n)}catch(e){}}(o,d?ki(d):li(e,t,n),oi(r||(d?rs(d):ns(e,p,s))))}return d}(e,s,c,l);i&&t&&mu(t)}))}function mu(e){const{url:t}=Mi(e).data||{};if(!t||"string"!=typeof t)return;const n=Vl("resource",(({entries:r})=>{r.forEach((r=>{if(function(e){return"resource"===e.entryType&&"initiatorType"in e&&"string"==typeof e.nextHopProtocol&&("fetch"===e.initiatorType||"xmlhttprequest"===e.initiatorType)}(r)&&r.name.endsWith(t)){(function(e){const{name:t,version:n}=function(e){let t="unknown",n="unknown",r="";for(const o of e){if("/"===o){[t,n]=e.split("/");break}if(!isNaN(Number(o))){t="h"===r?"http":r,n=e.split(r)[1];break}r+=o}r===e&&(t=r);return{name:t,version:n}}(e.nextHopProtocol),r=[];if(r.push(["network.protocol.version",n],["network.protocol.name",t]),!Za)return r;return[...r,["http.request.redirect_start",_u(e.redirectStart)],["http.request.fetch_start",_u(e.fetchStart)],["http.request.domain_lookup_start",_u(e.domainLookupStart)],["http.request.domain_lookup_end",_u(e.domainLookupEnd)],["http.request.connect_start",_u(e.connectStart)],["http.request.secure_connection_start",_u(e.secureConnectionStart)],["http.request.connection_end",_u(e.connectEnd)],["http.request.request_start",_u(e.requestStart)],["http.request.response_start",_u(e.responseStart)],["http.request.response_end",_u(e.responseEnd)]]})(r).forEach((t=>e.setAttribute(...t))),setTimeout(n)}}))}))}function _u(e=0){return((Za||performance.timeOrigin)+e)/1e3}function vu(e){try{return new URL(e,ll.location.origin).href}catch(e){return}}const Tu={...Js,markBackgroundTransactions:!0,routingInstrumentation:function(e,t=!0,n=!0){if(!ll||!ll.location)return void(cl&&Io.warn("Could not initialize routing instrumentation due to invalid location"));let r,o=ll.location.href;t&&(r=e({name:ll.location.pathname,startTimestamp:Za?Za/1e3:void 0,op:"pageload",origin:"auto.pageload.browser",metadata:{source:"url"}})),n&&Oa((({to:t,from:n})=>{void 0===n&&o&&-1!==o.indexOf(t)?o=void 0:n!==t&&(o=void 0,r&&(cl&&Io.log(`[Tracing] Finishing current transaction with op: ${r.op}`),r.end()),r=e({name:ll.location.pathname,op:"navigation",origin:"auto.navigation.browser",metadata:{source:"url"}}))}))},startTransactionOnLocationChange:!0,startTransactionOnPageLoad:!0,enableLongTask:!0,enableInp:!1,interactionsSampleRate:1,_experiments:{},...hu};function yu(e){const t=_o(`meta[name=${e}]`);return t?t.getAttribute("content"):void 0}function Eu(e){const t=e.attributes&&e.attributes[Vs],n=e.data&&e.data[Vs],r=e.metadata&&e.metadata.source;return t||n||r}const Su={...Js,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableInp:!1,interactionsSampleRate:1,_experiments:{},...hu};function Iu(e,t){if(!e.emit)return;e.emit("startPageLoadSpan",t);const n=Ps();return"pageload"===(n&&Mi(n).op)?n:void 0}function bu(e,t){if(!e.emit)return;e.emit("startNavigationSpan",t);const n=Ps();return"navigation"===(n&&Mi(n).op)?n:void 0}function Au(e){const t=_o(`meta[name=${e}]`);return t?t.getAttribute("content"):void 0}const wu=10;function Nu(e){const t=e.attributes&&e.attributes[Vs],n=e.data&&e.data[Vs],r=e.metadata&&e.metadata.source;return t||n||r}const Ou=lo;let Ru=0;function Lu(){return Ru>0}function Cu(e,t={},n){if("function"!=typeof e)return e;try{const t=e.__sentry_wrapped__;if(t)return"function"==typeof t?t:e;if(xo(e))return e}catch(t){return e}const r=function(){const n=Array.prototype.slice.call(arguments);try{const r=n.map((e=>Cu(e,t)));return e.apply(this,r)}catch(e){throw Ru++,setTimeout((()=>{Ru--})),Yi((r=>{r.addEventProcessor((e=>(t.mechanism&&(ea(e,void 0),ta(e,t.mechanism)),e.extra={...e.extra,arguments:n},e))),Wi(e)})),e}};try{for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t])}catch(e){}Po(r,e),Co(e,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get:()=>e.name})}catch(e){}return r}const Pu="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function xu(e,t){const n=Du(e,t),r={type:t&&t.name,value:Mu(t)};return n.length&&(r.stacktrace={frames:n}),void 0===r.type&&""===r.value&&(r.value="Unrecoverable error caught"),r}function ku(e,t){return{exception:{values:[xu(e,t)]}}}function Du(e,t){const n=t.stacktrace||t.stack||"",r=function(e){if(e){if("number"==typeof e.framesToPop)return e.framesToPop;if(Uu.test(e.message))return 1}return 0}(t);try{return e(n,r)}catch(e){}return[]}const Uu=/Minified React error #\d+;/i;function Mu(e){const t=e&&e.message;return t?t.error&&"string"==typeof t.error.message?t.error.message:t:"No error message"}function Gu(e,t,n,r){const o=Vu(e,t,n&&n.syntheticException||void 0,r);return ta(o),o.level="error",n&&n.event_id&&(o.event_id=n.event_id),qa(o)}function $u(e,t,n="info",r,o){const a=Fu(e,t,r&&r.syntheticException||void 0,o);return a.level=n,r&&r.event_id&&(a.event_id=r.event_id),qa(a)}function Vu(e,t,n,r,o){let a;if(jr(t)&&t.error){return ku(e,t.error)}if(Wr(t)||Fr(t,"DOMException")){const o=t;if("stack"in t)a=ku(e,t);else{const t=o.name||(Wr(o)?"DOMError":"DOMException"),i=o.message?`${t}: ${o.message}`:t;a=Fu(e,i,n,r),ea(a,i)}return"code"in o&&(a.tags={...a.tags,"DOMException.code":`${o.code}`}),a}if(Vr(t))return ku(e,t);if(Jr(t)||Yr(t)){return a=function(e,t,n,r){const o=zi(),a=o&&o.getOptions().normalizeDepth,i={exception:{values:[{type:Yr(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:ju(t,{isUnhandledRejection:r})}]},extra:{__serialized__:Ma(t,a)}};if(n){const t=Du(e,n);t.length&&(i.exception.values[0].stacktrace={frames:t})}return i}(e,t,n,o),ta(a,{synthetic:!0}),a}return a=Fu(e,t,n,r),ea(a,`${t}`),ta(a,{synthetic:!0}),a}function Fu(e,t,n,r){const o={};if(r&&n){const r=Du(e,n);r.length&&(o.exception={values:[{value:t,stacktrace:{frames:r}}]})}if(Br(t)){const{__sentry_template_string__:e,__sentry_template_values__:n}=t;return o.logentry={message:e,params:n},o}return o.message=t,o}function ju(e,{isUnhandledRejection:t}){const n=function(e,t=40){const n=Object.keys(ko(e));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=t)return Zr(n[0],t);for(let e=n.length;e>0;e--){const r=n.slice(0,e).join(", ");if(!(r.length>t))return e===n.length?r:Zr(r,t)}return""}(e),r=t?"promise rejection":"exception";if(jr(e))return`Event \`ErrorEvent\` captured as ${r} with message \`${e.message}\``;if(Yr(e)){return`Event \`${function(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch(e){}}(e)}\` (type=${e.type}) captured as ${r}`}return`Object captured as ${r} with keys: ${n}`}function Wu(e,{metadata:t,tunnel:n,dsn:r}){const o={event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&t.sdk&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!n&&!!r&&{dsn:Ao(r)}},a=function(e){return[{type:"user_report"},e]}(e);return ui(o,[a])}class qu extends vc{constructor(e){!function(e,t,n=[t],r="npm"){const o=e._metadata||{};o.sdk||(o.sdk={name:`sentry.javascript.${t}`,packages:n.map((e=>({name:`${r}:@sentry/${e}`,version:us}))),version:us}),e._metadata=o}(e,"browser",["browser"],Ou.SENTRY_SDK_SOURCE||"npm"),super(e),e.sendClientReports&&Ou.document&&Ou.document.addEventListener("visibilitychange",(()=>{"hidden"===Ou.document.visibilityState&&this._flushOutcomes()}))}eventFromException(e,t){return Gu(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e,t="info",n){return $u(this._options.stackParser,e,t,n,this._options.attachStacktrace)}captureUserFeedback(e){if(!this._isEnabled())return void(Pu&&Io.warn("SDK not enabled, will not capture user feedback."));const t=Wu(e,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this._sendEnvelope(t)}_prepareEvent(e,t,n){return e.platform=e.platform||"javascript",super._prepareEvent(e,t,n)}_flushOutcomes(){const e=this._clearOutcomes();if(0===e.length)return void(Pu&&Io.log("No outcomes to send"));if(!this._dsn)return void(Pu&&Io.log("No dsn provided, will not send outcomes"));Pu&&Io.log("Sending outcomes:",e);const t=(n=e,ui((r=this._options.tunnel&&Ao(this._dsn))?{dsn:r}:{},[[{type:"client_report"},{timestamp:Ka(),discarded_events:n}]]));var n,r;this._sendEnvelope(t)}}let Bu;function Hu(e,t=function(){if(Bu)return Bu;if(ga(Ou.fetch))return Bu=Ou.fetch.bind(Ou);const e=Ou.document;let t=Ou.fetch;if(e&&"function"==typeof e.createElement)try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n);const r=n.contentWindow;r&&r.fetch&&(t=r.fetch),e.head.removeChild(n)}catch(e){Pu&&Io.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return Bu=t.bind(Ou)}()){let n=0,r=0;return Oc(e,(function(o){const a=o.body.length;n+=a,r++;const i={body:o.body,method:"POST",referrerPolicy:"origin",headers:e.headers,keepalive:n<=6e4&&r<15,...e.fetchOptions};try{return t(e.url,i).then((e=>(n-=a,r--,{statusCode:e.status,headers:{"x-sentry-rate-limits":e.headers.get("X-Sentry-Rate-Limits"),"retry-after":e.headers.get("Retry-After")}})))}catch(e){return Bu=void 0,n-=a,r--,Ba(e)}}))}function Ju(e){return Oc(e,(function(t){return new Ha(((n,r)=>{const o=new XMLHttpRequest;o.onerror=r,o.onreadystatechange=()=>{4===o.readyState&&n({statusCode:o.status,headers:{"x-sentry-rate-limits":o.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":o.getResponseHeader("Retry-After")}})},o.open("POST",e.url);for(const t in e.headers)Object.prototype.hasOwnProperty.call(e.headers,t)&&o.setRequestHeader(t,e.headers[t]);o.send(t.body)}))}))}const Yu="?";function zu(e,t,n,r){const o={filename:e,function:t,in_app:!0};return void 0!==n&&(o.lineno=n),void 0!==r&&(o.colno=r),o}const Xu=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Ku=/\((\S*)(?::(\d+))(?::(\d+))\)/,Qu=[30,e=>{const t=Xu.exec(e);if(t){if(t[2]&&0===t[2].indexOf("eval")){const e=Ku.exec(t[2]);e&&(t[2]=e[1],t[3]=e[2],t[4]=e[3])}const[e,n]=ud(t[1]||Yu,t[2]);return zu(n,e,t[3]?+t[3]:void 0,t[4]?+t[4]:void 0)}}],Zu=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,ed=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,td=[50,e=>{const t=Zu.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const e=ed.exec(t[3]);e&&(t[1]=t[1]||"eval",t[3]=e[1],t[4]=e[2],t[5]="")}let e=t[3],n=t[1]||Yu;return[n,e]=ud(n,e),zu(e,n,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}],nd=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,rd=[40,e=>{const t=nd.exec(e);return t?zu(t[2],t[1]||Yu,+t[3],t[4]?+t[4]:void 0):void 0}],od=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,ad=[10,e=>{const t=od.exec(e);return t?zu(t[2],t[3]||Yu,+t[1]):void 0}],id=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,sd=[20,e=>{const t=id.exec(e);return t?zu(t[5],t[3]||t[4]||Yu,+t[1],+t[2]):void 0}],cd=[Qu,td,rd],ld=Fo(...cd),ud=(e,t)=>{const n=-1!==e.indexOf("safari-extension"),r=-1!==e.indexOf("safari-web-extension");return n||r?[-1!==e.indexOf("@")?e.split("@")[0]:Yu,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]},dd=1024,pd="Breadcrumbs",gd=(e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:pd,setupOnce(){},setup(e){t.console&&zo(function(e){return function(t){if(zi()!==e)return;const n={category:"console",data:{arguments:t.args,logger:"console"},level:Xa(t.level),message:to(t.args," ")};if("assert"===t.level){if(!1!==t.args[0])return;n.message=`Assertion failed: ${to(t.args.slice(1)," ")||"console.assert"}`,n.data.arguments=t.args.slice(1)}Hi(n,{input:t.args,level:t.level})}}(e)),t.dom&&ca(function(e,t){return function(n){if(zi()!==e)return;let r,o,a="object"==typeof t?t.serializeAttribute:void 0,i="object"==typeof t&&"number"==typeof t.maxStringLength?t.maxStringLength:void 0;i&&i>dd&&(Pu&&Io.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${i} was configured. Sentry will use 1024 instead.`),i=dd),"string"==typeof a&&(a=[a]);try{const e=n.event,t=function(e){return!!e&&!!e.target}(e)?e.target:e;r=ho(t,{keyAttrs:a,maxStringLength:i}),o=vo(t)}catch(e){r="<unknown>"}if(0===r.length)return;const s={category:`ui.${n.name}`,message:r};o&&(s.data={"ui.component_name":o}),Hi(s,{event:n.event,name:n.name,global:n.global})}}(e,t.dom)),t.xhr&&Pa(function(e){return function(t){if(zi()!==e)return;const{startTimestamp:n,endTimestamp:r}=t,o=t.xhr[Ca];if(!n||!r||!o)return;const{method:a,url:i,status_code:s,body:c}=o;Hi({category:"xhr",data:{method:a,url:i,status_code:s},type:"http"},{xhr:t.xhr,input:c,startTimestamp:n,endTimestamp:r})}}(e)),t.fetch&&fa(function(e){return function(t){if(zi()!==e)return;const{startTimestamp:n,endTimestamp:r}=t;if(r&&(!t.fetchData.url.match(/sentry_key/)||"POST"!==t.fetchData.method))if(t.error){Hi({category:"fetch",data:t.fetchData,level:"error",type:"http"},{data:t.error,input:t.args,startTimestamp:n,endTimestamp:r})}else{const e=t.response;Hi({category:"fetch",data:{...t.fetchData,status_code:e&&e.status},type:"http"},{input:t.args,response:e,startTimestamp:n,endTimestamp:r})}}}(e)),t.history&&Oa(function(e){return function(t){if(zi()!==e)return;let n=t.from,r=t.to;const o=Ya(Ou.location.href);let a=n?Ya(n):void 0;const i=Ya(r);a&&a.path||(a=o),o.protocol===i.protocol&&o.host===i.host&&(r=i.relative),o.protocol===a.protocol&&o.host===a.host&&(n=a.relative),Hi({category:"navigation",data:{from:n,to:r}})}}(e)),t.sentry&&e.on&&e.on("beforeSendEvent",function(e){return function(t){zi()===e&&Hi({category:"sentry."+("transaction"===t.type?"transaction":"event"),event_id:t.event_id,level:t.level,message:Zo(t)},{event:t})}}(e))}}},hd=pc(pd,gd);const fd="Dedupe",md=()=>{let e;return{name:fd,setupOnce(){},processEvent(t){if(t.type)return t;try{if(function(e,t){if(!t)return!1;if(function(e,t){const n=e.message,r=t.message;if(!n&&!r)return!1;if(n&&!r||!n&&r)return!1;if(n!==r)return!1;if(!Td(e,t))return!1;if(!vd(e,t))return!1;return!0}(e,t))return!0;if(function(e,t){const n=yd(t),r=yd(e);if(!n||!r)return!1;if(n.type!==r.type||n.value!==r.value)return!1;if(!Td(e,t))return!1;if(!vd(e,t))return!1;return!0}(e,t))return!0;return!1}(t,e))return Pu&&Io.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(e){}return e=t}}},_d=pc(fd,md);function vd(e,t){let n=Ed(e),r=Ed(t);if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;if(r.length!==n.length)return!1;for(let e=0;e<r.length;e++){const t=r[e],o=n[e];if(t.filename!==o.filename||t.lineno!==o.lineno||t.colno!==o.colno||t.function!==o.function)return!1}return!0}function Td(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;try{return!(n.join("")!==r.join(""))}catch(e){return!1}}function yd(e){return e.exception&&e.exception.values&&e.exception.values[0]}function Ed(e){const t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch(e){return}}const Sd="GlobalHandlers",Id=(e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:Sd,setupOnce(){Error.stackTraceLimit=50},setup(e){t.onerror&&(!function(e){ya((t=>{const{stackParser:n,attachStacktrace:r}=Nd();if(zi()!==e||Lu())return;const{msg:o,url:a,line:i,column:s,error:c}=t,l=void 0===c&&qr(o)?function(e,t,n,r){const o=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;let a=jr(e)?e.message:e,i="Error";const s=a.match(o);s&&(i=s[1],a=s[2]);const c={exception:{values:[{type:i,value:a}]}};return Ad(c,t,n,r)}(o,a,i,s):Ad(Vu(n,c||o,void 0,r,!1),a,i,s);l.level="error",Bi(l,{originalException:c,mechanism:{handled:!1,type:"onerror"}})}))}(e),wd("onerror")),t.onunhandledrejection&&(!function(e){Ia((t=>{const{stackParser:n,attachStacktrace:r}=Nd();if(zi()!==e||Lu())return;const o=function(e){if(Hr(e))return e;const t=e;try{if("reason"in t)return t.reason;if("detail"in t&&"reason"in t.detail)return t.detail.reason}catch(e){}return e}(t),a=Hr(o)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(o)}`}]}}:Vu(n,o,void 0,r,!0);a.level="error",Bi(a,{originalException:o,mechanism:{handled:!1,type:"onunhandledrejection"}})}))}(e),wd("onunhandledrejection"))}}},bd=pc(Sd,Id);function Ad(e,t,n,r){const o=e.exception=e.exception||{},a=o.values=o.values||[],i=a[0]=a[0]||{},s=i.stacktrace=i.stacktrace||{},c=s.frames=s.frames||[],l=isNaN(parseInt(r,10))?void 0:r,u=isNaN(parseInt(n,10))?void 0:n,d=qr(t)&&t.length>0?t:mo();return 0===c.length&&c.push({colno:l,filename:d,function:"?",in_app:!0,lineno:u}),e}function wd(e){Pu&&Io.log(`Global Handler attached: ${e}`)}function Nd(){const e=zi();return e&&e.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const Od="HttpContext",Rd=()=>({name:Od,setupOnce(){},preprocessEvent(e){if(!Ou.navigator&&!Ou.location&&!Ou.document)return;const t=e.request&&e.request.url||Ou.location&&Ou.location.href,{referrer:n}=Ou.document||{},{userAgent:r}=Ou.navigator||{},o={...e.request&&e.request.headers,...n&&{Referer:n},...r&&{"User-Agent":r}},a={...e.request,...t&&{url:t},headers:o};e.request=a}}),Ld=pc(Od,Rd),Cd="LinkedErrors",Pd=(e={})=>{const t=e.limit||5,n=e.key||"cause";return{name:Cd,setupOnce(){},preprocessEvent(e,r,o){const a=o.getOptions();oo(xu,a.stackParser,a.maxValueLength,n,t,e,r)}}},xd=pc(Cd,Pd),kd=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],Dd="TryCatch",Ud=(e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e};return{name:Dd,setupOnce(){t.setTimeout&&Lo(Ou,"setTimeout",Gd),t.setInterval&&Lo(Ou,"setInterval",Gd),t.requestAnimationFrame&&Lo(Ou,"requestAnimationFrame",$d),t.XMLHttpRequest&&"XMLHttpRequest"in Ou&&Lo(XMLHttpRequest.prototype,"send",Vd);const e=t.eventTarget;if(e){(Array.isArray(e)?e:kd).forEach(Fd)}}}},Md=pc(Dd,Ud);function Gd(e){return function(...t){const n=t[0];return t[0]=Cu(n,{mechanism:{data:{function:Wo(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function $d(e){return function(t){return e.apply(this,[Cu(t,{mechanism:{data:{function:"requestAnimationFrame",handler:Wo(e)},handled:!1,type:"instrument"}})])}}function Vd(e){return function(...t){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach((e=>{e in n&&"function"==typeof n[e]&&Lo(n,e,(function(t){const n={mechanism:{data:{function:e,handler:Wo(t)},handled:!1,type:"instrument"}},r=xo(t);return r&&(n.mechanism.data.handler=Wo(r)),Cu(t,n)}))})),e.apply(this,t)}}function Fd(e){const t=Ou,n=t[e]&&t[e].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(Lo(n,"addEventListener",(function(t){return function(n,r,o){try{"function"==typeof r.handleEvent&&(r.handleEvent=Cu(r.handleEvent,{mechanism:{data:{function:"handleEvent",handler:Wo(r),target:e},handled:!1,type:"instrument"}}))}catch(e){}return t.apply(this,[n,Cu(r,{mechanism:{data:{function:"addEventListener",handler:Wo(r),target:e},handled:!1,type:"instrument"}}),o])}})),Lo(n,"removeEventListener",(function(e){return function(t,n,r){const o=n;try{const n=o&&o.__sentry_wrapped__;n&&e.call(this,t,n,r)}catch(e){}return e.call(this,t,o,r)}})))}const jd=[Bc(),Kc(),Ud(),gd(),Id(),Pd(),md(),Rd()];function Wd(e){return[...jd]}function qd(e={}){void 0===e.defaultIntegrations&&(e.defaultIntegrations=Wd()),void 0===e.release&&("string"==typeof __SENTRY_RELEASE__&&(e.release=__SENTRY_RELEASE__),Ou.SENTRY_RELEASE&&Ou.SENTRY_RELEASE.id&&(e.release=Ou.SENTRY_RELEASE.id)),void 0===e.autoSessionTracking&&(e.autoSessionTracking=!0),void 0===e.sendClientReports&&(e.sendClientReports=!0);const t={...e,stackParser:(n=e.stackParser||ld,Array.isArray(n)?Fo(...n):n),integrations:lc(e),transport:e.transport||(pa()?Hu:Ju)};var n;!function(e,t){!0===t.debug&&(Ai?Io.enable():So((()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")}))),Xi().update(t.initialScope);const n=new e(t);Nc(n),function(e){e.init?e.init():e.setupIntegrations&&e.setupIntegrations()}(n)}(qu,t),e.autoSessionTracking&&function(){if(void 0===Ou.document)return void(Pu&&Io.warn("Session tracking in non-browser environment with @sentry/browser is not supported."));Ki({ignoreDuration:!0}),es(),Oa((({from:e,to:t})=>{void 0!==e&&e!==t&&(Ki({ignoreDuration:!0}),es())}))}()}var Bd=Object.freeze({__proto__:null,Breadcrumbs:hd,Dedupe:_d,GlobalHandlers:bd,HttpContext:Ld,LinkedErrors:xd,TryCatch:Md});const Hd=lo,Jd="sentryReplaySession",Yd="Unable to send Replay",zd=15e4,Xd=5e3,Kd=2e7,Qd=36e5;function Zd(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],a=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=a(n)):"call"!==o&&"optionalCall"!==o||(n=a(((...e)=>n.call(t,...e))),t=void 0)}return n}var ep;function tp(e){const t=Zd([e,"optionalAccess",e=>e.host]);return Boolean(Zd([t,"optionalAccess",e=>e.shadowRoot])===e)}function np(e){return"[object ShadowRoot]"===Object.prototype.toString.call(e)}function rp(e){try{const n=e.rules||e.cssRules;return n?((t=Array.from(n,op).join("")).includes(" background-clip: text;")&&!t.includes(" -webkit-background-clip: text;")&&(t=t.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),t):null}catch(e){return null}var t}function op(e){let t;if(function(e){return"styleSheet"in e}(e))try{t=rp(e.styleSheet)||function(e){const{cssText:t}=e;if(t.split('"').length<3)return t;const n=["@import",`url(${JSON.stringify(e.href)})`];return""===e.layerName?n.push("layer"):e.layerName&&n.push(`layer(${e.layerName})`),e.supportsText&&n.push(`supports(${e.supportsText})`),e.media.length&&n.push(e.media.mediaText),n.join(" ")+";"}(e)}catch(e){}else if(function(e){return"selectorText"in e}(e)&&e.selectorText.includes(":"))return function(e){const t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}(e.cssText);return t||e.cssText}!function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(ep||(ep={}));class ap{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(e){if(!e)return-1;const t=Zd([this,"access",e=>e.getMeta,"call",t=>t(e),"optionalAccess",e=>e.id]);return r=()=>-1,null!=(n=t)?n:r();var n,r}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach((e=>this.removeNodeFromMap(e)))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){const n=t.id;this.idNodeMap.set(n,e),this.nodeMetaMap.set(e,t)}replace(e,t){const n=this.getNode(e);if(n){const e=this.nodeMetaMap.get(n);e&&this.nodeMetaMap.set(t,e)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function ip({maskInputOptions:e,tagName:t,type:n}){return"OPTION"===t&&(t="SELECT"),Boolean(e[t.toLowerCase()]||n&&e[n]||"password"===n||"INPUT"===t&&!n&&e.text)}function sp({isMasked:e,element:t,value:n,maskInputFn:r}){let o=n||"";return e?(r&&(o=r(o,t)),"*".repeat(o.length)):o}function cp(e){return e.toLowerCase()}function lp(e){return e.toUpperCase()}const up="__rrweb_original__";function dp(e){const t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?cp(t):null}function pp(e,t,n){return"INPUT"!==t||"radio"!==n&&"checkbox"!==n?e.value:e.getAttribute("value")||""}let gp=1;const hp=new RegExp("[^a-z0-9-_:]");function fp(){return gp++}let mp,_p;const vp=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,Tp=/^(?:[a-z+]+:)?\/\//i,yp=/^www\..*/i,Ep=/^(data:)([^,]*),(.*)/i;function Sp(e,t){return(e||"").replace(vp,((e,n,r,o,a,i)=>{const s=r||a||i,c=n||o||"";if(!s)return e;if(Tp.test(s)||yp.test(s))return`url(${c}${s}${c})`;if(Ep.test(s))return`url(${c}${s}${c})`;if("/"===s[0])return`url(${c}${function(e){let t="";return t=e.indexOf("//")>-1?e.split("/").slice(0,3).join("/"):e.split("/")[0],t=t.split("?")[0],t}(t)+s}${c})`;const l=t.split("/"),u=s.split("/");l.pop();for(const e of u)"."!==e&&(".."===e?l.pop():l.push(e));return`url(${c}${l.join("/")}${c})`}))}const Ip=/^[^ \t\n\r\u000c]+/,bp=/^[, \t\n\r\u000c]+/;function Ap(e,t){if(!t||""===t.trim())return t;const n=e.createElement("a");return n.href=t,n.href}function wp(e){return Boolean("svg"===e.tagName||e.ownerSVGElement)}function Np(){const e=document.createElement("a");return e.href="",e.href}function Op(e,t,n,r,o,a){return r?"src"===n||"href"===n&&("use"!==t||"#"!==r[0])||"xlink:href"===n&&"#"!==r[0]?Ap(e,r):"background"!==n||"table"!==t&&"td"!==t&&"th"!==t?"srcset"===n?function(e,t){if(""===t.trim())return t;let n=0;function r(e){let r;const o=e.exec(t.substring(n));return o?(r=o[0],n+=r.length,r):""}const o=[];for(;r(bp),!(n>=t.length);){let a=r(Ip);if(","===a.slice(-1))a=Ap(e,a.substring(0,a.length-1)),o.push(a);else{let r="";a=Ap(e,a);let i=!1;for(;;){const e=t.charAt(n);if(""===e){o.push((a+r).trim());break}if(i)")"===e&&(i=!1);else{if(","===e){n+=1,o.push((a+r).trim());break}"("===e&&(i=!0)}r+=e,n+=1}}}return o.join(", ")}(e,r):"style"===n?Sp(r,Np()):"object"===t&&"data"===n?Ap(e,r):"function"==typeof a?a(n,r,o):r:Ap(e,r):r}function Rp(e,t,n){return("video"===e||"audio"===e)&&"autoplay"===t}function Lp(e,t,n=1/0,r=0){return e?e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:Lp(e.parentNode,t,n,r+1):-1}function Cp(e,t){return n=>{const r=n;if(null===r)return!1;try{if(e)if("string"==typeof e){if(r.matches(`.${e}`))return!0}else if(function(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}(r,e))return!0;return!(!t||!r.matches(t))}catch(e){return!1}}}function Pp(e,t,n,r,o,a){try{const i=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(null===i)return!1;if("INPUT"===i.tagName){const e=i.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(e))return!0}let s=-1,c=-1;if(a){if(c=Lp(i,Cp(r,o)),c<0)return!0;s=Lp(i,Cp(t,n),c>=0?c:1/0)}else{if(s=Lp(i,Cp(t,n)),s<0)return!1;c=Lp(i,Cp(r,o),s>=0?s:1/0)}return s>=0?!(c>=0)||s<=c:!(c>=0)&&!!a}catch(e){}return!!a}function xp(e,t){const{doc:n,mirror:r,blockClass:o,blockSelector:a,unblockSelector:i,maskAllText:s,maskAttributeFn:c,maskTextClass:l,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:p,inlineStylesheet:g,maskInputOptions:h={},maskTextFn:f,maskInputFn:m,dataURLOptions:_={},inlineImages:v,recordCanvas:T,keepIframeSrcFn:y,newlyAddedElement:E=!1}=t,S=function(e,t){if(!t.hasNode(e))return;const n=t.getId(e);return 1===n?void 0:n}(n,r);switch(e.nodeType){case e.DOCUMENT_NODE:return"CSS1Compat"!==e.compatMode?{type:ep.Document,childNodes:[],compatMode:e.compatMode}:{type:ep.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:ep.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:S};case e.ELEMENT_NODE:return function(e,t){const{doc:n,blockClass:r,blockSelector:o,unblockSelector:a,inlineStylesheet:i,maskInputOptions:s={},maskAttributeFn:c,maskInputFn:l,dataURLOptions:u={},inlineImages:d,recordCanvas:p,keepIframeSrcFn:g,newlyAddedElement:h=!1,rootId:f,maskAllText:m,maskTextClass:_,unmaskTextClass:v,maskTextSelector:T,unmaskTextSelector:y}=t,E=function(e,t,n,r){try{if(r&&e.matches(r))return!1;if("string"==typeof t){if(e.classList.contains(t))return!0}else for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}if(n)return e.matches(n)}catch(e){}return!1}(e,r,o,a),S=function(e){if(e instanceof HTMLFormElement)return"form";const t=cp(e.tagName);return hp.test(t)?"div":t}(e);let I={};const b=e.attributes.length;for(let t=0;t<b;t++){const r=e.attributes[t];r.name&&!Rp(S,r.name,r.value)&&(I[r.name]=Op(n,S,cp(r.name),r.value,e,c))}if("link"===S&&i){const t=Array.from(n.styleSheets).find((t=>t.href===e.href));let r=null;t&&(r=rp(t)),r&&(delete I.rel,delete I.href,I._cssText=Sp(r,t.href))}if("style"===S&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){const t=rp(e.sheet);t&&(I._cssText=Sp(t,Np()))}if("input"===S||"textarea"===S||"select"===S||"option"===S){const t=e,n=dp(t),r=pp(t,lp(S),n),o=t.checked;if("submit"!==n&&"button"!==n&&r){const e=Pp(t,_,T,v,y,ip({type:n,tagName:lp(S),maskInputOptions:s}));I.value=sp({isMasked:e,element:t,value:r,maskInputFn:l})}o&&(I.checked=o)}"option"===S&&(e.selected&&!s.select?I.selected=!0:delete I.selected);if("canvas"===S&&p)if("2d"===e.__context)(function(e){const t=e.getContext("2d");if(!t)return!0;for(let n=0;n<e.width;n+=50)for(let r=0;r<e.height;r+=50){const o=t.getImageData,a=up in o?o[up]:o;if(new Uint32Array(a.call(t,n,r,Math.min(50,e.width-n),Math.min(50,e.height-r)).data.buffer).some((e=>0!==e)))return!1}return!0})(e)||(I.rr_dataURL=e.toDataURL(u.type,u.quality));else if(!("__context"in e)){const t=e.toDataURL(u.type,u.quality),n=document.createElement("canvas");n.width=e.width,n.height=e.height;t!==n.toDataURL(u.type,u.quality)&&(I.rr_dataURL=t)}if("img"===S&&d){mp||(mp=n.createElement("canvas"),_p=mp.getContext("2d"));const t=e,r=t.crossOrigin;t.crossOrigin="anonymous";const o=()=>{t.removeEventListener("load",o);try{mp.width=t.naturalWidth,mp.height=t.naturalHeight,_p.drawImage(t,0,0),I.rr_dataURL=mp.toDataURL(u.type,u.quality)}catch(e){console.warn(`Cannot inline img src=${t.currentSrc}! Error: ${e}`)}r?I.crossOrigin=r:t.removeAttribute("crossorigin")};t.complete&&0!==t.naturalWidth?o():t.addEventListener("load",o)}"audio"!==S&&"video"!==S||(I.rr_mediaState=e.paused?"paused":"played",I.rr_mediaCurrentTime=e.currentTime);h||(e.scrollLeft&&(I.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(I.rr_scrollTop=e.scrollTop));if(E){const{width:t,height:n}=e.getBoundingClientRect();I={class:I.class,rr_width:`${t}px`,rr_height:`${n}px`}}"iframe"!==S||g(I.src)||(e.contentDocument||(I.rr_src=I.src),delete I.src);let A;try{customElements.get(S)&&(A=!0)}catch(e){}return{type:ep.Element,tagName:S,attributes:I,childNodes:[],isSVG:wp(e)||void 0,needBlock:E,rootId:f,isCustom:A}}(e,{doc:n,blockClass:o,blockSelector:a,unblockSelector:i,inlineStylesheet:g,maskAttributeFn:c,maskInputOptions:h,maskInputFn:m,dataURLOptions:_,inlineImages:v,recordCanvas:T,keepIframeSrcFn:y,newlyAddedElement:E,rootId:S,maskAllText:s,maskTextClass:l,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:p});case e.TEXT_NODE:return function(e,t){const{maskAllText:n,maskTextClass:r,unmaskTextClass:o,maskTextSelector:a,unmaskTextSelector:i,maskTextFn:s,maskInputOptions:c,maskInputFn:l,rootId:u}=t,d=e.parentNode&&e.parentNode.tagName;let p=e.textContent;const g="STYLE"===d||void 0,h="SCRIPT"===d||void 0,f="TEXTAREA"===d||void 0;if(g&&p){try{e.nextSibling||e.previousSibling||Zd([e,"access",e=>e.parentNode,"access",e=>e.sheet,"optionalAccess",e=>e.cssRules])&&(p=rp(e.parentNode.sheet))}catch(t){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${t}`,e)}p=Sp(p,Np())}h&&(p="SCRIPT_PLACEHOLDER");const m=Pp(e,r,a,o,i,n);g||h||f||!p||!m||(p=s?s(p,e.parentElement):p.replace(/[\S]/g,"*"));f&&p&&(c.textarea||m)&&(p=l?l(p,e.parentNode):p.replace(/[\S]/g,"*"));if("OPTION"===d&&p){p=sp({isMasked:Pp(e,r,a,o,i,ip({type:null,tagName:d,maskInputOptions:c})),element:e,value:p,maskInputFn:l})}return{type:ep.Text,textContent:p||"",isStyle:g,rootId:u}}(e,{maskAllText:s,maskTextClass:l,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:p,maskTextFn:f,maskInputOptions:h,maskInputFn:m,rootId:S});case e.CDATA_SECTION_NODE:return{type:ep.CDATA,textContent:"",rootId:S};case e.COMMENT_NODE:return{type:ep.Comment,textContent:e.textContent||"",rootId:S};default:return!1}}function kp(e){return null==e?"":e.toLowerCase()}function Dp(e,t){const{doc:n,mirror:r,blockClass:o,blockSelector:a,unblockSelector:i,maskAllText:s,maskTextClass:c,unmaskTextClass:l,maskTextSelector:u,unmaskTextSelector:d,skipChild:p=!1,inlineStylesheet:g=!0,maskInputOptions:h={},maskAttributeFn:f,maskTextFn:m,maskInputFn:_,slimDOMOptions:v,dataURLOptions:T={},inlineImages:y=!1,recordCanvas:E=!1,onSerialize:S,onIframeLoad:I,iframeLoadTimeout:b=5e3,onStylesheetLoad:A,stylesheetLoadTimeout:w=5e3,keepIframeSrcFn:N=()=>!1,newlyAddedElement:O=!1}=t;let{preserveWhiteSpace:R=!0}=t;const L=xp(e,{doc:n,mirror:r,blockClass:o,blockSelector:a,maskAllText:s,unblockSelector:i,maskTextClass:c,unmaskTextClass:l,maskTextSelector:u,unmaskTextSelector:d,inlineStylesheet:g,maskInputOptions:h,maskAttributeFn:f,maskTextFn:m,maskInputFn:_,dataURLOptions:T,inlineImages:y,recordCanvas:E,keepIframeSrcFn:N,newlyAddedElement:O});if(!L)return console.warn(e,"not serialized"),null;let C;C=r.hasNode(e)?r.getId(e):!function(e,t){if(t.comment&&e.type===ep.Comment)return!0;if(e.type===ep.Element){if(t.script&&("script"===e.tagName||"link"===e.tagName&&("preload"===e.attributes.rel||"modulepreload"===e.attributes.rel)&&"script"===e.attributes.as||"link"===e.tagName&&"prefetch"===e.attributes.rel&&"string"==typeof e.attributes.href&&e.attributes.href.endsWith(".js")))return!0;if(t.headFavicon&&("link"===e.tagName&&"shortcut icon"===e.attributes.rel||"meta"===e.tagName&&(kp(e.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===kp(e.attributes.name)||"icon"===kp(e.attributes.rel)||"apple-touch-icon"===kp(e.attributes.rel)||"shortcut icon"===kp(e.attributes.rel))))return!0;if("meta"===e.tagName){if(t.headMetaDescKeywords&&kp(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(kp(e.attributes.property).match(/^(og|twitter|fb):/)||kp(e.attributes.name).match(/^(og|twitter):/)||"pinterest"===kp(e.attributes.name)))return!0;if(t.headMetaRobots&&("robots"===kp(e.attributes.name)||"googlebot"===kp(e.attributes.name)||"bingbot"===kp(e.attributes.name)))return!0;if(t.headMetaHttpEquiv&&void 0!==e.attributes["http-equiv"])return!0;if(t.headMetaAuthorship&&("author"===kp(e.attributes.name)||"generator"===kp(e.attributes.name)||"framework"===kp(e.attributes.name)||"publisher"===kp(e.attributes.name)||"progid"===kp(e.attributes.name)||kp(e.attributes.property).match(/^article:/)||kp(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&("google-site-verification"===kp(e.attributes.name)||"yandex-verification"===kp(e.attributes.name)||"csrf-token"===kp(e.attributes.name)||"p:domain_verify"===kp(e.attributes.name)||"verify-v1"===kp(e.attributes.name)||"verification"===kp(e.attributes.name)||"shopify-checkout-api-token"===kp(e.attributes.name)))return!0}}return!1}(L,v)&&(R||L.type!==ep.Text||L.isStyle||L.textContent.replace(/^\s+|\s+$/gm,"").length)?fp():-2;const P=Object.assign(L,{id:C});if(r.add(e,P),-2===C)return null;S&&S(e);let x=!p;if(P.type===ep.Element){x=x&&!P.needBlock,delete P.needBlock;const t=e.shadowRoot;t&&np(t)&&(P.isShadowHost=!0)}if((P.type===ep.Document||P.type===ep.Element)&&x){v.headWhitespace&&P.type===ep.Element&&"head"===P.tagName&&(R=!1);const t={doc:n,mirror:r,blockClass:o,blockSelector:a,maskAllText:s,unblockSelector:i,maskTextClass:c,unmaskTextClass:l,maskTextSelector:u,unmaskTextSelector:d,skipChild:p,inlineStylesheet:g,maskInputOptions:h,maskAttributeFn:f,maskTextFn:m,maskInputFn:_,slimDOMOptions:v,dataURLOptions:T,inlineImages:y,recordCanvas:E,preserveWhiteSpace:R,onSerialize:S,onIframeLoad:I,iframeLoadTimeout:b,onStylesheetLoad:A,stylesheetLoadTimeout:w,keepIframeSrcFn:N};for(const n of Array.from(e.childNodes)){const e=Dp(n,t);e&&P.childNodes.push(e)}if(function(e){return e.nodeType===e.ELEMENT_NODE}(e)&&e.shadowRoot)for(const n of Array.from(e.shadowRoot.childNodes)){const r=Dp(n,t);r&&(np(e.shadowRoot)&&(r.isShadow=!0),P.childNodes.push(r))}}return e.parentNode&&tp(e.parentNode)&&np(e.parentNode)&&(P.isShadow=!0),P.type===ep.Element&&"iframe"===P.tagName&&function(e,t,n){const r=e.contentWindow;if(!r)return;let o,a=!1;try{o=r.document.readyState}catch(e){return}if("complete"!==o){const r=setTimeout((()=>{a||(t(),a=!0)}),n);return void e.addEventListener("load",(()=>{clearTimeout(r),a=!0,t()}))}const i="about:blank";if(r.location.href!==i||e.src===i||""===e.src)return setTimeout(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}(e,(()=>{const t=e.contentDocument;if(t&&I){const n=Dp(t,{doc:t,mirror:r,blockClass:o,blockSelector:a,unblockSelector:i,maskAllText:s,maskTextClass:c,unmaskTextClass:l,maskTextSelector:u,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:g,maskInputOptions:h,maskAttributeFn:f,maskTextFn:m,maskInputFn:_,slimDOMOptions:v,dataURLOptions:T,inlineImages:y,recordCanvas:E,preserveWhiteSpace:R,onSerialize:S,onIframeLoad:I,iframeLoadTimeout:b,onStylesheetLoad:A,stylesheetLoadTimeout:w,keepIframeSrcFn:N});n&&I(e,n)}}),b),P.type===ep.Element&&"link"===P.tagName&&"stylesheet"===P.attributes.rel&&function(e,t,n){let r,o=!1;try{r=e.sheet}catch(e){return}if(r)return;const a=setTimeout((()=>{o||(t(),o=!0)}),n);e.addEventListener("load",(()=>{clearTimeout(a),o=!0,t()}))}(e,(()=>{if(A){const t=Dp(e,{doc:n,mirror:r,blockClass:o,blockSelector:a,unblockSelector:i,maskAllText:s,maskTextClass:c,unmaskTextClass:l,maskTextSelector:u,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:g,maskInputOptions:h,maskAttributeFn:f,maskTextFn:m,maskInputFn:_,slimDOMOptions:v,dataURLOptions:T,inlineImages:y,recordCanvas:E,preserveWhiteSpace:R,onSerialize:S,onIframeLoad:I,iframeLoadTimeout:b,onStylesheetLoad:A,stylesheetLoadTimeout:w,keepIframeSrcFn:N});t&&A(e,t)}}),w),P}function Up(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],a=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=a(n)):"call"!==o&&"optionalCall"!==o||(n=a(((...e)=>n.call(t,...e))),t=void 0)}return n}function Mp(e,t,n=document){const r={capture:!0,passive:!0};return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}const Gp="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let $p={map:{},getId:()=>(console.error(Gp),-1),getNode:()=>(console.error(Gp),null),removeNodeFromMap(){console.error(Gp)},has:()=>(console.error(Gp),!1),reset(){console.error(Gp)}};function Vp(e,t,n={}){let r=null,o=0;return function(...a){const i=Date.now();o||!1!==n.leading||(o=i);const s=t-(i-o),c=this;s<=0||s>t?(r&&(!function(...e){ig("clearTimeout")(...e)}(r),r=null),o=i,e.apply(c,a)):r||!1===n.trailing||(r=sg((()=>{o=!1===n.leading?0:Date.now(),r=null,e.apply(c,a)}),s))}}function Fp(e,t,n,r,o=window){const a=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,r?n:{set(e){sg((()=>{n.set.call(this,e)}),0),a&&a.set&&a.set.call(this,e)}}),()=>Fp(e,t,a||{},!0)}function jp(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],o=n(r);return"function"==typeof o&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=o,()=>{e[t]=r}}catch(e){return()=>{}}}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&($p=new Proxy($p,{get:(e,t,n)=>("map"===t&&console.error(Gp),Reflect.get(e,t,n))}));let Wp=Date.now;function qp(e){const t=e.document;return{left:t.scrollingElement?t.scrollingElement.scrollLeft:void 0!==e.pageXOffset?e.pageXOffset:Up([t,"optionalAccess",e=>e.documentElement,"access",e=>e.scrollLeft])||Up([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.parentElement,"optionalAccess",e=>e.scrollLeft])||Up([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.scrollLeft])||0,top:t.scrollingElement?t.scrollingElement.scrollTop:void 0!==e.pageYOffset?e.pageYOffset:Up([t,"optionalAccess",e=>e.documentElement,"access",e=>e.scrollTop])||Up([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.parentElement,"optionalAccess",e=>e.scrollTop])||Up([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.scrollTop])||0}}function Bp(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function Hp(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function Jp(e){if(!e)return null;return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}function Yp(e,t,n,r,o){if(!e)return!1;const a=Jp(e);if(!a)return!1;const i=Cp(t,n);if(!o){const e=r&&a.matches(r);return i(a)&&!e}const s=Lp(a,i);let c=-1;return!(s<0)&&(r&&(c=Lp(a,Cp(null,r))),s>-1&&c<0||s<c)}function zp(e,t){return-2===t.getId(e)}function Xp(e,t){if(tp(e))return!1;const n=t.getId(e);return!t.has(n)||(!e.parentNode||e.parentNode.nodeType!==e.DOCUMENT_NODE)&&(!e.parentNode||Xp(e.parentNode,t))}function Kp(e){return Boolean(e.changedTouches)}function Qp(e,t){return Boolean("IFRAME"===e.nodeName&&t.getMeta(e))}function Zp(e,t){return Boolean("LINK"===e.nodeName&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&"stylesheet"===e.getAttribute("rel")&&t.getMeta(e))}function eg(e){return Boolean(Up([e,"optionalAccess",e=>e.shadowRoot]))}/[1-9][0-9]{12}/.test(Date.now().toString())||(Wp=()=>(new Date).getTime());class tg{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(e){return t=this.styleIDMap.get(e),n=()=>-1,null!=t?t:n();var t,n}has(e){return this.styleIDMap.has(e)}add(e,t){if(this.has(e))return this.getId(e);let n;return n=void 0===t?this.id++:t,this.styleIDMap.set(e,n),this.idStyleMap.set(n,e),n}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function ng(e){let t=null;return Up([e,"access",e=>e.getRootNode,"optionalCall",e=>e(),"optionalAccess",e=>e.nodeType])===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(t=e.getRootNode().host),t}function rg(e){const t=e.ownerDocument;if(!t)return!1;const n=function(e){let t,n=e;for(;t=ng(n);)n=t;return n}(e);return t.contains(n)}function og(e){const t=e.ownerDocument;return!!t&&(t.contains(e)||rg(e))}const ag={};function ig(e){const t=ag[e];if(t)return t;const n=window.document;let r=window[e];if(n&&"function"==typeof n.createElement)try{const t=n.createElement("iframe");t.hidden=!0,n.head.appendChild(t);const o=t.contentWindow;o&&o[e]&&(r=o[e]),n.head.removeChild(t)}catch(e){}return ag[e]=r.bind(window)}function sg(...e){return ig("setTimeout")(...e)}var cg=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(cg||{}),lg=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(lg||{}),ug=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(ug||{}),dg=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(dg||{});function pg(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],a=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=a(n)):"call"!==o&&"optionalCall"!==o||(n=a(((...e)=>n.call(t,...e))),t=void 0)}return n}function gg(e){return"__ln"in e}class hg{constructor(){this.length=0,this.head=null,this.tail=null}get(e){if(e>=this.length)throw new Error("Position outside of list range");let t=this.head;for(let n=0;n<e;n++)t=pg([t,"optionalAccess",e=>e.next])||null;return t}addNode(e){const t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&gg(e.previousSibling)){const n=e.previousSibling.__ln.next;t.next=n,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,n&&(n.previous=t)}else if(e.nextSibling&&gg(e.nextSibling)&&e.nextSibling.__ln.previous){const n=e.nextSibling.__ln.previous;t.previous=n,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,n&&(n.next=t)}else this.head&&(this.head.previous=t),t.next=this.head,this.head=t;null===t.next&&(this.tail=t),this.length++}removeNode(e){const t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next,t.next?t.next.previous=t.previous:this.tail=t.previous):(this.head=t.next,this.head?this.head.previous=null:this.tail=null),e.__ln&&delete e.__ln,this.length--)}}const fg=(e,t)=>`${e}@${t}`;class mg{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=e=>{e.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const e=[],t=new Set,n=new hg,r=e=>{let t=e,n=-2;for(;-2===n;)t=t&&t.nextSibling,n=t&&this.mirror.getId(t);return n},o=o=>{if(!o.parentNode||!og(o))return;const a=tp(o.parentNode)?this.mirror.getId(ng(o)):this.mirror.getId(o.parentNode),i=r(o);if(-1===a||-1===i)return n.addNode(o);const s=Dp(o,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:e=>{Qp(e,this.mirror)&&this.iframeManager.addIframe(e),Zp(e,this.mirror)&&this.stylesheetManager.trackLinkElement(e),eg(o)&&this.shadowDomManager.addShadowRoot(o.shadowRoot,this.doc)},onIframeLoad:(e,t)=>{this.iframeManager.attachIframe(e,t),this.shadowDomManager.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{this.stylesheetManager.attachLinkElement(e,t)}});s&&(e.push({parentId:a,nextId:i,node:s}),t.add(s.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const e of this.movedSet)vg(this.removes,e,this.mirror)&&!this.movedSet.has(e.parentNode)||o(e);for(const e of this.addedSet)yg(this.droppedSet,e)||vg(this.removes,e,this.mirror)?yg(this.movedSet,e)?o(e):this.droppedSet.add(e):o(e);let a=null;for(;n.length;){let e=null;if(a){const t=this.mirror.getId(a.value.parentNode),n=r(a.value);-1!==t&&-1!==n&&(e=a)}if(!e){let t=n.tail;for(;t;){const n=t;if(t=t.previous,n){const t=this.mirror.getId(n.value.parentNode);if(-1===r(n.value))continue;if(-1!==t){e=n;break}{const t=n.value;if(t.parentNode&&t.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const r=t.parentNode.host;if(-1!==this.mirror.getId(r)){e=n;break}}}}}}if(!e){for(;n.head;)n.removeNode(n.head.value);break}a=e.previous,n.removeNode(e.value),o(e.value)}const i={texts:this.texts.map((e=>({id:this.mirror.getId(e.node),value:e.value}))).filter((e=>!t.has(e.id))).filter((e=>this.mirror.has(e.id))),attributes:this.attributes.map((e=>{const{attributes:t}=e;if("string"==typeof t.style){const n=JSON.stringify(e.styleDiff),r=JSON.stringify(e._unchangedStyles);n.length<t.style.length&&(n+r).split("var(").length===t.style.split("var(").length&&(t.style=e.styleDiff)}return{id:this.mirror.getId(e.node),attributes:t}})).filter((e=>!t.has(e.id))).filter((e=>this.mirror.has(e.id))),removes:this.removes,adds:e};(i.texts.length||i.attributes.length||i.removes.length||i.adds.length)&&(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(i))},this.processMutation=e=>{if(!zp(e.target,this.mirror))switch(e.type){case"characterData":{const t=e.target.textContent;Yp(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||t===e.oldValue||this.texts.push({value:Pp(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&t?this.maskTextFn?this.maskTextFn(t,Jp(e.target)):t.replace(/[\S]/g,"*"):t,node:e.target});break}case"attributes":{const t=e.target;let n=e.attributeName,r=e.target.getAttribute(n);if("value"===n){const n=dp(t),o=t.tagName;r=pp(t,o,n);const a=ip({maskInputOptions:this.maskInputOptions,tagName:o,type:n});r=sp({isMasked:Pp(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,a),element:t,value:r,maskInputFn:this.maskInputFn})}if(Yp(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||r===e.oldValue)return;let o=this.attributeMap.get(e.target);if("IFRAME"===t.tagName&&"src"===n&&!this.keepIframeSrcFn(r)){if(t.contentDocument)return;n="rr_src"}if(o||(o={node:e.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(o),this.attributeMap.set(e.target,o)),"type"===n&&"INPUT"===t.tagName&&"password"===(e.oldValue||"").toLowerCase()&&t.setAttribute("data-rr-is-password","true"),!Rp(t.tagName,n)&&(o.attributes[n]=Op(this.doc,cp(t.tagName),cp(n),r,t,this.maskAttributeFn),"style"===n)){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch(e){this.unattachedDoc=this.doc}const n=this.unattachedDoc.createElement("span");e.oldValue&&n.setAttribute("style",e.oldValue);for(const e of Array.from(t.style)){const r=t.style.getPropertyValue(e),a=t.style.getPropertyPriority(e);r!==n.style.getPropertyValue(e)||a!==n.style.getPropertyPriority(e)?o.styleDiff[e]=""===a?r:[r,a]:o._unchangedStyles[e]=[r,a]}for(const e of Array.from(n.style))""===t.style.getPropertyValue(e)&&(o.styleDiff[e]=!1)}break}case"childList":if(Yp(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;e.addedNodes.forEach((t=>this.genAdds(t,e.target))),e.removedNodes.forEach((t=>{const n=this.mirror.getId(t),r=tp(e.target)?this.mirror.getId(e.target.host):this.mirror.getId(e.target);Yp(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||zp(t,this.mirror)||!function(e,t){return-1!==t.getId(e)}(t,this.mirror)||(this.addedSet.has(t)?(_g(this.addedSet,t),this.droppedSet.add(t)):this.addedSet.has(e.target)&&-1===n||Xp(e.target,this.mirror)||(this.movedSet.has(t)&&this.movedMap[fg(n,r)]?_g(this.movedSet,t):this.removes.push({parentId:r,id:n,isShadow:!(!tp(e.target)||!np(e.target))||void 0})),this.mapRemoves.push(t))}))}},this.genAdds=(e,t)=>{if(!this.processedNodeManager.inOtherBuffer(e,this)&&!this.addedSet.has(e)&&!this.movedSet.has(e)){if(this.mirror.hasNode(e)){if(zp(e,this.mirror))return;this.movedSet.add(e);let n=null;t&&this.mirror.hasNode(t)&&(n=this.mirror.getId(t)),n&&-1!==n&&(this.movedMap[fg(this.mirror.getId(e),n)]=!0)}else this.addedSet.add(e),this.droppedSet.delete(e);Yp(e,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(e.childNodes.forEach((e=>this.genAdds(e))),eg(e)&&e.shadowRoot.childNodes.forEach((t=>{this.processedNodeManager.add(t,this),this.genAdds(t,e)})))}}}init(e){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach((t=>{this[t]=e[t]}))}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function _g(e,t){e.delete(t),t.childNodes.forEach((t=>_g(e,t)))}function vg(e,t,n){return 0!==e.length&&Tg(e,t,n)}function Tg(e,t,n){const{parentNode:r}=t;if(!r)return!1;const o=n.getId(r);return!!e.some((e=>e.id===o))||Tg(e,r,n)}function yg(e,t){return 0!==e.size&&Eg(e,t)}function Eg(e,t){const{parentNode:n}=t;return!!n&&(!!e.has(n)||Eg(e,n))}let Sg;const Ig=e=>{if(!Sg)return e;return(...t)=>{try{return e(...t)}catch(e){if(Sg&&!0===Sg(e))return()=>{};throw e}}};function bg(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],a=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=a(n)):"call"!==o&&"optionalCall"!==o||(n=a(((...e)=>n.call(t,...e))),t=void 0)}return n}const Ag=[];function wg(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch(e){}return e&&e.target}function Ng(e,t){const n=new mg;Ag.push(n),n.init(e);let r=window.MutationObserver||window.__rrMutationObserver;const o=bg([window,"optionalAccess",e=>e.Zone,"optionalAccess",e=>e.__symbol__,"optionalCall",e=>e("MutationObserver")]);o&&window[o]&&(r=window[o]);const a=new r(Ig((t=>{e.onMutation&&!1===e.onMutation(t)||n.processMutations.bind(n)(t)})));return a.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),a}function Og({mouseInteractionCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:a,sampling:i}){if(!1===i.mouseInteraction)return()=>{};const s=!0===i.mouseInteraction||void 0===i.mouseInteraction?{}:i.mouseInteraction,c=[];let l=null;return Object.keys(ug).filter((e=>Number.isNaN(Number(e))&&!e.endsWith("_Departed")&&!1!==s[e])).forEach((i=>{let s=cp(i);const u=(t=>i=>{const s=wg(i);if(Yp(s,r,o,a,!0))return;let c=null,u=t;if("pointerType"in i){switch(i.pointerType){case"mouse":c=dg.Mouse;break;case"touch":c=dg.Touch;break;case"pen":c=dg.Pen}c===dg.Touch?ug[t]===ug.MouseDown?u="TouchStart":ug[t]===ug.MouseUp&&(u="TouchEnd"):dg.Pen}else Kp(i)&&(c=dg.Touch);null!==c?(l=c,(u.startsWith("Touch")&&c===dg.Touch||u.startsWith("Mouse")&&c===dg.Mouse)&&(c=null)):ug[t]===ug.Click&&(c=l,l=null);const d=Kp(i)?i.changedTouches[0]:i;if(!d)return;const p=n.getId(s),{clientX:g,clientY:h}=d;Ig(e)({type:ug[u],id:p,x:g,y:h,...null!==c&&{pointerType:c}})})(i);if(window.PointerEvent)switch(ug[i]){case ug.MouseDown:case ug.MouseUp:s=s.replace("mouse","pointer");break;case ug.TouchStart:case ug.TouchEnd:return}c.push(Mp(s,u,t))})),Ig((()=>{c.forEach((e=>e()))}))}function Rg({scrollCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:a,sampling:i}){return Mp("scroll",Ig(Vp(Ig((i=>{const s=wg(i);if(!s||Yp(s,r,o,a,!0))return;const c=n.getId(s);if(s===t&&t.defaultView){const n=qp(t.defaultView);e({id:c,x:n.left,y:n.top})}else e({id:c,x:s.scrollLeft,y:s.scrollTop})})),i.scroll||100)),t)}const Lg=["INPUT","TEXTAREA","SELECT"],Cg=new WeakMap;function Pg({inputCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:a,ignoreClass:i,ignoreSelector:s,maskInputOptions:c,maskInputFn:l,sampling:u,userTriggeredOnInput:d,maskTextClass:p,unmaskTextClass:g,maskTextSelector:h,unmaskTextSelector:f}){function m(e){let n=wg(e);const u=e.isTrusted,m=n&&lp(n.tagName);if("OPTION"===m&&(n=n.parentElement),!n||!m||Lg.indexOf(m)<0||Yp(n,r,o,a,!0))return;const v=n;if(v.classList.contains(i)||s&&v.matches(s))return;const T=dp(n);let y=pp(v,m,T),E=!1;const S=ip({maskInputOptions:c,tagName:m,type:T}),I=Pp(n,p,h,g,f,S);"radio"!==T&&"checkbox"!==T||(E=n.checked),y=sp({isMasked:I,element:n,value:y,maskInputFn:l}),_(n,d?{text:y,isChecked:E,userTriggered:u}:{text:y,isChecked:E});const b=n.name;"radio"===T&&b&&E&&t.querySelectorAll(`input[type="radio"][name="${b}"]`).forEach((e=>{if(e!==n){const t=sp({isMasked:I,element:e,value:pp(e,m,T),maskInputFn:l});_(e,d?{text:t,isChecked:!E,userTriggered:!1}:{text:t,isChecked:!E})}}))}function _(t,r){const o=Cg.get(t);if(!o||o.text!==r.text||o.isChecked!==r.isChecked){Cg.set(t,r);const o=n.getId(t);Ig(e)({...r,id:o})}}const v=("last"===u.input?["change"]:["input","change"]).map((e=>Mp(e,Ig(m),t))),T=t.defaultView;if(!T)return()=>{v.forEach((e=>e()))};const y=T.Object.getOwnPropertyDescriptor(T.HTMLInputElement.prototype,"value"),E=[[T.HTMLInputElement.prototype,"value"],[T.HTMLInputElement.prototype,"checked"],[T.HTMLSelectElement.prototype,"value"],[T.HTMLTextAreaElement.prototype,"value"],[T.HTMLSelectElement.prototype,"selectedIndex"],[T.HTMLOptionElement.prototype,"selected"]];return y&&y.set&&v.push(...E.map((e=>Fp(e[0],e[1],{set(){Ig(m)({target:this,isTrusted:!1})}},!1,T)))),Ig((()=>{v.forEach((e=>e()))}))}function xg(e){return function(e,t){if(Mg("CSSGroupingRule")&&e.parentRule instanceof CSSGroupingRule||Mg("CSSMediaRule")&&e.parentRule instanceof CSSMediaRule||Mg("CSSSupportsRule")&&e.parentRule instanceof CSSSupportsRule||Mg("CSSConditionRule")&&e.parentRule instanceof CSSConditionRule){const n=Array.from(e.parentRule.cssRules).indexOf(e);t.unshift(n)}else if(e.parentStyleSheet){const n=Array.from(e.parentStyleSheet.cssRules).indexOf(e);t.unshift(n)}return t}(e,[])}function kg(e,t,n){let r,o;return e?(e.ownerNode?r=t.getId(e.ownerNode):o=n.getId(e),{styleId:o,id:r}):{}}function Dg({mirror:e,stylesheetManager:t},n){let r=null;r="#document"===n.nodeName?e.getId(n):e.getId(n.host);const o="#document"===n.nodeName?bg([n,"access",e=>e.defaultView,"optionalAccess",e=>e.Document]):bg([n,"access",e=>e.ownerDocument,"optionalAccess",e=>e.defaultView,"optionalAccess",e=>e.ShadowRoot]),a=bg([o,"optionalAccess",e=>e.prototype])?Object.getOwnPropertyDescriptor(bg([o,"optionalAccess",e=>e.prototype]),"adoptedStyleSheets"):void 0;return null!==r&&-1!==r&&o&&a?(Object.defineProperty(n,"adoptedStyleSheets",{configurable:a.configurable,enumerable:a.enumerable,get(){return bg([a,"access",e=>e.get,"optionalAccess",e=>e.call,"call",e=>e(this)])},set(e){const n=bg([a,"access",e=>e.set,"optionalAccess",e=>e.call,"call",t=>t(this,e)]);if(null!==r&&-1!==r)try{t.adoptStyleSheets(e,r)}catch(e){}return n}}),Ig((()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:a.configurable,enumerable:a.enumerable,get:a.get,set:a.set})}))):()=>{}}function Ug(e,t={}){const n=e.doc.defaultView;if(!n)return()=>{};const r=Ng(e,e.doc),o=function({mousemoveCb:e,sampling:t,doc:n,mirror:r}){if(!1===t.mousemove)return()=>{};const o="number"==typeof t.mousemove?t.mousemove:50,a="number"==typeof t.mousemoveCallback?t.mousemoveCallback:500;let i,s=[];const c=Vp(Ig((t=>{const n=Date.now()-i;e(s.map((e=>(e.timeOffset-=n,e))),t),s=[],i=null})),a),l=Ig(Vp(Ig((e=>{const t=wg(e),{clientX:n,clientY:o}=Kp(e)?e.changedTouches[0]:e;i||(i=Wp()),s.push({x:n,y:o,id:r.getId(t),timeOffset:Wp()-i}),c("undefined"!=typeof DragEvent&&e instanceof DragEvent?lg.Drag:e instanceof MouseEvent?lg.MouseMove:lg.TouchMove)})),o,{trailing:!1})),u=[Mp("mousemove",l,n),Mp("touchmove",l,n),Mp("drag",l,n)];return Ig((()=>{u.forEach((e=>e()))}))}(e),a=Og(e),i=Rg(e),s=function({viewportResizeCb:e},{win:t}){let n=-1,r=-1;return Mp("resize",Ig(Vp(Ig((()=>{const t=Bp(),o=Hp();n===t&&r===o||(e({width:Number(o),height:Number(t)}),n=t,r=o)})),200)),t)}(e,{win:n}),c=Pg(e),l=function({mediaInteractionCb:e,blockClass:t,blockSelector:n,unblockSelector:r,mirror:o,sampling:a,doc:i}){const s=Ig((i=>Vp(Ig((a=>{const s=wg(a);if(!s||Yp(s,t,n,r,!0))return;const{currentTime:c,volume:l,muted:u,playbackRate:d}=s;e({type:i,id:o.getId(s),currentTime:c,volume:l,muted:u,playbackRate:d})})),a.media||500))),c=[Mp("play",s(0),i),Mp("pause",s(1),i),Mp("seeked",s(2),i),Mp("volumechange",s(3),i),Mp("ratechange",s(4),i)];return Ig((()=>{c.forEach((e=>e()))}))}(e),u=function({styleSheetRuleCb:e,mirror:t,stylesheetManager:n},{win:r}){if(!r.CSSStyleSheet||!r.CSSStyleSheet.prototype)return()=>{};const o=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=new Proxy(o,{apply:Ig(((r,o,a)=>{const[i,s]=a,{id:c,styleId:l}=kg(o,t,n.styleMirror);return(c&&-1!==c||l&&-1!==l)&&e({id:c,styleId:l,adds:[{rule:i,index:s}]}),r.apply(o,a)}))});const a=r.CSSStyleSheet.prototype.deleteRule;let i,s;r.CSSStyleSheet.prototype.deleteRule=new Proxy(a,{apply:Ig(((r,o,a)=>{const[i]=a,{id:s,styleId:c}=kg(o,t,n.styleMirror);return(s&&-1!==s||c&&-1!==c)&&e({id:s,styleId:c,removes:[{index:i}]}),r.apply(o,a)}))}),r.CSSStyleSheet.prototype.replace&&(i=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=new Proxy(i,{apply:Ig(((r,o,a)=>{const[i]=a,{id:s,styleId:c}=kg(o,t,n.styleMirror);return(s&&-1!==s||c&&-1!==c)&&e({id:s,styleId:c,replace:i}),r.apply(o,a)}))})),r.CSSStyleSheet.prototype.replaceSync&&(s=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=new Proxy(s,{apply:Ig(((r,o,a)=>{const[i]=a,{id:s,styleId:c}=kg(o,t,n.styleMirror);return(s&&-1!==s||c&&-1!==c)&&e({id:s,styleId:c,replaceSync:i}),r.apply(o,a)}))}));const c={};Gg("CSSGroupingRule")?c.CSSGroupingRule=r.CSSGroupingRule:(Gg("CSSMediaRule")&&(c.CSSMediaRule=r.CSSMediaRule),Gg("CSSConditionRule")&&(c.CSSConditionRule=r.CSSConditionRule),Gg("CSSSupportsRule")&&(c.CSSSupportsRule=r.CSSSupportsRule));const l={};return Object.entries(c).forEach((([r,o])=>{l[r]={insertRule:o.prototype.insertRule,deleteRule:o.prototype.deleteRule},o.prototype.insertRule=new Proxy(l[r].insertRule,{apply:Ig(((r,o,a)=>{const[i,s]=a,{id:c,styleId:l}=kg(o.parentStyleSheet,t,n.styleMirror);return(c&&-1!==c||l&&-1!==l)&&e({id:c,styleId:l,adds:[{rule:i,index:[...xg(o),s||0]}]}),r.apply(o,a)}))}),o.prototype.deleteRule=new Proxy(l[r].deleteRule,{apply:Ig(((r,o,a)=>{const[i]=a,{id:s,styleId:c}=kg(o.parentStyleSheet,t,n.styleMirror);return(s&&-1!==s||c&&-1!==c)&&e({id:s,styleId:c,removes:[{index:[...xg(o),i]}]}),r.apply(o,a)}))})})),Ig((()=>{r.CSSStyleSheet.prototype.insertRule=o,r.CSSStyleSheet.prototype.deleteRule=a,i&&(r.CSSStyleSheet.prototype.replace=i),s&&(r.CSSStyleSheet.prototype.replaceSync=s),Object.entries(c).forEach((([e,t])=>{t.prototype.insertRule=l[e].insertRule,t.prototype.deleteRule=l[e].deleteRule}))}))}(e,{win:n}),d=Dg(e,e.doc),p=function({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:n,stylesheetManager:r},{win:o}){const a=o.CSSStyleDeclaration.prototype.setProperty;o.CSSStyleDeclaration.prototype.setProperty=new Proxy(a,{apply:Ig(((o,i,s)=>{const[c,l,u]=s;if(n.has(c))return a.apply(i,[c,l,u]);const{id:d,styleId:p}=kg(bg([i,"access",e=>e.parentRule,"optionalAccess",e=>e.parentStyleSheet]),t,r.styleMirror);return(d&&-1!==d||p&&-1!==p)&&e({id:d,styleId:p,set:{property:c,value:l,priority:u},index:xg(i.parentRule)}),o.apply(i,s)}))});const i=o.CSSStyleDeclaration.prototype.removeProperty;return o.CSSStyleDeclaration.prototype.removeProperty=new Proxy(i,{apply:Ig(((o,a,s)=>{const[c]=s;if(n.has(c))return i.apply(a,[c]);const{id:l,styleId:u}=kg(bg([a,"access",e=>e.parentRule,"optionalAccess",e=>e.parentStyleSheet]),t,r.styleMirror);return(l&&-1!==l||u&&-1!==u)&&e({id:l,styleId:u,remove:{property:c},index:xg(a.parentRule)}),o.apply(a,s)}))}),Ig((()=>{o.CSSStyleDeclaration.prototype.setProperty=a,o.CSSStyleDeclaration.prototype.removeProperty=i}))}(e,{win:n}),g=e.collectFonts?function({fontCb:e,doc:t}){const n=t.defaultView;if(!n)return()=>{};const r=[],o=new WeakMap,a=n.FontFace;n.FontFace=function(e,t,n){const r=new a(e,t,n);return o.set(r,{family:e,buffer:"string"!=typeof t,descriptors:n,fontSource:"string"==typeof t?t:JSON.stringify(Array.from(new Uint8Array(t)))}),r};const i=jp(t.fonts,"add",(function(t){return function(n){return sg(Ig((()=>{const t=o.get(n);t&&(e(t),o.delete(n))})),0),t.apply(this,[n])}}));return r.push((()=>{n.FontFace=a})),r.push(i),Ig((()=>{r.forEach((e=>e()))}))}(e):()=>{},h=function(e){const{doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:a,selectionCb:i}=e;let s=!0;const c=Ig((()=>{const e=t.getSelection();if(!e||s&&bg([e,"optionalAccess",e=>e.isCollapsed]))return;s=e.isCollapsed||!1;const c=[],l=e.rangeCount||0;for(let t=0;t<l;t++){const i=e.getRangeAt(t),{startContainer:s,startOffset:l,endContainer:u,endOffset:d}=i;Yp(s,r,o,a,!0)||Yp(u,r,o,a,!0)||c.push({start:n.getId(s),startOffset:l,end:n.getId(u),endOffset:d})}i({ranges:c})}));return c(),Mp("selectionchange",c)}(e),f=function({doc:e,customElementCb:t}){const n=e.defaultView;return n&&n.customElements?jp(n.customElements,"define",(function(e){return function(n,r,o){try{t({define:{name:n}})}catch(e){}return e.apply(this,[n,r,o])}})):()=>{}}(e),m=[];for(const t of e.plugins)m.push(t.observer(t.callback,n,t.options));return Ig((()=>{Ag.forEach((e=>e.reset())),r.disconnect(),o(),a(),i(),s(),c(),l(),u(),d(),p(),g(),h(),f(),m.forEach((e=>e()))}))}function Mg(e){return void 0!==window[e]}function Gg(e){return Boolean(void 0!==window[e]&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class $g{constructor(e){this.generateIdFn=e,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(e,t,n,r){const o=n||this.getIdToRemoteIdMap(e),a=r||this.getRemoteIdToIdMap(e);let i=o.get(t);return i||(i=this.generateIdFn(),o.set(t,i),a.set(i,t)),i}getIds(e,t){const n=this.getIdToRemoteIdMap(e),r=this.getRemoteIdToIdMap(e);return t.map((t=>this.getId(e,t,n,r)))}getRemoteId(e,t,n){const r=n||this.getRemoteIdToIdMap(e);if("number"!=typeof t)return t;const o=r.get(t);return o||-1}getRemoteIds(e,t){const n=this.getRemoteIdToIdMap(e);return t.map((t=>this.getRemoteId(e,t,n)))}reset(e){if(!e)return this.iframeIdToRemoteIdMap=new WeakMap,void(this.iframeRemoteIdToIdMap=new WeakMap);this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}getIdToRemoteIdMap(e){let t=this.iframeIdToRemoteIdMap.get(e);return t||(t=new Map,this.iframeIdToRemoteIdMap.set(e,t)),t}getRemoteIdToIdMap(e){let t=this.iframeRemoteIdToIdMap.get(e);return t||(t=new Map,this.iframeRemoteIdToIdMap.set(e,t)),t}}function Vg(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],a=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=a(n)):"call"!==o&&"optionalCall"!==o||(n=a(((...e)=>n.call(t,...e))),t=void 0)}return n}class Fg{constructor(){this.crossOriginIframeMirror=new $g(fp),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}class jg{constructor(e){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new $g(fp),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new $g(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}addLoadListener(e){this.loadListener=e}attachIframe(e,t){this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),Vg([this,"access",e=>e.loadListener,"optionalCall",t=>t(e)]),e.contentDocument&&e.contentDocument.adoptedStyleSheets&&e.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(e.contentDocument.adoptedStyleSheets,this.mirror.getId(e.contentDocument))}handleMessage(e){const t=e;if("rrweb"!==t.data.type||t.origin!==t.data.origin)return;if(!e.source)return;const n=this.crossOriginIframeMap.get(e.source);if(!n)return;const r=this.transformCrossOriginEvent(n,t.data.event);r&&this.wrappedEmit(r,t.data.isCheckout)}transformCrossOriginEvent(e,t){switch(t.type){case cg.FullSnapshot:{this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(t.data.node,e);const n=t.data.node.id;return this.crossOriginIframeRootIdMap.set(e,n),this.patchRootIdOnNode(t.data.node,n),{timestamp:t.timestamp,type:cg.IncrementalSnapshot,data:{source:lg.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:t.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case cg.Meta:case cg.Load:case cg.DomContentLoaded:return!1;case cg.Plugin:return t;case cg.Custom:return this.replaceIds(t.data.payload,e,["id","parentId","previousId","nextId"]),t;case cg.IncrementalSnapshot:switch(t.data.source){case lg.Mutation:return t.data.adds.forEach((t=>{this.replaceIds(t,e,["parentId","nextId","previousId"]),this.replaceIdOnNode(t.node,e);const n=this.crossOriginIframeRootIdMap.get(e);n&&this.patchRootIdOnNode(t.node,n)})),t.data.removes.forEach((t=>{this.replaceIds(t,e,["parentId","id"])})),t.data.attributes.forEach((t=>{this.replaceIds(t,e,["id"])})),t.data.texts.forEach((t=>{this.replaceIds(t,e,["id"])})),t;case lg.Drag:case lg.TouchMove:case lg.MouseMove:return t.data.positions.forEach((t=>{this.replaceIds(t,e,["id"])})),t;case lg.ViewportResize:return!1;case lg.MediaInteraction:case lg.MouseInteraction:case lg.Scroll:case lg.CanvasMutation:case lg.Input:return this.replaceIds(t.data,e,["id"]),t;case lg.StyleSheetRule:case lg.StyleDeclaration:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleId"]),t;case lg.Font:return t;case lg.Selection:return t.data.ranges.forEach((t=>{this.replaceIds(t,e,["start","end"])})),t;case lg.AdoptedStyleSheet:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleIds"]),Vg([t,"access",e=>e.data,"access",e=>e.styles,"optionalAccess",e=>e.forEach,"call",t=>t((t=>{this.replaceStyleIds(t,e,["styleId"])}))]),t}}return!1}replace(e,t,n,r){for(const o of r)(Array.isArray(t[o])||"number"==typeof t[o])&&(Array.isArray(t[o])?t[o]=e.getIds(n,t[o]):t[o]=e.getId(n,t[o]));return t}replaceIds(e,t,n){return this.replace(this.crossOriginIframeMirror,e,t,n)}replaceStyleIds(e,t,n){return this.replace(this.crossOriginIframeStyleMirror,e,t,n)}replaceIdOnNode(e,t){this.replaceIds(e,t,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach((e=>{this.replaceIdOnNode(e,t)}))}patchRootIdOnNode(e,t){e.type===ep.Document||e.rootId||(e.rootId=t),"childNodes"in e&&e.childNodes.forEach((e=>{this.patchRootIdOnNode(e,t)}))}}class Wg{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class qg{constructor(e){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(e,t){if(!np(e))return;if(this.shadowDoms.has(e))return;this.shadowDoms.add(e);const n=Ng({...this.bypassOptions,doc:t,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},e);this.restoreHandlers.push((()=>n.disconnect())),this.restoreHandlers.push(Rg({...this.bypassOptions,scrollCb:this.scrollCb,doc:e,mirror:this.mirror})),sg((()=>{e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,this.mirror.getId(e.host)),this.restoreHandlers.push(Dg({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},e))}),0)}observeAttachShadow(e){e.contentWindow&&e.contentDocument&&this.patchAttachShadow(e.contentWindow.Element,e.contentDocument)}patchAttachShadow(e,t){const n=this;this.restoreHandlers.push(jp(e.prototype,"attachShadow",(function(e){return function(r){const o=e.call(this,r);return this.shadowRoot&&og(this)&&n.addShadowRoot(this.shadowRoot,t),o}})))}reset(){this.restoreHandlers.forEach((e=>{try{e()}catch(e){}})),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}class Bg{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}}class Hg{constructor(e){this.trackedLinkElements=new WeakSet,this.styleMirror=new tg,this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}attachLinkElement(e,t){"_cssText"in t.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:t.attributes}]}),this.trackLinkElement(e)}trackLinkElement(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}adoptStyleSheets(e,t){if(0===e.length)return;const n={id:t,styleIds:[]},r=[];for(const t of e){let e;this.styleMirror.has(t)?e=this.styleMirror.getId(t):(e=this.styleMirror.add(t),r.push({styleId:e,rules:Array.from(t.rules||CSSRule,((e,t)=>({rule:op(e),index:t})))})),n.styleIds.push(e)}r.length>0&&(n.styles=r),this.adoptedStyleSheetCb(n)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(e){}}class Jg{constructor(){this.nodeMap=new WeakMap,this.loop=!0,this.periodicallyClear()}periodicallyClear(){!function(...e){ig("requestAnimationFrame")(...e)}((()=>{this.clear(),this.loop&&this.periodicallyClear()}))}inOtherBuffer(e,t){const n=this.nodeMap.get(e);return n&&Array.from(n).some((e=>e!==t))}add(e,t){this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(t))}clear(){this.nodeMap=new WeakMap}destroy(){this.loop=!1}}let Yg,zg;const Xg=new ap;function Kg(e={}){const{emit:t,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:o="rr-block",blockSelector:a=null,unblockSelector:i=null,ignoreClass:s="rr-ignore",ignoreSelector:c=null,maskAllText:l=!1,maskTextClass:u="rr-mask",unmaskTextClass:d=null,maskTextSelector:p=null,unmaskTextSelector:g=null,inlineStylesheet:h=!0,maskAllInputs:f,maskInputOptions:m,slimDOMOptions:_,maskAttributeFn:v,maskInputFn:T,maskTextFn:y,maxCanvasSize:E=null,packFn:S,sampling:I={},dataURLOptions:b={},mousemoveWait:A,recordCanvas:w=!1,recordCrossOriginIframes:N=!1,recordAfter:O=("DOMContentLoaded"===e.recordAfter?e.recordAfter:"load"),userTriggeredOnInput:R=!1,collectFonts:L=!1,inlineImages:C=!1,plugins:P,keepIframeSrcFn:x=()=>!1,ignoreCSSAttributes:k=new Set([]),errorHandler:D,onMutation:U,getCanvasManager:M}=e;Sg=D;const G=!N||window.parent===window;let $=!1;if(!G)try{window.parent.document&&($=!1)}catch(e){$=!0}if(G&&!t)throw new Error("emit function is required");void 0!==A&&void 0===I.mousemove&&(I.mousemove=A),Xg.reset();const V=!0===f?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:void 0!==m?m:{},F=!0===_||"all"===_?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===_,headMetaDescKeywords:"all"===_}:_||{};let j;!function(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...e)=>{let t=e[0];if(!(0 in e))throw new TypeError("1 argument is required");do{if(this===t)return!0}while(t=t&&t.parentNode);return!1})}();let W=0;const q=e=>{for(const t of P||[])t.eventProcessor&&(e=t.eventProcessor(e));return S&&!$&&(e=S(e)),e};Yg=(e,o)=>{const a=e;if(a.timestamp=Wp(),!bi([Ag,"access",e=>e[0],"optionalAccess",e=>e.isFrozen,"call",e=>e()])||a.type===cg.FullSnapshot||a.type===cg.IncrementalSnapshot&&a.data.source===lg.Mutation||Ag.forEach((e=>e.unfreeze())),G)bi([t,"optionalCall",e=>e(q(a),o)]);else if($){const e={type:"rrweb",event:q(a),origin:window.location.origin,isCheckout:o};window.parent.postMessage(e,"*")}if(a.type===cg.FullSnapshot)j=a,W=0;else if(a.type===cg.IncrementalSnapshot){if(a.data.source===lg.Mutation&&a.data.isAttachIframe)return;W++;const e=r&&W>=r,t=n&&j&&a.timestamp-j.timestamp>n;(e||t)&&Z(!0)}};const B=e=>{Yg({type:cg.IncrementalSnapshot,data:{source:lg.Mutation,...e}})},H=e=>Yg({type:cg.IncrementalSnapshot,data:{source:lg.Scroll,...e}}),J=e=>Yg({type:cg.IncrementalSnapshot,data:{source:lg.CanvasMutation,...e}}),Y=new Hg({mutationCb:B,adoptedStyleSheetCb:e=>Yg({type:cg.IncrementalSnapshot,data:{source:lg.AdoptedStyleSheet,...e}})}),z="boolean"==typeof __RRWEB_EXCLUDE_IFRAME__&&__RRWEB_EXCLUDE_IFRAME__?new Fg:new jg({mirror:Xg,mutationCb:B,stylesheetManager:Y,recordCrossOriginIframes:N,wrappedEmit:Yg});for(const e of P||[])e.getMirror&&e.getMirror({nodeMirror:Xg,crossOriginIframeMirror:z.crossOriginIframeMirror,crossOriginIframeStyleMirror:z.crossOriginIframeStyleMirror});const X=new Jg,K=function(e,t){try{return e?e(t):new Bg}catch(e){return console.warn("Unable to initialize CanvasManager"),new Bg}}(M,{mirror:Xg,win:window,mutationCb:e=>Yg({type:cg.IncrementalSnapshot,data:{source:lg.CanvasMutation,...e}}),recordCanvas:w,blockClass:o,blockSelector:a,unblockSelector:i,maxCanvasSize:E,sampling:I.canvas,dataURLOptions:b,errorHandler:D}),Q="boolean"==typeof __RRWEB_EXCLUDE_SHADOW_DOM__&&__RRWEB_EXCLUDE_SHADOW_DOM__?new Wg:new qg({mutationCb:B,scrollCb:H,bypassOptions:{onMutation:U,blockClass:o,blockSelector:a,unblockSelector:i,maskAllText:l,maskTextClass:u,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:g,inlineStylesheet:h,maskInputOptions:V,dataURLOptions:b,maskAttributeFn:v,maskTextFn:y,maskInputFn:T,recordCanvas:w,inlineImages:C,sampling:I,slimDOMOptions:F,iframeManager:z,stylesheetManager:Y,canvasManager:K,keepIframeSrcFn:x,processedNodeManager:X},mirror:Xg}),Z=(e=!1)=>{Yg({type:cg.Meta,data:{href:window.location.href,width:Hp(),height:Bp()}},e),Y.reset(),Q.init(),Ag.forEach((e=>e.lock()));const t=function(e,t){const{mirror:n=new ap,blockClass:r="rr-block",blockSelector:o=null,unblockSelector:a=null,maskAllText:i=!1,maskTextClass:s="rr-mask",unmaskTextClass:c=null,maskTextSelector:l=null,unmaskTextSelector:u=null,inlineStylesheet:d=!0,inlineImages:p=!1,recordCanvas:g=!1,maskAllInputs:h=!1,maskAttributeFn:f,maskTextFn:m,maskInputFn:_,slimDOM:v=!1,dataURLOptions:T,preserveWhiteSpace:y,onSerialize:E,onIframeLoad:S,iframeLoadTimeout:I,onStylesheetLoad:b,stylesheetLoadTimeout:A,keepIframeSrcFn:w=()=>!1}=t;return Dp(e,{doc:e,mirror:n,blockClass:r,blockSelector:o,unblockSelector:a,maskAllText:i,maskTextClass:s,unmaskTextClass:c,maskTextSelector:l,unmaskTextSelector:u,skipChild:!1,inlineStylesheet:d,maskInputOptions:!0===h?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:!1===h?{}:h,maskAttributeFn:f,maskTextFn:m,maskInputFn:_,slimDOMOptions:!0===v||"all"===v?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===v,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===v?{}:v,dataURLOptions:T,inlineImages:p,recordCanvas:g,preserveWhiteSpace:y,onSerialize:E,onIframeLoad:S,iframeLoadTimeout:I,onStylesheetLoad:b,stylesheetLoadTimeout:A,keepIframeSrcFn:w,newlyAddedElement:!1})}(document,{mirror:Xg,blockClass:o,blockSelector:a,unblockSelector:i,maskAllText:l,maskTextClass:u,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:g,inlineStylesheet:h,maskAllInputs:V,maskAttributeFn:v,maskInputFn:T,maskTextFn:y,slimDOM:F,dataURLOptions:b,recordCanvas:w,inlineImages:C,onSerialize:e=>{Qp(e,Xg)&&z.addIframe(e),Zp(e,Xg)&&Y.trackLinkElement(e),eg(e)&&Q.addShadowRoot(e.shadowRoot,document)},onIframeLoad:(e,t)=>{z.attachIframe(e,t),Q.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{Y.attachLinkElement(e,t)},keepIframeSrcFn:x});if(!t)return console.warn("Failed to snapshot the document");Yg({type:cg.FullSnapshot,data:{node:t,initialOffset:qp(window)}}),Ag.forEach((e=>e.unlock())),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&Y.adoptStyleSheets(document.adoptedStyleSheets,Xg.getId(document))};zg=Z;try{const e=[],t=e=>Ig(Ug)({onMutation:U,mutationCb:B,mousemoveCb:(e,t)=>Yg({type:cg.IncrementalSnapshot,data:{source:t,positions:e}}),mouseInteractionCb:e=>Yg({type:cg.IncrementalSnapshot,data:{source:lg.MouseInteraction,...e}}),scrollCb:H,viewportResizeCb:e=>Yg({type:cg.IncrementalSnapshot,data:{source:lg.ViewportResize,...e}}),inputCb:e=>Yg({type:cg.IncrementalSnapshot,data:{source:lg.Input,...e}}),mediaInteractionCb:e=>Yg({type:cg.IncrementalSnapshot,data:{source:lg.MediaInteraction,...e}}),styleSheetRuleCb:e=>Yg({type:cg.IncrementalSnapshot,data:{source:lg.StyleSheetRule,...e}}),styleDeclarationCb:e=>Yg({type:cg.IncrementalSnapshot,data:{source:lg.StyleDeclaration,...e}}),canvasMutationCb:J,fontCb:e=>Yg({type:cg.IncrementalSnapshot,data:{source:lg.Font,...e}}),selectionCb:e=>{Yg({type:cg.IncrementalSnapshot,data:{source:lg.Selection,...e}})},customElementCb:e=>{Yg({type:cg.IncrementalSnapshot,data:{source:lg.CustomElement,...e}})},blockClass:o,ignoreClass:s,ignoreSelector:c,maskAllText:l,maskTextClass:u,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:g,maskInputOptions:V,inlineStylesheet:h,sampling:I,recordCanvas:w,inlineImages:C,userTriggeredOnInput:R,collectFonts:L,doc:e,maskAttributeFn:v,maskInputFn:T,maskTextFn:y,keepIframeSrcFn:x,blockSelector:a,unblockSelector:i,slimDOMOptions:F,dataURLOptions:b,mirror:Xg,iframeManager:z,stylesheetManager:Y,shadowDomManager:Q,processedNodeManager:X,canvasManager:K,ignoreCSSAttributes:k,plugins:bi([P,"optionalAccess",e=>e.filter,"call",e=>e((e=>e.observer)),"optionalAccess",e=>e.map,"call",e=>e((e=>({observer:e.observer,options:e.options,callback:t=>Yg({type:cg.Plugin,data:{plugin:e.name,payload:t}})})))])||[]},{});z.addLoadListener((n=>{try{e.push(t(n.contentDocument))}catch(e){console.warn(e)}}));const n=()=>{Z(),e.push(t(document))};return"interactive"===document.readyState||"complete"===document.readyState?n():(e.push(Mp("DOMContentLoaded",(()=>{Yg({type:cg.DomContentLoaded,data:{}}),"DOMContentLoaded"===O&&n()}))),e.push(Mp("load",(()=>{Yg({type:cg.Load,data:{}}),"load"===O&&n()}),window))),()=>{e.forEach((e=>e())),X.destroy(),zg=void 0,Sg=void 0}}catch(e){console.warn(e)}}Kg.mirror=Xg,Kg.takeFullSnapshot=function(e){if(!zg)throw new Error("please take full snapshot after start recording");zg(e)};function Qg(e){return e>9999999999?e:1e3*e}function Zg(e){return e>9999999999?e/1e3:e}function eh(e,t){"sentry.transaction"!==t.category&&(["ui.click","ui.input"].includes(t.category)?e.triggerUserActivity():e.checkAndHandleExpiredSession(),e.addUpdate((()=>(e.throttledAddEvent({type:cg.Custom,timestamp:1e3*(t.timestamp||0),data:{tag:"breadcrumb",payload:Ua(t,10,1e3)}}),"console"===t.category))))}function th(e){return e.closest("button,a")||e}function nh(e){const t=rh(e);return t&&t instanceof Element?th(t):t}function rh(e){return function(e){return"object"==typeof e&&!!e&&"target"in e}(e)?e.target:e}let oh;function ah(e){return oh||(oh=[],Lo(Hd,"open",(function(e){return function(...t){if(oh)try{oh.forEach((e=>e()))}catch(e){}return e.apply(Hd,t)}}))),oh.push(e),()=>{const t=oh?oh.indexOf(e):-1;t>-1&&oh.splice(t,1)}}class ih{constructor(e,t,n=eh){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=t.timeout/1e3,this._threshold=t.threshold/1e3,this._scollTimeout=t.scrollTimeout/1e3,this._replay=e,this._ignoreSelector=t.ignoreSelector,this._addBreadcrumbEvent=n}addListeners(){const e=ah((()=>{this._lastMutation=ch()}));this._teardown=()=>{e(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(e,t){if(function(e,t){if(!sh.includes(e.tagName))return!0;if("INPUT"===e.tagName&&!["submit","button"].includes(e.getAttribute("type")||""))return!0;if("A"===e.tagName&&(e.hasAttribute("download")||e.hasAttribute("target")&&"_self"!==e.getAttribute("target")))return!0;if(t&&e.matches(t))return!0;return!1}(t,this._ignoreSelector)||!function(e){return!(!e.data||"number"!=typeof e.data.nodeId||!e.timestamp)}(e))return;const n={timestamp:Zg(e.timestamp),clickBreadcrumb:e,clickCount:0,node:t};this._clicks.some((e=>e.node===n.node&&Math.abs(e.timestamp-n.timestamp)<1))||(this._clicks.push(n),1===this._clicks.length&&this._scheduleCheckClicks())}registerMutation(e=Date.now()){this._lastMutation=Zg(e)}registerScroll(e=Date.now()){this._lastScroll=Zg(e)}registerClick(e){const t=th(e);this._handleMultiClick(t)}_handleMultiClick(e){this._getClicks(e).forEach((e=>{e.clickCount++}))}_getClicks(e){return this._clicks.filter((t=>t.node===e))}_checkClicks(){const e=[],t=ch();this._clicks.forEach((n=>{!n.mutationAfter&&this._lastMutation&&(n.mutationAfter=n.timestamp<=this._lastMutation?this._lastMutation-n.timestamp:void 0),!n.scrollAfter&&this._lastScroll&&(n.scrollAfter=n.timestamp<=this._lastScroll?this._lastScroll-n.timestamp:void 0),n.timestamp+this._timeout<=t&&e.push(n)}));for(const t of e){const e=this._clicks.indexOf(t);e>-1&&(this._generateBreadcrumbs(t),this._clicks.splice(e,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(e){const t=this._replay,n=e.scrollAfter&&e.scrollAfter<=this._scollTimeout,r=e.mutationAfter&&e.mutationAfter<=this._threshold,o=!n&&!r,{clickCount:a,clickBreadcrumb:i}=e;if(o){const n=1e3*Math.min(e.mutationAfter||this._timeout,this._timeout),r=n<1e3*this._timeout?"mutation":"timeout",o={type:"default",message:i.message,timestamp:i.timestamp,category:"ui.slowClickDetected",data:{...i.data,url:Hd.location.href,route:t.getCurrentRoute(),timeAfterClickMs:n,endReason:r,clickCount:a||1}};this._addBreadcrumbEvent(t,o)}else if(a>1){const e={type:"default",message:i.message,timestamp:i.timestamp,category:"ui.multiClick",data:{...i.data,url:Hd.location.href,route:t.getCurrentRoute(),clickCount:a,metric:!0}};this._addBreadcrumbEvent(t,e)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=setTimeout((()=>this._checkClicks()),1e3)}}const sh=["A","BUTTON","INPUT"];function ch(){return Date.now()/1e3}function lh(e,t){try{if(!function(e){return 3===e.type}(t))return;const{source:n}=t.data;if(n===lg.Mutation&&e.registerMutation(t.timestamp),n===lg.Scroll&&e.registerScroll(t.timestamp),function(e){return e.data.source===lg.MouseInteraction}(t)){const{type:n,id:r}=t.data,o=Kg.mirror.getNode(r);o instanceof HTMLElement&&n===ug.Click&&e.registerClick(o)}}catch(e){}}function uh(e){return{timestamp:Date.now()/1e3,type:"default",...e}}var dh;!function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(dh||(dh={}));const ph=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function gh(e){const t={};for(const n in e)if(ph.has(n)){let r=n;"data-testid"!==n&&"data-test-id"!==n||(r="testId"),t[r]=e[n]}return t}const hh=e=>t=>{if(!e.isEnabled())return;const n=function(e){const{target:t,message:n}=function(e){const t="click"===e.name;let n,r=null;try{r=t?nh(e.event):rh(e.event),n=ho(r,{maxStringLength:200})||"<unknown>"}catch(e){n="<unknown>"}return{target:r,message:n}}(e);return uh({category:`ui.${e.name}`,...fh(t,n)})}(t);if(!n)return;const r="click"===t.name,o=r?t.event:void 0;var a,i,s;!(r&&e.clickDetector&&o&&o.target)||o.altKey||o.metaKey||o.ctrlKey||o.shiftKey||(a=e.clickDetector,i=n,s=nh(t.event),a.handleClick(i,s)),eh(e,n)};function fh(e,t){const n=Kg.mirror.getId(e),r=n&&Kg.mirror.getNode(n),o=r&&Kg.mirror.getMeta(r),a=o&&function(e){return e.type===dh.Element}(o)?o:null;return{message:t,data:a?{nodeId:n,node:{id:n,tagName:a.tagName,textContent:Array.from(a.childNodes).map((e=>e.type===dh.Text&&e.textContent)).filter(Boolean).map((e=>e.trim())).join(""),attributes:gh(a.attributes)}}:{}}}function mh(e,t){if(!e.isEnabled())return;e.updateUserActivity();const n=function(e){const{metaKey:t,shiftKey:n,ctrlKey:r,altKey:o,key:a,target:i}=e;if(!i||function(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||e.isContentEditable}(i)||!a)return null;const s=t||r||o,c=1===a.length;if(!s&&c)return null;const l=ho(i,{maxStringLength:200})||"<unknown>",u=fh(i,l);return uh({category:"ui.keyDown",message:l,data:{...u.data,metaKey:t,shiftKey:n,ctrlKey:r,altKey:o,key:a}})}(t);n&&eh(e,n)}const _h={resource:function(e){const{entryType:t,initiatorType:n,name:r,responseEnd:o,startTime:a,decodedBodySize:i,encodedBodySize:s,responseStatus:c,transferSize:l}=e;if(["fetch","xmlhttprequest"].includes(n))return null;return{type:`${t}.${n}`,start:Th(a),end:Th(o),name:r,data:{size:l,statusCode:c,decodedBodySize:i,encodedBodySize:s}}},paint:function(e){const{duration:t,entryType:n,name:r,startTime:o}=e,a=Th(o);return{type:n,name:r,start:a,end:a+t,data:void 0}},navigation:function(e){const{entryType:t,name:n,decodedBodySize:r,duration:o,domComplete:a,encodedBodySize:i,domContentLoadedEventStart:s,domContentLoadedEventEnd:c,domInteractive:l,loadEventStart:u,loadEventEnd:d,redirectCount:p,startTime:g,transferSize:h,type:f}=e;if(0===o)return null;return{type:`${t}.${f}`,start:Th(g),end:Th(a),name:n,data:{size:h,decodedBodySize:r,encodedBodySize:i,duration:o,domInteractive:l,domContentLoadedEventStart:s,domContentLoadedEventEnd:c,loadEventStart:u,loadEventEnd:d,domComplete:a,redirectCount:p}}}};function vh(e){return _h[e.entryType]?_h[e.entryType](e):null}function Th(e){return((Za||Hd.performance.timeOrigin)+e)/1e3}function yh(e){function t(t){e.performanceEntries.includes(t)||e.performanceEntries.push(t)}function n({entries:e}){e.forEach(t)}const r=[];return["navigation","paint","resource"].forEach((e=>{r.push(Vl(e,n))})),r.push($l((({metric:t})=>{e.replayPerformanceEntries.push(function(e){const t=e.entries,n=t[t.length-1],r=n?n.element:void 0,o=e.value,a=Th(o);return{type:"largest-contentful-paint",name:"largest-contentful-paint",start:a,end:a,data:{value:o,size:o,nodeId:r?Kg.mirror.getId(r):void 0}}}(t))}))),()=>{r.forEach((e=>e()))}}const Eh="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function Sh(e,t){Eh&&(Io.info(e),t&&bh(e))}function Ih(e,t){Eh&&(Io.info(e),t&&setTimeout((()=>{bh(e)}),0))}function bh(e){Hi({category:"console",data:{logger:"replay"},level:"info",message:e},{level:"info"})}class Ah extends Error{constructor(){super("Event buffer exceeded maximum size of 20000000.")}}class wh{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(e){const t=JSON.stringify(e).length;if(this._totalSize+=t,this._totalSize>Kd)throw new Ah;this.events.push(e)}finish(){return new Promise((e=>{const t=this.events;this.clear(),e(JSON.stringify(t))}))}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const e=this.events.map((e=>e.timestamp)).sort()[0];return e?Qg(e):null}}class Nh{constructor(e){this._worker=e,this._id=0}ensureReady(){return this._ensureReadyPromise||(this._ensureReadyPromise=new Promise(((e,t)=>{this._worker.addEventListener("message",(({data:n})=>{n.success?e():t()}),{once:!0}),this._worker.addEventListener("error",(e=>{t(e)}),{once:!0})}))),this._ensureReadyPromise}destroy(){Sh("[Replay] Destroying compression worker"),this._worker.terminate()}postMessage(e,t){const n=this._getAndIncrementId();return new Promise(((r,o)=>{const a=({data:t})=>{const i=t;if(i.method===e&&i.id===n){if(this._worker.removeEventListener("message",a),!i.success)return Eh&&Io.error("[Replay]",i.response),void o(new Error("Error in compression worker"));r(i.response)}};this._worker.addEventListener("message",a),this._worker.postMessage({id:n,method:e,arg:t})}))}_getAndIncrementId(){return this._id++}}class Oh{constructor(e){this._worker=new Nh(e),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(e){const t=Qg(e.timestamp);(!this._earliestTimestamp||t<this._earliestTimestamp)&&(this._earliestTimestamp=t);const n=JSON.stringify(e);return this._totalSize+=n.length,this._totalSize>Kd?Promise.reject(new Ah):this._sendEventToWorker(n)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,(e=>{Eh&&Io.warn('[Replay] Sending "clear" message to worker failed',e)}))}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(e){return this._worker.postMessage("addEvent",e)}async _finishRequest(){const e=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,e}}class Rh{constructor(e){this._fallback=new wh,this._compression=new Oh(e),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(e){this._used.hasCheckout=e}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(e){return this._used.addEvent(e)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch(e){return void Sh("[Replay] Failed to load the compression worker, falling back to simple buffer")}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:e,hasCheckout:t}=this._fallback,n=[];for(const t of e)n.push(this._compression.addEvent(t));this._compression.hasCheckout=t,this._used=this._compression;try{await Promise.all(n)}catch(e){Eh&&Io.warn("[Replay] Failed to add events when switching buffers.",e)}}}function Lh({useCompression:e,workerUrl:t}){if(e&&window.Worker){const e=function(e){try{const t=e||function(){if("undefined"==typeof __SENTRY_EXCLUDE_REPLAY_WORKER__||!__SENTRY_EXCLUDE_REPLAY_WORKER__)return function(){const e=new Blob(['var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(t,e){for(var i=new n(31),a=0;a<31;++a)i[a]=e+=1<<t[a-1];var s=new r(i[30]);for(a=1;a<30;++a)for(var o=i[a];o<i[a+1];++o)s[o]=o-i[a]<<5|a;return{b:i,r:s}},o=s(e,2),f=o.b,h=o.r;f[28]=258,h[258]=28;for(var l=s(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,a=0,s=new n(r);a<i;++a)t[a]&&++s[t[a]-1];var o,f=new n(r);for(a=1;a<r;++a)f[a]=f[a-1]+s[a-1]<<1;if(e){o=new n(1<<r);var h=15-r;for(a=0;a<i;++a)if(t[a])for(var l=a<<4|t[a],c=r-t[a],v=f[t[a]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>h]=l}else for(o=new n(i),a=0;a<i;++a)t[a]&&(o[a]=u[f[t[a]-1]++]>>15-t[a]);return o},g=new t(288);for(c=0;c<144;++c)g[c]=8;for(c=144;c<256;++c)g[c]=9;for(c=256;c<280;++c)g[c]=7;for(c=280;c<288;++c)g[c]=8;var w=new t(32);for(c=0;c<32;++c)w[c]=5;var p=d(g,9,0),y=d(w,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==r||r<0)&&(r=0),(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},A=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},_=function(r,e){for(var i=[],a=0;a<r.length;++a)r[a]&&i.push({s:a,f:r[a]});var s=i.length,o=i.slice();if(!s)return{t:F,l:0};if(1==s){var f=new t(i[0].s+1);return f[i[0].s]=1,{t:f,l:1}}i.sort((function(t,n){return t.f-n.f})),i.push({s:-1,f:25001});var h=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:h.f+l.f,l:h,r:l};c!=s-1;)h=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:h.f+l.f,l:h,r:l};var d=o[0].s;for(a=1;a<s;++a)o[a].s>d&&(d=o[a].s);var g=new n(d+1),w=x(i[c-1],g,0);if(w>e){a=0;var p=0,y=w-e,m=1<<y;for(o.sort((function(t,n){return g[n.s]-g[t.s]||t.f-n.f}));a<s;++a){var b=o[a].s;if(!(g[b]>e))break;p+=m-(1<<w-g[b]),g[b]=e}for(p>>=y;p>0;){var M=o[a].s;g[M]<e?p-=1<<e-g[M]++-1:++a}for(;a>=0&&p;--a){var E=o[a].s;g[E]==e&&(--g[E],++p)}w=e}return{t:new t(g),l:w}},x=function(t,n,r){return-1==t.s?Math.max(x(t.l,n,r+1),x(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,a=t[0],s=1,o=function(t){e[i++]=t},f=1;f<=r;++f)if(t[f]==a&&f!=r)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=t[f]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var a=0;a<e;++a)t[i+a+4]=r[a];return 8*(i+4+e)},C=function(t,r,s,o,f,h,l,u,c,v,m){z(r,m++,s),++f[256];for(var b=_(f,15),M=b.t,E=b.l,x=_(h,15),C=x.t,U=x.l,F=D(M),I=F.c,S=F.n,L=D(C),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=_(q,7),H=G.t,J=G.l,K=19;K>4&&!H[a[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(f,g)+T(h,w)+l,X=T(f,M)+T(h,C)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(C,U,0),R=C;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[a[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=p,P=g,Q=y,R=w;for(B=0;B<u;++B){var rt=o[B];if(rt>255){A(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;A(r,m,Q[et]),m+=R[et],et>3&&(A(r,m,rt>>5&8191),m+=i[et])}else A(r,m,N[rt]),m+=P[rt]}return A(r,m,N[256]),m+P[256]},U=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,a=0|r.length,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)i+=e+=r[s];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},L=function(a,s,o,f,u){if(!u&&(u={l:1},s.dictionary)){var c=s.dictionary.subarray(-32768),v=new t(c.length+a.length);v.set(c),v.set(a,c.length),a=v,u.w=c.length}return function(a,s,o,f,u,c){var v=c.z||a.length,d=new t(f+v+5*(1+Math.ceil(v/7e3))+u),g=d.subarray(f,d.length-u),w=c.l,p=7&(c.r||0);if(s){p&&(g[0]=c.r>>3);for(var y=U[s-1],M=y>>13,E=8191&y,z=(1<<o)-1,A=c.p||new n(32768),_=c.h||new n(z+1),x=Math.ceil(o/3),D=2*x,T=function(t){return(a[t]^a[t+1]<<x^a[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=_[H];if(A[J]=K,_[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!w)){p=C(a,g,0,F,I,S,O,q,G,j-G,p),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(a[j+Q]==a[j+Q-W]){for(var $=0;$<Z&&a[j+$]==a[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-A[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=A[J])&32767}if(R){F[q++]=268435456|h[Q]<<18|l[R];var it=31&h[Q],at=31&l[R];O+=e[it]+i[at],++I[257+it],++S[at],B=j+Q,++L}else F[q++]=a[j],++I[a[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=a[j],++I[a[j]];p=C(a,g,w,F,I,S,O,q,G,j-G,p),w||(c.r=7&p|g[p/8|0]<<3,p-=7,c.h=_,c.p=A,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+w;j+=65535){var st=j+65535;st>=v&&(g[p/8|0]=w,st=v),p=k(g,p+1,a.subarray(j,st))}c.i=v}return b(d,0,f+m(p)+u)}(a,null==s.level?6:s.level,null==s.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(a.length)))):12+s.mem,o,f,u)},O=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},j=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(L(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var a=this.b.length-this.s.z;a&&(this.b.set(n.subarray(0,a),this.s.z),this.s.z=this.b.length,this.p(this.b,!1)),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(a),32768),this.s.z=n.length-a+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n}();function q(t,n){n||(n={});var r=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}}(),e=t.length;r.p(t);var i,a=L(t,n,10+((i=n).filename?i.filename.length+1:0),8),s=a.length;return function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&O(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}}(a,n),O(a,s-8,r.d()),O(a,s-4,e),a}var B=function(){function t(t,n){this.c=S(),this.v=1,j.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),j.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=L(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=S();i.p(n.dictionary),O(t,2,i.d())}}(r,this.o),this.v=0),n&&O(r,r.length-4,this.c.d()),this.ondata(r,n)},t}(),G="undefined"!=typeof TextEncoder&&new TextEncoder,H="undefined"!=typeof TextDecoder&&new TextDecoder;try{H.decode(F,{stream:!0})}catch(t){}var J=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(K(t),this.d=n||!1)},t}();function K(n,r){if(r){for(var e=new t(n.length),i=0;i<n.length;++i)e[i]=n.charCodeAt(i);return e}if(G)return G.encode(n);var a=n.length,s=new t(n.length+(n.length>>1)),o=0,f=function(t){s[o++]=t};for(i=0;i<a;++i){if(o+5>s.length){var h=new t(o+8+(a-i<<1));h.set(s),s=h}var l=n.charCodeAt(i);l<128||r?f(l):l<2048?(f(192|l>>6),f(128|63&l)):l>55295&&l<57344?(f(240|(l=65536+(1047552&l)|1023&n.charCodeAt(++i))>>18),f(128|l>>12&63),f(128|l>>6&63),f(128|63&l)):(f(224|l>>12),f(128|l>>6&63),f(128|63&l))}return b(s,0,o)}const N=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(let r=0,e=t.length;r<e;r++)n+=t[r].length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new B,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new J(((t,n)=>{this.deflate.push(t,n)})),this.stream.push("[")}},P={clear:()=>{N.clear()},addEvent:t=>N.addEvent(t),finish:()=>N.finish(),compress:t=>function(t){return q(K(t))}(t)};addEventListener("message",(function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in P&&"function"==typeof P[n])try{const t=P[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}})),postMessage({id:void 0,method:"init",success:!0,response:void 0});']);return URL.createObjectURL(e)}();return""}();if(!t)return;Sh("[Replay] Using compression worker"+(e?` from ${e}`:""));const n=new Worker(t);return new Rh(n)}catch(e){Sh("[Replay] Failed to create compression worker")}}(t);if(e)return e}return Sh("[Replay] Using simple buffer"),new wh}function Ch(){try{return"sessionStorage"in Hd&&!!Hd.sessionStorage}catch(e){return!1}}function Ph(e){!function(){if(!Ch())return;try{Hd.sessionStorage.removeItem(Jd)}catch(e){}}(),e.session=void 0}function xh(e){return void 0!==e&&Math.random()<e}function kh(e){const t=Date.now();return{id:e.id||Ko(),started:e.started||t,lastActivity:e.lastActivity||t,segmentId:e.segmentId||0,sampled:e.sampled,previousSessionId:e.previousSessionId}}function Dh(e){if(Ch())try{Hd.sessionStorage.setItem(Jd,JSON.stringify(e))}catch(e){}}function Uh({sessionSampleRate:e,allowBuffering:t,stickySession:n=!1},{previousSessionId:r}={}){const o=function(e,t){return xh(e)?"session":!!t&&"buffer"}(e,t),a=kh({sampled:o,previousSessionId:r});return n&&Dh(a),a}function Mh(e,t,n=+new Date){return null===e||void 0===t||t<0||0!==t&&e+t<=n}function Gh(e,{maxReplayDuration:t,sessionIdleExpire:n,targetTime:r=Date.now()}){return Mh(e.started,t,r)||Mh(e.lastActivity,n,r)}function $h(e,{sessionIdleExpire:t,maxReplayDuration:n}){return!!Gh(e,{sessionIdleExpire:t,maxReplayDuration:n})&&("buffer"!==e.sampled||0!==e.segmentId)}function Vh({traceInternals:e,sessionIdleExpire:t,maxReplayDuration:n,previousSessionId:r},o){const a=o.stickySession&&function(e){if(!Ch())return null;try{const t=Hd.sessionStorage.getItem(Jd);if(!t)return null;const n=JSON.parse(t);return Ih("[Replay] Loading existing session",e),kh(n)}catch(e){return null}}(e);return a?$h(a,{sessionIdleExpire:t,maxReplayDuration:n})?(Ih("[Replay] Session in sessionStorage is expired, creating new one..."),Uh(o,{previousSessionId:a.id})):a:(Ih("[Replay] Creating new session",e),Uh(o,{previousSessionId:r}))}function Fh(e,t,n){return!!Wh(e,t)&&(jh(e,t,n),!0)}async function jh(e,t,n){if(!e.eventBuffer)return null;try{n&&"buffer"===e.recordingMode&&e.eventBuffer.clear(),n&&(e.eventBuffer.hasCheckout=!0);const r=function(e,t){try{if("function"==typeof t&&function(e){return e.type===cg.Custom}(e))return t(e)}catch(e){return Eh&&Io.error("[Replay] An error occured in the `beforeAddRecordingEvent` callback, skipping the event...",e),null}return e}(t,e.getOptions().beforeAddRecordingEvent);if(!r)return;return await e.eventBuffer.addEvent(r)}catch(t){const n=t&&t instanceof Ah?"addEventSizeExceeded":"addEvent";Eh&&Io.error(t),await e.stop({reason:n});const r=zi();r&&r.recordDroppedEvent("internal_sdk_error","replay")}}function Wh(e,t){if(!e.eventBuffer||e.isPaused()||!e.isEnabled())return!1;const n=Qg(t.timestamp);return!(n+e.timeouts.sessionIdlePause<Date.now())&&(!(n>e.getContext().initialTimestamp+e.getOptions().maxReplayDuration)||(Sh(`[Replay] Skipping event with timestamp ${n} because it is after maxReplayDuration`,e.getOptions()._experiments.traceInternals),!1))}function qh(e){return!e.type}function Bh(e){return"transaction"===e.type}function Hh(e){return"feedback"===e.type}function Jh(e){const t=function(){const e=zi();if(!e)return!1;const t=e.getTransport();if(!t)return!1;return t.send.__sentry__baseTransport__||!1}();return(n,r)=>{if(!e.isEnabled()||!qh(n)&&!Bh(n))return;const o=r&&r.statusCode;t&&(!o||o<200||o>=300)||(Bh(n)?function(e,t){const n=e.getContext();t.contexts&&t.contexts.trace&&t.contexts.trace.trace_id&&n.traceIds.size<100&&n.traceIds.add(t.contexts.trace.trace_id)}(e,n):function(e,t){const n=e.getContext();t.event_id&&n.errorIds.size<100&&n.errorIds.add(t.event_id);if("buffer"!==e.recordingMode||!t.tags||!t.tags.replayId)return;const{beforeErrorSampling:r}=e.getOptions();if("function"==typeof r&&!r(t))return;setTimeout((()=>{e.sendBufferedReplayOrFlush()}))}(e,n))}}function Yh(e){return t=>{e.isEnabled()&&qh(t)&&function(e,t){const n=t.exception&&t.exception.values&&t.exception.values[0].value;if("string"!=typeof n)return;if(n.match(/reactjs\.org\/docs\/error-decoder\.html\?invariant=(418|419|422|423|425)/)||n.match(/(does not match server-rendered HTML|Hydration failed because)/i)){eh(e,uh({category:"replay.hydrate-error"}))}}(e,t)}}function zh(e,t=!1){const n=t?Jh(e):void 0;return Object.assign(((t,r)=>{if(!e.isEnabled())return t;if(function(e){return"replay_event"===e.type}(t))return delete t.breadcrumbs,t;if(!qh(t)&&!Bh(t)&&!Hh(t))return t;if(!e.checkAndHandleExpiredSession())return t;if(Hh(t))return e.flush(),t.contexts.feedback.replay_id=e.getSessionId(),function(e,t){e.triggerUserActivity(),e.addUpdate((()=>!t.timestamp||(e.throttledAddEvent({type:cg.Custom,timestamp:1e3*t.timestamp,data:{tag:"breadcrumb",payload:{timestamp:t.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:t.event_id}}}}),!1)))}(e,t),t;if(function(e,t){return!(e.type||!e.exception||!e.exception.values||!e.exception.values.length||!t.originalException||!t.originalException.__rrweb__)}(t,r)&&!e.getOptions()._experiments.captureExceptions)return Eh&&Io.log("[Replay] Ignoring error from rrweb internals",t),null;const o=function(e,t){return"buffer"===e.recordingMode&&t.message!==Yd&&!(!t.exception||t.type)&&xh(e.getOptions().errorSampleRate)}(e,t);return(o||"session"===e.recordingMode)&&(t.tags={...t.tags,replayId:e.getSessionId()}),n&&n(t,{statusCode:200}),t}),{id:"Replay"})}function Xh(e,t){return t.map((({type:t,start:n,end:r,name:o,data:a})=>{const i=e.throttledAddEvent({type:cg.Custom,timestamp:n,data:{tag:"performanceSpan",payload:{op:t,description:o,startTimestamp:n,endTimestamp:r,data:a}}});return"string"==typeof i?Promise.resolve(null):i}))}function Kh(e){return t=>{if(!e.isEnabled())return;const n=function(e){const{from:t,to:n}=e,r=Date.now()/1e3;return{type:"navigation.push",start:r,end:r,name:n,data:{previous:t}}}(t);null!==n&&(e.getContext().urls.push(n.name),e.triggerUserActivity(),e.addUpdate((()=>(Xh(e,[n]),!1))))}}function Qh(e,t){e.isEnabled()&&null!==t&&(function(e,t){return(!Eh||!e.getOptions()._experiments.traceInternals)&&kc(t,zi())}(e,t.name)||e.addUpdate((()=>(Xh(e,[t]),!0))))}function Zh(e){return t=>{if(!e.isEnabled())return;const n=function(e){const{startTimestamp:t,endTimestamp:n,xhr:r}=e,o=r[Ca];if(!t||!n||!o)return null;const{method:a,url:i,status_code:s}=o;return void 0===i?null:{type:"resource.xhr",name:i,start:t/1e3,end:n/1e3,data:{method:a,statusCode:s}}}(t);Qh(e,n)}}function ef(e,t){if(e)try{if("string"==typeof e)return t.encode(e).length;if(e instanceof URLSearchParams)return t.encode(e.toString()).length;if(e instanceof FormData){const n=lf(e);return t.encode(n).length}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength}catch(e){}}function tf(e){if(!e)return;const t=parseInt(e,10);return isNaN(t)?void 0:t}function nf(e){try{if("string"==typeof e)return[e];if(e instanceof URLSearchParams)return[e.toString()];if(e instanceof FormData)return[lf(e)];if(!e)return[void 0]}catch(t){return Eh&&Io.warn("[Replay] Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return Eh&&Io.info("[Replay] Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function rf(e,t){if(!e)return{headers:{},size:void 0,_meta:{warnings:[t]}};const n={...e._meta},r=n.warnings||[];return n.warnings=[...r,t],e._meta=n,e}function of(e,t){if(!t)return null;const{startTimestamp:n,endTimestamp:r,url:o,method:a,statusCode:i,request:s,response:c}=t;return{type:e,start:n/1e3,end:r/1e3,name:o,data:Mo({method:a,statusCode:i,request:s,response:c})}}function af(e){return{headers:{},size:e,_meta:{warnings:["URL_SKIPPED"]}}}function sf(e,t,n){if(!t&&0===Object.keys(e).length)return;if(!t)return{headers:e};if(!n)return{headers:e,size:t};const r={headers:e,size:t},{body:o,warnings:a}=function(e){if(!e||"string"!=typeof e)return{body:e};const t=e.length>zd,n=function(e){const t=e[0],n=e[e.length-1];return"["===t&&"]"===n||"{"===t&&"}"===n}(e);if(t){const t=e.slice(0,zd);return n?{body:t,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${t}‚Ä¶`,warnings:["TEXT_TRUNCATED"]}}if(n)try{return{body:JSON.parse(e)}}catch(e){}return{body:e}}(n);return r.body=o,a&&a.length>0&&(r._meta={warnings:a}),r}function cf(e,t){return Object.keys(e).reduce(((n,r)=>{const o=r.toLowerCase();return t.includes(o)&&e[r]&&(n[o]=e[r]),n}),{})}function lf(e){return new URLSearchParams(e).toString()}function uf(e,t){const n=function(e,t=Hd.document.baseURI){if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith(Hd.location.origin))return e;const n=new URL(e,t);if(n.origin!==new URL(t).origin)return e;const r=n.href;if(!e.endsWith("/")&&r.endsWith("/"))return r.slice(0,-1);return r}(e);return ro(n,t)}async function df(e,t,n){try{const r=await async function(e,t,n){const r=Date.now(),{startTimestamp:o=r,endTimestamp:a=r}=t,{url:i,method:s,status_code:c=0,request_body_size:l,response_body_size:u}=e.data,d=uf(i,n.networkDetailAllowUrls)&&!uf(i,n.networkDetailDenyUrls),p=d?function({networkCaptureBodies:e,networkRequestHeaders:t},n,r){const o=n?function(e,t){if(1===e.length&&"string"!=typeof e[0])return hf(e[0],t);if(2===e.length)return hf(e[1],t);return{}}(n,t):{};if(!e)return sf(o,r,void 0);const a=pf(n),[i,s]=nf(a),c=sf(o,r,i);if(s)return rf(c,s);return c}(n,t.input,l):af(l),g=await async function(e,{networkCaptureBodies:t,textEncoder:n,networkResponseHeaders:r},o,a){if(!e&&void 0!==a)return af(a);const i=o?gf(o.headers,r):{};if(!o||!t&&void 0!==a)return sf(i,a,void 0);const[s,c]=await async function(e){const t=function(e){try{return e.clone()}catch(e){Eh&&Io.warn("[Replay] Failed to clone response body",e)}}(e);if(!t)return[void 0,"BODY_PARSE_ERROR"];try{const e=await function(e){return new Promise(((t,n)=>{const r=setTimeout((()=>n(new Error("Timeout while trying to read response body"))),500);(async function(e){return await e.text()})(e).then((e=>t(e)),(e=>n(e))).finally((()=>clearTimeout(r)))}))}(t);return[e]}catch(e){return Eh&&Io.warn("[Replay] Failed to get text body from response",e),[void 0,"BODY_PARSE_ERROR"]}}(o),l=function(e,{networkCaptureBodies:t,textEncoder:n,responseBodySize:r,captureDetails:o,headers:a}){try{const i=e&&e.length&&void 0===r?ef(e,n):r;return o?sf(a,i,t?e:void 0):af(i)}catch(e){return Eh&&Io.warn("[Replay] Failed to serialize response body",e),sf(a,r,void 0)}}(s,{networkCaptureBodies:t,textEncoder:n,responseBodySize:a,captureDetails:e,headers:i});if(c)return rf(l,c);return l}(d,n,t.response,u);return{startTimestamp:o,endTimestamp:a,url:i,method:s,statusCode:c,request:p,response:g}}(e,t,n),o=of("resource.fetch",r);Qh(n.replay,o)}catch(e){Eh&&Io.error("[Replay] Failed to capture fetch breadcrumb",e)}}function pf(e=[]){if(2===e.length&&"object"==typeof e[1])return e[1].body}function gf(e,t){const n={};return t.forEach((t=>{e.get(t)&&(n[t]=e.get(t))})),n}function hf(e,t){if(!e)return{};const n=e.headers;return n?n instanceof Headers?gf(n,t):Array.isArray(n)?{}:cf(n,t):{}}async function ff(e,t,n){try{const r=function(e,t,n){const r=Date.now(),{startTimestamp:o=r,endTimestamp:a=r,input:i,xhr:s}=t,{url:c,method:l,status_code:u=0,request_body_size:d,response_body_size:p}=e.data;if(!c)return null;if(!s||!uf(c,n.networkDetailAllowUrls)||uf(c,n.networkDetailDenyUrls)){return{startTimestamp:o,endTimestamp:a,url:c,method:l,statusCode:u,request:af(d),response:af(p)}}const g=s[Ca],h=g?cf(g.request_headers,n.networkRequestHeaders):{},f=cf(function(e){const t=e.getAllResponseHeaders();if(!t)return{};return t.split("\r\n").reduce(((e,t)=>{const[n,r]=t.split(": ");return e[n.toLowerCase()]=r,e}),{})}(s),n.networkResponseHeaders),[m,_]=n.networkCaptureBodies?nf(i):[void 0],[v,T]=n.networkCaptureBodies?function(e){const t=[];try{return[e.responseText]}catch(e){t.push(e)}try{return function(e,t){try{if("string"==typeof e)return[e];if(e instanceof Document)return[e.body.outerHTML];if("json"===t&&e&&"object"==typeof e)return[JSON.stringify(e)];if(!e)return[void 0]}catch(t){return Eh&&Io.warn("[Replay] Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return Eh&&Io.info("[Replay] Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}(e.response,e.responseType)}catch(e){t.push(e)}return Eh&&Io.warn("[Replay] Failed to get xhr response body",...t),[void 0]}(s):[void 0],y=sf(h,d,m),E=sf(f,p,v);return{startTimestamp:o,endTimestamp:a,url:c,method:l,statusCode:u,request:_?rf(y,_):y,response:T?rf(E,T):E}}(e,t,n),o=of("resource.xhr",r);Qh(n.replay,o)}catch(e){Eh&&Io.error("[Replay] Failed to capture xhr breadcrumb",e)}}function mf(e,t,n){const{xhr:r,input:o}=t;if(!r)return;const a=ef(o,n.textEncoder),i=r.getResponseHeader("content-length")?tf(r.getResponseHeader("content-length")):function(e,t,n){try{return ef("json"===t&&e&&"object"==typeof e?JSON.stringify(e):e,n)}catch(e){return}}(r.response,r.responseType,n.textEncoder);void 0!==a&&(e.data.request_body_size=a),void 0!==i&&(e.data.response_body_size=i)}function _f(e){const t=zi();try{const n=new TextEncoder,{networkDetailAllowUrls:r,networkDetailDenyUrls:o,networkCaptureBodies:a,networkRequestHeaders:i,networkResponseHeaders:s}=e.getOptions(),c={replay:e,textEncoder:n,networkDetailAllowUrls:r,networkDetailDenyUrls:o,networkCaptureBodies:a,networkRequestHeaders:i,networkResponseHeaders:s};t&&t.on?t.on("beforeAddBreadcrumb",((e,t)=>function(e,t,n){if(!t.data)return;try{(function(e){return"xhr"===e.category})(t)&&function(e){return e&&e.xhr}(n)&&(mf(t,n,e),ff(t,n,e)),function(e){return"fetch"===e.category}(t)&&function(e){return e&&e.response}(n)&&(!function(e,t,n){const{input:r,response:o}=t,a=ef(r?pf(r):void 0,n.textEncoder),i=o?tf(o.headers.get("content-length")):void 0;void 0!==a&&(e.data.request_body_size=a),void 0!==i&&(e.data.response_body_size=i)}(t,n,e),df(t,n,e))}catch(e){Eh&&Io.warn("Error when enriching network breadcrumb")}}(c,e,t))):(fa(function(e){return t=>{if(!e.isEnabled())return;const n=function(e){const{startTimestamp:t,endTimestamp:n,fetchData:r,response:o}=e;if(!n)return null;const{method:a,url:i}=r;return{type:"resource.fetch",start:t/1e3,end:n/1e3,name:i,data:{method:a,statusCode:o?o.status:void 0}}}(t);Qh(e,n)}}(e)),Pa(Zh(e)))}catch(e){}}let vf=null;const Tf=e=>t=>{if(!e.isEnabled())return;const n=function(e){const t=e.getLastBreadcrumb&&e.getLastBreadcrumb();if(vf===t||!t)return null;if(vf=t,!function(e){return!!e.category}(t)||["fetch","xhr","sentry.event","sentry.transaction"].includes(t.category)||t.category.startsWith("ui."))return null;if("console"===t.category)return function(e){const t=e.data&&e.data.arguments;if(!Array.isArray(t)||0===t.length)return uh(e);let n=!1;const r=t.map((e=>{if(!e)return e;if("string"==typeof e)return e.length>Xd?(n=!0,`${e.slice(0,Xd)}‚Ä¶`):e;if("object"==typeof e)try{const t=Ua(e,7);return JSON.stringify(t).length>Xd?(n=!0,`${JSON.stringify(t,null,2).slice(0,Xd)}‚Ä¶`):t}catch(e){}return e}));return uh({...e,data:{...e.data,arguments:r,...n?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}(t);return uh(t)}(t);n&&eh(e,n)};function yf(e){return!(!e||!e.on)}function Ef(e){const{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}=e,o=Date.now()/1e3;return{type:"memory",name:"memory",start:o,end:o,data:{memory:{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}}}}function Sf(e){let t=!1;return(n,r)=>{if(!e.checkAndHandleExpiredSession())return void(Eh&&Io.warn("[Replay] Received replay event after session expired."));const o=r||!t;t=!0,e.clickDetector&&lh(e.clickDetector,n),e.addUpdate((()=>{if("buffer"===e.recordingMode&&o&&e.setInitialState(),!Fh(e,n,o))return!0;if(!o)return!1;if(function(e,t){if(!t||!e.session||0!==e.session.segmentId)return;Fh(e,function(e){const t=e.getOptions();return{type:cg.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:e.isRecordingCanvas(),sessionSampleRate:t.sessionSampleRate,errorSampleRate:t.errorSampleRate,useCompressionOption:t.useCompression,blockAllMedia:t.blockAllMedia,maskAllText:t.maskAllText,maskAllInputs:t.maskAllInputs,useCompression:!!e.eventBuffer&&"worker"===e.eventBuffer.type,networkDetailHasUrls:t.networkDetailAllowUrls.length>0,networkCaptureBodies:t.networkCaptureBodies,networkRequestHasHeaders:t.networkRequestHeaders.length>0,networkResponseHasHeaders:t.networkResponseHeaders.length>0}}}}(e),!1)}(e,o),e.session&&e.session.previousSessionId)return!0;if("buffer"===e.recordingMode&&e.session&&e.eventBuffer){const t=e.eventBuffer.getEarliestTimestamp();t&&(Sh(`[Replay] Updating session start time to earliest event in buffer to ${new Date(t)}`,e.getOptions()._experiments.traceInternals),e.session.started=t,e.getOptions().stickySession&&Dh(e.session))}return"session"===e.recordingMode&&e.flush(),!0}))}}async function If({recordingData:e,replayId:t,segmentId:n,eventContext:r,timestamp:o,session:a}){const i=function({recordingData:e,headers:t}){let n;const r=`${JSON.stringify(t)}\n`;if("string"==typeof e)n=`${r}${e}`;else{const t=(new TextEncoder).encode(r);n=new Uint8Array(t.length+e.length),n.set(t),n.set(e,t.length)}return n}({recordingData:e,headers:{segment_id:n}}),{urls:s,errorIds:c,traceIds:l,initialTimestamp:u}=r,d=zi(),p=Xi(),g=d&&d.getTransport(),h=d&&d.getDsn();if(!(d&&g&&h&&a.sampled))return;const f={type:"replay_event",replay_start_timestamp:u/1e3,timestamp:o/1e3,error_ids:c,trace_ids:l,urls:s,replay_id:t,segment_id:n,replay_type:a.sampled},m=await async function({client:e,scope:t,replayId:n,event:r}){const o={event_id:n,integrations:"object"!=typeof e._integrations||null===e._integrations||Array.isArray(e._integrations)?void 0:Object.keys(e._integrations)};e.emit&&e.emit("preprocessEvent",r,o);const a=await $i(e.getOptions(),r,o,t,e,_s());if(!a)return null;a.platform=a.platform||"javascript";const i=e.getSdkMetadata&&e.getSdkMetadata(),{name:s,version:c}=i&&i.sdk||{};return a.sdk={...a.sdk,name:s||"sentry.javascript.unknown",version:c||"0.0.0"},a}({scope:p,client:d,replayId:t,event:f});if(!m)return d.recordDroppedEvent("event_processor","replay",f),void Sh("An event processor returned `null`, will not send event.");delete m.sdkProcessingMetadata;const _=function(e,t,n,r){return ui(Ti(e,vi(e),r,n),[[{type:"replay_event"},e],[{type:"replay_recording",length:"string"==typeof t?(new TextEncoder).encode(t).length:t.length},t]])}(m,i,h,d.getOptions().tunnel);let v;try{v=await g.send(_)}catch(e){const t=new Error(Yd);try{t.cause=e}catch(e){}throw t}if(!v)return v;if("number"==typeof v.statusCode&&(v.statusCode<200||v.statusCode>=300))throw new bf(v.statusCode);const T=Si({},v);if(Ei(T,"replay"))throw new Af(T);return v}class bf extends Error{constructor(e){super(`Transport returned status code ${e}`)}}class Af extends Error{constructor(e){super("Rate limit hit"),this.rateLimits=e}}async function wf(e,t={count:0,interval:5e3}){const{recordingData:n,options:r}=e;if(n.length)try{return await If(e),!0}catch(n){if(n instanceof bf||n instanceof Af)throw n;if(Ji("Replays",{_retryCount:t.count}),Eh&&r._experiments&&r._experiments.captureExceptions&&Wi(n),t.count>=3){const e=new Error(`${Yd} - max retries exceeded`);try{e.cause=n}catch(e){}throw e}return t.interval*=++t.count,new Promise(((n,r)=>{setTimeout((async()=>{try{await wf(e,t),n(!0)}catch(e){r(e)}}),t.interval)}))}}const Nf="__THROTTLED";function Of(e,t,n){const r=new Map;let o=!1;return(...a)=>{const i=Math.floor(Date.now()/1e3);if((e=>{const t=e-n;r.forEach(((e,n)=>{n<t&&r.delete(n)}))})(i),[...r.values()].reduce(((e,t)=>e+t),0)>=t){const e=o;return o=!0,e?"__SKIPPED":Nf}o=!1;const s=r.get(i)||0;return r.set(i,s+1),e(...a)}}class Rf{constructor({options:e,recordingOptions:t}){Rf.prototype.__init.call(this),Rf.prototype.__init2.call(this),Rf.prototype.__init3.call(this),Rf.prototype.__init4.call(this),Rf.prototype.__init5.call(this),Rf.prototype.__init6.call(this),this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:3e5,sessionIdleExpire:9e5},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=t,this._options=e,this._debouncedFlush=function(e,t,n){let r,o,a;const i=n.maxWait?Math.max(n.maxWait,t):0;function s(){return c(),r=e(),r}function c(){void 0!==o&&clearTimeout(o),void 0!==a&&clearTimeout(a),o=a=void 0}function l(){return o&&clearTimeout(o),o=setTimeout(s,t),i&&void 0===a&&(a=setTimeout(s,i)),r}return l.cancel=c,l.flush=function(){return void 0!==o||void 0!==a?s():r},l}((()=>this._flush()),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=Of(((e,t)=>function(e,t,n){return Wh(e,t)?jh(e,t,n):Promise.resolve(null)}(this,e,t)),300,5);const{slowClickTimeout:n,slowClickIgnoreSelectors:r}=this.getOptions(),o=n?{threshold:Math.min(3e3,n),timeout:n,scrollTimeout:300,ignoreSelector:r?r.join(","):""}:void 0;o&&(this.clickDetector=new ih(this,o))}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return Boolean(this._canvas)}getOptions(){return this._options}initializeSampling(e){const{errorSampleRate:t,sessionSampleRate:n}=this._options;t<=0&&n<=0||(this._initializeSessionForSampling(e),this.session?!1!==this.session.sampled&&(this.recordingMode="buffer"===this.session.sampled&&0===this.session.segmentId?"buffer":"session",Ih(`[Replay] Starting replay in ${this.recordingMode} mode`,this._options._experiments.traceInternals),this._initializeRecording()):this._handleException(new Error("Unable to initialize and create session")))}start(){if(this._isEnabled&&"session"===this.recordingMode)throw new Error("Replay recording is already in progress");if(this._isEnabled&&"buffer"===this.recordingMode)throw new Error("Replay buffering is in progress, call `flush()` to save the replay");Ih("[Replay] Starting replay in session mode",this._options._experiments.traceInternals),this._updateUserActivity();const e=Vh({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=e,this._initializeRecording()}startBuffering(){if(this._isEnabled)throw new Error("Replay recording is already in progress");Ih("[Replay] Starting replay in buffer mode",this._options._experiments.traceInternals);const e=Vh({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=e,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const e=this._canvas;this._stopRecording=Kg({...this._recordingOptions,..."buffer"===this.recordingMode&&{checkoutEveryNms:6e4},emit:Sf(this),onMutation:this._onMutationHandler,...e?{recordCanvas:e.recordCanvas,getCanvasManager:e.getCanvasManager,sampling:e.sampling,dataURLOptions:e.dataURLOptions}:{}})}catch(e){this._handleException(e)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(e){return this._handleException(e),!1}}async stop({forceFlush:e=!1,reason:t}={}){if(this._isEnabled){this._isEnabled=!1;try{Sh("[Replay] Stopping Replay"+(t?` triggered by ${t}`:""),this._options._experiments.traceInternals),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),e&&await this._flush({force:!0}),this.eventBuffer&&this.eventBuffer.destroy(),this.eventBuffer=null,Ph(this)}catch(e){this._handleException(e)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),Sh("[Replay] Pausing replay",this._options._experiments.traceInternals))}resume(){this._isPaused&&this._checkSession()&&(this._isPaused=!1,this.startRecording(),Sh("[Replay] Resuming replay",this._options._experiments.traceInternals))}async sendBufferedReplayOrFlush({continueRecording:e=!0}={}){if("session"===this.recordingMode)return this.flushImmediate();const t=Date.now();Sh("[Replay] Converting buffer to session",this._options._experiments.traceInternals),await this.flushImmediate();const n=this.stopRecording();e&&n&&"session"!==this.recordingMode&&(this.recordingMode="session",this.session&&(this._updateUserActivity(t),this._updateSessionActivity(t),this._maybeSaveSession()),this.startRecording())}addUpdate(e){const t=e();"buffer"!==this.recordingMode&&!0!==t&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),this._stopRecording)this.checkAndHandleExpiredSession(),this._updateSessionActivity();else{if(!this._checkSession())return;this.resume()}}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return"buffer"===this.recordingMode?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(){return this.session&&this.session.id}checkAndHandleExpiredSession(){if(!(this._lastActivity&&Mh(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&"session"===this.session.sampled))return!!this._checkSession();this.pause()}setInitialState(){const e=`${Hd.location.pathname}${Hd.location.hash}${Hd.location.search}`,t=`${Hd.location.origin}${e}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=t,this._context.initialTimestamp=Date.now(),this._context.urls.push(t)}throttledAddEvent(e,t){const n=this._throttledAddEvent(e,t);if(n===Nf){const e=uh({category:"replay.throttled"});this.addUpdate((()=>!Fh(this,{type:5,timestamp:e.timestamp||0,data:{tag:"breadcrumb",payload:e,metric:!0}})))}return n}getCurrentRoute(){const e=this.lastTransaction||Xi().getTransaction(),t=(e&&Mi(e).data||{})[Vs];if(e&&t&&["route","custom"].includes(t))return Mi(e).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=Lh({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_handleException(e){Eh&&Io.error("[Replay]",e),Eh&&this._options._experiments&&this._options._experiments.captureExceptions&&Wi(e)}_initializeSessionForSampling(e){const t=this._options.errorSampleRate>0,n=Vh({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals,previousSessionId:e},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:t});this.session=n}_checkSession(){if(!this.session)return!1;const e=this.session;return!$h(e,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})||(this._refreshSession(e),!1)}async _refreshSession(e){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(e.id))}_addListeners(){try{Hd.document.addEventListener("visibilitychange",this._handleVisibilityChange),Hd.addEventListener("blur",this._handleWindowBlur),Hd.addEventListener("focus",this._handleWindowFocus),Hd.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(!function(e){const t=Xi(),n=zi();t.addScopeListener(Tf(e)),ca(hh(e)),Oa(Kh(e)),_f(e);const r=zh(e,!yf(n));n&&n.addEventProcessor?n.addEventProcessor(r):Ec(r),yf(n)&&(n.on("beforeSendEvent",Yh(e)),n.on("afterSendEvent",Jh(e)),n.on("createDsc",(t=>{const n=e.getSessionId();n&&e.isEnabled()&&"session"===e.recordingMode&&e.checkAndHandleExpiredSession()&&(t.replay_id=n)})),n.on("startTransaction",(t=>{e.lastTransaction=t})),n.on("finishTransaction",(t=>{e.lastTransaction=t})),n.on("beforeSendFeedback",((t,n)=>{const r=e.getSessionId();n&&n.includeReplay&&e.isEnabled()&&r&&t.contexts&&t.contexts.feedback&&(t.contexts.feedback.replay_id=r)})))}(this),this._hasInitializedCoreListeners=!0)}catch(e){this._handleException(e)}this._performanceCleanupCallback=yh(this)}_removeListeners(){try{Hd.document.removeEventListener("visibilitychange",this._handleVisibilityChange),Hd.removeEventListener("blur",this._handleWindowBlur),Hd.removeEventListener("focus",this._handleWindowFocus),Hd.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(e){this._handleException(e)}}__init(){this._handleVisibilityChange=()=>{"visible"===Hd.document.visibilityState?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()}}__init2(){this._handleWindowBlur=()=>{const e=uh({category:"ui.blur"});this._doChangeToBackgroundTasks(e)}}__init3(){this._handleWindowFocus=()=>{const e=uh({category:"ui.focus"});this._doChangeToForegroundTasks(e)}}__init4(){this._handleKeyboardEvent=e=>{mh(this,e)}}_doChangeToBackgroundTasks(e){if(!this.session)return;Gh(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(e&&this._createCustomBreadcrumb(e),this.conditionalFlush())}_doChangeToForegroundTasks(e){if(!this.session)return;this.checkAndHandleExpiredSession()?e&&this._createCustomBreadcrumb(e):Sh("[Replay] Document has become active, but session has expired")}_updateUserActivity(e=Date.now()){this._lastActivity=e}_updateSessionActivity(e=Date.now()){this.session&&(this.session.lastActivity=e,this._maybeSaveSession())}_createCustomBreadcrumb(e){this.addUpdate((()=>{this.throttledAddEvent({type:cg.Custom,timestamp:e.timestamp||0,data:{tag:"breadcrumb",payload:e}})}))}_addPerformanceEntries(){const e=(t=this.performanceEntries,t.map(vh).filter(Boolean)).concat(this.replayPerformanceEntries);var t;return this.performanceEntries=[],this.replayPerformanceEntries=[],Promise.all(Xh(this,e))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:e,eventBuffer:t}=this;if(!e||!t)return;if(e.segmentId)return;const n=t.getEarliestTimestamp();n&&n<this._context.initialTimestamp&&(this._context.initialTimestamp=n)}_popEventContext(){const e={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),e}async _runFlush(){const e=this.getSessionId();if(this.session&&this.eventBuffer&&e){if(await this._addPerformanceEntries(),this.eventBuffer&&this.eventBuffer.hasEvents&&(await async function(e){try{return Promise.all(Xh(e,[Ef(Hd.performance.memory)]))}catch(e){return[]}}(this),this.eventBuffer&&e===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const t=Date.now();if(t-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const n=this._popEventContext(),r=this.session.segmentId++;this._maybeSaveSession();const o=await this.eventBuffer.finish();await wf({replayId:e,recordingData:o,segmentId:r,eventContext:n,session:this.session,options:this.getOptions(),timestamp:t})}catch(e){this._handleException(e),this.stop({reason:"sendReplay"});const t=zi();t&&t.recordDroppedEvent("send_error","replay")}}else Eh&&Io.error("[Replay] No session or eventBuffer found to flush.")}__init5(){this._flush=async({force:e=!1}={})=>{if(!this._isEnabled&&!e)return;if(!this.checkAndHandleExpiredSession())return void(Eh&&Io.error("[Replay] Attempting to finish replay event after session expired."));if(!this.session)return;const t=this.session.started,n=Date.now()-t;this._debouncedFlush.cancel();const r=n<this._options.minReplayDuration,o=n>this._options.maxReplayDuration+5e3;if(r||o)return Sh(`[Replay] Session duration (${Math.floor(n/1e3)}s) is too ${r?"short":"long"}, not sending replay.`,this._options._experiments.traceInternals),void(r&&this._debouncedFlush());const a=this.eventBuffer;if(a&&0===this.session.segmentId&&!a.hasCheckout&&Sh("[Replay] Flushing initial segment without checkout.",this._options._experiments.traceInternals),!this._flushLock)return this._flushLock=this._runFlush(),await this._flushLock,void(this._flushLock=void 0);try{await this._flushLock}catch(e){Eh&&Io.error(e)}finally{this._debouncedFlush()}}}_maybeSaveSession(){this.session&&this._options.stickySession&&Dh(this.session)}__init6(){this._onMutationHandler=e=>{const t=e.length,n=this._options.mutationLimit,r=n&&t>n;if(t>this._options.mutationBreadcrumbLimit||r){const e=uh({category:"replay.mutations",data:{count:t,limit:r}});this._createCustomBreadcrumb(e)}return!r||(this.stop({reason:"mutationLimit",forceFlush:"session"===this.recordingMode}),!1)}}}function Lf(e,t,n,r){const o=[...e,..."string"==typeof r?r.split(","):[],...t];return void 0!==n&&("string"==typeof n&&o.push(`.${n}`),So((()=>{console.warn("[Replay] You are using a deprecated configuration item for privacy. Read the documentation on how to use the new privacy configuration.")}))),o.join(",")}const Cf='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',Pf=["content-length","content-type","accept"];let xf=!1;class kf{static __initStatic(){this.id="Replay"}constructor({flushMinDelay:e=5e3,flushMaxDelay:t=5500,minReplayDuration:n=4999,maxReplayDuration:r=36e5,stickySession:o=!0,useCompression:a=!0,workerUrl:i,_experiments:s={},sessionSampleRate:c,errorSampleRate:l,maskAllText:u=!0,maskAllInputs:d=!0,blockAllMedia:p=!0,mutationBreadcrumbLimit:g=750,mutationLimit:h=1e4,slowClickTimeout:f=7e3,slowClickIgnoreSelectors:m=[],networkDetailAllowUrls:_=[],networkDetailDenyUrls:v=[],networkCaptureBodies:T=!0,networkRequestHeaders:y=[],networkResponseHeaders:E=[],mask:S=[],maskAttributes:I=["title","placeholder"],unmask:b=[],block:A=[],unblock:w=[],ignore:N=[],maskFn:O,beforeAddRecordingEvent:R,beforeErrorSampling:L,blockClass:C,blockSelector:P,maskInputOptions:x,maskTextClass:k,maskTextSelector:D,ignoreClass:U}={}){this.name=kf.id;const M=function({mask:e,unmask:t,block:n,unblock:r,ignore:o,blockClass:a,blockSelector:i,maskTextClass:s,maskTextSelector:c,ignoreClass:l}){const u={maskTextSelector:Lf(e,[".sentry-mask","[data-sentry-mask]"],s,c),unmaskTextSelector:Lf(t,[".sentry-unmask","[data-sentry-unmask]"]),blockSelector:Lf(n,[".sentry-block","[data-sentry-block]",'base[href="/"]'],a,i),unblockSelector:Lf(r,[".sentry-unblock","[data-sentry-unblock]"]),ignoreSelector:Lf(o,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'],l)};return a instanceof RegExp&&(u.blockClass=a),s instanceof RegExp&&(u.maskTextClass=s),u}({mask:S,unmask:b,block:A,unblock:w,ignore:N,blockClass:C,blockSelector:P,maskTextClass:k,maskTextSelector:D,ignoreClass:U});if(this._recordingOptions={maskAllInputs:d,maskAllText:u,maskInputOptions:{...x||{},password:!0},maskTextFn:O,maskInputFn:O,maskAttributeFn:(e,t,n)=>function({el:e,key:t,maskAttributes:n,maskAllText:r,privacyOptions:o,value:a}){return r?o.unmaskTextSelector&&e.matches(o.unmaskTextSelector)?a:n.includes(t)||"value"===t&&"INPUT"===e.tagName&&["submit","button"].includes(e.getAttribute("type")||"")?a.replace(/[\S]/g,"*"):a:a}({maskAttributes:I,maskAllText:u,privacyOptions:M,key:e,value:t,el:n}),...M,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:e=>{try{e.__rrweb__=!0}catch(e){}}},this._initialOptions={flushMinDelay:e,flushMaxDelay:t,minReplayDuration:Math.min(n,15e3),maxReplayDuration:Math.min(r,Qd),stickySession:o,sessionSampleRate:c,errorSampleRate:l,useCompression:a,workerUrl:i,blockAllMedia:p,maskAllInputs:d,maskAllText:u,mutationBreadcrumbLimit:g,mutationLimit:h,slowClickTimeout:f,slowClickIgnoreSelectors:m,networkDetailAllowUrls:_,networkDetailDenyUrls:v,networkCaptureBodies:T,networkRequestHeaders:Df(y),networkResponseHeaders:Df(E),beforeAddRecordingEvent:R,beforeErrorSampling:L,_experiments:s},"number"==typeof c&&(console.warn(`[Replay] You are passing \`sessionSampleRate\` to the Replay integration.\nThis option is deprecated and will be removed soon.\nInstead, configure \`replaysSessionSampleRate\` directly in the SDK init options, e.g.:\nSentry.init({ replaysSessionSampleRate: ${c} })`),this._initialOptions.sessionSampleRate=c),"number"==typeof l&&(console.warn(`[Replay] You are passing \`errorSampleRate\` to the Replay integration.\nThis option is deprecated and will be removed soon.\nInstead, configure \`replaysOnErrorSampleRate\` directly in the SDK init options, e.g.:\nSentry.init({ replaysOnErrorSampleRate: ${l} })`),this._initialOptions.errorSampleRate=l),this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${Cf}`:Cf),this._isInitialized&&Da())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return xf}set _isInitialized(e){xf=e}setupOnce(){Da()&&(this._setup(),setTimeout((()=>this._initialize())))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:"session"===this._replay.recordingMode}):Promise.resolve()}flush(e){return this._replay&&this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(e):Promise.resolve()}getReplayId(){if(this._replay&&this._replay.isEnabled())return this._replay.getSessionId()}_initialize(){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(),this._replay.initializeSampling())}_setup(){const e=function(e){const t=zi(),n=t&&t.getOptions(),r={sessionSampleRate:0,errorSampleRate:0,...Mo(e)};if(!n)return So((()=>{console.warn("SDK client is not available.")})),r;null==e.sessionSampleRate&&null==e.errorSampleRate&&null==n.replaysSessionSampleRate&&null==n.replaysOnErrorSampleRate&&So((()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}));"number"==typeof n.replaysSessionSampleRate&&(r.sessionSampleRate=n.replaysSessionSampleRate);"number"==typeof n.replaysOnErrorSampleRate&&(r.errorSampleRate=n.replaysOnErrorSampleRate);return r}(this._initialOptions);this._replay=new Rf({options:e,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(){try{const e=zi().getIntegrationByName("ReplayCanvas");if(!e)return;this._replay._canvas=e.getOptions()}catch(e){}}}function Df(e){return[...Pf,...e.map((e=>e.toLowerCase()))]}var Uf;function Mf(e,t,n=1/0,r=0){return e?e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:Mf(e.parentNode,t,n,r+1):-1}function Gf(e,t){return n=>{const r=n;if(null===r)return!1;try{if(e)if("string"==typeof e){if(r.matches(`.${e}`))return!0}else if(function(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}(r,e))return!0;return!(!t||!r.matches(t))}catch(e){return!1}}}kf.__initStatic(),function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(Uf||(Uf={}));const $f="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let Vf={map:{},getId:()=>(console.error($f),-1),getNode:()=>(console.error($f),null),removeNodeFromMap(){console.error($f)},has:()=>(console.error($f),!1),reset(){console.error($f)}};function Ff(e,t,n,r,o=window){const a=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,r?n:{set(e){Jf((()=>{n.set.call(this,e)}),0),a&&a.set&&a.set.call(this,e)}}),()=>Ff(e,t,a||{},!0)}function jf(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],o=n(r);return"function"==typeof o&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=o,()=>{e[t]=r}}catch(e){return()=>{}}}function Wf(e,t,n,r,o){if(!e)return!1;const a=function(e){return e?e.nodeType===e.ELEMENT_NODE?e:e.parentElement:null}(e);if(!a)return!1;const i=Mf(a,Gf(t,n));let s=-1;return!(i<0)&&(r&&(s=Mf(a,Gf(null,r))),i>-1&&s<0||i<s)}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(Vf=new Proxy(Vf,{get:(e,t,n)=>("map"===t&&console.error($f),Reflect.get(e,t,n))})),/[1-9][0-9]{12}/.test(Date.now().toString());const qf={};function Bf(e){const t=qf[e];if(t)return t;const n=window.document;let r=window[e];if(n&&"function"==typeof n.createElement)try{const t=n.createElement("iframe");t.hidden=!0,n.head.appendChild(t);const o=t.contentWindow;o&&o[e]&&(r=o[e]),n.head.removeChild(t)}catch(e){}return qf[e]=r.bind(window)}function Hf(...e){return Bf("requestAnimationFrame")(...e)}function Jf(...e){return Bf("setTimeout")(...e)}var Yf=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(Yf||{});let zf;function Xf(e){zf=e}const Kf=e=>{if(!zf)return e;return(...t)=>{try{return e(...t)}catch(e){if(zf&&!0===zf(e))return()=>{};throw e}}};for(var Qf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Zf="undefined"==typeof Uint8Array?[]:new Uint8Array(256),em=0;em<64;em++)Zf[Qf.charCodeAt(em)]=em;const tm=new Map;const nm=(e,t,n)=>{if(!e||!am(e,t)&&"object"!=typeof e)return;const r=function(e,t){let n=tm.get(e);return n||(n=new Map,tm.set(e,n)),n.has(t)||n.set(t,[]),n.get(t)}(n,e.constructor.name);let o=r.indexOf(e);return-1===o&&(o=r.length,r.push(e)),o};function rm(e,t,n){if(e instanceof Array)return e.map((e=>rm(e,t,n)));if(null===e)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray){return{rr_type:e.constructor.name,args:[Object.values(e)]}}if(e instanceof ArrayBuffer){const t=e.constructor.name,n=function(e){var t,n=new Uint8Array(e),r=n.length,o="";for(t=0;t<r;t+=3)o+=Qf[n[t]>>2],o+=Qf[(3&n[t])<<4|n[t+1]>>4],o+=Qf[(15&n[t+1])<<2|n[t+2]>>6],o+=Qf[63&n[t+2]];return r%3==2?o=o.substring(0,o.length-1)+"=":r%3==1&&(o=o.substring(0,o.length-2)+"=="),o}(e);return{rr_type:t,base64:n}}if(e instanceof DataView){return{rr_type:e.constructor.name,args:[rm(e.buffer,t,n),e.byteOffset,e.byteLength]}}if(e instanceof HTMLImageElement){const t=e.constructor.name,{src:n}=e;return{rr_type:t,src:n}}if(e instanceof HTMLCanvasElement){return{rr_type:"HTMLImageElement",src:e.toDataURL()}}if(e instanceof ImageData){return{rr_type:e.constructor.name,args:[rm(e.data,t,n),e.width,e.height]}}if(am(e,t)||"object"==typeof e){return{rr_type:e.constructor.name,index:nm(e,t,n)}}return e}const om=(e,t,n)=>e.map((e=>rm(e,t,n))),am=(e,t)=>{const n=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter((e=>"function"==typeof t[e]));return Boolean(n.find((n=>e instanceof t[n])))};function im(e,t,n,r,o){const a=[];try{const i=jf(e.HTMLCanvasElement.prototype,"getContext",(function(e){return function(a,...i){if(!Wf(this,t,n,r)){const e=function(e){return"experimental-webgl"===e?"webgl":e}(a);if("__context"in this||(this.__context=e),o&&["webgl","webgl2"].includes(e))if(i[0]&&"object"==typeof i[0]){const e=i[0];e.preserveDrawingBuffer||(e.preserveDrawingBuffer=!0)}else i.splice(0,1,{preserveDrawingBuffer:!0})}return e.apply(this,[a,...i])}}));a.push(i)}catch(e){console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{a.forEach((e=>e()))}}function sm(e,t,n,r,o,a,i,s){const c=[],l=Object.getOwnPropertyNames(e);for(const i of l)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(i))try{if("function"!=typeof e[i])continue;const l=jf(e,i,(function(e){return function(...c){const l=e.apply(this,c);if(nm(l,s,this),"tagName"in this.canvas&&!Wf(this.canvas,r,o,a)){const e=om(c,s,this),r={type:t,property:i,args:e};n(this.canvas,r)}return l}}));c.push(l)}catch(r){const o=Ff(e,i,{set(e){n(this.canvas,{type:t,property:i,args:[e],setter:!0})}});c.push(o)}return c}class cm{reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}constructor(e){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=(e,t)=>{!(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId)&&this.rafStamps.invokeId||(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(e)||this.pendingCanvasMutations.set(e,[]),this.pendingCanvasMutations.get(e).push(t)};const{sampling:t="all",win:n,blockClass:r,blockSelector:o,unblockSelector:a,maxCanvasSize:i,recordCanvas:s,dataURLOptions:c,errorHandler:l}=e;this.mutationCb=e.mutationCb,this.mirror=e.mirror,this.options=e,l&&Xf(l),e.enableManualSnapshot||Kf((()=>{s&&"all"===t&&this.initCanvasMutationObserver(n,r,o,a),s&&"number"==typeof t&&this.initCanvasFPSObserver(t,n,r,o,a,i,{dataURLOptions:c})}))()}initCanvasFPSObserver(e,t,n,r,o,a,i){const s=im(t,n,r,o,!0),c=this.takeSnapshot(!1,e,t,n,r,o,a,i.dataURLOptions);this.resetObservers=()=>{s(),cancelAnimationFrame(c)}}initCanvasMutationObserver(e,t,n,r){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();const o=im(e,t,n,r,!1),a=function(e,t,n,r,o){const a=[],i=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(const s of i)try{if("function"!=typeof t.CanvasRenderingContext2D.prototype[s])continue;const i=jf(t.CanvasRenderingContext2D.prototype,s,(function(a){return function(...i){return Wf(this.canvas,n,r,o)||Jf((()=>{const n=om(i,t,this);e(this.canvas,{type:Yf["2D"],property:s,args:n})}),0),a.apply(this,i)}}));a.push(i)}catch(n){const r=Ff(t.CanvasRenderingContext2D.prototype,s,{set(t){e(this.canvas,{type:Yf["2D"],property:s,args:[t],setter:!0})}});a.push(r)}return()=>{a.forEach((e=>e()))}}(this.processMutation.bind(this),e,t,n,r),i=function(e,t,n,r,o){const a=[];return a.push(...sm(t.WebGLRenderingContext.prototype,Yf.WebGL,e,n,r,o,0,t)),void 0!==t.WebGL2RenderingContext&&a.push(...sm(t.WebGL2RenderingContext.prototype,Yf.WebGL2,e,n,r,o,0,t)),()=>{a.forEach((e=>e()))}}(this.processMutation.bind(this),e,t,n,r,this.mirror);this.resetObservers=()=>{o(),a(),i()}}snapshot(e){const{options:t}=this,n=this.takeSnapshot(!0,"all"===t.sampling?2:t.sampling||2,t.win,t.blockClass,t.blockSelector,t.unblockSelector,t.maxCanvasSize,t.dataURLOptions,e);this.resetObservers=()=>{cancelAnimationFrame(n)}}takeSnapshot(e,t,n,r,o,a,i,s,c){const l=new Map,u=new Worker(function(){const e=new Blob(['for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t="undefined"==typeof Uint8Array?[]:new Uint8Array(256),a=0;a<64;a++)t[e.charCodeAt(a)]=a;var n=function(t){var a,n=new Uint8Array(t),r=n.length,s="";for(a=0;a<r;a+=3)s+=e[n[a]>>2],s+=e[(3&n[a])<<4|n[a+1]>>4],s+=e[(15&n[a+1])<<2|n[a+2]>>6],s+=e[63&n[a+2]];return r%3==2?s=s.substring(0,s.length-1)+"=":r%3==1&&(s=s.substring(0,s.length-2)+"=="),s};const r=new Map,s=new Map;const i=self;i.onmessage=async function(e){if(!("OffscreenCanvas"in globalThis))return i.postMessage({id:e.data.id});{const{id:t,bitmap:a,width:o,height:f,maxCanvasSize:c,dataURLOptions:g}=e.data,u=async function(e,t,a){const r=e+"-"+t;if("OffscreenCanvas"in globalThis){if(s.has(r))return s.get(r);const i=new OffscreenCanvas(e,t);i.getContext("2d");const o=await i.convertToBlob(a),f=await o.arrayBuffer(),c=n(f);return s.set(r,c),c}return""}(o,f,g),[h,d]=function(e,t,a){if(!a)return[e,t];const[n,r]=a;if(e<=n&&t<=r)return[e,t];let s=e,i=t;return s>n&&(i=Math.floor(n*t/e),s=n),i>r&&(s=Math.floor(r*e/t),i=r),[s,i]}(o,f,c),l=new OffscreenCanvas(h,d),w=l.getContext("bitmaprenderer"),p=h===o&&d===f?a:await createImageBitmap(a,{resizeWidth:h,resizeHeight:d,resizeQuality:"low"});w.transferFromImageBitmap(p),a.close();const y=await l.convertToBlob(g),v=y.type,b=await y.arrayBuffer(),m=n(b);if(p.close(),!r.has(t)&&await u===m)return r.set(t,m),i.postMessage({id:t});if(r.get(t)===m)return i.postMessage({id:t});i.postMessage({id:t,type:v,base64:m,width:o,height:f}),r.set(t,m)}};']);return URL.createObjectURL(e)}());u.onmessage=e=>{const t=e.data,{id:n}=t;if(l.set(n,!1),!("base64"in t))return;const{base64:r,type:o,width:a,height:i}=t;this.mutationCb({id:n,type:Yf["2D"],commands:[{property:"clearRect",args:[0,0,a,i]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:r}],type:o}]},0,0,a,i]}]})};const d=1e3/t;let p,g=0;const h=t=>{g&&t-g<d||(g=t,(e=>{if(e)return[e];const t=[];return n.document.querySelectorAll("canvas").forEach((e=>{Wf(e,r,o,a)||t.push(e)})),t})(c).forEach((t=>{const n=this.mirror.getId(t);if(!l.get(n)&&t.width&&t.height){if(l.set(n,!0),!e&&["webgl","webgl2"].includes(t.__context)){const e=t.getContext(t.__context);!1===bi([e,"optionalAccess",e=>e.getContextAttributes,"call",e=>e(),"optionalAccess",e=>e.preserveDrawingBuffer])&&e.clear(e.COLOR_BUFFER_BIT)}createImageBitmap(t).then((e=>{u.postMessage({id:n,bitmap:e,width:t.width,height:t.height,dataURLOptions:s,maxCanvasSize:i},[e])})).catch((e=>{Kf((()=>{throw e}))()}))}}))),p=Hf(h)};return p=Hf(h),p}startPendingCanvasMutationFlusher(){Hf((()=>this.flushPendingCanvasMutations()))}startRAFTimestamping(){const e=t=>{this.rafStamps.latestId=t,Hf(e)};Hf(e)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach(((e,t)=>{const n=this.mirror.getId(t);this.flushPendingCanvasMutationFor(t,n)})),Hf((()=>this.flushPendingCanvasMutations()))}flushPendingCanvasMutationFor(e,t){if(this.frozen||this.locked)return;const n=this.pendingCanvasMutations.get(e);if(!n||-1===t)return;const r=n.map((e=>{const{type:t,...n}=e;return n})),{type:o}=n[0];this.mutationCb({id:t,type:o,commands:r}),this.pendingCanvasMutations.delete(e)}}const lm={low:{sampling:{canvas:1},dataURLOptions:{type:"image/webp",quality:.25}},medium:{sampling:{canvas:2},dataURLOptions:{type:"image/webp",quality:.4}},high:{sampling:{canvas:4},dataURLOptions:{type:"image/webp",quality:.5}}},um="ReplayCanvas",dm=1280,pm=(e={})=>{const[t,n]=e.maxCanvasSize||[],r={quality:e.quality||"medium",enableManualSnapshot:e.enableManualSnapshot,maxCanvasSize:[t?Math.min(t,dm):dm,n?Math.min(n,dm):dm]};let o;const a=new Promise((e=>o=e));return{name:um,setupOnce(){},getOptions(){const{quality:e,enableManualSnapshot:t,maxCanvasSize:n}=r;return{enableManualSnapshot:t,recordCanvas:!0,getCanvasManager:e=>{const r=new cm({...e,enableManualSnapshot:t,maxCanvasSize:n,errorHandler:e=>{try{"object"==typeof e&&(e.__rrweb__=!0)}catch(e){}}});return o(r),r},...lm[e||"medium"]||lm.medium}},async snapshot(e){(await a).snapshot(e)}}},gm=pc(um,pm),hm=lo,fm="#ffffff",mm="inherit",_m="rgba(108, 95, 199, 1)",vm={fontFamily:"system-ui, 'Helvetica Neue', Arial, sans-serif",fontSize:"14px",background:fm,backgroundHover:"#f6f6f7",foreground:"#2b2233",border:"1.5px solid rgba(41, 35, 47, 0.13)",borderRadius:"25px",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",success:"#268d75",error:"#df3338",submitBackground:"rgba(88, 74, 192, 1)",submitBackgroundHover:_m,submitBorder:_m,submitOutlineFocus:"#29232f",submitForeground:fm,submitForegroundHover:fm,cancelBackground:"transparent",cancelBackgroundHover:"var(--background-hover)",cancelBorder:"var(--border)",cancelOutlineFocus:"var(--input-outline-focus)",cancelForeground:"var(--foreground)",cancelForegroundHover:"var(--foreground)",inputBackground:mm,inputForeground:mm,inputBorder:"var(--border)",inputOutlineFocus:_m,formBorderRadius:"20px",formContentBorderRadius:"6px"},Tm=vm,ym={...vm,background:"#29232f",backgroundHover:"#352f3b",foreground:"#ebe6ef",border:"1.5px solid rgba(235, 230, 239, 0.15)",success:"#2da98c",error:"#f55459"},Em="widget",Sm="api";async function Im({feedback:{message:e,email:t,name:n,source:r,url:o}},{includeReplay:a=!0}={}){const i=zi(),s=i&&i.getTransport(),c=i&&i.getDsn();if(!i||!s||!c)return;const l={contexts:{feedback:{contact_email:t,name:n,message:e,url:o,source:r}},type:"feedback"};return Yi((async e=>{e.clearBreadcrumbs(),[Sm,Em].includes(String(r))&&e.setLevel("info");const t=await async function({client:e,scope:t,event:n}){const r={};e.emit&&e.emit("preprocessEvent",n,r);const o=await $i(e.getOptions(),n,r,t,e,_s());return null===o?(e.recordDroppedEvent("event_processor","feedback",n),null):(o.platform=o.platform||"javascript",o)}({scope:e,client:i,event:l});if(!t)return;i.emit&&i.emit("beforeSendFeedback",t,{includeReplay:Boolean(a)});const n=oc(t,c,i.getOptions()._metadata,i.getOptions().tunnel);let o;try{o=await s.send(n)}catch(e){const t=new Error("Unable to send Feedback");try{t.cause=e}catch(e){}throw t}if(o){if("number"==typeof o.statusCode&&(o.statusCode<200||o.statusCode>=300))throw new Error("Unable to send Feedback");return o}}))}function bm({name:e,email:t,message:n,source:r=Sm,url:o=mo()},a={}){if(!n)throw new Error("Unable to submit feedback with empty message");return Im({feedback:{name:e,email:t,message:n,url:o,source:r}},a)}const Am="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function wm(e,t){return{...e,...t,themeDark:{...e.themeDark,...t.themeDark},themeLight:{...e.themeLight,...t.themeLight}}}function Nm(e){return`\n  --background: ${e.background};\n  --background-hover: ${e.backgroundHover};\n  --foreground: ${e.foreground};\n  --error: ${e.error};\n  --success: ${e.success};\n  --border: ${e.border};\n  --border-radius: ${e.borderRadius};\n  --box-shadow: ${e.boxShadow};\n\n  --submit-background: ${e.submitBackground};\n  --submit-background-hover: ${e.submitBackgroundHover};\n  --submit-border: ${e.submitBorder};\n  --submit-outline-focus: ${e.submitOutlineFocus};\n  --submit-foreground: ${e.submitForeground};\n  --submit-foreground-hover: ${e.submitForegroundHover};\n\n  --cancel-background: ${e.cancelBackground};\n  --cancel-background-hover: ${e.cancelBackgroundHover};\n  --cancel-border: ${e.cancelBorder};\n  --cancel-outline-focus: ${e.cancelOutlineFocus};\n  --cancel-foreground: ${e.cancelForeground};\n  --cancel-foreground-hover: ${e.cancelForegroundHover};\n\n  --input-background: ${e.inputBackground};\n  --input-foreground: ${e.inputForeground};\n  --input-border: ${e.inputBorder};\n  --input-outline-focus: ${e.inputOutlineFocus};\n\n  --form-border-radius: ${e.formBorderRadius};\n  --form-content-border-radius: ${e.formContentBorderRadius};\n  `}function Om({id:e,colorScheme:t,themeDark:n,themeLight:r}){try{const o=hm.document,a=o.createElement("div");a.id=e;const i=a.attachShadow({mode:"open"});return i.appendChild(function(e,t,n){const r=e.createElement("style");return r.textContent=`\n:host {\n  --bottom: 1rem;\n  --right: 1rem;\n  --top: auto;\n  --left: auto;\n  --z-index: 100000;\n  --font-family: ${n.light.fontFamily};\n  --font-size: ${n.light.fontSize};\n\n  position: fixed;\n  left: var(--left);\n  right: var(--right);\n  bottom: var(--bottom);\n  top: var(--top);\n  z-index: var(--z-index);\n\n  font-family: var(--font-family);\n  font-size: var(--font-size);\n\n  ${Nm("dark"===t?n.dark:n.light)}\n}\n\n${"system"===t?`\n@media (prefers-color-scheme: dark) {\n  :host {\n    ${Nm(n.dark)}\n  }\n}`:""}\n}`,r}(o,t,{dark:n,light:r})),i.appendChild(function(e){const t=e.createElement("style");return t.textContent="\n.dialog {\n  line-height: 25px;\n  background-color: rgba(0, 0, 0, 0.05);\n  border: none;\n  position: fixed;\n  inset: 0;\n  z-index: 10000;\n  width: 100vw;\n  height: 100vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  opacity: 1;\n  transition: opacity 0.2s ease-in-out;\n}\n\n.dialog:not([open]) {\n  opacity: 0;\n  pointer-events: none;\n  visibility: hidden;\n}\n.dialog:not([open]) .dialog__content {\n  transform: translate(0, -16px) scale(0.98);\n}\n\n.dialog__content {\n  position: fixed;\n  left: var(--left);\n  right: var(--right);\n  bottom: var(--bottom);\n  top: var(--top);\n\n  border: var(--border);\n  border-radius: var(--form-border-radius);\n  background-color: var(--background);\n  color: var(--foreground);\n\n  width: 320px;\n  max-width: 100%;\n  max-height: calc(100% - 2rem);\n  display: flex;\n  flex-direction: column;\n  box-shadow: var(--box-shadow);\n  transition: transform 0.2s ease-in-out;\n  transform: translate(0, 0) scale(1);\n}\n\n.dialog__header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  font-size: 20px;\n  font-weight: 600;\n  padding: 24px 24px 0 24px;\n  margin: 0;\n  margin-bottom: 16px;\n}\n\n.brand-link {\n  display: inline-flex;\n}\n\n.error {\n  color: var(--error);\n  margin-bottom: 16px;\n}\n\n.form {\n  display: grid;\n  overflow: auto;\n  flex-direction: column;\n  gap: 16px;\n  padding: 0 24px 24px;\n}\n\n.form__error-container {\n  color: var(--error);\n}\n\n.form__error-container--hidden {\n  display: none;\n}\n\n.form__label {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n  margin: 0px;\n}\n\n.form__label__text {\n  display: grid;\n  gap: 4px;\n  align-items: center;\n  grid-auto-flow: column;\n  grid-auto-columns: max-content;\n}\n\n.form__label__text--required {\n  font-size: 0.85em;\n}\n\n.form__input {\n  line-height: inherit;\n  background-color: var(--input-background);\n  box-sizing: border-box;\n  border: var(--input-border);\n  border-radius: var(--form-content-border-radius);\n  color: var(--input-foreground);\n  font-family: inherit;\n  font-size: var(--font-size);\n  font-weight: 500;\n  padding: 6px 12px;\n}\n\n.form__input::placeholder {\n  color: var(--input-foreground);\n  opacity: 0.65;\n}\n\n.form__input:focus-visible {\n  outline: 1px auto var(--input-outline-focus);\n}\n\n.form__input--textarea {\n  font-family: inherit;\n  resize: vertical;\n}\n\n.btn-group {\n  display: grid;\n  gap: 8px;\n  margin-top: 8px;\n}\n\n.btn {\n  line-height: inherit;\n  border: var(--cancel-border);\n  border-radius: var(--form-content-border-radius);\n  cursor: pointer;\n  font-family: inherit;\n  font-size: var(--font-size);\n  font-weight: 600;\n  padding: 6px 16px;\n}\n.btn[disabled] {\n  opacity: 0.6;\n  pointer-events: none;\n}\n\n.btn--primary {\n  background-color: var(--submit-background);\n  border-color: var(--submit-border);\n  color: var(--submit-foreground);\n}\n.btn--primary:hover {\n  background-color: var(--submit-background-hover);\n  color: var(--submit-foreground-hover);\n}\n.btn--primary:focus-visible {\n  outline: 1px auto var(--submit-outline-focus);\n}\n\n.btn--default {\n  background-color: var(--cancel-background);\n  color: var(--cancel-foreground);\n  font-weight: 500;\n}\n.btn--default:hover {\n  background-color: var(--cancel-background-hover);\n  color: var(--cancel-foreground-hover);\n}\n.btn--default:focus-visible {\n  outline: 1px auto var(--cancel-outline-focus);\n}\n\n.success-message {\n  background-color: var(--background);\n  border: var(--border);\n  border-radius: var(--border-radius);\n  box-shadow: var(--box-shadow);\n  font-weight: 600;\n  color: var(--success);\n  padding: 12px 24px;\n  line-height: 25px;\n  display: grid;\n  align-items: center;\n  grid-auto-flow: column;\n  gap: 6px;\n  cursor: default;\n}\n\n.success-icon path {\n  fill: var(--success);\n}\n",t}(o)),{shadow:i,host:a}}catch(e){throw Io.warn("[Feedback] Browser does not support shadow DOM API"),new Error("Browser does not support shadow DOM API.")}}async function Rm(e,t,n){if(!e)return;e.hideError();try{return await bm({...t,source:Em},n)}catch(t){Am&&Io.error(t),e&&e.showError("There was a problem submitting feedback, please wait and try again.")}}function Lm(e,t){return Object.entries(t).forEach((([t,n])=>{e.setAttributeNS(null,t,n)})),e}function Cm(e,t,...n){const r=hm.document.createElement(e);t&&Object.entries(t).forEach((([e,t])=>{"className"===e&&"string"==typeof t?r.setAttribute("class",t):"boolean"==typeof t&&t?r.setAttribute(e,""):"string"==typeof t?r.setAttribute(e,t):e.startsWith("on")&&"function"==typeof t&&r.addEventListener(e.substring(2).toLowerCase(),t)}));for(const e of n)Pm(r,e);return r}function Pm(e,t){const n=hm.document;if(null!=t)if(Array.isArray(t))for(const n of t)Pm(e,n);else!1===t||("string"==typeof t?e.appendChild(n.createTextNode(t)):t instanceof Node?e.appendChild(t):e.appendChild(n.createTextNode(String(t))))}function xm({buttonLabel:e,onClick:t}){const n=Cm("button",{type:"button",className:"widget__actor","aria-label":e,"aria-hidden":"false"},function(){const e=e=>hm.document.createElementNS("http://www.w3.org/2000/svg",e),t=Lm(e("svg"),{class:"feedback-icon",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"}),n=Lm(e("g"),{clipPath:"url(#clip0_57_80)"}),r=Lm(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.6622 15H12.3997C12.2129 14.9959 12.031 14.9396 11.8747 14.8375L8.04965 12.2H7.49956V19.1C7.4875 19.3348 7.3888 19.5568 7.22256 19.723C7.05632 19.8892 6.83435 19.9879 6.59956 20H2.04956C1.80193 19.9968 1.56535 19.8969 1.39023 19.7218C1.21511 19.5467 1.1153 19.3101 1.11206 19.0625V12.2H0.949652C0.824431 12.2017 0.700142 12.1783 0.584123 12.1311C0.468104 12.084 0.362708 12.014 0.274155 11.9255C0.185602 11.8369 0.115689 11.7315 0.0685419 11.6155C0.0213952 11.4995 -0.00202913 11.3752 -0.00034808 11.25V3.75C-0.00900498 3.62067 0.0092504 3.49095 0.0532651 3.36904C0.0972798 3.24712 0.166097 3.13566 0.255372 3.04168C0.344646 2.94771 0.452437 2.87327 0.571937 2.82307C0.691437 2.77286 0.82005 2.74798 0.949652 2.75H8.04965L11.8747 0.1625C12.031 0.0603649 12.2129 0.00407221 12.3997 0H15.6622C15.9098 0.00323746 16.1464 0.103049 16.3215 0.278167C16.4966 0.453286 16.5964 0.689866 16.5997 0.9375V3.25269C17.3969 3.42959 18.1345 3.83026 18.7211 4.41679C19.5322 5.22788 19.9878 6.32796 19.9878 7.47502C19.9878 8.62209 19.5322 9.72217 18.7211 10.5333C18.1345 11.1198 17.3969 11.5205 16.5997 11.6974V14.0125C16.6047 14.1393 16.5842 14.2659 16.5395 14.3847C16.4948 14.5035 16.4268 14.6121 16.3394 14.7042C16.252 14.7962 16.147 14.8698 16.0307 14.9206C15.9144 14.9714 15.7891 14.9984 15.6622 15ZM1.89695 10.325H1.88715V4.625H8.33715C8.52423 4.62301 8.70666 4.56654 8.86215 4.4625L12.6872 1.875H14.7247V13.125H12.6872L8.86215 10.4875C8.70666 10.3835 8.52423 10.327 8.33715 10.325H2.20217C2.15205 10.3167 2.10102 10.3125 2.04956 10.3125C1.9981 10.3125 1.94708 10.3167 1.89695 10.325ZM2.98706 12.2V18.1625H5.66206V12.2H2.98706ZM16.5997 9.93612V5.01393C16.6536 5.02355 16.7072 5.03495 16.7605 5.04814C17.1202 5.13709 17.4556 5.30487 17.7425 5.53934C18.0293 5.77381 18.2605 6.06912 18.4192 6.40389C18.578 6.73866 18.6603 7.10452 18.6603 7.47502C18.6603 7.84552 18.578 8.21139 18.4192 8.54616C18.2605 8.88093 18.0293 9.17624 17.7425 9.41071C17.4556 9.64518 17.1202 9.81296 16.7605 9.90191C16.7072 9.91509 16.6536 9.9265 16.5997 9.93612Z"});t.appendChild(n).appendChild(r);const o=e("defs"),a=Lm(e("clipPath"),{id:"clip0_57_80"}),i=Lm(e("rect"),{width:"20",height:"20",fill:"white"});return a.appendChild(i),o.appendChild(a),t.appendChild(o).appendChild(a).appendChild(i),{get el(){return t}}}().el,e?Cm("span",{className:"widget__actor__text"},e):null);return n.addEventListener("click",(function(e){t&&t(e)})),{get el(){return n},show:()=>{n.classList.remove("widget__actor--hidden"),n.setAttribute("aria-hidden","false")},hide:()=>{n.classList.add("widget__actor--hidden"),n.setAttribute("aria-hidden","true")}}}function km(e,t){const n=e.get(t);return"string"==typeof n?n.trim():""}function Dm({nameLabel:e,namePlaceholder:t,emailLabel:n,emailPlaceholder:r,messageLabel:o,messagePlaceholder:a,isRequiredLabel:i,cancelButtonLabel:s,submitButtonLabel:c,showName:l,showEmail:u,isNameRequired:d,isEmailRequired:p,defaultName:g,defaultEmail:h,onCancel:f,onSubmit:m}){const{el:_}=function({label:e}){return{el:Cm("button",{type:"submit",className:"btn btn--primary","aria-label":e},e)}}({label:c});const v=Cm("div",{className:"form__error-container form__error-container--hidden","aria-hidden":"true"});const T=Cm("input",{id:"name",type:l?"text":"hidden","aria-hidden":l?"false":"true",name:"name",required:d,className:"form__input",placeholder:t,value:g}),y=Cm("input",{id:"email",type:u?"text":"hidden","aria-hidden":u?"false":"true",name:"email",required:p,className:"form__input",placeholder:r,value:h}),E=Cm("textarea",{id:"message",autoFocus:"true",rows:"5",name:"message",required:!0,className:"form__input form__input--textarea",placeholder:a}),S=Cm("button",{type:"button",className:"btn btn--default","aria-label":s,onClick:e=>{f&&f(e)}},s),I=Cm("form",{className:"form",onSubmit:function(e){if(e.preventDefault(),e.target instanceof HTMLFormElement)try{if(m){const t=new FormData(e.target),n={name:km(t,"name"),email:km(t,"email"),message:km(t,"message")};m(n)}}catch(e){}}},[v,l&&Cm("label",{htmlFor:"name",className:"form__label"},[Cm("span",{className:"form__label__text"},e,d&&Cm("span",{className:"form__label__text--required"},` ${i}`)),T]),!l&&T,u&&Cm("label",{htmlFor:"email",className:"form__label"},[Cm("span",{className:"form__label__text"},n,p&&Cm("span",{className:"form__label__text--required"},` ${i}`)),y]),!u&&y,Cm("label",{htmlFor:"message",className:"form__label"},[Cm("span",{className:"form__label__text"},o,Cm("span",{className:"form__label__text--required"},` ${i}`)),E]),Cm("div",{className:"btn-group"},[_,S])]);return{get el(){return I},showError:function(e){v.textContent=e,v.classList.remove("form__error-container--hidden"),v.setAttribute("aria-hidden","false")},hideError:function(){v.textContent="",v.classList.add("form__error-container--hidden"),v.setAttribute("aria-hidden","true")}}}function Um({formTitle:e,showBranding:t,showName:n,showEmail:r,isNameRequired:o,isEmailRequired:a,colorScheme:i,defaultName:s,defaultEmail:c,onClosed:l,onCancel:u,onSubmit:d,...p}){let g=null;function h(){g&&(g.open=!1)}const{el:f,showError:m,hideError:_}=Dm({showEmail:r,showName:n,isEmailRequired:a,isNameRequired:o,defaultName:s,defaultEmail:c,onSubmit:d,onCancel:u,...p});return g=Cm("dialog",{className:"dialog",open:!0,onClick:function(){h(),l&&l()}},Cm("div",{className:"dialog__content",onClick:e=>{e.stopPropagation()}},Cm("h2",{className:"dialog__header"},e,t&&Cm("a",{className:"brand-link",target:"_blank",href:"https://sentry.io/welcome/",title:"Powered by Sentry",rel:"noopener noreferrer"},function({colorScheme:e}){const t=e=>hm.document.createElementNS("http://www.w3.org/2000/svg",e),n=Lm(t("svg"),{class:"sentry-logo",width:"32",height:"30",viewBox:"0 0 72 66",fill:"none"}),r=Lm(t("path"),{transform:"translate(11, 11)",d:"M29,2.26a4.67,4.67,0,0,0-8,0L14.42,13.53A32.21,32.21,0,0,1,32.17,40.19H27.55A27.68,27.68,0,0,0,12.09,17.47L6,28a15.92,15.92,0,0,1,9.23,12.17H4.62A.76.76,0,0,1,4,39.06l2.94-5a10.74,10.74,0,0,0-3.36-1.9l-2.91,5a4.54,4.54,0,0,0,1.69,6.24A4.66,4.66,0,0,0,4.62,44H19.15a19.4,19.4,0,0,0-8-17.31l2.31-4A23.87,23.87,0,0,1,23.76,44H36.07a35.88,35.88,0,0,0-16.41-31.8l4.67-8a.77.77,0,0,1,1.05-.27c.53.29,20.29,34.77,20.66,35.17a.76.76,0,0,1-.68,1.13H40.6q.09,1.91,0,3.81h4.78A4.59,4.59,0,0,0,50,39.43a4.49,4.49,0,0,0-.62-2.28Z"});n.append(r);const o=t("defs"),a=t("style");return a.textContent=`\n    path {\n      fill: ${"dark"===e?"#fff":"#362d59"};\n    }`,"system"===e&&(a.textContent+="\n    @media (prefers-color-scheme: dark) {\n      path: {\n        fill: '#fff';\n      }\n    }\n    "),o.append(a),n.append(o),{get el(){return n}}}({colorScheme:i}).el)),f)),{get el(){return g},showError:m,hideError:_,open:function(){g&&(g.open=!0)},close:h,checkIsOpen:function(){return g&&!0===g.open||!1}}}function Mm({message:e,onRemove:t}){function n(){r&&(r.remove(),t&&t())}const r=Cm("div",{className:"success-message",onClick:n},function(){const e=e=>hm.document.createElementNS("http://www.w3.org/2000/svg",e),t=Lm(e("svg"),{class:"success-icon",width:"16",height:"17",viewBox:"0 0 16 17",fill:"none"}),n=Lm(e("g"),{clipPath:"url(#clip0_57_156)"}),r=Lm(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.55544 15.1518C4.87103 16.0308 6.41775 16.5 8 16.5C10.1217 16.5 12.1566 15.6571 13.6569 14.1569C15.1571 12.6566 16 10.6217 16 8.5C16 6.91775 15.5308 5.37103 14.6518 4.05544C13.7727 2.73985 12.5233 1.71447 11.0615 1.10897C9.59966 0.503466 7.99113 0.34504 6.43928 0.653721C4.88743 0.962403 3.46197 1.72433 2.34315 2.84315C1.22433 3.96197 0.462403 5.38743 0.153721 6.93928C-0.15496 8.49113 0.00346625 10.0997 0.608967 11.5615C1.21447 13.0233 2.23985 14.2727 3.55544 15.1518ZM4.40546 3.1204C5.46945 2.40946 6.72036 2.03 8 2.03C9.71595 2.03 11.3616 2.71166 12.575 3.92502C13.7883 5.13838 14.47 6.78405 14.47 8.5C14.47 9.77965 14.0905 11.0306 13.3796 12.0945C12.6687 13.1585 11.6582 13.9878 10.476 14.4775C9.29373 14.9672 7.99283 15.0953 6.73777 14.8457C5.48271 14.596 4.32987 13.9798 3.42502 13.075C2.52018 12.1701 1.90397 11.0173 1.65432 9.76224C1.40468 8.50718 1.5328 7.20628 2.0225 6.02404C2.5122 4.8418 3.34148 3.83133 4.40546 3.1204Z"}),o=Lm(e("path"),{d:"M6.68775 12.4297C6.78586 12.4745 6.89218 12.4984 7 12.5C7.11275 12.4955 7.22315 12.4664 7.32337 12.4145C7.4236 12.3627 7.51121 12.2894 7.58 12.2L12 5.63999C12.0848 5.47724 12.1071 5.28902 12.0625 5.11098C12.0178 4.93294 11.9095 4.77744 11.7579 4.67392C11.6064 4.57041 11.4221 4.52608 11.24 4.54931C11.0579 4.57254 10.8907 4.66173 10.77 4.79999L6.88 10.57L5.13 8.56999C5.06508 8.49566 4.98613 8.43488 4.89768 8.39111C4.80922 8.34735 4.713 8.32148 4.61453 8.31498C4.51605 8.30847 4.41727 8.32147 4.32382 8.35322C4.23038 8.38497 4.14413 8.43484 4.07 8.49999C3.92511 8.63217 3.83692 8.81523 3.82387 9.01092C3.81083 9.2066 3.87393 9.39976 4 9.54999L6.43 12.24C6.50187 12.3204 6.58964 12.385 6.68775 12.4297Z"});t.appendChild(n).append(o,r);const a=e("defs"),i=Lm(e("clipPath"),{id:"clip0_57_156"}),s=Lm(e("rect"),{width:"16",height:"16",fill:"white",transform:"translate(0 0.5)"});return i.appendChild(s),a.appendChild(i),t.appendChild(a).appendChild(i).appendChild(s),{get el(){return t}}}().el,e);return{el:r,remove:n}}function Gm({shadow:e,options:{shouldCreateActor:t=!0,...n},attachTo:r}){let o,a,i=!1;async function s(t){if(!a)return;const r=[];if(n.isNameRequired&&!t.name&&r.push(n.nameLabel),n.isEmailRequired&&!t.email&&r.push(n.emailLabel),t.message||r.push(n.messageLabel),r.length>0)return void a.showError(`Please enter in the following required fields: ${r.join(", ")}`);await Rm(a,t)?(g(),function(){if(e)try{const t=Mm({message:n.successMessageText,onRemove:()=>{r&&clearTimeout(r),l()}});if(!t.el)throw new Error("Unable to show success message");e.appendChild(t.el);const r=setTimeout((()=>{t&&t.remove()}),5e3)}catch(e){Io.error(e)}}(),n.onSubmitSuccess&&n.onSubmitSuccess()):n.onSubmitError&&n.onSubmitError()}function c(){const e=zi(),t=e&&e.getIntegrationByName&&e.getIntegrationByName("Replay");t&&t.flush().catch((e=>{Am&&Io.error(e)}))}function l(){o&&o.show()}function u(){o&&o.hide()}function d(){try{if(a)return a.open(),i=!0,n.onFormOpen&&n.onFormOpen(),void c();const t=n.useSentryUser,r=Xi(),o=r&&r.getUser();if(a=Um({colorScheme:n.colorScheme,showBranding:n.showBranding,showName:n.showName||n.isNameRequired,showEmail:n.showEmail||n.isEmailRequired,isNameRequired:n.isNameRequired,isEmailRequired:n.isEmailRequired,formTitle:n.formTitle,cancelButtonLabel:n.cancelButtonLabel,submitButtonLabel:n.submitButtonLabel,emailLabel:n.emailLabel,emailPlaceholder:n.emailPlaceholder,messageLabel:n.messageLabel,messagePlaceholder:n.messagePlaceholder,nameLabel:n.nameLabel,namePlaceholder:n.namePlaceholder,isRequiredLabel:n.isRequiredLabel,defaultName:t&&o&&o[t.name]||"",defaultEmail:t&&o&&o[t.email]||"",onClosed:()=>{l(),i=!1,n.onFormClose&&n.onFormClose()},onCancel:()=>{p(),l()},onSubmit:s}),!a.el)throw new Error("Unable to open Feedback dialog");e.appendChild(a.el),u(),n.onFormOpen&&n.onFormOpen(),c()}catch(e){Io.error(e)}}function p(){a&&(a.close(),i=!1,n.onFormClose&&n.onFormClose())}function g(){if(a){p();const e=a.el;e&&e.remove(),a=void 0}}function h(){i||d(),u()}return r?r.addEventListener("click",h):t&&(o=xm({buttonLabel:n.buttonLabel,onClick:h}),o.el&&e.appendChild(o.el)),{get actor(){return o},get dialog(){return a},showActor:l,hideActor:u,removeActor:function(){o&&o.el&&o.el.remove()},openDialog:d,closeDialog:p,removeDialog:g}}const $m=hm.document;class Vm{static __initStatic(){this.id="Feedback"}constructor({autoInject:e=!0,id:t="sentry-feedback",isEmailRequired:n=!1,isNameRequired:r=!1,showBranding:o=!0,showEmail:a=!0,showName:i=!0,useSentryUser:s={email:"email",name:"username"},themeDark:c,themeLight:l,colorScheme:u="system",buttonLabel:d="Report a Bug",cancelButtonLabel:p="Cancel",submitButtonLabel:g="Send Bug Report",formTitle:h="Report a Bug",emailPlaceholder:f="your.email@example.org",emailLabel:m="Email",messagePlaceholder:_="What's the bug? What did you expect?",messageLabel:v="Description",namePlaceholder:T="Your Name",nameLabel:y="Name",isRequiredLabel:E="(required)",successMessageText:S="Thank you for your report!",onFormClose:I,onFormOpen:b,onSubmitError:A,onSubmitSuccess:w}={}){this.name=Vm.id,this._host=null,this._shadow=null,this._widget=null,this._widgets=new Set,this._hasInsertedActorStyles=!1,this.options={autoInject:e,showBranding:o,id:t,isEmailRequired:n,isNameRequired:r,showEmail:a,showName:i,useSentryUser:s,colorScheme:u,themeDark:{...ym,...c},themeLight:{...Tm,...l},buttonLabel:d,cancelButtonLabel:p,submitButtonLabel:g,formTitle:h,emailLabel:m,emailPlaceholder:f,messageLabel:v,messagePlaceholder:_,nameLabel:y,namePlaceholder:T,isRequiredLabel:E,successMessageText:S,onFormClose:I,onFormOpen:b,onSubmitError:A,onSubmitSuccess:w}}setupOnce(){if(Da())try{this._cleanupWidgetIfExists();const{autoInject:e}=this.options;if(!e)return;this._createWidget(this.options)}catch(e){Am&&Io.error(e)}}openDialog(){this._widget||this._createWidget({...this.options,shouldCreateActor:!1}),this._widget&&this._widget.openDialog()}closeDialog(){this._widget&&this._widget.closeDialog()}attachTo(e,t){try{const n=wm(this.options,t||{});return this._ensureShadowHost(n,(({shadow:t})=>{const r="string"==typeof e?$m.querySelector(e):"function"==typeof e.addEventListener?e:null;if(!r)return Am&&Io.error("[Feedback] Unable to attach to target element"),null;const o=Gm({shadow:t,options:n,attachTo:r});return this._widgets.add(o),this._widget||(this._widget=o),o}))}catch(e){return Am&&Io.error(e),null}}createWidget(e){try{return this._createWidget(wm(this.options,e||{}))}catch(e){return Am&&Io.error(e),null}}removeWidget(e){if(!e)return!1;try{if(this._widgets.has(e))return e.removeActor(),e.removeDialog(),this._widgets.delete(e),this._widget===e&&(this._widget=null),!0}catch(e){Am&&Io.error(e)}return!1}getWidget(){return this._widget}remove(){this._host&&this._host.remove(),this._initialize()}_initialize(){this._host=null,this._shadow=null,this._widget=null,this._widgets=new Set,this._hasInsertedActorStyles=!1}_cleanupWidgetIfExists(){this._host&&this.remove();const e=$m.querySelector(`#${this.options.id}`);e&&e.remove()}_createWidget(e){return this._ensureShadowHost(e,(({shadow:t})=>{const n=Gm({shadow:t,options:e});return!this._hasInsertedActorStyles&&n.actor&&(t.appendChild(function(e){const t=e.createElement("style");return t.textContent="\n.widget__actor {\n  position: fixed;\n  left: var(--left);\n  right: var(--right);\n  bottom: var(--bottom);\n  top: var(--top);\n  z-index: var(--z-index);\n\n  line-height: 16px;\n\n  display: flex;\n  align-items: center;\n  gap: 8px;\n\n  border-radius: var(--border-radius);\n  cursor: pointer;\n  font-family: inherit;\n  font-size: var(--font-size);\n  font-weight: 600;\n  padding: 16px;\n  text-decoration: none;\n  z-index: 9000;\n\n  color: var(--foreground);\n  background-color: var(--background);\n  border: var(--border);\n  box-shadow: var(--box-shadow);\n  opacity: 1;\n  transition: opacity 0.1s ease-in-out;\n}\n\n.widget__actor:hover {\n  background-color: var(--background-hover);\n}\n\n.widget__actor svg {\n  width: 16px;\n  height: 16px;\n}\n\n.widget__actor--hidden {\n  opacity: 0;\n  pointer-events: none;\n  visibility: hidden;\n}\n\n.widget__actor__text {\n}\n\n@media (max-width: 600px) {\n  .widget__actor__text {\n    display: none;\n  }\n}\n\n.feedback-icon path {\n  fill: var(--foreground);\n}\n",t}($m)),this._hasInsertedActorStyles=!0),this._widgets.add(n),this._widget||(this._widget=n),n}))}_ensureShadowHost(e,t){let n=!1;if(!this._shadow||!this._host){const{id:t,colorScheme:r,themeLight:o,themeDark:a}=e,{shadow:i,host:s}=Om({id:t,colorScheme:r,themeLight:o,themeDark:a});this._shadow=i,this._host=s,n=!0}this._host.dataset.sentryFeedbackColorscheme=e.colorScheme;const r=t({shadow:this._shadow,host:this._host});return n&&$m.body.appendChild(this._host),r}}Vm.__initStatic();const Fm="CaptureConsole",jm=(e={})=>{const t=e.levels||yo;return{name:Fm,setupOnce(){},setup(e){"console"in lo&&zo((({args:n,level:r})=>{zi()===e&&t.includes(r)&&function(e,t){const n={level:Xa(t),extra:{arguments:e}};Yi((r=>{if(r.addEventProcessor((e=>(e.logger="console",ta(e,{handled:!1,type:"console"}),e))),"assert"===t&&!1===e[0]){const t=`Assertion failed: ${to(e.slice(1)," ")||"console.assert"}`;return r.setExtra("arguments",e.slice(1)),void qi(t,n)}const o=e.find((e=>e instanceof Error));if("error"===t&&o)return void Wi(o,n);qi(to(e," "),n)}))}(n,r)}))}}};pc(Fm,jm);const Wm="Debug",qm=(e={})=>{const t={debugger:!1,stringify:!1,...e};return{name:Wm,setupOnce(){},setup(e){e.on&&e.on("beforeSendEvent",((e,n)=>{t.debugger,So((()=>{t.stringify?(console.log(JSON.stringify(e,null,2)),n&&Object.keys(n).length&&console.log(JSON.stringify(n,null,2))):(console.log(e),n&&Object.keys(n).length&&console.log(n))}))}))}}};pc(Wm,qm);const Bm="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,Hm="Dedupe",Jm=()=>{let e;return{name:Hm,setupOnce(){},processEvent(t){if(t.type)return t;try{if(function(e,t){if(!t)return!1;if(function(e,t){const n=e.message,r=t.message;if(!n&&!r)return!1;if(n&&!r||!n&&r)return!1;if(n!==r)return!1;if(!zm(e,t))return!1;if(!Ym(e,t))return!1;return!0}(e,t))return!0;if(function(e,t){const n=Xm(t),r=Xm(e);if(!n||!r)return!1;if(n.type!==r.type||n.value!==r.value)return!1;if(!zm(e,t))return!1;if(!Ym(e,t))return!1;return!0}(e,t))return!0;return!1}(t,e))return Bm&&Io.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(e){}return e=t}}};function Ym(e,t){let n=Km(e),r=Km(t);if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;if(r.length!==n.length)return!1;for(let e=0;e<r.length;e++){const t=r[e],o=n[e];if(t.filename!==o.filename||t.lineno!==o.lineno||t.colno!==o.colno||t.function!==o.function)return!1}return!0}function zm(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;try{return!(n.join("")!==r.join(""))}catch(e){return!1}}function Xm(e){return e.exception&&e.exception.values&&e.exception.values[0]}function Km(e){const t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch(e){return}}pc(Hm,Jm);const Qm="ExtraErrorData",Zm=(e={})=>{const t=e.depth||3,n=e.captureErrorCause||!1;return{name:Qm,setupOnce(){},processEvent:(e,r)=>function(e,t={},n,r){if(!t.originalException||!Vr(t.originalException))return e;const o=t.originalException.name||t.originalException.constructor.name,a=function(e,t){try{const n=["name","message","stack","line","column","fileName","lineNumber","columnNumber","toJSON"],r={};for(const t of Object.keys(e)){if(-1!==n.indexOf(t))continue;const o=e[t];r[t]=Vr(o)?o.toString():o}if(t&&void 0!==e.cause&&(r.cause=Vr(e.cause)?e.cause.toString():e.cause),"function"==typeof e.toJSON){const t=e.toJSON();for(const e of Object.keys(t)){const n=t[e];r[e]=Vr(n)?n.toString():n}}return r}catch(e){Bm&&Io.error("Unable to extract extra data from the Error object:",e)}return null}(t.originalException,r);if(a){const t={...e.contexts},r=Ua(a,n);return Jr(r)&&(Co(r,"__sentry_skip_normalization__",!0),t[o]=r),{...e,contexts:t}}return e}(e,r,t,n)}};pc(Qm,Zm);const e_=lo,t_="ReportingObserver",n_=new WeakMap,r_=(e={})=>{const t=e.types||["crash","deprecation","intervention"];function n(e){if(n_.has(zi()))for(const t of e)Yi((e=>{e.setExtra("url",t.url);const n=`ReportingObserver [${t.type}]`;let r="No details available";if(t.body){const n={};for(const e in t.body)n[e]=t.body[e];if(e.setExtra("body",n),"crash"===t.type){const e=t.body;r=[e.crashId||"",e.reason||""].join(" ").trim()||r}else{r=t.body.message||r}}qi(`${n}: ${r}`)}))}return{name:t_,setupOnce(){if(!("ReportingObserver"in da))return;new e_.ReportingObserver(n,{buffered:!0,types:t}).observe()},setup(e){n_.set(e,!0)}}};pc(t_,r_);const o_="RewriteFrames",a_=(e={})=>{const t=e.root,n=e.prefix||"app:///",r=e.iteratee||(e=>{if(!e.filename)return e;const r=/^[a-zA-Z]:\\/.test(e.filename)||e.filename.includes("\\")&&!e.filename.includes("/"),o=/^\//.test(e.filename);if(r||o){const o=r?e.filename.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/"):e.filename,a=t?function(e,t){e=Va(e).slice(1),t=Va(t).slice(1);const n=Fa(e.split("/")),r=Fa(t.split("/")),o=Math.min(n.length,r.length);let a=o;for(let e=0;e<o;e++)if(n[e]!==r[e]){a=e;break}let i=[];for(let e=a;e<n.length;e++)i.push("..");return i=i.concat(r.slice(a)),i.join("/")}(t,o):ja(o);e.filename=`${n}${a}`}return e});return{name:o_,setupOnce(){},processEvent(e){let t=e;return e.exception&&Array.isArray(e.exception.values)&&(t=function(e){try{return{...e,exception:{...e.exception,values:e.exception.values.map((e=>{return{...e,...e.stacktrace&&{stacktrace:(t=e.stacktrace,{...t,frames:t&&t.frames&&t.frames.map((e=>r(e)))})}};var t}))}}}catch(t){return e}}(t)),t}}};pc(o_,a_);const i_="SessionTiming",s_=()=>{const e=Date.now();return{name:i_,setupOnce(){},processEvent(t){const n=Date.now();return{...t,extra:{...t.extra,"session:start":e,"session:duration":n-e,"session:end":n}}}}};pc(i_,s_);const c_="HttpClient",l_=(e={})=>{const t={failedRequestStatusCodes:[[500,599]],failedRequestTargets:[/.*/],...e};return{name:c_,setupOnce(){},setup(e){!function(e,t){if(!ha())return;fa((n=>{if(zi()!==e)return;const{response:r,args:o}=n,[a,i]=o;r&&function(e,t,n,r){if(p_(e,n.status,n.url)){const e=function(e,t){if(!t&&e instanceof Request)return e;if(e instanceof Request&&e.bodyUsed)return e;return new Request(e,t)}(t,r);let o,a,i,s;h_()&&([{headers:o,cookies:i},{headers:a,cookies:s}]=[{cookieHeader:"Cookie",obj:e},{cookieHeader:"Set-Cookie",obj:n}].map((({cookieHeader:e,obj:t})=>{const n=function(e){const t={};return e.forEach(((e,n)=>{t[n]=e})),t}(t.headers);let r;try{const t=n[e]||n[e.toLowerCase()]||void 0;t&&(r=d_(t))}catch(t){Bm&&Io.log(`Could not extract cookies from header ${e}`)}return{headers:n,cookies:r}})));Bi(g_({url:e.url,method:e.method,status:n.status,requestHeaders:o,responseHeaders:a,requestCookies:i,responseCookies:s}))}}(t,a,r,i)}))}(e,t),function(e,t){if(!("XMLHttpRequest"in lo))return;Pa((n=>{if(zi()!==e)return;const r=n.xhr,o=r[Ca];if(!o)return;const{method:a,request_headers:i}=o;try{!function(e,t,n,r){if(p_(e,t.status,t.responseURL)){let e,o,a;if(h_()){try{const e=t.getResponseHeader("Set-Cookie")||t.getResponseHeader("set-cookie")||void 0;e&&(o=d_(e))}catch(e){Bm&&Io.log("Could not extract cookies from response headers")}try{a=function(e){const t=e.getAllResponseHeaders();if(!t)return{};return t.split("\r\n").reduce(((e,t)=>{const[n,r]=t.split(": ");return e[n]=r,e}),{})}(t)}catch(e){Bm&&Io.log("Could not extract headers from response")}e=r}Bi(g_({url:t.responseURL,method:n,status:t.status,requestHeaders:e,responseHeaders:a,responseCookies:o}))}}(t,r,a,i)}catch(e){Bm&&Io.warn("Error while extracting response event form XHR response",e)}}))}(e,t)}}};function u_(e){if(e){const t=e["Content-Length"]||e["content-length"];if(t)return parseInt(t,10)}}function d_(e){return e.split("; ").reduce(((e,t)=>{const[n,r]=t.split("=");return e[n]=r,e}),{})}function p_(e,t,n){return function(e,t){return e.some((e=>"number"==typeof e?e===t:t>=e[0]&&t<=e[1]))}(e.failedRequestStatusCodes,t)&&(r=e.failedRequestTargets,o=n,r.some((e=>"string"==typeof e?o.includes(e):e.test(o))))&&!kc(n,zi());var r,o}function g_(e){const t=`HTTP Client Error with status code: ${e.status}`,n={message:t,exception:{values:[{type:"Error",value:t}]},request:{url:e.url,method:e.method,headers:e.requestHeaders,cookies:e.requestCookies},contexts:{response:{status_code:e.status,headers:e.responseHeaders,cookies:e.responseCookies,body_size:u_(e.responseHeaders)}}};return ta(n,{type:"http.client",handled:!1}),n}function h_(){const e=zi();return!!e&&Boolean(e.getOptions().sendDefaultPii)}pc(c_,l_);const f_=lo,m_="ContextLines",__=(e={})=>{const t=null!=e.frameContextLines?e.frameContextLines:7;return{name:m_,setupOnce(){},processEvent:e=>function(e,t){const n=f_.document,r=f_.location&&(o=f_.location.href,o.split(/[\?#]/,1)[0]);var o;if(!n||!r)return e;const a=e.exception&&e.exception.values;if(!a||!a.length)return e;const i=n.documentElement.innerHTML;if(!i)return e;const s=["<!DOCTYPE html>","<html>",...i.split("\n"),"</html>"];return a.forEach((e=>{const n=e.stacktrace;n&&n.frames&&(n.frames=n.frames.map((e=>function(e,t,n,r){if(e.filename!==n||!e.lineno||!t.length)return e;return function(e,t,n=5){if(void 0===t.lineno)return;const r=e.length,o=Math.max(Math.min(r-1,t.lineno-1),0);t.pre_context=e.slice(Math.max(0,o-n),o).map((e=>eo(e,0))),t.context_line=eo(e[Math.min(r-1,o)],t.colno||0),t.post_context=e.slice(Math.min(o+1,r),o+1+n).map((e=>eo(e,0)))}(t,e,r),e}(e,s,r,t))))})),e}(e,t)}};function v_(e){return new Promise(((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)}))}function T_(e){return v_(e.getAllKeys())}function y_(e){let t;function n(){return null==t&&(t=function(e,t){const n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(t);const r=v_(n);return e=>r.then((n=>e(n.transaction(t,"readwrite").objectStore(t))))}(e.dbName||"sentry-offline",e.storeName||"queue")),t}return{insert:async t=>{try{const r=await hi(t,e.textEncoder);await function(e,t,n){return e((e=>T_(e).then((r=>{if(!(r.length>=n))return e.put(t,Math.max(...r,0)+1),v_(e.transaction)}))))}(n(),r,e.maxQueueSize||30)}catch(e){}},pop:async()=>{try{const t=await function(e){return e((e=>T_(e).then((t=>{if(0!==t.length)return v_(e.get(t[0])).then((n=>(e.delete(t[0]),v_(e.transaction).then((()=>n)))))}))))}(n());if(t)return function(e,t,n){let r="string"==typeof e?t.encode(e):e;function o(e){const t=r.subarray(0,e);return r=r.subarray(e+1),t}function a(){let e=r.indexOf(10);return e<0&&(e=r.length),JSON.parse(n.decode(o(e)))}const i=a(),s=[];for(;r.length;){const e=a(),t="number"==typeof e.length?e.length:void 0;s.push([e,t?o(t):a()])}return[i,s]}(t,e.textEncoder||new TextEncoder,e.textDecoder||new TextDecoder)}catch(e){}}}}pc(m_,__);const E_=1e6,S_=String(0),I_="main";let b_="",A_="",w_="",N_=Ou.navigator&&Ou.navigator.userAgent||"",O_="";const R_=Ou.navigator&&Ou.navigator.language||Ou.navigator&&Ou.navigator.languages&&Ou.navigator.languages[0]||"";const L_=Ou.navigator&&Ou.navigator.userAgentData;var C_;function P_(e){return function(e){return!("thread_metadata"in e)}(e)?function(e){let t,n=0;const r={samples:[],stacks:[],frames:[],thread_metadata:{[S_]:{name:I_}}};if(!e.samples.length)return r;const o=e.samples[0].timestamp,a="number"==typeof performance.timeOrigin?performance.timeOrigin:Za||0,i=a-(Za||a);for(let a=0;a<e.samples.length;a++){const s=e.samples[a];if(void 0===s.stackId){void 0===t&&(t=n,r.stacks[t]=[],n++),r.samples[a]={elapsed_since_start_ns:((s.timestamp+i-o)*E_).toFixed(0),stack_id:t,thread_id:S_};continue}let c=e.stacks[s.stackId];const l=[];for(;c;){l.push(c.frameId);const t=e.frames[c.frameId];void 0===r.frames[c.frameId]&&(r.frames[c.frameId]={function:t.name,abs_path:"number"==typeof t.resourceId?e.resources[t.resourceId]:void 0,lineno:t.line,colno:t.column}),c=void 0===c.parentId?void 0:e.stacks[c.parentId]}const u={elapsed_since_start_ns:((s.timestamp+i-o)*E_).toFixed(0),stack_id:n,thread_id:S_};r.stacks[n]=l,r.samples[a]=u,n++}return r}(e):e}function x_(e,t,n,r){if("transaction"!==r.type)throw new TypeError("Profiling events may only be attached to transactions, this should never occur.");if(null==n)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${n} instead.`);const o=function(e){const t=e&&e.contexts&&e.contexts.trace&&e.contexts.trace.trace_id;return"string"==typeof t&&32!==t.length&&Pu&&Io.log(`[Profiling] Invalid traceId: ${t} on profiled event`),"string"!=typeof t?"":t}(r),a=P_(n),i=t||("number"==typeof r.start_timestamp?1e3*r.start_timestamp:Date.now()),s="number"==typeof r.timestamp?1e3*r.timestamp:Date.now();return{event_id:e,timestamp:new Date(i).toISOString(),platform:"javascript",version:"1",release:r.release||"",environment:r.environment||wi,runtime:{name:"javascript",version:Ou.navigator.userAgent},os:{name:b_,version:A_,build_number:N_},device:{locale:R_,model:O_,manufacturer:N_,architecture:w_,is_emulator:!1},debug_meta:{images:U_(n.resources)},profile:a,transactions:[{name:r.transaction||"",id:r.event_id||Ko(),trace_id:o,active_thread_id:S_,relative_start_ns:"0",relative_end_ns:(1e6*(s-i)).toFixed(0)}]}}function k_(e){return"pageload"===e.op}"object"==typeof(C_=L_)&&null!==C_&&"getHighEntropyValues"in C_&&L_.getHighEntropyValues(["architecture","model","platform","platformVersion","fullVersionList"]).then((e=>{if(b_=e.platform||"",w_=e.architecture||"",O_=e.model||"",A_=e.platformVersion||"",e.fullVersionList&&e.fullVersionList.length>0){const t=e.fullVersionList[e.fullVersionList.length-1];N_=`${t.brand} ${t.version}`}})).catch((e=>{}));const D_=new WeakMap;function U_(e){const t=lo._sentryDebugIds;if(!t)return[];const n=zi(),r=n&&n.getOptions(),o=r&&r.stackParser;if(!o)return[];let a;const i=D_.get(o);i?a=i:(a=new Map,D_.set(o,a));const s=Object.keys(t).reduce(((e,n)=>{let r;const i=a.get(n);i?r=i:(r=o(n),a.set(n,r));for(let o=r.length-1;o>=0;o--){const a=r[o],i=a&&a.filename;if(a&&i){e[i]=t[n];break}}return e}),{}),c=[];for(const t of e)t&&s[t]&&c.push({type:"sourcemap",code_file:t,debug_id:s[t]});return c}let M_=!1;function G_(e){if(M_)return Pu&&Io.log("[Profiling] Profiling has been disabled for the duration of the current user session."),!1;if(!e.isRecording())return Pu&&Io.log("[Profiling] Discarding profile because transaction was not sampled."),!1;const t=zi(),n=t&&t.getOptions();if(!n)return Pu&&Io.log("[Profiling] Profiling disabled, no options found."),!1;const r=n.profilesSampleRate;if(!("number"!=typeof(o=r)&&"boolean"!=typeof o||"number"==typeof o&&isNaN(o)?(Pu&&Io.warn(`[Profiling] Invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(o)} of type ${JSON.stringify(typeof o)}.`),0):!0===o||!1===o||!(o<0||o>1)||(Pu&&Io.warn(`[Profiling] Invalid sample rate. Sample rate must be between 0 and 1. Got ${o}.`),0)))return Pu&&Io.warn("[Profiling] Discarding profile because of invalid sample rate."),!1;var o;if(!r)return Pu&&Io.log("[Profiling] Discarding profile because a negative sampling decision was inherited or profileSampleRate is set to 0"),!1;return!!(!0===r||Math.random()<r)||(Pu&&Io.log(`[Profiling] Discarding profile because it's not included in the random sample (sampling rate = ${Number(r)})`),!1)}function $_(e,t,n,r){return function(e){return e.samples.length<2?(Pu&&Io.log("[Profiling] Discarding profile because it contains less than 2 samples"),!1):!!e.frames.length||(Pu&&Io.log("[Profiling] Discarding profile because it contains no frames"),!1)}(n)?x_(e,t,n,r):null}const V_=new Map;function F_(e){const t=V_.get(e);return t&&V_.delete(e),t}function j_(e){let t;k_(e)&&(t=1e3*Qa());const n=function(){const e=Ou.Profiler;if("function"!=typeof e)return void(Pu&&Io.log("[Profiling] Profiling is not supported by this browser, Profiler interface missing on window object."));const t=Math.floor(3e3);try{return new e({sampleInterval:10,maxBufferSize:t})}catch(e){Pu&&(Io.log("[Profiling] Failed to initialize the Profiling constructor, this is likely due to a missing 'Document-Policy': 'js-profiling' header."),Io.log("[Profiling] Disabling profiling for current user session.")),M_=!0}}();if(!n)return e;Pu&&Io.log(`[Profiling] started profiling transaction: ${Mi(e).description}`);const r=Ko();async function o(){return e&&n?n.stop().then((t=>(a&&(Ou.clearTimeout(a),a=void 0),Pu&&Io.log(`[Profiling] stopped profiling of transaction: ${Mi(e).description}`),t?(function(e,t){if(V_.set(e,t),V_.size>30){const e=V_.keys().next().value;V_.delete(e)}}(r,t),null):(Pu&&Io.log(`[Profiling] profiler returned null profile for: ${Mi(e).description}`,"this may indicate an overlapping transaction or a call to stopProfiling with a profile title that was never started"),null)))).catch((e=>(Pu&&Io.log("[Profiling] error while stopping profiler:",e),null))):null}let a=Ou.setTimeout((()=>{Pu&&Io.log("[Profiling] max profile duration elapsed, stopping profiling for:",Mi(e).description),o()}),3e4);const i=e.end.bind(e);return e.end=function(){return e?(o().then((()=>{e.setContext("profile",{profile_id:r,start_timestamp:t}),i()}),(()=>{i()})),e):i()},e}const W_="BrowserProfiling",q_=()=>({name:W_,setupOnce(){},setup(e){const t=Xi().getTransaction();t&&k_(t)&&G_(t)&&j_(t),"function"==typeof e.on?(e.on("startTransaction",(e=>{G_(e)&&j_(e)})),e.on("beforeEnvelope",(e=>{if(!V_.size)return;const t=function(e){const t=[];return pi(e,((e,n)=>{if("transaction"===n)for(let n=1;n<e.length;n++){const r=e[n];r&&r.contexts&&r.contexts.profile&&r.contexts.profile.profile_id&&t.push(e[n])}})),t}(e);if(!t.length)return;const n=[];for(const e of t){const t=e&&e.contexts,r=t&&t.profile&&t.profile.profile_id,o=t&&t.profile&&t.profile.start_timestamp;if("string"!=typeof r){Pu&&Io.log("[Profiling] cannot find profile for a transaction without a profile context");continue}if(!r){Pu&&Io.log("[Profiling] cannot find profile for a transaction without a profile context");continue}t&&t.profile&&delete t.profile;const a=F_(r);if(!a){Pu&&Io.log(`[Profiling] Could not retrieve profile for transaction: ${r}`);continue}const i=$_(r,o,a,e);i&&n.push(i)}!function(e,t){if(!t.length)return e;for(const n of t)e[1].push([{type:"profile"},n])}(e,n)}))):Io.warn("[Profiling] Client does not support hooks, profiling will be disabled")}}),B_=pc(W_,q_);let H_={};Ou.Sentry&&Ou.Sentry.Integrations&&(H_=Ou.Sentry.Integrations);const J_={...H_,...sl,...Bd};var Y_=Object.freeze({__proto__:null,Breadcrumbs:hd,BrowserClient:qu,BrowserProfilingIntegration:B_,BrowserTracing:class{constructor(e){this.name="BrowserTracing",this._hasSetTracePropagationTargets=!1,nc(),cl&&(this._hasSetTracePropagationTargets=!(!e||!e.tracePropagationTargets&&!e.tracingOrigins)),this.options={...Tu,...e},void 0!==this.options._experiments.enableLongTask&&(this.options.enableLongTask=this.options._experiments.enableLongTask),e&&!e.tracePropagationTargets&&e.tracingOrigins&&(this.options.tracePropagationTargets=e.tracingOrigins),this._collectWebVitals=ou(),this._interactionIdToRouteNameMapping={},this.options.enableInp&&su(this._interactionIdToRouteNameMapping,this.options.interactionsSampleRate),this.options.enableLongTask&&au(),this.options._experiments.enableInteractions&&iu(),this._latestRoute={name:void 0,context:void 0}}setupOnce(e,t){this._getCurrentHub=t;const n=t().getClient(),r=n&&n.getOptions(),{routingInstrumentation:o,startTransactionOnLocationChange:a,startTransactionOnPageLoad:i,markBackgroundTransactions:s,traceFetch:c,traceXHR:l,shouldCreateSpanForRequest:u,enableHTTPTimings:d,_experiments:p}=this.options,g=r&&r.tracePropagationTargets,h=g||this.options.tracePropagationTargets;cl&&this._hasSetTracePropagationTargets&&g&&Io.warn("[Tracing] The `tracePropagationTargets` option was set in the BrowserTracing integration and top level `Sentry.init`. The top level `Sentry.init` value is being used."),o((e=>{const n=this._createRouteTransaction(e);return this.options._experiments.onStartRouteTransaction&&this.options._experiments.onStartRouteTransaction(n,e,t),n}),i,a),s&&ul(),p.enableInteractions&&this._registerInteractionListener(),this.options.enableInp&&this._registerInpInteractionListener(),fu({traceFetch:c,traceXHR:l,tracePropagationTargets:h,shouldCreateSpanForRequest:u,enableHTTPTimings:d})}_createRouteTransaction(e){if(!this._getCurrentHub)return void(cl&&Io.warn(`[Tracing] Did not create ${e.op} transaction because _getCurrentHub is invalid.`));const t=this._getCurrentHub(),{beforeNavigate:n,idleTimeout:r,finalTimeout:o,heartbeatInterval:a}=this.options,i="pageload"===e.op;let s;if(i){const t=i?yu("sentry-trace"):"",n=i?yu("baggage"):void 0,{traceId:r,dsc:o,parentSpanId:a,sampled:c}=ci(t,n);s={traceId:r,parentSpanId:a,parentSampled:c,...e,metadata:{...e.metadata,dynamicSamplingContext:o},trimEnd:!0}}else s={trimEnd:!0,...e};const c="function"==typeof n?n(s):s,l=void 0===c?{...s,sampled:!1}:c;l.metadata=l.name!==s.name?{...l.metadata,source:"custom"}:l.metadata,this._latestRoute.name=l.name,this._latestRoute.context=l,!1===l.sampled&&cl&&Io.log(`[Tracing] Will not send ${l.op} transaction because of beforeNavigate.`),cl&&Io.log(`[Tracing] Starting ${l.op} transaction on scope`);const{location:u}=ll,d=tc(t,l,r,o,!0,{location:u},a,i);return i&&ll.document&&(ll.document.addEventListener("readystatechange",(()=>{["interactive","complete"].includes(ll.document.readyState)&&d.sendAutoFinishSignal()})),["interactive","complete"].includes(ll.document.readyState)&&d.sendAutoFinishSignal()),d.registerBeforeFinishCallback((e=>{this._collectWebVitals(),lu(e)})),d}_registerInteractionListener(){let e;const t=()=>{const{idleTimeout:t,finalTimeout:n,heartbeatInterval:r}=this.options,o="ui.action.click",a=Es();if(a&&a.op&&["navigation","pageload"].includes(a.op))return void(cl&&Io.warn(`[Tracing] Did not create ${o} transaction because a pageload or navigation transaction is in progress.`));if(e&&(e.setFinishReason("interactionInterrupted"),e.end(),e=void 0),!this._getCurrentHub)return void(cl&&Io.warn(`[Tracing] Did not create ${o} transaction because _getCurrentHub is invalid.`));if(!this._latestRoute.name)return void(cl&&Io.warn(`[Tracing] Did not create ${o} transaction because _latestRouteName is missing.`));const i=this._getCurrentHub(),{location:s}=ll,c={name:this._latestRoute.name,op:o,trimEnd:!0,data:{[Vs]:this._latestRoute.context?Eu(this._latestRoute.context):"url"}};e=tc(i,c,t,n,!0,{location:s},r)};["click"].forEach((e=>{ll.document&&addEventListener(e,t,{once:!1,capture:!0})}))}_registerInpInteractionListener(){const e=({entries:e})=>{const t=zi(),n=void 0!==t&&void 0!==t.getIntegrationByName?t.getIntegrationByName("Replay"):void 0,r=void 0!==n?n.getReplayId():void 0,o=Es(),a=Xi(),i=void 0!==a?a.getUser():void 0;e.forEach((e=>{if(function(e){return"duration"in e}(e)){const t=e.interactionId;if(void 0===t)return;const n=this._interactionIdToRouteNameMapping[t],a=e.duration,s=e.startTime,c=Object.keys(this._interactionIdToRouteNameMapping),l=c.length>0?c.reduce(((e,t)=>this._interactionIdToRouteNameMapping[e].duration<this._interactionIdToRouteNameMapping[t].duration?e:t)):void 0;if("first-input"===e.entryType){if(c.map((e=>this._interactionIdToRouteNameMapping[e])).some((e=>e.duration===a&&e.startTime===s)))return}if(!t)return;if(n)n.duration=Math.max(n.duration,a);else if(c.length<10||void 0===l||a>this._interactionIdToRouteNameMapping[l].duration){const e=this._latestRoute.name,n=this._latestRoute.context;e&&n&&(l&&Object.keys(this._interactionIdToRouteNameMapping).length>=10&&delete this._interactionIdToRouteNameMapping[l],this._interactionIdToRouteNameMapping[t]={routeName:e,duration:a,parentContext:n,user:i,activeTransaction:o,replayId:r,startTime:s})}}}))};Vl("event",e),Vl("first-input",e)}},Dedupe:_d,Feedback:Vm,FunctionToString:Qc,GlobalHandlers:bd,HttpContext:Ld,Hub:gs,InboundFilters:Hc,Integrations:J_,LinkedErrors:xd,ModuleMetadata:Fc,Replay:kf,ReplayCanvas:gm,SDK_VERSION:us,SEMANTIC_ATTRIBUTE_SENTRY_OP:js,SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN:Ws,SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE:Fs,SEMANTIC_ATTRIBUTE_SENTRY_SOURCE:Vs,Scope:cs,TryCatch:Md,WINDOW:Ou,addBreadcrumb:Hi,addEventProcessor:Ec,addGlobalEventProcessor:Oi,addIntegration:function(e){const t=zi();t&&t.addIntegration?t.addIntegration(e):Ai&&Io.warn(`Cannot add integration "${e.name}" because no SDK Client is available.`)},addTracingExtensions:nc,breadcrumbsIntegration:gd,browserApiErrorsIntegration:Ud,browserProfilingIntegration:q_,browserTracingIntegration:(e={})=>{const t=!!cl&&!(!e.tracePropagationTargets&&!e.tracingOrigins);nc(),!e.tracePropagationTargets&&e.tracingOrigins&&(e.tracePropagationTargets=e.tracingOrigins);const n={...Su,...e},r=ou(),o={};n.enableInp&&su(o,n.interactionsSampleRate),n.enableLongTask&&au(),n._experiments.enableInteractions&&iu();const a={name:void 0,context:void 0};function i(e){const t=ms(),{beforeStartSpan:o,idleTimeout:i,finalTimeout:s,heartbeatInterval:c}=n,l="pageload"===e.op;let u;if(l){const t=l?Au("sentry-trace"):"",n=l?Au("baggage"):void 0,{traceId:r,dsc:o,parentSpanId:a,sampled:i}=ci(t,n);u={traceId:r,parentSpanId:a,parentSampled:i,...e,metadata:{...e.metadata,dynamicSamplingContext:o},trimEnd:!0}}else u={trimEnd:!0,...e};const d=o?o(u):u;d.metadata=d.name!==u.name?{...d.metadata,source:"custom"}:d.metadata,a.name=d.name,a.context=d,!1===d.sampled&&cl&&Io.log(`[Tracing] Will not send ${d.op} transaction because of beforeNavigate.`),cl&&Io.log(`[Tracing] Starting ${d.op} transaction on scope`);const{location:p}=ll,g=tc(t,d,i,s,!0,{location:p},c,l);return l&&ll.document&&(ll.document.addEventListener("readystatechange",(()=>{["interactive","complete"].includes(ll.document.readyState)&&g.sendAutoFinishSignal()})),["interactive","complete"].includes(ll.document.readyState)&&g.sendAutoFinishSignal()),g.registerBeforeFinishCallback((e=>{r(),lu(e)})),g}return{name:"BrowserTracing",setupOnce:()=>{},afterAllSetup(e){const r=e.getOptions(),{markBackgroundSpan:s,traceFetch:c,traceXHR:l,shouldCreateSpanForRequest:u,enableHTTPTimings:d,_experiments:p}=n,g=r&&r.tracePropagationTargets,h=g||n.tracePropagationTargets;let f;cl&&t&&g&&Io.warn("[Tracing] The `tracePropagationTargets` option was set in the BrowserTracing integration and top level `Sentry.init`. The top level `Sentry.init` value is being used.");let m=ll.location&&ll.location.href;if(e.on&&(e.on("startNavigationSpan",(e=>{f&&(cl&&Io.log(`[Tracing] Finishing current transaction with op: ${Mi(f).op}`),f.end()),f=i({op:"navigation",...e})})),e.on("startPageLoadSpan",(e=>{f&&(cl&&Io.log(`[Tracing] Finishing current transaction with op: ${Mi(f).op}`),f.end()),f=i({op:"pageload",...e})}))),n.instrumentPageLoad&&e.emit&&ll.location){const t={name:ll.location.pathname,startTimestamp:Za?Za/1e3:void 0,origin:"auto.pageload.browser",attributes:{[Vs]:"url"}};Iu(e,t)}n.instrumentNavigation&&e.emit&&ll.location&&Oa((({to:t,from:n})=>{if(void 0===n&&m&&-1!==m.indexOf(t))m=void 0;else if(n!==t){m=void 0;const t={name:ll.location.pathname,origin:"auto.navigation.browser",attributes:{[Vs]:"url"}};bu(e,t)}})),s&&ul(),p.enableInteractions&&function(e,t){let n;const r=()=>{const{idleTimeout:r,finalTimeout:o,heartbeatInterval:a}=e,i="ui.action.click",s=Es();if(s&&s.op&&["navigation","pageload"].includes(s.op))return void(cl&&Io.warn(`[Tracing] Did not create ${i} transaction because a pageload or navigation transaction is in progress.`));if(n&&(n.setFinishReason("interactionInterrupted"),n.end(),n=void 0),!t.name)return void(cl&&Io.warn(`[Tracing] Did not create ${i} transaction because _latestRouteName is missing.`));const{location:c}=ll,l={name:t.name,op:i,trimEnd:!0,data:{[Vs]:t.context?Nu(t.context):"url"}};n=tc(ms(),l,r,o,!0,{location:c},a)};["click"].forEach((e=>{ll.document&&addEventListener(e,r,{once:!1,capture:!0})}))}(n,a),n.enableInp&&function(e,t){const n=({entries:n})=>{const r=zi(),o=void 0!==r&&void 0!==r.getIntegrationByName?r.getIntegrationByName("Replay"):void 0,a=void 0!==o?o.getReplayId():void 0,i=Es(),s=Xi(),c=void 0!==s?s.getUser():void 0;n.forEach((n=>{if(function(e){return"duration"in e}(n)){const r=n.interactionId;if(void 0===r)return;const o=e[r],s=n.duration,l=n.startTime,u=Object.keys(e),d=u.length>0?u.reduce(((t,n)=>e[t].duration<e[n].duration?t:n)):void 0;if("first-input"===n.entryType){if(u.map((t=>e[t])).some((e=>e.duration===s&&e.startTime===l)))return}if(!r)return;if(o)o.duration=Math.max(o.duration,s);else if(u.length<wu||void 0===d||s>e[d].duration){const n=t.name,o=t.context;n&&o&&(d&&Object.keys(e).length>=wu&&delete e[d],e[r]={routeName:n,duration:s,parentContext:o,user:c,activeTransaction:i,replayId:a,startTime:l})}}}))};Vl("event",n),Vl("first-input",n)}(o,a),fu({traceFetch:c,traceXHR:l,tracePropagationTargets:h,shouldCreateSpanForRequest:u,enableHTTPTimings:d})},options:n}},captureConsoleIntegration:jm,captureEvent:Bi,captureException:Wi,captureMessage:qi,captureSession:es,captureUserFeedback:function(e){const t=zi();t&&t.captureUserFeedback(e)},chromeStackLineParser:Qu,close:async function(e){const t=zi();return t?t.close(e):(Ai&&Io.warn("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))},configureScope:function(e){ms().configureScope(e)},contextLinesIntegration:__,continueTrace:({sentryTrace:e,baggage:t},n)=>{const r=Xi(),{traceparentData:o,dynamicSamplingContext:a,propagationContext:i}=function(e,t){const n=si(e),r=ri(t),{traceId:o,parentSpanId:a,parentSampled:i}=n||{};return n?{traceparentData:n,dynamicSamplingContext:r||{},propagationContext:{traceId:o||Ko(),parentSpanId:a||Ko().substring(16),spanId:Ko().substring(16),sampled:i,dsc:r||{}}}:{traceparentData:n,dynamicSamplingContext:void 0,propagationContext:{traceId:o||Ko(),spanId:Ko().substring(16)}}}(e,t);r.setPropagationContext(i),Ai&&o&&Io.log(`[Tracing] Continuing trace ${o.traceId}.`);const s={...o,metadata:Mo({dynamicSamplingContext:a})};return n?vs((()=>n(s))):s},createTransport:Oc,createUserFeedbackEnvelope:Wu,debugIntegration:qm,dedupeIntegration:Jm,defaultIntegrations:jd,defaultRequestInstrumentationOptions:hu,defaultStackLineParsers:cd,defaultStackParser:ld,endSession:Qi,eventFromException:Gu,eventFromMessage:$u,exceptionFromError:xu,extraErrorDataIntegration:Zm,extractTraceparentData:Ss,feedbackIntegration:e=>new Vm(e),flush:async function(e){const t=zi();return t?t.flush(e):(Ai&&Io.warn("Cannot flush events. No client defined."),Promise.resolve(!1))},forceLoad:function(){},functionToStringIntegration:Kc,geckoStackLineParser:td,getActiveSpan:Ps,getActiveTransaction:Es,getClient:zi,getCurrentHub:ms,getCurrentScope:Xi,getDefaultIntegrations:Wd,getHubFromCarrier:Ts,getReplay:function(){const e=zi();return e&&e.getIntegrationByName&&e.getIntegrationByName("Replay")},getSpanStatusFromHttpCode:ws,globalHandlersIntegration:Id,httpClientIntegration:l_,httpContextIntegration:Rd,inboundFiltersIntegration:Bc,init:qd,instrumentOutgoingRequests:fu,isInitialized:function(){return!!zi()},lastEventId:function(){return ms().lastEventId()},linkedErrorsIntegration:Pd,makeBrowserOfflineTransport:function(e){return function(e){return t=>e({...t,createStore:y_})}(Cc(e))},makeFetchTransport:Hu,makeMain:fs,makeMultiplexedTransport:function(e,t){return n=>{const r=e(n),o=new Map;function a(t,r){const a=r?`${t}:${r}`:t;let i=o.get(a);if(!i){const s=wo(t);if(!s)return;const c=sc(s,n.tunnel);i=r?function(e,t){return n=>{const r=e(n);return{...r,send:async e=>{const n=Pc(e,["event","transaction","profile","replay_event"]);return n&&(n.release=t),r.send(e)}}}}(e,r)({...n,url:c}):e({...n,url:c}),o.set(a,i)}return[t,i]}return{send:async function(e){const n=t({envelope:e,getEvent:function(t){const n=t&&t.length?t:["event"];return Pc(e,n)}}).map((e=>"string"==typeof e?a(e,void 0):a(e.dsn,e.release))).filter((e=>!!e));0===n.length&&n.push(["",r]);return(await Promise.all(n.map((([t,n])=>n.send(function(e,t){return ui(t?{...e[0],dsn:t}:e[0],e[1])}(e,t))))))[0]},flush:async function(e){const t=[await r.flush(e)];for(const[,n]of o)t.push(await n.flush(e));return t.every((e=>e))}}}},makeXHRTransport:Ju,metrics:il,moduleMetadataIntegration:Vc,onLoad:function(e){e()},onProfilingStartRouteTransaction:function(e){return e?G_(e)?j_(e):e:(Pu&&Io.log("[Profiling] Transaction is undefined, skipping profiling"),e)},opera10StackLineParser:ad,opera11StackLineParser:sd,parameterize:function(e,...t){const n=new String(String.raw(e,...t));return n.__sentry_template_string__=e.join("\0").replace(/%/g,"%%").replace(/\0/g,"%s"),n.__sentry_template_values__=t,n},replayCanvasIntegration:pm,replayIntegration:e=>new kf(e),reportingObserverIntegration:r_,rewriteFramesIntegration:a_,sendFeedback:bm,sessionTimingIntegration:s_,setContext:Ji,setCurrentClient:Nc,setExtra:function(e,t){ms().setExtra(e,t)},setExtras:function(e){ms().setExtras(e)},setHttpStatus:Os,setMeasurement:rc,setTag:function(e,t){ms().setTag(e,t)},setTags:function(e){ms().setTags(e)},setUser:function(e){ms().setUser(e)},showReportDialog:(e={},t=ms())=>{if(!Ou.document)return void(Pu&&Io.error("Global document not defined in showReportDialog call"));const{client:n,scope:r}=t.getStackTop(),o=e.dsn||n&&n.getDsn();if(!o)return void(Pu&&Io.error("DSN not configured for showReportDialog call"));r&&(e.user={...r.getUser(),...e.user}),e.eventId||(e.eventId=t.lastEventId());const a=Ou.document.createElement("script");a.async=!0,a.crossOrigin="anonymous",a.src=function(e,t){const n=Oo(e);if(!n)return"";const r=`${ac(n)}embed/error-page/`;let o=`dsn=${Ao(n)}`;for(const e in t)if("dsn"!==e&&"onClose"!==e)if("user"===e){const e=t.user;if(!e)continue;e.name&&(o+=`&name=${encodeURIComponent(e.name)}`),e.email&&(o+=`&email=${encodeURIComponent(e.email)}`)}else o+=`&${encodeURIComponent(e)}=${encodeURIComponent(t[e])}`;return`${r}?${o}`}(o,e),e.onLoad&&(a.onload=e.onLoad);const{onClose:i}=e;if(i){const e=t=>{if("__sentry_reportdialog_closed__"===t.data)try{i()}finally{Ou.removeEventListener("message",e)}};Ou.addEventListener("message",e)}const s=Ou.document.head||Ou.document.body;s?s.appendChild(a):Pu&&Io.error("Not injecting report dialog. No injection point found in HTML")},spanStatusfromHttpCode:Ns,startBrowserTracingNavigationSpan:bu,startBrowserTracingPageLoadSpan:Iu,startInactiveSpan:Cs,startSession:Ki,startSpan:function(e,t){const n=ks(e);return vs((()=>Yi(e.scope,(r=>{const o=ms(),a=r.getSpan(),i=e.onlyIfParent&&!a?void 0:xs(o,{parentSpan:a,spanContext:n,forceTransaction:e.forceTransaction,scope:r});return Rs((()=>t(i)),(()=>{if(i){const{status:e}=Mi(i);e&&"ok"!==e||i.setStatus("internal_error")}}),(()=>i&&i.end()))}))))},startSpanManual:function(e,t){const n=ks(e);return vs((()=>Yi(e.scope,(r=>{const o=ms(),a=r.getSpan(),i=e.onlyIfParent&&!a?void 0:xs(o,{parentSpan:a,spanContext:n,forceTransaction:e.forceTransaction,scope:r});function s(){i&&i.end()}return Rs((()=>t(i,s)),(()=>{if(i&&i.isRecording()){const{status:e}=Mi(i);e&&"ok"!==e||i.setStatus("internal_error")}}))}))))},startTransaction:function(e,t){return ms().startTransaction({...e},t)},trace:function(e,t,n=()=>{},r=()=>{}){const o=ms(),a=Xi(),i=a.getSpan(),s=ks(e),c=xs(o,{parentSpan:i,spanContext:s,forceTransaction:!1,scope:a});return a.setSpan(c),Rs((()=>t(c)),(e=>{c&&c.setStatus("internal_error"),n(e,c)}),(()=>{c&&c.end(),a.setSpan(i),r()}))},winjsStackLineParser:rd,withActiveSpan:function(e,t){return Yi((n=>(n.setSpan(e),t(n))))},withIsolationScope:function(e){return vs((()=>e(_s())))},withScope:Yi,wrap:function(e){return Cu(e)()}});const z_=()=>{let e=navigator.languages?navigator.languages[0].substring(0,2).toUpperCase():"EN";var t;e="EN"===(t=e)?"EN-GB":"PT"===t?"PT-PT":t;return f.map((e=>e.langCode)).includes(e)?e:"EN"},X_=()=>{const e={};return f.forEach((t=>{let n=t.langCode;["EN-GB","EN-US"].includes(n)&&(n="EN"),["PT-PT","PT-BR"].includes(n)&&(n="PT"),["ZH-HANT"].includes(n)&&(n="ZH"),e[n]=0})),e};function K_(e){return[...f,...m].find((t=>t.langCode===e.toUpperCase())).langCodeForIta}const Q_="production",Z_="development",ev="testing";function tv(){return Q_}function nv(){return tv()===Z_}function rv(){return tv()===Q_}function ov(){return tv()===ev}async function av(){try{if(!chrome?.cookies&&!localStorage)return!1;if(!chrome.cookies){return"true"===localStorage.getItem("dl_brex_playwright_env")}const e=await chrome.cookies.getAll({domain:"deepl.com",name:"dl_brex_playwright_env"});return 0!==e.length&&"true"===e[0].value}catch{return!1}}function iv(...e){nv()&&console.log(...e)}function sv(){}function cv(e){return e()}const lv=[];function uv(e,t=sv){let n;const r=new Set;function o(t){if(a=t,((o=e)!=o?a==a:o!==a||o&&"object"==typeof o||"function"==typeof o)&&(e=t,n)){const t=!lv.length;for(const t of r)t[1](),lv.push(t,e);if(t){for(let e=0;e<lv.length;e+=2)lv[e][0](lv[e+1]);lv.length=0}}var o,a}function a(t){o(t(e))}return{set:o,update:a,subscribe:function(i,s=sv){const c=[i,s];return r.add(c),1===r.size&&(n=t(o,a)||sv),i(e),()=>{r.delete(c),0===r.size&&n&&(n(),n=null)}}}}const dv={dlRequestLogin:"dlRequestLogin",dlRequestLogout:"dlRequestLogout",dlGetUserState:"dlGetUserState",dlGetClientState:"dlGetClientState",dlManipulateGetClientState:"dlManipulateGetClientState",dlGetUsersCharacterLimit:"dlGetUsersCharacterLimit"},pv={dlTextToSpeech:"dlTextToSpeech",dlGetSupportedVoices:"dlGetSupportedVoices",dlStopSpeech:"dlStopSpeech"},gv={dlSendNotification:"dlSendNotification"},hv={dlTriggerImproveInline:"dlTriggerImproveInline",dlTriggerImproveInput:"dlTriggerImproveInput",dlRequestGDocsSentenceAlternatives:"dlRequestGDocsSentenceAlternatives",dlRequestGDocsWordAlternatives:"dlRequestGDocsWordAlternatives",dlRequestGDocsSentenceFromPartialTranslation:"dlRequestGDocsSentenceFromPartialTranslation",dlRequestAlternatives:"dlRequestAlternatives",dlRequestImproveWriting:"dlRequestImproveWriting"},fv={dlRequestGDocsSplitText:"dlRequestGDocsSplitText",dlSplitTextRequest:"dlSplitTextRequest"},mv={dlCheckCommandShortcuts:"dlCheckCommandShortcuts",dlGetAppSettings:"dlGetAppSettings",dlUpdateAppSettings:"dlUpdateAppSettings"},_v={dlRequestHtmlTranslation:"dlRequestHtmlTranslation",dlRequestInlineTranslation:"dlRequestInlineTranslation",dlTriggerTranslateInline:"dlTriggerTranslateInline",dlTriggerTranslateInput:"dlTriggerTranslateInput",dlRequestInputTranslation:"dlRequestInputTranslation",dlRequestZendeskInputTranslation:"dlRequestZendeskInputTranslation",dlRequestGmailReceivedEmailTranslation:"dlRequestGmailReceivedEmailTranslation",dlRequestWhatsAppMessageTranslation:"dlRequestWhatsAppMessageTranslation",dlRequestTwitterTweetTranslation:"dlRequestTwitterTweetTranslation",dlRequestYouTubeTranslation:"dlRequestYouTubeTranslation",dlRequestLinkedInPostTranslation:"dlRequestLinkedInPostTranslation",dlRequestZendeskMessageTranslation:"dlRequestZendeskMessageTranslation",dlRequestWhatsAppMessagesTranslation:"dlRequestWhatsAppMessagesTranslation",dlRequestGDocsProcessContent:"dlRequestGDocsProcessContent",dlTranslatedInputTextNotSet:"dlTranslatedInputTextNotSet"},vv={dlRequestTermbases:"dlRequestTermbases",dlGetDictionary:"dlGetDictionary"},Tv={dlTrackInlineSettingOpened:"dlTrackInlineSettingOpened",dlTrackPolicyLoginRequiredNotification:"dlTrackPolicyLoginRequiredNotification",dlTrackUpgradeNotificationAction:"dlTrackUpgradeNotificationAction",dlTrackLogoClickedEvent:"dlTrackLogoClickedEvent",dlTrackDetectLanguage:"dlTrackDetectLanguage",dlTrackSidePanelOpened:"dlTrackSidePanelOpened",dlTrackFormalitySelected:"dlTrackFormalitySelected",dlTrackWriteTextTonesChanged:"dlTrackWriteTextTonesChanged",dlTrackWriteTextStylesApplied:"dlTrackWriteTextStylesApplied",dlTrackWriteTextStylesChanged:"dlTrackWriteTextStylesChanged",dlTrackAdsShown:"dlTrackAdsShown",dlTrackClicksOnAdsButton:"dlTrackClicksOnAdsButton",dlTrackIframeTranslationFailed:"dlTrackIframeTranslationFailed",dlTrackSeeAlternativesClicked:"dlTrackSeeAlternativesClicked",dlTrackAlternativeSelected:"dlTrackAlternativeSelected",dlTrackLanguageDetectionForTextProcessing:"dlTrackLanguageDetectionForTextProcessing",dlTrackUpgradeNotificationClosed:"dlTrackUpgradeNotificationClosed",dlTrackUpgradeNotificationIsDisplayed:"dlTrackUpgradeNotificationIsDisplayed",dlOnSuccessfulZendeskTranslation:"dlOnSuccessfulZendeskTranslation",dlTrackAlternativesEvent:"dlTrackAlternativesEvent",dlTrackGmailCharLimitReached:"dlTrackGmailCharLimitReached",dlTrackCustomizationEnabledEvent:"dlTrackCustomizationEnabledEvent",dlTrackTranslateAcceptOrRevertEvent:"dlTrackTranslateAcceptOrRevertEvent",dlTrackGDocsReplaceText:"dlTrackGDocsReplaceText",dlTrackLandingOnWebsite:"dlTrackLandingOnWebsite",dlTrackReadMore:"dlTrackReadMore",dlTrackOnboardingOpenExternalLink:"dlTrackOnboardingOpenExternalLink",dlTrackOnboardingStepChange:"dlTrackOnboardingStepChange",dlTrackIconHover:"dlTrackIconHover",dlTrackVoiceOverStops:"dlTrackVoiceOverStops",dlTrackInlineListen:"dlTrackInlineListen",dlTrackInlineCopy:"dlTrackInlineCopy",dlTrackFptHide:"dlTrackFptHide",dlTrackInlineDragStart:"dlTrackInlineDragStart",dlTrackInlinePositionChange:"dlTrackInlinePositionChange",dlTrackRightClick:"dlTrackRightClick",dlTrackRecommendToAFriendClick:"dlTrackRecommendToAFriendClick",dlTrackDocTransClick:"dlTrackDocTransClick",dlTrackExtensionOpenedEvent:"dlTrackExtensionOpenedEvent",dlTrackInputTranslationInjection:"dlTrackInputTranslationInjection",dlTrackUseOfShortcut:"dlTrackUseOfShortcut",dlTrackUiAction:"dlTrackUiAction",dlTrackSettingChanged:"dlTrackSettingChanged",dlTrackOpenInputHighlighter:"dlTrackOpenInputHighlighter",dlTrackOpenInlineHighlighter:"dlTrackOpenInlineHighlighter",dlTrackCloseInputHighlighter:"dlTrackCloseInputHighlighter",dlTrackCloseInlineHighlighter:"dlTrackCloseInlineHighlighter",dlTrackDictionaryStatus:"dlTrackDictionaryStatus",dlTrackOpenDictionarySection:"dlTrackOpenDictionarySection",dlTrackDisabledDictionaryHover:"dlTrackDisabledDictionaryHover",dlTrackZendeskCustomizationEvent:"dlTrackZendeskCustomizationEvent",dlTrackZendeskGlossaryOpened:"dlTrackZendeskGlossaryOpened",dlTrackGlossaryEnabled:"dlTrackGlossaryEnabled",dlTrackGlossaryDisabled:"dlTrackGlossaryDisabled",dlTrackDeeplWriteEvent:"dlTrackDeeplWriteEvent",dlTrackLingueeErrorData:"dlTrackLingueeErrorData",dlTrackGdocsMaxCharExceededShown:"dlTrackGdocsMaxCharExceededShown",dlTrackGDocsMaxCharExceededTryProClicked:"dlTrackGDocsMaxCharExceededTryProClicked",dlTrackOnboardingModalShown:"dlTrackOnboardingModalShown",dlTrackUILocationClicked:"dlTrackUILocationClicked",dlTrackIframeTranslationSuccessful:"dlTrackIframeTranslationSuccessful",dlTrackReplaceInField:"dlTrackReplaceInField"},yv={dlGetExperiments:"dlGetExperiments"},Ev={dlTestClassicAPI:"dlTestClassicAPI",dlOpenInternalPage:"dlOpenInternalPage",dlExternalURLRedirect:"dlExternalURLRedirect"};function Sv(e){return function(e){return new Promise(((t,n)=>{chrome.runtime.sendMessage(e,(function(e){e&&e.error&&n(e),t(e)}))}))}(e)}const Iv={auth:{idToken:"i_t",isLoggedIn:"isLoggedIn",writeServiceType:"writeServiceType",docTranslatorServiceType:"docTranslatorServiceType",apiServiceType:"apiServiceType",translatorServiceType:"translatorServiceType",accountId:"accountId",lastLogoutTrigger:"last_logout_trigger"},glossary:{activeTermbaseId:"activeTermbaseId",isGlossaryEnabled:"isGlossaryEnabled",hasTermbaseService:"hasTermbaseService"},browserInstanceId:"browserInstanceId"};const bv=function(){const{subscribe:e,set:t,update:n}=uv({});return chrome.storage.sync.get(null,(e=>{t(e),chrome.storage.local.get(["isLoggedIn","isProUser",Iv.auth.translatorServiceType,Iv.auth.writeServiceType,Iv.auth.apiServiceType,Iv.auth.docTranslatorServiceType,"browserInstanceId","featureSet","hasTermbaseService"],(e=>{n((t=>Object.assign(Object.assign({},t),e)))}))})),chrome.storage.onChanged.addListener((e=>{const t=["a_t","r_t","i_t",Iv.auth.accountId];let r={};for(const[n,o]of Object.entries(e))!1===t.includes(n)&&(r[n]=o.newValue);if(nv()){const e="background-color: #324054;padding: 3px; font-size:12px;color:#e1e8c3; font-weight:600";console.log(`%c${(new Date).toISOString()} UPDATE USER SETTINGS`,e,r)}return n((e=>Object.assign(Object.assign({},e),r))),!0})),{subscribe:e,set:e=>chrome.storage.sync.set(e)}}(),Av=function(){const{subscribe:e,update:t}=uv({});return chrome.runtime.onMessage.addListener((function(e,n){switch(e.action){case"newWebsiteState":e.payload&&t((t=>Object.assign(Object.assign({},t),{[n.tab.id]:Object.assign(Object.assign(Object.assign({},t[n.tab.id]),e.payload),{error:e.payload.error?e.payload.error:void 0})})));break;case"resetWebsiteState":e.payload&&t((t=>Object.assign(Object.assign({},t),{[n.tab.id]:Object.assign({},e.payload)})))}return!0})),{subscribe:e,fetchCurrentWebsiteSettings:()=>{chrome.tabs&&chrome.tabs.query({active:!0,currentWindow:!0},(function(e){chrome.tabs.sendMessage(e[0].id,{action:"dlGetWebsiteData"},(function(n){t((t=>Object.assign(Object.assign({},t),{[e[0].id]:Object.assign(Object.assign({},t[e[0].id]),n)})))}))}))}}}();!function(e,t,n){const r=!Array.isArray(e),o=r?[e]:e;if(!o.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const a=t.length<2;return i=(e,n)=>{let i=!1;const s=[];let c=0,l=sv;const u=()=>{if(c)return;l();const o=t(r?s[0]:s,e,n);a?e(o):l="function"==typeof o?o:sv},d=o.map(((e,t)=>function(e,...t){if(null==e){for(const e of t)e(void 0);return sv}const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}(e,(e=>{s[t]=e,c&=~(1<<t),i&&u()}),(()=>{c|=1<<t}))));return i=!0,u(),function(){d.forEach(cv),l(),i=!1}},{subscribe:uv(n,i).subscribe};var i}(Av,((e,t)=>r(void 0,void 0,void 0,(function*(){if(!chrome.tabs)return;const n=yield chrome.tabs.query({active:!0,currentWindow:!0});t(e[n[0].id])})))),function(){const{subscribe:e,set:t}=uv([]);Sv({action:yv.dlGetExperiments,payload:{forceFetch:!1}}),chrome.runtime.onMessage.addListener((function(e){if("dlExperimentsUpdated"===e.action)e.payload&&t(e.payload.experiments);return!0}))}();const wv="Unidentified service name supplied to getServiceType",Nv=(e,t)=>{if(!e)throw new Error("No settings supplied to getServiceType");if(!t||!Object.keys(an).includes(t))throw new Error(wv);if(!e.isLoggedIn)return sn;switch(t){case an.TRANSLATOR:return e.translatorServiceType;case an.WRITE:return e.writeServiceType;case an.API:return e.apiServiceType;case an.DOC_TRANSLATOR:return e.docTranslatorServiceType}throw new Error(wv)},Ov=(e,t)=>Nv(e,t)===cn,Rv=e=>e.isLoggedIn&&e.hasTermbaseService,Lv=e=>!![/Receiving end does not exist/,/message channel closed before a response was received/,/Extension context invalidated/].some((t=>t.test(e))),Cv={dsn:"https://f7c23f019d154c319e91e8de004727dc@errortracking.deepl.com/12",release:"deepl-browser-extension@1.42.0",environment:tv(),tracesSampleRate:rv()?.1:1,sampleRate:rv()?.1:1,ignoreErrors:[/Receiving end does not exist/,/message channel closed before a response was received/,/Extension context invalidated/],beforeSend(e){const t=e.message||e.exception&&e.exception.values&&e.exception.values[0].value||"";return Lv(t)?null:(nv()&&console.error(e),e)}};function Pv(e,t){t.captureException(e)}const xv="PROTOCOL_ERROR",kv="FULL_PAGE_SERVER_ERROR",Dv="-32003",Uv="403",Mv="ENTRY_NOT_FOUND",Gv="SERVER_ERROR",$v="INSTALLATION_ERROR",Vv="TRANSLATED_INPUT_NOT_SET",Fv="TRANSLATOR_FREE_ACCOUNT_LIMIT_EXCEEDED",jv="TRANSLATOR_ANONYMOUS_LIMIT_EXCEEDED",Wv="TRANSLATOR_FREE_ANON_WITH_WRITE_PRO",qv="WRITE_ANON_OR_FREE_LIMIT_EXCEEDED",Bv="WRITE_WITH_PRO_TRANSLATOR_LIMIT_EXCEEDED",Hv="LOGIN_REQUIRED";class Jv extends Error{constructor(e){super(e),this.name=Hv,this.message=e}}class Yv extends Error{constructor(e){super(e),this.name=xv,this.message=e}}class zv extends Error{constructor(e){super(e),this.name=kv,this.message=e}}class Xv extends Error{constructor(e,t){super(t),this.name=e,this.message=t}}class Kv extends Error{constructor(e,t){super(t),this.name=Fv,this.limit=e,this.message=t}}class Qv extends Error{constructor(e,t){super(t),this.name=jv,this.limit=e,this.message=t}}class Zv extends Error{constructor(e,t){super(t),this.name=qv,this.limit=e,this.message=t}}class eT extends Error{constructor(e,t){super(t),this.name=Bv,this.limit=e,this.message=t}}class tT extends Error{constructor(e,t){super(t),this.name=Wv,this.limit=e,this.message=t}}class nT extends Error{constructor(e,t){super(t),this.name=e,this.message=t}}function rT(e,t){try{Pv(e,t),console.error(e)}catch(e){console.error(e)}return{error:e.name}}const oT={EVENT_ID_UNSPECIFIED:0,EVENT_ID_TRANSLATION_REQUEST:60001,EVENT_ID_ERROR:60002,EVENT_ID_TRANSLATION_ERROR:60003,EVENT_ID_CONTENT_SCRIPT_ERROR:60004,EVENT_ID_INPUT_INJECTION_DATA:60005,EVENT_ID_FPT_BLOCK_SIZE_EXCEEDED:60006,EVENT_ID_EXTENSION_OPENED:60007,EVENT_ID_LOGO_CLICKED:60008,EVENT_ID_NOTIFICATION_VIEWED:60009,EVENT_ID_SHORTCUT_USED:60010,EVENT_ID_UI_ACTION_CLICK_ON_SHORTCUT_NOTIFICATION:60011,EVENT_ID_DOC_TRANS_CLICKED:60012,EVENT_ID_RECOMMEND_TO_A_FRIEND_CLICKED:60013,EVENT_ID_INLINE_SETTING_OPENED:60014,EVENT_ID_SETTING_CHANGED:60015,EVENT_ID_AUTO_DETECT_LANG:60016,EVENT_ID_RIGHT_CLICK:60017,EVENT_ID_INLINE_POSITION_CHANGE:60018,EVENT_ID_INLINE_DRAG_START:60019,EVENT_ID_WHATSAPP_MESSAGE_TRANSLATED:60020,EVENT_ID_WHATSAPP_MESSAGE_TRANSLATION_FAILED:60021,EVENT_ID_FPT_HIDE:60022,EVENT_ID_INLINE_COPY:60023,EVENT_ID_INLINE_LISTEN:60024,EVENT_ID_ICON_HOVER:60025,EVENT_ID_UI_ACTION_CLICK_ON_INLINE_SHOW_ALTERNATIVES:60026,EVENT_ID_UI_ACTION_CLICK_ON_INLINE_TRANSLATION_CLOSE:60027,EVENT_ID_UI_ACTION_CLICK_ON_LOGOUT_MENU_ENTRY:60028,EVENT_ID_ONBOARDING_STEP_CHANGE:60029,EVENT_ID_ONBOARDING_OPEN_EXTERNAL_PAGE:60030,EVENT_ID_READ_MORE_CLICKED:60031,EVENT_ID_LAND_ON_WEBSITE:60032,EVENT_ID_CLOSE_VOICE_OVER:60033,EVENT_ID_OPEN_INPUT_HIGHLIGHTER:60034,EVENT_ID_CLOSE_INPUT_HIGHLIGHTER:60035,EVENT_ID_GDOCS_REPLACE_TEXT:60036,EVENT_ID_INSTALL_SUCCESS:60037,EVENT_ID_OPEN_INLINE_HIGHLIGHTER:60038,EVENT_ID_CLOSE_INLINE_HIGHLIGHTER:60039,EVENT_ID_DICTIONARY_STATUS:60040,EVENT_ID_OPEN_DICTIONARY_SECTION:60041,EVENT_ID_HOVER_DISABLED_DICTIONARY:60042,EVENT_ID_DICTIONARY_ERROR:60043,EVENT_ID_ZENDESK_CUSTOMIZATION_OPEN_TICKET:60044,EVENT_ID_ZENDESK_CUSTOMIZATION_DETECT_TICKET_LANGUAGE:60045,EVENT_ID_ZENDESK_CUSTOMIZATION_SWITCH_TICKET_LANGUAGE:60046,EVENT_ID_ZENDESK_CUSTOMIZATION_ENABLE_AUTOTRANSLATE:60047,EVENT_ID_ZENDESK_CUSTOMIZATION_DISABLE_AUTOTRANSLATE:60048,EVENT_ID_ZENDESK_CUSTOMIZATION_TRANSLATE_MESSAGE:60049,EVENT_ID_ZENDESK_CUSTOMIZATION_TRANSLATE_INPUT:60050,EVENT_ID_ZENDESK_CUSTOMIZATION_ERROR:60051,EVENT_ID_GDOCS_MAX_CHAR_EXCEEDED_SHOWN:60052,EVENT_ID_GDOCS_MAX_CHAR_EXCEEDED_TRY_PRO_CLICKED:60053,EVENT_ID_LOGIN:60054,EVENT_ID_LOGOUT:60055,EVENT_ID_SESSION_TYPE:60056,EVENT_ID_TWITTER_TWEET_TRANSLATION_FAILED:60057,EVENT_ID_ONBOARDING_MODAL_SHOWN:60058,EVENT_ID_UI_LOCATION_CLICKED:60059,EVENT_ID_INSTALLATION_ID_CREATED:60060,EVENT_ID_BROWSER_INSTANCE_ID_CREATED:60061,EVENT_ID_DEEPL_WRITE_TEXT_REFINEMENT_REQUEST:60062,EVENT_ID_DEEPL_WRITE_GDOCS_INSERT_COPY:60063,EVENT_ID_DEEPL_WRITE_GDOCS_DISCARD_COPY:60064,EVENT_ID_DEEPL_WRITE_GDOCS_CHAR_LIMIT_REACHED:60065,EVENT_ID_DEEPL_WRITE_ERROR:60066,EVENT_ID_SESSION_STARTED:60067,EVENT_ID_LOGGED_IN:60068,EVENT_ID_LOGGED_OUT:60069,EVENT_ID_CUSTOMIZATION_ON_OFF:60070,EVENT_ID_WRITE_RESULT_ACCEPTED:60071,EVENT_ID_WRITE_RESULT_REVERTED:60072,EVENT_ID_TRANSLATION_RESULT_ACCEPTED:60073,EVENT_ID_TRANSLATION_RESULT_REVERTED:60074,EVENT_ID_GMAIL_CHAR_LIMIT_REACHED:60075,EVENT_ID_UPGRADE_NOTIFICATION_DISPLAYED:60076,EVENT_ID_UPGRADE_NOTIFICATION_CLOSED:60077,EVENT_ID_UPGRADE_NOTIFICATION_ACTION:60078,EVENT_ID_ALTERNATIVES_ALTERNATIVES_OPENED:60079,EVENT_ID_ALTERNATIVES_SEGMENTATION_SELECTED:60080,EVENT_ID_ALTERNATIVES_ALTERNATIVE_SELECTED:80081,EVENT_ID_GLOSSARY_ENABLED:60082,EVENT_ID_GLOSSARY_DISABLED:60083,EVENT_ID_ZENDESK_GLOSSARY_TAB_OPENED_FREE_USER:60084,EVENT_ID_ZENDESK_GLOSSARY_TAB_OPENED_NO_GLOSSARIES:60085,EVENT_ID_LANGUAGE_DETECTION_FOR_TEXT_PROCESSING:60086,EVENT_ID_SEE_ALTERNATIVES_FOR_INPUT_CLICKED:60087,EVENT_ID_DEEPL_WRITE_GET_ALTERNATIVES_FOR_INPUT:60088,EVENT_ID_ALTERNATIVE_SELECTED:60089,EVENT_ID_IFRAME_TRANSLATION_SUCCESSFUL:60090,EVENT_ID_IFRAME_TRANSLATION_FAILED:60091,EVENT_ID_ADS_BUTTON_CLICKED:60092,EVENT_ID_ADS_SHOWN:60093,EVENT_ID_YOUTUBE_COMMENT_TRANSLATION_FAILED:60094,EVENT_ID_EXTENSION_INSTALL_WITH_WEBSITE_USER_LOGIN_STATUS_CHECK:60095,EVENT_ID_DAILY_WEBSITE_USER_LOGIN_STATUS_CHECK:60096,EVENT_ID_GET_WEBSITE_USER_DATA_FAILED:60097,EVENT_ID_WRITE_TEXT_STYLES_CHANGED:60098,EVENT_ID_WRITE_TEXT_STYLES_APPLIED:60099,EVENT_ID_WRITE_TEXT_TONES_CHANGED:60100,EVENT_ID_EXPERIMENT_TRIGGER:60101,EVENT_ID_TRANSLATION_FORMALITY_CHANGED:60102,EVENT_ID_SIDE_PANEL_OPENED:60103,EVENT_ID_UI_INTERACTION_SIDE_PANEL:60104,EVENT_ID_UI_INTERACTION_SIDE_PANEL_FAILS:60105,EVENT_ID_SIDE_PANEL_TRANSLATOR_TARGET_LANG_CHANGED:60106,EVENT_ID_SEND_EXTENSION_INFO_DATA:60107,EVENT_ID_REPLACE_INPUT_FIELD_SELECTION:60108,EVENT_ID_ITA_SESSION:60109},aT={ITA_SESSION_TYPE_UNSPECIFIED:0,ITA_SESSION_TYPE_TRANSLATE:1,ITA_SESSION_TYPE_WRITE:2},iT={ITA_SESSION_EVENT_TYPE_UNSPECIFIED:0,ITA_SESSION_EVENT_TYPE_NEW_SESSION:1,ITA_SESSION_EVENT_TYPE_RECREATED_SESSION:2,ITA_SESSION_EVENT_TYPE_ERROR:3,ITA_SESSION_EVENT_TYPE_USER_INTERACTION:4},sT={ITA_ERROR_TYPE_UNSPECIFIED:0,ITA_ERROR_TYPE_CONNECTION:1,ITA_ERROR_TYPE_SESSION:2},cT={ITA_USER_INTERACTION_TYPE_UNSPECIFIED:0,ITA_USER_INTERACTION_TYPE_UPDATE_TARGET_LANGUAGE:1,ITA_USER_INTERACTION_TYPE_UPDATE_SOURCE_LANGUAGE:2,ITA_USER_INTERACTION_TYPE_UPDATE_FORMALITY:3,ITA_USER_INTERACTION_TYPE_UPDATE_STYLE:4,ITA_USER_INTERACTION_TYPE_SELECT_ALTERNATIVE:5};function lT(){return{url:"https://s.deepl.com/chrome/statistics"}}function uT(e){switch(e){case S:return 1;case E:return 2;case y:return 3;case I:return 4;case b:return 5;case A:return 6;case w:return 7;default:return 0}}function dT(e){switch(e){case Mv:return 1;case Gv:return 2}}function pT(e){switch(e){case P:return D;case x:return U;default:return 0}}function gT(e){switch(e){case P:return M;case x:return G;case k:return $;default:return 0}}function hT(e){switch(e){case V:return 1;case j:return 2;default:return 0}}function fT(e){switch(e){case J:return 1;case W:return 2;case B:return 3;case X:return 4;case K:return 5;case Q:return 6;case Z:return 7;case te:return 8;case z:return 9;case q:return 10;case ne:return 11;case re:return 12;case oe:return 13;case ae:return 14;case ie:return 15;case se:return 16;case ce:return 17;case le:return 18;case ue:return 19;case de:return 20;case pe:return 21;case ge:return 22;case ve:return 23;case Te:return 24;case he:return 25;case fe:return 26;case me:return 27;case _e:return 28;case ye:return 29;case Ee:return 30;case Se:return 31;case ee:return 32;case Ie:return 33;case be:return 34;case Ae:return 35;case we:return 36;case Y:return 37;case Ne:return 38;case Oe:return 39;case Re:return 40;case Le:return 41;case Ce:return 42;case Pe:return 43;case xe:return 44;case ke:return 45;case De:return 46;case Ue:return 47;case Me:return 48;case Ge:return 49;case $e:return 50;case Ve:return 51;case Fe:return 52;case je:return 53;case We:return 54;case qe:return 55;case Be:return 56;case He:return 57;case Je:return 58;case Ye:return 59;case ze:return 60;case H:return 61;case Xe:return 62;case Ke:return 63;case Qe:return 64;default:return 0}}function mT(e){return e===Ze?1:0}function _T(e){switch(e){case tt:return oT.EVENT_ID_UI_ACTION_CLICK_ON_SHORTCUT_NOTIFICATION;case nt:return oT.EVENT_ID_UI_ACTION_CLICK_ON_INLINE_SHOW_ALTERNATIVES;case rt:return oT.EVENT_ID_UI_ACTION_CLICK_ON_INLINE_TRANSLATION_CLOSE;case ot:return oT.EVENT_ID_UI_ACTION_CLICK_ON_LOGOUT_MENU_ENTRY;default:return 0}}function vT(e){switch(e){case lt:return 1;case ut:return 2;case dt:return 3;default:return 0}}function TT(e){switch(e){case it:return 1;case at:return 2;case st:return 3;case ct:return 4;default:return 0}}function yT(e){switch(e){case"top":return pt;case"right":return gt;case"bottom":return ht;case"left":return ft;default:return 0}}function ET(e){switch(e){case kr.shortcut_settings:return Dr.SHORTCUT_SETTINGS;case kr.support_article:return Dr.SUPPORT_ARTICLE;case kr.external.whatsapp:return Dr.EXTERNAL.WHATSAPP;case kr.external.twitter:return Dr.EXTERNAL.TWITTER;case kr.external.youtube:return Dr.EXTERNAL.YOUTUBE;case kr.external.facebook:return Dr.EXTERNAL.FACEBOOK;case kr.external.github:return Dr.EXTERNAL.GITHUB;case kr.external.discord:return Dr.EXTERNAL.DISCORD;case kr.external.telegram:return Dr.EXTERNAL.TELEGRAM;case kr.external.reddit:return Dr.EXTERNAL.REDDIT;case kr.external.gmail:return Dr.EXTERNAL.GMAIL;case kr.external.gdocs:return Dr.EXTERNAL.GDOCS;case kr.external.gslides:return Dr.EXTERNAL.GSLIDES;case kr.external.msOffice:return Dr.EXTERNAL.MSOFFICE;default:return""}}function ST(e){switch(e){case mt:return 1;case _t:return 2;case vt:return 3;case Tt:return 4;default:return 0}}function IT(e){switch(e){case At:return Et;case wt:return St;case Ot:return bt;case Nt:return It;default:return yt}}function bT(e){return Rt[e]||0}function AT(e){switch(e){case Lt:return 1;case Ct:return 2;case xt:return 3;case kt:return 4;case Pt:return 5;case Dt:return 6;case Ut:return 7;case Mt:return 8;case Gt:return 9;default:return 0}}function wT(e){switch(e){case $t:return 1;case Vt:return 2;default:return 0}}function NT(e){switch(e){case Ft:return 1;case jt:return 2;default:return 0}}function OT(e){switch(e){case Gn:return 1;case $n:return 2;case Vn:return 3;case Fn:return 4;case jn:return 5;case Wn:return 6;case qn:return 7;case Bn:return 8;default:return 0}}function RT(e){switch(e){case Hn:return 0;case Jn:return 1;case Yn:return 2;default:return 0}}function LT(e){switch(e){case oT.EVENT_ID_UI_ACTION_CLICK_ON_INLINE_SHOW_ALTERNATIVES:case oT.EVENT_ID_UI_ACTION_CLICK_ON_INLINE_TRANSLATION_CLOSE:return!0;default:return!1}}function CT(e){switch(e){case Wt:return 1;case qt:return 2;default:return 0}}function PT(e){switch(e){case Bt:return 1;case Ht:return 2;default:return 0}}function xT(e){switch(e){case tn:return 1;case nn:return 2;default:return 0}}function kT(e){switch(e){case on:return 1;case rn:return 2;default:return 0}}function DT(e){switch(e){case sn:return 1;case cn:return 2;case ln:return 3;default:return 0}}function UT(e){switch(e){case In:return 1;case bn:return 2;case An:return 3;default:return 0}}function MT(e){switch(e){case wn:return 1;case Nn:return 2;case On:return 3;case Rn:return 4;default:return 0}}function GT(e){switch(e){case Ft:return 1;case jt:return 2;default:return 0}}function $T(e){switch(e){case Cn:return 1;case Pn:return 2;case Ln:return 3;default:return 0}}function VT(e){switch(e){case xn:return 1;case kn:return 2;default:return 0}}function FT(e){switch(e){case Dn:return 1;case Un:return 2;case Mn:return 3;default:return 0}}function jT(e){switch(e){case Kn:return 1;case Xn:return 2;case zn:return 3;case Qn:return 4;case Zn:return 5;default:return 0}}function WT(e){switch(e){case er:return 1;case tr:return 2;default:return 0}}function qT(e){switch(e){case chrome.runtime.OnInstalledReason.INSTALL:return 1;case chrome.runtime.OnInstalledReason.UPDATE:return 2;case chrome.runtime.OnInstalledReason.CHROME_UPDATE:return 3;case chrome.runtime.OnInstalledReason.SHARED_MODULE_UPDATE:return 4;default:return 0}}function BT(e){switch(e){case nr:return 1;case rr:return 2;case or:return 3;case ar:return 4;default:return 0}}function HT(e){switch(e){case ir:return 1;case sr:return 2;default:return 0}}function JT(e){switch(e){case cr:return 1;case lr:return 2;default:return 0}}function YT(e){switch(e){case ur:return aT.ITA_SESSION_TYPE_TRANSLATE;case dr:return aT.ITA_SESSION_TYPE_WRITE;default:return aT.ITA_SESSION_TYPE_UNSPECIFIED}}function zT(e){switch(e){case pr:return iT.ITA_SESSION_EVENT_TYPE_NEW_SESSION;case gr:return iT.ITA_SESSION_EVENT_TYPE_RECREATED_SESSION;case hr:return iT.ITA_SESSION_EVENT_TYPE_ERROR;case fr:return iT.ITA_SESSION_EVENT_TYPE_USER_INTERACTION;default:return iT.ITA_SESSION_EVENT_TYPE_UNSPECIFIED}}function XT(e){switch(e){case mr:return sT.ITA_ERROR_TYPE_CONNECTION;case _r:return sT.ITA_ERROR_TYPE_SESSION;default:return sT.ITA_ERROR_TYPE_UNSPECIFIED}}function KT(e){switch(e){case vr:return cT.ITA_USER_INTERACTION_TYPE_UPDATE_TARGET_LANGUAGE;case Tr:return cT.ITA_USER_INTERACTION_TYPE_UPDATE_SOURCE_LANGUAGE;case yr:return cT.ITA_USER_INTERACTION_TYPE_UPDATE_FORMALITY;case Er:return cT.ITA_USER_INTERACTION_TYPE_UPDATE_STYLE;case Sr:return cT.ITA_USER_INTERACTION_TYPE_SELECT_ALTERNATIVE;default:return cT.ITA_USER_INTERACTION_TYPE_UNSPECIFIED}}const QT=["accountData","domainName"],ZT=[60067,60068,60069],ey=(e,t)=>e&&"object"==typeof e?Array.isArray(e)?e.map((e=>ey(e,t))):Object.keys(e).reduce(((n,r)=>(t.includes(r)||(n[r]=ey(e[r],t)),n)),{}):e;function ty(e,t,n){return{jsonrpc:"2.0",method:e,params:t,id:n}}const ny=e=>{var t,n,r,o,a,i,s,c,l;return{isLoggedIn:!!(null===(t=null==e?void 0:e.loginState)||void 0===t?void 0:t.accountId),translatorServiceType:DT(null===(r=null===(n=null==e?void 0:e.featureSet)||void 0===n?void 0:n.translator)||void 0===r?void 0:r.service),docTranslatorServiceType:DT(null===(a=null===(o=null==e?void 0:e.featureSet)||void 0===o?void 0:o.documentTranslation)||void 0===a?void 0:a.service),apiServiceType:DT(null===(s=null===(i=null==e?void 0:e.featureSet)||void 0===i?void 0:i.api)||void 0===s?void 0:s.service),writeServiceType:DT(null===(l=null===(c=null==e?void 0:e.featureSet)||void 0===c?void 0:c.write)||void 0===l?void 0:l.service)}};function ry(e){return r(this,void 0,void 0,(function*(){let t,n,r,o,a,i,s,c,l,u,d,p=!1;try{const e=yield qE(["session","installationId","firefoxAnonPermissionGranted","firefoxPersonalPermissionGranted"]);n=e.session.id,t=e.installationId,u=e.firefoxAnonPermissionGranted,d=e.firefoxPersonalPermissionGranted}catch(e){e instanceof Error&&console.error(`DAP: Failed to fetch settings. Error: ${e.message}`)}try{const e=yield oS();p=!!e.accountId,r=DT(e.translatorServiceType),o=DT(e.apiServiceType),a=DT(e.docTranslatorServiceType),l=DT(e.writeServiceType),s=p?2===r||2===o||2===l||2===a?O:R:N,c=e.sessionType?FT(e.sessionType):FT(Dn)}catch(e){e instanceof Error&&console.error(`DAP: Failed to fetch user information. Error: ${e.message}`)}try{i=yield iS()}catch(e){console.error(e)}const g=Cr(),h=yield cS();let f,m;try{f=yield sS()}catch(e){console.error(e)}try{m=yield gS()}catch(e){console.error(e)}const _=Object.assign({eventId:void 0,extensionVersion:"1.42.0",sessionId:n,sessionType:c,installationId:t,browserInstanceId:i,originStore:IT(chrome.runtime.id),userInfos:Object.assign(Object.assign({},f&&{accountData:{accountId:f}}),{userType:s,translatorServiceType:r,apiServiceType:o,docTranslatorServiceType:a,writeServiceType:l}),userAgent:g.userAgent,platform:g.platform,browser:g.browser,browserVersion:g.browserVersion,browserLang:g.browserLang,clientExperiments:h},m&&{webInstanceId:m});let v=e?e(_):_;if(xr()){if(!((e=!1,t=!1)=>!(!e&&!t)&&!(!e&&t)&&(!(!e||t)||!(!e||!t)||void 0))(u,d))return;if(v=((e,t=!1,n=!1)=>e?n&&t?e:!n&&ZT.includes(e?.eventId)?null:ey(e,QT):null)(v,u,d),!v)return}return fetch("https://s.deepl.com/chrome/statistics",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(v),credentials:"omit"}).then((e=>{e.ok||console.log(`DAP ${v.eventId} request failed: ${e}`)}))}))}function oy(e){return r(this,void 0,void 0,(function*(){return ry((t=>Object.assign(Object.assign({},t),{eventId:oT.EVENT_ID_TRANSLATION_REQUEST,translationRequestData:Object.assign(Object.assign(Object.assign(Object.assign({extensionVersion:"1.42.0",domainName:e.domainName,userId:e.installationId,translationTrigger:uT(e.trigger),translationData:{sourceLang:e.websiteLanguage,targetLang:e.targetLanguage,sourceLength:e.characterCount}},e.translationPerformance&&{translationPerformance:e.translationPerformance}),{nicheIntegration:AT(e.nicheIntegration||Lt)}),e.glossaryTrackingInfo&&{isGlossaryEnabled:e.glossaryTrackingInfo.isGlossaryEnabled,isGlossaryShared:e.glossaryTrackingInfo.isGlossaryShared,didGlossaryChangeTranslation:e.glossaryTrackingInfo.didGlossaryChangeTranslation,isAutoTermbase:e.glossaryTrackingInfo.isAutoTermbase}),e.isIta&&{isIta:e.isIta})})))}))}function ay(e){return r(this,void 0,void 0,(function*(){return ry((t=>Object.assign(Object.assign({},t),{eventId:oT.EVENT_ID_ERROR,errorData:{extensionVersion:"1.42.0",errorCode:e.errorCode,errorMessage:e.errorMessage,errorCategory:JT(e.errorCategory)}})))}))}function iy(e){return r(this,void 0,void 0,(function*(){return ry((t=>Object.assign(Object.assign({},t),{eventId:oT.EVENT_ID_TRANSLATION_ERROR,translationErrorData:{errorData:{extensionVersion:"1.42.0",errorCode:e.errorCode,errorMessage:e.errorMessage},targetLang:e.targetLang,domainName:e.domainName,websiteLanguage:e.websiteLanguage,sourceLength:e.characterCount,translationTrigger:uT(e.trigger),nicheIntegration:AT(e.nicheIntegration||Lt)}})))}))}function sy(e){return r(this,void 0,void 0,(function*(){return ry((t=>Object.assign(Object.assign({},t),{eventId:oT.EVENT_ID_CONTENT_SCRIPT_ERROR,contentScriptErrorData:{errorData:{extensionVersion:"1.42.0",errorCode:e.errorCode,errorMessage:e.errorMessage},domainName:e.domainName}})))}))}function cy(){return r(this,void 0,void 0,(function*(){return ry((e=>Object.assign(Object.assign({},e),{eventId:oT.EVENT_ID_INPUT_INJECTION_DATA,inputInjectionData:{extensionVersion:"1.42.0"}})))}))}function ly(e){return r(this,void 0,void 0,(function*(){return ry((t=>Object.assign(Object.assign({},t),{eventId:oT.EVENT_ID_EXTENSION_OPENED,extensionOpenedData:{extensionVersion:"1.42.0",domainName:e.domainName,pathName:e.pathName,extensionOpenedFrom:e.extensionOpenedFrom}})))}))}function uy(e){return r(this,void 0,void 0,(function*(){return ry((t=>Object.assign(Object.assign({},t),{eventId:oT.EVENT_ID_LOGO_CLICKED,logoClickedData:{extensionVersion:"1.42.0",logoClickedFrom:e.logoClickedFrom}})))}))}function dy(e){return r(this,void 0,void 0,(function*(){return ry((t=>Object.assign(Object.assign({},t),{eventId:oT.EVENT_ID_NOTIFICATION_VIEWED,notificationViewedData:{extensionVersion:"1.42.0",notificationType:hT(e.notificationType)}})))}))}function py(e){return r(this,void 0,void 0,(function*(){return ry((t=>Object.assign(Object.assign({},t),{eventId:oT.EVENT_ID_SHORTCUT_USED,shortcutUsedData:{shortcutType:mT(e.shortcutType),uiLocation:fT(e.location),shortcut:e.shortcut,nicheIntegration:AT(e.nicheIntegration||Lt)}})))}))}function gy(e){return r(this,void 0,void 0,(function*(){const t={eventId:_T(e.uiAction)};return LT(t.eventId)&&(t.payload={nicheIntegration:AT(e.nicheIntegration||Lt)}),ry((e=>Object.assign(Object.assign({},e),t)))}))}function hy(){return r(this,void 0,void 0,(function*(){return ry((e=>Object.assign(Object.assign({},e),{eventId:oT.EVENT_ID_DOC_TRANS_CLICKED})))}))}function fy(){return r(this,void 0,void 0,(function*(){return ry((e=>Object.assign(Object.assign({},e),{eventId:oT.EVENT_ID_RECOMMEND_TO_A_FRIEND_CLICKED})))}))}function my(e){return r(this,void 0,void 0,(function*(){return ry((t=>Object.assign(Object.assign({},t),{eventId:oT.EVENT_ID_INLINE_SETTING_OPENED,inlineSettingOpenedData:{uiFunction:vT(e.uiFunction),uiLocation:fT(e.uiLocation),nicheIntegration:AT(e.nicheIntegration)}})))}))}function _y(e){return r(this,void 0,void 0,(function*(){return ry((t=>Object.assign(Object.assign({},t),{eventId:oT.EVENT_ID_SETTING_CHANGED,settingChangedData:{settingType:TT(e.settingType),uiFunction:vT(e.uiFunction),uiLocation:fT(e.uiLocation),domainName:e.domainName}})))}))}function vy(e){return r(this,void 0,void 0,(function*(){return ry((t=>Object.assign(Object.assign({},t),{eventId:oT.EVENT_ID_AUTO_DETECT_LANG,detectLanguageData:{language:e.language}})))}))}function Ty(e){return r(this,void 0,void 0,(function*(){return ry((t=>Object.assign(Object.assign({},t),{eventId:oT.EVENT_ID_RIGHT_CLICK,rightClickData:{domainName:e.domainName,translationType:e.translationType}})))}))}function yy(e){return r(this,void 0,void 0,(function*(){return ry((t=>Object.assign(Object.assign({},t),{eventId:oT.EVENT_ID_INLINE_POSITION_CHANGE,inlinePositionChangeData:{newPosition:yT(e.newPosition)}})))}))}function Ey(e){return r(this,void 0,void 0,(function*(){return ry((t=>Object.assign(Object.assign({},t),{eventId:oT.EVENT_ID_INLINE_DRAG_START,inlineDragStartData:{nicheIntegration:AT((null==e?void 0:e.nicheIntegration)||Lt)}})))}))}function Sy(e){return r(this,void 0,void 0,(function*(){return ry((t=>Object.assign(Object.assign({},t),{eventId:oT.EVENT_ID_WHATSAPP_MESSAGE_TRANSLATED,whatsAppMessageTranslatedData:{messageLang:e.messageLang,targetLang:e.targetLang,messageLength:e.messageLength,translator:kT(e.translator),numberOfLanguages:e.numberOfLanguages,numberOfMessages:e.numberOfMessages}})))}))}function Iy(e){return r(this,void 0,void 0,(function*(){return ry((t=>Object.assign(Object.assign({},t),{eventId:oT.EVENT_ID_WHATSAPP_MESSAGE_TRANSLATION_FAILED,whatsAppMessageTranslationFailedData:{errorCode:e.errorCode,domainName:e.domainName,translationConfig:{messageLength:e.messageLength,targetLang:e.targetLang,messageLang:e.messageLang,translator:kT(e.translator),numberOfLanguages:e.numberOfLanguages,numberOfMessages:e.numberOfMessages}}})))}))}function by(e){return r(this,void 0,void 0,(function*(){return ry((t=>Object.assign(Object.assign({},t),{eventId:oT.EVENT_ID_TWITTER_TWEET_TRANSLATION_FAILED,twitterTweetTranslationFailedData:{errorCode:e.errorCode,domainName:e.domainName,translationConfig:{messageLength:e.messageLength,targetLang:e.targetLang,messageLang:e.messageLang}}})))}))}function Ay(e){return r(this,void 0,void 0,(function*(){return ry((t=>Object.assign(Object.assign({},t),{eventId:oT.EVENT_ID_YOUTUBE_COMMENT_TRANSLATION_FAILED,youtubeCommentTranslationFailedData:{errorCode:e.errorCode,domainName:e.domainName,translationConfig:{messageLength:e.messageLength,targetLang:e.targetLang,messageLang:e.messageLang}}})))}))}function wy(e){return r(this,void 0,void 0,(function*(){return ry((t=>Object.assign(Object.assign({},t),{eventId:oT.EVENT_ID_FPT_HIDE,fptHideData:{hideOption:e.hideOption,sourceLang:e.sourceLang,domainName:e.domainName,uiLocation:fT(e.uiLocation)}})))}))}function Ny(e){return r(this,void 0,void 0,(function*(){return ry((t=>Object.assign(Object.assign({},t),{eventId:oT.EVENT_ID_INLINE_COPY,inlineCopyData:{targetLang:e.targetLang,targetLength:e.targetLength,nicheIntegration:AT(e.nicheIntegration||Lt)}})))}))}function Oy(e){return r(this,void 0,void 0,(function*(){return ry((t=>Object.assign(Object.assign({},t),{eventId:oT.EVENT_ID_INLINE_LISTEN,inlineListenData:{targetLang:e.targetLang,targetLength:e.targetLength,actionType:e.actionType,textKind:wT(e.textKind),context:NT(e.context),nicheIntegration:AT(e.nicheIntegration||Lt)}})))}))}function Ry(e){return r(this,void 0,void 0,(function*(){return ry((t=>Object.assign(Object.assign({},t),{eventId:oT.EVENT_ID_ICON_HOVER,iconHoverData:{uiLocation:fT(e.uiLocation),domainName:e.domainName,nicheIntegration:AT(e.nicheIntegration||Lt)}})))}))}function Ly(e){return r(this,void 0,void 0,(function*(){return ry((t=>Object.assign(Object.assign({},t),{eventId:oT.EVENT_ID_ONBOARDING_STEP_CHANGE,onboardingStepChangeData:{previousStep:e.previousStep,newStep:e.newStep,trigger:ST(e.trigger),secondsOnOnboarding:e.secondsOnOnboarding,secondsOnPreviousStep:e.secondsOnPreviousStep}})))}))}function Cy(e){return r(this,void 0,void 0,(function*(){return ry((t=>Object.assign(Object.assign({},t),{eventId:oT.EVENT_ID_ONBOARDING_OPEN_EXTERNAL_PAGE,onboardingOpenExternalPageData:{url:ET(e.url)}})))}))}function Py(e){return r(this,void 0,void 0,(function*(){return ry((t=>Object.assign(Object.assign({},t),{eventId:oT.EVENT_ID_READ_MORE_CLICKED,readMoreClickedData:{uiLocation:fT(e.uiLocation)}})))}))}function xy(e){return r(this,void 0,void 0,(function*(){return ry((t=>Object.assign(Object.assign({},t),{eventId:oT.EVENT_ID_LAND_ON_WEBSITE,landOnWebsiteData:{website:bT(e.website)}})))}))}function ky(e){return r(this,void 0,void 0,(function*(){return ry((t=>Object.assign(Object.assign({},t),{eventId:oT.EVENT_ID_CLOSE_VOICE_OVER,inlineListenData:{targetLang:e.targetLang,targetLength:e.targetLength,triggerType:e.triggerType,textKind:wT(e.textKind),context:NT(e.context),nicheIntegration:AT(e.nicheIntegration||Lt)}})))}))}function Dy(e){return r(this,void 0,void 0,(function*(){return ry((t=>Object.assign(Object.assign({},t),{eventId:oT.EVENT_ID_OPEN_INPUT_HIGHLIGHTER,openInputHighlighterData:{domainName:e.domainName}})))}))}function Uy(e){return r(this,void 0,void 0,(function*(){return ry((t=>Object.assign(Object.assign({},t),{eventId:oT.EVENT_ID_CLOSE_INPUT_HIGHLIGHTER,closeInputHighlighterData:{trigger:e.trigger}})))}))}function My(e){return r(this,void 0,void 0,(function*(){return ry((t=>Object.assign(Object.assign({},t),{eventId:oT.EVENT_ID_GDOCS_REPLACE_TEXT,gdocsReplaceTextData:{sourceLang:e.sourceLang,targetLang:e.targetLang,sourceLength:e.sourceLength,targetLength:e.targetLength}})))}))}function Gy(){return r(this,void 0,void 0,(function*(){return ry((e=>Object.assign(Object.assign({},e),{eventId:oT.EVENT_ID_INSTALL_SUCCESS})))}))}function $y(e){return r(this,void 0,void 0,(function*(){return ry((t=>Object.assign(Object.assign({},t),{eventId:oT.EVENT_ID_OPEN_INLINE_HIGHLIGHTER,openInputHighlighterData:{domainName:e.domainName}})))}))}function Vy(e){return r(this,void 0,void 0,(function*(){return ry((t=>Object.assign(Object.assign({},t),{eventId:oT.EVENT_ID_CLOSE_INLINE_HIGHLIGHTER,closeInputHighlighterData:{trigger:e.trigger}})))}))}function Fy(e){return r(this,void 0,void 0,(function*(){return ry((t=>Object.assign(Object.assign({},t),{eventId:oT.EVENT_ID_DICTIONARY_STATUS,dictionaryStatus:{status:e.status,langPair:e.langPair}})))}))}function jy(){return r(this,void 0,void 0,(function*(){return ry((e=>Object.assign(Object.assign({},e),{eventId:oT.EVENT_ID_OPEN_DICTIONARY_SECTION})))}))}function Wy(){return r(this,void 0,void 0,(function*(){return ry((e=>Object.assign(Object.assign({},e),{eventId:oT.EVENT_ID_HOVER_DISABLED_DICTIONARY})))}))}function qy(e){return r(this,void 0,void 0,(function*(){return ry((t=>Object.assign(Object.assign({},t),{eventId:oT.EVENT_ID_DICTIONARY_ERROR,errorData:{lingueeError:dT(e.error)}})))}))}function By(e,t){return r(this,void 0,void 0,(function*(){let n;switch(e){case Jt:n=oT.EVENT_ID_ZENDESK_CUSTOMIZATION_OPEN_TICKET;break;case Yt:n=oT.EVENT_ID_ZENDESK_CUSTOMIZATION_DETECT_TICKET_LANGUAGE;break;case zt:n=oT.EVENT_ID_ZENDESK_CUSTOMIZATION_SWITCH_TICKET_LANGUAGE;break;case Xt:n=oT.EVENT_ID_ZENDESK_CUSTOMIZATION_ENABLE_AUTOTRANSLATE;break;case Kt:n=oT.EVENT_ID_ZENDESK_CUSTOMIZATION_DISABLE_AUTOTRANSLATE;break;case Qt:n=oT.EVENT_ID_ZENDESK_CUSTOMIZATION_TRANSLATE_MESSAGE;break;case Zt:n=oT.EVENT_ID_ZENDESK_CUSTOMIZATION_TRANSLATE_INPUT;break;case en:n=oT.EVENT_ID_ZENDESK_CUSTOMIZATION_ERROR;break;default:return}return ry((e=>Object.assign(Object.assign({},e),{eventId:n,zendeskMetaData:{agentLanguage:t.agentLanguage,ticketLanguage:t.ticketLanguage,isTicketLanguageAutodetected:t.isTicketLanguageAutodetected,isTicketLanguageSupported:t.isTicketLanguageSupported,isAutoTranslateEnabled:t.isAutoTranslateEnabled,sourceTextLength:t.sourceTextLength,targetTextLength:t.targetTextLength,inputHasSelection:t.inputHasSelection,error:t.error}})))}))}function Hy(e){return r(this,void 0,void 0,(function*(){let t;if(e.glossaryConfigOpenedWithoutGlossaryPermissions?t=oT.EVENT_ID_ZENDESK_GLOSSARY_TAB_OPENED_FREE_USER:e.glossaryConfigOpenedWithNoGlossariesFound&&(t=oT.EVENT_ID_ZENDESK_GLOSSARY_TAB_OPENED_NO_GLOSSARIES),t)return ry((e=>Object.assign(Object.assign({},e),{eventId:t})))}))}function Jy(e){return r(this,void 0,void 0,(function*(){return ry((t=>Object.assign(Object.assign({},t),{eventId:oT.EVENT_ID_LOGIN,loginData:{trigger:PT(e.trigger),reason:e.reason}})))}))}function Yy(e){return r(this,void 0,void 0,(function*(){const t=Math.round((yield nS())/60);return ry((n=>Object.assign(Object.assign({},n),{eventId:oT.EVENT_ID_LOGOUT,logoutData:{trigger:CT(e.trigger),minutesSinceLastLogin:t,reason:e.reason}})))}))}function zy(e){return r(this,void 0,void 0,(function*(){return ry((t=>Object.assign(Object.assign({},t),{eventId:oT.EVENT_ID_GDOCS_MAX_CHAR_EXCEEDED_SHOWN,gdocsMaxCharExceededData:{sourceLang:e.sourceLang,targetLang:e.targetLang,sourceLength:e.sourceLength}})))}))}function Xy(e){return r(this,void 0,void 0,(function*(){return ry((t=>Object.assign(Object.assign({},t),{eventId:oT.EVENT_ID_GDOCS_MAX_CHAR_EXCEEDED_TRY_PRO_CLICKED,gdocsMaxCharExceededData:{sourceLang:e.sourceLang,targetLang:e.targetLang,sourceLength:e.sourceLength}})))}))}function Ky(e){return r(this,void 0,void 0,(function*(){return ry((t=>Object.assign(Object.assign({},t),{eventId:oT.EVENT_ID_SESSION_TYPE,sessionTypeData:{sessionType:e.sessionType,trigger:xT(e.trigger)}})))}))}function Qy(e){return r(this,void 0,void 0,(function*(){let t="";try{t=yield QE()}catch(e){e instanceof Error&&console.log(`DAP: Failed to fetch session type. Error: ${e.message}`)}return ry((n=>Object.assign(Object.assign({},n),{eventId:oT.EVENT_ID_ONBOARDING_MODAL_SHOWN,onboardingModalShownData:{nicheIntegration:AT(e.nicheIntegration||Lt),sessionType:t}})))}))}function Zy(e){return r(this,void 0,void 0,(function*(){return ry((t=>Object.assign(Object.assign({},t),{eventId:oT.EVENT_ID_UI_LOCATION_CLICKED,UILocationClickedData:{uiLocation:fT(e)}})))}))}function eE(){return r(this,void 0,void 0,(function*(){return ry((e=>Object.assign(Object.assign({},e),{eventId:oT.EVENT_ID_INSTALLATION_ID_CREATED})))}))}function tE(){return r(this,void 0,void 0,(function*(){return ry((e=>Object.assign(Object.assign({},e),{eventId:oT.EVENT_ID_BROWSER_INSTANCE_ID_CREATED})))}))}function nE(e,t){return r(this,void 0,void 0,(function*(){let n;switch(e){case un:n=oT.EVENT_ID_DEEPL_WRITE_TEXT_REFINEMENT_REQUEST;break;case dn:n=oT.EVENT_ID_DEEPL_WRITE_GDOCS_INSERT_COPY;break;case pn:n=oT.EVENT_ID_DEEPL_WRITE_GDOCS_DISCARD_COPY;break;case gn:n=oT.EVENT_ID_DEEPL_WRITE_GDOCS_CHAR_LIMIT_REACHED;break;case _n:n=oT.EVENT_ID_DEEPL_WRITE_ERROR;break;case hn:n=oT.EVENT_ID_WRITE_RESULT_ACCEPTED;break;case fn:n=oT.EVENT_ID_WRITE_RESULT_REVERTED;break;case mn:n=oT.EVENT_ID_DEEPL_WRITE_GET_ALTERNATIVES_FOR_INPUT;break;default:return}return ry((e=>Object.assign(Object.assign({},e),{eventId:n,deeplWriteMetaData:{lang:t.lang,sourceLength:t.sourceLength,targetLength:t.targetLength,nicheIntegration:AT(t.nicheIntegration||Lt),error:t.error,style:OT(t.style),trigger:BT(t.trigger),domainName:t.domainName}})))}))}function rE(){return r(this,void 0,void 0,(function*(){if(!(yield KE()))return;const e=yield sS();return ry((t=>Object.assign(Object.assign({},t),{eventId:oT.EVENT_ID_SESSION_STARTED,accountData:{accountUuid:e}})))}))}function oE(){return r(this,void 0,void 0,(function*(){const e=yield sS();return ry((t=>Object.assign(Object.assign({},t),{eventId:oT.EVENT_ID_LOGGED_IN,accountData:{accountUuid:e}})))}))}function aE(){return r(this,void 0,void 0,(function*(){const e=yield sS();return ry((t=>Object.assign(Object.assign({},t),{eventId:oT.EVENT_ID_LOGGED_OUT,accountData:{accountUuid:e}})))}))}function iE(e,t){return r(this,void 0,void 0,(function*(){let n;switch(e){case vn:n=oT.EVENT_ID_TRANSLATION_RESULT_ACCEPTED;break;case Tn:n=oT.EVENT_ID_TRANSLATION_RESULT_REVERTED;break;default:return}return ry((e=>Object.assign(Object.assign({},e),{eventId:n,translationResultActionData:{sourceLang:t.sourceLang,sourceLength:t.sourceLength,targetLength:t.targetLength,nicheIntegration:AT(t.nicheIntegration||Lt),error:t.error}})))}))}function sE(e){return r(this,void 0,void 0,(function*(){return ry((t=>Object.assign(Object.assign({},t),{eventId:oT.EVENT_ID_CUSTOMIZATION_ON_OFF,customizationOnOffData:{nicheIntegration:AT(e.nicheIntegration||Lt),uiLocation:fT(e.location),customizationEnabled:e.customizationEnabled}})))}))}function cE(e){return r(this,void 0,void 0,(function*(){return ry((t=>Object.assign(Object.assign({},t),{eventId:oT.EVENT_ID_GMAIL_CHAR_LIMIT_REACHED,gmailCharLimitReachedData:{gmailActionType:UT(e.type)}})))}))}function lE(e){return r(this,void 0,void 0,(function*(){return ry((t=>Object.assign(Object.assign({},t),{eventId:oT.EVENT_ID_UPGRADE_NOTIFICATION_DISPLAYED,upgradeNotificationDisplayedData:{type:MT(e)}})))}))}function uE(e){return r(this,void 0,void 0,(function*(){return ry((t=>Object.assign(Object.assign({},t),{eventId:oT.EVENT_ID_UPGRADE_NOTIFICATION_CLOSED,upgradeNotificationClosedData:{type:MT(e)}})))}))}function dE(e,t){return r(this,void 0,void 0,(function*(){return ry((n=>Object.assign(Object.assign({},n),{eventId:oT.EVENT_ID_UPGRADE_NOTIFICATION_ACTION,upgradeNotificationActionData:{type:MT(e),action:$T(t)}})))}))}function pE(e,t){return r(this,void 0,void 0,(function*(){let n;switch(e){case yn:n=oT.EVENT_ID_ALTERNATIVES_ALTERNATIVES_OPENED;break;case En:n=oT.EVENT_ID_ALTERNATIVES_SEGMENTATION_SELECTED;break;case Sn:n=oT.EVENT_ID_ALTERNATIVES_ALTERNATIVE_SELECTED;break;default:return}return ry((e=>Object.assign(Object.assign({},e),{eventId:n,alternativesMetaData:Object.assign({sourceLang:t.sourceLang,targetLang:t.targetLang,nicheIntegration:AT(t.nicheIntegration||Lt),contentProcessingMode:GT(t.contentProcessingMode)},t.alternativesSegmentation&&{alternativesSegmentation:VT(t.alternativesSegmentation)})})))}))}function gE(e,t){return r(this,void 0,void 0,(function*(){const n=e?oT.EVENT_ID_GLOSSARY_ENABLED:oT.EVENT_ID_GLOSSARY_DISABLED;return ry((e=>Object.assign(Object.assign({},e),{eventId:n,glossaryMetadata:{nicheIntegration:AT(t.nicheIntegration||Lt)}})))}))}function hE(e){return r(this,void 0,void 0,(function*(){return ry((t=>Object.assign(Object.assign({},t),{eventId:oT.EVENT_ID_LANGUAGE_DETECTION_FOR_TEXT_PROCESSING,languageDetectionTextProcessingData:{detectedLanguageCode:e.lang,textLength:e.textLength,domainName:e.domainName,isReliable:e.isReliable,translationTrigger:uT(e.trigger),nicheIntegration:AT(e.nicheIntegration||Lt)}})))}))}function fE(){return r(this,void 0,void 0,(function*(){return ry((e=>Object.assign(Object.assign({},e),{eventId:oT.EVENT_ID_SEE_ALTERNATIVES_FOR_INPUT_CLICKED})))}))}function mE(e){return r(this,void 0,void 0,(function*(){return ry((t=>Object.assign(Object.assign({},t),{eventId:oT.EVENT_ID_ALTERNATIVE_SELECTED,alternativesMetaData:Object.assign({sourceLang:e.sourceLang,targetLang:e.targetLang,numberOfAlternatives:e.numberOfAlternatives,selectedAlternativeIndex:e.selectedAlternative,nicheIntegration:AT(e.nicheIntegration||Lt),contentProcessingMode:GT(e.contentProcessingMode)},e.alternativesSegmentation&&{alternativesSegmentation:VT(e.alternativesSegmentation)})})))}))}function _E(){return r(this,void 0,void 0,(function*(){return ry((e=>Object.assign(Object.assign({},e),{eventId:oT.EVENT_ID_IFRAME_TRANSLATION_SUCCESSFUL})))}))}function vE(e){return r(this,void 0,void 0,(function*(){return ry((t=>Object.assign(Object.assign({},t),{eventId:oT.EVENT_ID_IFRAME_TRANSLATION_FAILED,errorData:{extensionVersion:"1.42.0",errorCode:e.errorCode,errorMessage:e.errorMessage}})))}))}function TE(){return r(this,void 0,void 0,(function*(){return ry((e=>Object.assign(Object.assign({},e),{eventId:oT.EVENT_ID_ADS_BUTTON_CLICKED})))}))}function yE(e){return r(this,void 0,void 0,(function*(){return ry((t=>Object.assign(Object.assign({},t),{eventId:oT.EVENT_ID_ADS_SHOWN,adsShownData:{matchedWord:e.matchedWord}})))}))}function EE(e){return r(this,void 0,void 0,(function*(){return ry((t=>Object.assign(Object.assign({},t),{eventId:oT.EVENT_ID_WRITE_TEXT_STYLES_CHANGED,writeTextStylesData:{style:OT(e.style)}})))}))}function SE(e){return r(this,void 0,void 0,(function*(){return ry((t=>Object.assign(Object.assign({},t),{eventId:oT.EVENT_ID_WRITE_TEXT_STYLES_APPLIED,writeTextStylesData:{style:OT(e.style)}})))}))}function IE(e){return r(this,void 0,void 0,(function*(){return ry((t=>Object.assign(Object.assign({},t),{eventId:oT.EVENT_ID_WRITE_TEXT_TONES_CHANGED,writeTextStylesData:{style:OT(e.tone)}})))}))}function bE(e){return r(this,void 0,void 0,(function*(){const t=ny(e);return ry((e=>Object.assign(Object.assign({},e),{eventId:oT.EVENT_ID_EXTENSION_INSTALL_WITH_WEBSITE_USER_LOGIN_STATUS_CHECK,webUserInfoData:t})))}))}function AE(e){return r(this,void 0,void 0,(function*(){const t=ny(e);return ry((e=>Object.assign(Object.assign({},e),{eventId:oT.EVENT_ID_DAILY_WEBSITE_USER_LOGIN_STATUS_CHECK,webUserInfoData:t})))}))}function wE(){return r(this,void 0,void 0,(function*(){return ry((e=>Object.assign(Object.assign({},e),{eventId:oT.EVENT_ID_GET_WEBSITE_USER_DATA_FAILED})))}))}function NE(e){return r(this,void 0,void 0,(function*(){return ry((t=>Object.assign(Object.assign({},t),{eventId:oT.EVENT_ID_TRANSLATION_FORMALITY_CHANGED,translationFormalityData:{formality:RT(e.formality)}})))}))}function OE(){return r(this,void 0,void 0,(function*(){return ry((e=>Object.assign(Object.assign({},e),{eventId:oT.EVENT_ID_SIDE_PANEL_OPENED})))}))}function RE(e){return r(this,void 0,void 0,(function*(){return ry((t=>Object.assign(Object.assign({},t),{eventId:oT.EVENT_ID_SEND_EXTENSION_INFO_DATA,extensionInfoData:Object.assign(Object.assign({enabled:e.enabled,id:e.id,version:e.version,installType:jT(e.installType)},e.installReason&&{installReason:qT(e.installReason)}),e.disabledReason&&{disabledReason:WT(e.disabledReason)})})))}))}function LE(e){return r(this,void 0,void 0,(function*(){return ry((t=>Object.assign(Object.assign({},t),{eventId:oT.EVENT_ID_REPLACE_INPUT_FIELD_SELECTION,replaceInputFieldData:{replacementType:HT(e.replacementType)}})))}))}function CE(e){return r(this,void 0,void 0,(function*(){return ry((t=>Object.assign(Object.assign({},t),{eventId:oT.EVENT_ID_ITA_SESSION,itaSessionData:Object.assign(Object.assign(Object.assign({itaSessionType:YT(e.itaSessionType),itaSessionEventType:zT(e.itaSessionEventType)},e.itaErrorType&&{itaErrorType:XT(e.itaErrorType)}),e.itaErrorMessage&&{itaErrorMessage:e.itaErrorMessage}),e.itaUserInteractionType&&{itaUserInteractionType:KT(e.itaUserInteractionType)})})))}))}let PE;const xE="dlBrowserExtension",kE="dlCache",DE="dlclientstate",UE="dlexperiments";function ME(){return new Promise(((e,t)=>{let n=indexedDB.open(xE,1);n.onerror=function(){t(n.error)},n.onsuccess=function(t){PE=t.target.result,e()},n.onupgradeneeded=function(t){PE=t.target.result,PE.objectStoreNames.contains(kE)||PE.createObjectStore(kE,{keyPath:"id"}),e()}}))}function GE(e,t,n){return r(this,void 0,void 0,(function*(){return PE||(yield ME()),new Promise(((r,o)=>{let a=PE.transaction(n,"readwrite").objectStore(n).put({id:e,data:t,meta:{createdAt:Date.now()}});a.onsuccess=function(){r()},a.onerror=function(e){o(e)}}))}))}function $E(e,t){return r(this,void 0,void 0,(function*(){return PE||(yield ME()),new Promise(((n,r)=>{let o=PE.transaction(t,"readonly").objectStore(t).get(e);o.onerror=function(e){r(e)},o.onsuccess=function(){o.result?n(o.result):n(null)}}))}))}function VE(e){return r(this,void 0,void 0,(function*(){try{yield GE(DE,e,kE)}catch(e){Pv(e,Y_)}}))}function FE(){return r(this,void 0,void 0,(function*(){const e=yield $E(DE,kE);if(!e||!e.meta)return;return(Date.now()-e.meta.createdAt)/6e4>20?void 0:e.data}))}function jE(e){return r(this,void 0,void 0,(function*(){try{yield GE(UE,e,kE)}catch(e){Pv(e,Y_)}}))}function WE(){return r(this,void 0,void 0,(function*(){const e=yield $E(UE,kE);if(!e||!e.meta)return[];return(Date.now()-e.meta.createdAt)/6e4>9?[]:e.data&&0!==e.data.length?e.data:[]}))}function qE(e){return r(this,void 0,void 0,(function*(){if(e.includes("session")){const e=yield chrome.storage.sync.get(["session"]);e&&!e.session&&(yield BE())}return new Promise(((t,n)=>{chrome.storage.sync.get(e,(r=>{r?t(r):n(`Can not get ${e}`)}))}))}))}function BE(){return r(this,void 0,void 0,(function*(){const e=p();yield chrome.storage.sync.set({session:{id:e,timestamp:Date.now()}});try{yield rE()}catch(e){console.error(e)}}))}function HE(){return r(this,void 0,void 0,(function*(){const{session:e}=yield qE(["session"]);!e||(Date.now()-e.timestamp)/6e4>30?yield BE():yield chrome.storage.sync.set({session:Object.assign(Object.assign({},e),{timestamp:Date.now()})})}))}function JE(e,t,n){return r(this,void 0,void 0,(function*(){const r=h(e);return yield chrome.storage.local.set({a_t:e,r_t:t,[Iv.auth.idToken]:n,isLoggedIn:!(!e||!t),isProUser:!(!r||"Pro"!==r.sessionType),sessionType:null==r?void 0:r.sessionType}),null==r?void 0:r.sessionType}))}function YE(){return r(this,void 0,void 0,(function*(){yield chrome.storage.local.remove(["a_t","r_t",Iv.auth.idToken,"delegatedLoginMapping"]),yield chrome.storage.local.set({isLoggedIn:!1,isProUser:!1,sessionType:""})}))}function zE(){return r(this,void 0,void 0,(function*(){yield chrome.storage.sync.remove(["activeTermbaseId","isGlossaryEnabled"]),yield chrome.storage.sync.set({activeTermbaseId:"",isGlossaryEnabled:!1})}))}function XE(){return r(this,void 0,void 0,(function*(){const e=yield chrome.storage.local.get(["a_t","r_t",Iv.auth.idToken]);return{access_token:e?e.a_t:void 0,refresh_token:e?e.r_t:void 0,id_token:e?e[Iv.auth.idToken]:void 0}}))}function KE(){return r(this,void 0,void 0,(function*(){const e=yield chrome.storage.local.get([Iv.auth.isLoggedIn]);return!(!e||!e.isLoggedIn)}))}function QE(){return r(this,void 0,void 0,(function*(){const e=yield chrome.storage.local.get(["sessionType"]);return null==e?void 0:e.sessionType}))}function ZE(){return r(this,void 0,void 0,(function*(){return(yield chrome.storage.sync.get(["installationId"])).installationId}))}function eS(){return r(this,void 0,void 0,(function*(){yield chrome.storage.local.set({last_login:Date.now()})}))}function tS(){return r(this,void 0,void 0,(function*(){yield chrome.storage.local.remove(["last_login"])}))}function nS(){return r(this,void 0,void 0,(function*(){const e=yield chrome.storage.local.get(["last_login"]);return e&&e.last_login?(Date.now()-e.last_login)/1e3:0}))}function rS(e){return r(this,void 0,void 0,(function*(){var t,n,r,o,a;const i=e.featureSet.translator.service,s=e.featureSet.write.service,c=e.featureSet.api.service,l=e.featureSet.documentTranslation.service,u=e.featureSet.glossary.termbaseService,d=e.featureSet.glossary.maxGlossaries;let p,g;(null===(t=e.loginState)||void 0===t?void 0:t.accountId)&&(p=e.loginState.accountId),(null===(r=null===(n=e.featureSet)||void 0===n?void 0:n.integrations)||void 0===r?void 0:r.browserExtension)&&(g=null===(a=null===(o=e.featureSet)||void 0===o?void 0:o.integrations)||void 0===a?void 0:a.browserExtension),yield chrome.storage.local.set({translatorServiceType:i,writeServiceType:s,apiServiceType:c,docTranslatorServiceType:l,accountId:p||"",featureSet:g,hasTermbaseService:u&&d>0})}))}function oS(){return r(this,void 0,void 0,(function*(){return yield chrome.storage.local.get([Iv.auth.isLoggedIn,"isProUser","sessionType",Iv.auth.translatorServiceType,Iv.auth.writeServiceType,Iv.auth.apiServiceType,Iv.auth.docTranslatorServiceType,Iv.auth.accountId,Iv.glossary.hasTermbaseService])}))}function aS(){return r(this,void 0,void 0,(function*(){yield chrome.storage.local.set({browserInstanceId:p()})}))}function iS(){return r(this,void 0,void 0,(function*(){return(yield chrome.storage.local.get(["browserInstanceId"])).browserInstanceId}))}function sS(){return r(this,void 0,void 0,(function*(){const e=yield chrome.storage.local.get([Iv.auth.accountId,"a_t",Iv.auth.idToken]);if(e&&e.accountId)return e.accountId;if(e&&e.a_t){const t=h(e.a_t),n=h(e[Iv.auth.idToken]);return t.sub||n.sub}}))}function cS(){return r(this,void 0,void 0,(function*(){let e=[];try{e=yield WE()}catch(e){}if(!e||0===e.length)return[];const t=e.map((e=>({id:e.id,variant:e.variant,breakout:e.breakout})));return t}))}function lS(){return r(this,arguments,void 0,(function*(e=Iv.auth.translatorServiceType){const t=yield oS(),n=!!t.accountId,r=t[e];return n?r===cn?O:R:N}))}function uS(){return r(this,arguments,void 0,(function*(e=Iv.auth.translatorServiceType){const t=yield lS(e);let n;switch(e){case Iv.auth.translatorServiceType:n=L;break;case Iv.auth.writeServiceType:n=C;break;default:n=L}switch(t){case N:return n.notLoggedIn;case R:return n.loggedInFree;case O:return;default:return n.notLoggedIn}}))}function dS(e){return r(this,void 0,void 0,(function*(){const t=yield chrome.storage.local.get([Iv.auth.translatorServiceType,Iv.auth.writeServiceType,Iv.auth.apiServiceType,Iv.auth.docTranslatorServiceType,Iv.auth.isLoggedIn]);return Ov(t,e)}))}function pS(){return r(this,void 0,void 0,(function*(){return yield chrome.storage.local.get([Iv.auth.translatorServiceType,Iv.auth.writeServiceType,Iv.auth.apiServiceType,Iv.auth.docTranslatorServiceType,Iv.auth.isLoggedIn])}))}function gS(){return r(this,void 0,void 0,(function*(){if(xr())return;const e=yield chrome.cookies.get({name:"dapUid",url:"https://www.deepl.com"});return e?e.value:void 0}))}const hS=["requireLogin","suggestIdp"],fS=()=>r(void 0,void 0,void 0,(function*(){const e=yield r(void 0,void 0,void 0,(function*(){try{return yield chrome.storage.managed.get(hS)}catch(e){return}}));if(void 0===e)return;const{isLoggedIn:t}=yield oS();if(e.requireLogin&&!t)throw new Jv}));function mS(){return r(this,arguments,void 0,(function*(e=!1){if(!e){let e;try{e=yield WE()}catch(e){}if(e&&e.length)return e}const t=yield ZE();if(!t)throw new Error("Installation ID is not valid");let n=[];try{n=yield WE()}catch(e){}const r=`https://experimentation.deepl.com/experiments/${t}`;let o;try{const e=yield fetch(r,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:JSON.stringify(n),credentials:"omit"});if(o=(yield e.json()).client_experiments,!o)return[];const t=yield _S();return t.length&&(o=o.map((e=>{const n=t.find((t=>t.id===e.id));return n?Object.assign(Object.assign({},e),{variant:n.variant}):e}))),yield jE(o),o}catch(e){return[]}}))}function _S(){return r(this,void 0,void 0,(function*(){const e=yield chrome.cookies.get({name:"dl_experiment_override",url:"https://www.deepl.com"});if(!e)return[];return e.value.split("|").map((e=>{const[t,n]=e.split("-");return{id:parseInt(t),variant:parseInt(n)}})).filter((e=>!isNaN(e.id)&&!isNaN(e.variant)))}))}const vS="TG-2972",TS="TG-2929",yS="TG-2997",ES=(e,t)=>{if(!e||!Array.isArray(e)||0===e.length)return 1;const n=e.find((e=>e.name===t));return n?n.variant:1},SS="ACCESS_DENIED",IS="INVALID_REQUEST",bS="INVALID_GRANT",AS="GET_TOKEN_ERROR",wS="INVALID_NONCE";class NS extends Error{constructor(e,t){super(e),this.name=SS,this.message=e,this.httpStatusCode=t}}class OS extends Error{constructor(e,t){super(e),this.name=IS,this.message=e,this.httpStatusCode=t}}class RS extends Error{constructor(e,t){super(e),this.name=bS,this.message=e,this.httpStatusCode=t}}class LS extends Error{constructor(e,t){super(e),this.name=AS,this.message=e,this.httpStatusCode=t}}class CS extends Error{constructor(e){super(e),this.name=wS,this.message=e}}function PS(e,t){const n=e.split("?")[1];if(n){var r=n.split("&");for(let e=0;e<r.length;e++){const n=r[e].split("=");if(decodeURIComponent(n[0])===t)return decodeURIComponent(n[1])}}}async function xS(e,t,n="https://test.deepl.com/oidc-login"){const r=g(),o=g(),a=await async function(e){const t=await crypto.subtle.digest("SHA-256",(new TextEncoder).encode(e));return btoa(String.fromCharCode(...new Uint8Array(t))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}(o);return{url:n+"?"+new URLSearchParams([["client_id",e],["redirect_uri",t],["code_challenge",a],["code_challenge_method","S256"],["nonce",r]]),nonce:r,codeVerifier:o}}function kS(e,t){if(200!==e){if("invalid_request"===t.error)throw new OS(`dl-oidc (get tokens): invalid request - http status: ${e}`,e);if("invalid_grant"===t.error)throw new RS(`dl-oidc (get tokens): invalid grant - http status: ${e}`,e);throw new LS(`dl-oidc (get tokens): http status: ${e}`,e)}}async function DS(e,t="https://deepl.com/oidc/token"){const n=await fetch(t,{method:"POST",credentials:"omit",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"refresh_token",refresh_token:e})}),r=await n.json();return kS(n.status,r),r.access_token}async function US(e,t,n=!1){let r=t.access_token;async function o(){return await fetch(e,{...t,headers:{...t.headers,Authorization:r?`Bearer ${r}`:"None"},...t.omitCookies&&{credentials:"omit"}})}n&&r&&(r=await DS(t.refresh_token,t.token_url));let a=await o();return 401!==a.status&&403!==a.status||(r=await DS(t.refresh_token,t.token_url),a=await o()),{response:a,accessToken:r}}async function MS(e=!1,t=!0){if(!e){const e=await FE();if(e)return e}const n=ty("getClientState",{v:"20180814"},d()),r=await XE(),o=t||function(e){try{const t=h(e);if(t.exp&&Date.now()/1e3<t.exp-5)return!1}catch(e){console.error("Error decoding token:",e)}return!0}(r.access_token),{response:a,accessToken:i}=await US("https://w.deepl.com/web",{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(n),access_token:r.access_token,refresh_token:r.refresh_token,token_url:"https://w.deepl.com/oidc/token",credentials:"omit"},o);await JE(i,r.refresh_token,r.id_token);const s=(await a.json()).result;return s&&(VE(s),rS(s)),s}const GS=(e,t)=>r(void 0,void 0,void 0,(function*(){const n=yield JE(e.access_token,e.refresh_token,e.id_token);try{yield MS(!0,!1),Jy(t),oE(),n&&Ky({sessionType:n,trigger:"LOGIN"})}catch(e){console.error(e)}yield eS()}));async function $S(e=!1){const t=async()=>{const t=await xS("chromeExtension",chrome.identity.getRedirectURL(),"https://www.deepl.com/auth/login");return(ov()||await av())&&(t.url="http://localhost:3000/loginPage?regularUrl="+encodeURIComponent(t.url)),new Promise(((n,r)=>{chrome.identity.launchWebAuthFlow({interactive:!0,url:e?`${t.url}#error_loginfailed`:t.url},(async e=>{if(!e){const e=chrome.runtime.lastError.message;return console.error("response url undefined",e),Pv(`login - response url undefined. ${e}`,Y_),/The user did not approve access/gm.test(e)||/User cancelled or denied access/gm.test(e)?n():r()}try{const r=await async function(e,t,n,r,o,a="https://deepl.com/oidc/token"){const i=PS(n,"code");if(!i){const e=PS(n,"error");if("access_denied"===e)throw new NS("dl-oidc (get tokens): access denied - undefined code",401);if("invalid_request"===e)throw new OS("dl-oidc (get tokens): invalid request - undefined code",400)}let s={client_id:e,code_verifier:o,grant_type:"authorization_code",redirect_uri:t};i&&(s.code=i);const c=await fetch(`${a}`,{method:"POST",credentials:"omit",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(s)}),l=await c.json();if(kS(c.status,l),h(l.id_token).nonce!==r)throw new CS("dl-oidc (get tokens): invalid nonce");return l}("chromeExtension",chrome.identity.getRedirectURL(),e,t.nonce,t.codeVerifier,"https://w.deepl.com/oidc/token");await GS(r,{trigger:Bt,reason:"explicit_login"}),n()}catch(e){console.error(e);try{ay({errorCode:e.name,errorMessage:e.message,errorCategory:cr})}catch(e){console.error(e)}r(e)}}))}))};try{await t()}catch(e){$S(!0)}}async function VS(e){const t=await XE(),n=new URLSearchParams([["id_token_hint",t.id_token],["post_logout_redirect_uri",chrome.identity.getRedirectURL()]]),r=async()=>{await tS();try{await aE()}catch(e){console.error(e)}await YE(),await chrome.storage.local.set({[Iv.auth.lastLogoutTrigger]:e.trigger});try{await Yy({trigger:e.trigger,reason:e.reason})}catch(e){console.error(e)}await MS(!0),zE(),e.showAlert&&chrome.tabs.query({active:!0,currentWindow:!0},(function(t){chrome.tabs.sendMessage(t[0].id,{action:"dlShowAlert",payload:{error:e.reason}})}))};if(!t.id_token)return void await r();const o=`https://www.deepl.com/auth/logout?${n}`;chrome.identity.launchWebAuthFlow({url:o,interactive:!0},(()=>{r()}))}async function FS(){const e=await XE();let t=e.access_token;if(t){const n=6e4;if(1e3*h(t).exp-Date.now()<n){const n="https://w.deepl.com/oidc/token";t=await DS(e.refresh_token,n),await JE(t,e.refresh_token,e.id_token)}}return t}function jS(e){if(void 0===e)return{langCode:void 0,regionalVariant:void 0};const t=["EN-US","EN-GB","PT-PT","PT-BR","ZH-HANT"].includes(null==e?void 0:e.toUpperCase());let n,r=null==e?void 0:e.toUpperCase();return t&&(r=null==e?void 0:e.toUpperCase().slice(0,2),n=function(e){const t=e.split("-");if(2===t.length)return t[0].toLowerCase()+"-"+t[1].toUpperCase();return e}(null==e?void 0:e.toUpperCase())),{langCode:r,regionalVariant:n}}async function WS(e,t,n,r){const o=await XE(),a=await dS(an.TRANSLATOR),i=await dS(an.WRITE);let s=o&&o.access_token&&a?"https://api.deepl.com/jsonrpc?client=chrome-extension,1.42.0":"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.42.0";r&&(s=o&&o.access_token&&i?"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.42.0":"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.42.0");try{const{response:r,accessToken:a}=await US(s,{method:"POST",headers:{"Content-Type":t},body:e,access_token:o.access_token,refresh_token:o.refresh_token,token_url:"https://w.deepl.com/oidc/token",omitCookies:!0}),i=await JE(a,o.refresh_token,o.id_token);if(i)try{await Ky({sessionType:i,trigger:"TRANSLATION"})}catch(e){console.log(e)}try{await MS(!1,!1)}catch(e){console.error(`Failed to get the client state ${e.message}`)}let c=function(e,t,n){let r;try{r=JSON.parse(e)}catch(e){throw 200===t?new Yv("JSON_RPC: Parsing of response object failed"):t>=500&&n?new zv(`FPT failed: Http status code ${t}`):new Xv(t.toString(),403===t?`Translation failed: Http status code ${t} forbidden request. re-authenticating makes no difference.`:`Translation failed: Http status code ${t}`)}if("2.0"!==r.jsonrpc||void 0!==r.result&&200!==t||void 0===r.result&&void 0===r.error)throw new Yv("JSON_RPC: missing field, wrong id, proper result without 200 status, or missing data");if(r.error){const e=r.error;if(void 0===e.code)throw new Yv('JSON_RPC: Missing field "code" in error response');throw new Xv(e.code.toString(),e.message)}if(200!==t)throw new Xv(t.toString(),`Http status code ${t}`);return r}(await r.text(),r.status,n);return{data:c,status:r.status}}catch(e){throw e.name!==SS&&e.name!==IS&&e.name!==bS&&e.name!==Dv&&e.name!==Uv||setTimeout((()=>{VS({trigger:qt,reason:e.name})}),5e3),e}}async function qS(e,t,n=e=>e,r,o,a){const i=function(e,t,n){return{jsonrpc:"2.0",method:e,params:t,id:n}}(e,t,r),s=n(JSON.stringify(i),i);return(await WS(s,"application/json; charset=utf-8",o,a)).data.result}async function BS(e){let t,n={};for(const t in e.weights)e.weights[t]>0&&(n[t]=e.weights[t]);try{t=await lS()}catch(e){t=N,console.log(e)}const r=e.nicheIntegration===Lt||e.nicheIntegration===Dt||e.nicheIntegration===Ut||!e.nicheIntegration,o=await dS(an.TRANSLATOR),a=await dS(an.WRITE);if((!o||!a)&&r){const n=e.sourceTexts.reduce(((e,t)=>e+t.length),0),r=e.isWriteRequest?Iv.auth.writeServiceType:Iv.auth.translatorServiceType,i=await uS(r);if(e.isWriteRequest){if(o&&!a&&n>i)throw new eT(i,"Char limit exceeded (Translator Pro, Write Free)");if(!a&&n>i)throw new Zv(i,"Char limit exceeded (Write Free Or Anonymous)")}else{if(t===R&&a&&n>i)throw new tT(i,"Char limit exceeded (Free or Anon Translator, Write Pro)");if(t===R&&n>i)throw new Kv(i,"Char limit exceeded (Translator Free)");if(t===N&&n>i)throw new Qv(i,"Char limit exceeded (Translator Anon)")}}let i=e.sourceTexts;const{langCode:s,regionalVariant:c}=jS(e.targetLangCode),l=s,u=e.isWriteRequest?e.sourceTexts.map((e=>({text:e,requestAlternatives:4}))):i.map((e=>({text:e}))),d={texts:u,...e.isHtml&&{html:"enabled"},...!e.isHtml&&{splitting:e.splitting?e.splitting:"paragraphs"},lang:{target_lang:l,source_lang_user_selected:"auto"===e.sourceLang?"auto":e.sourceLang.toUpperCase(),preference:{weight:n}},commonJobParams:{regionalVariant:c,...e.isWriteRequest&&{mode:"write"},...e.formality&&{formality:e.formality}}};let p=1;const g=Date.now();i.forEach((e=>p+=(e.match(/[i]/g)||[]).length)),d.timestamp=g-g%p+p;const h=await qS("LMT_handle_texts",d,((e,t)=>e=(t.id+3)%13==0||(t.id+5)%29==0?e.replace('"method":"','"method" : "'):e.replace('"method":"','"method": "')),e.id,e.isHtml,e.isWriteRequest);return{texts:h.texts.map((e=>e.text)),sourceLang:h.lang.toUpperCase(),detectedLanguages:h.detectedLanguages}}const HS=new Map([["ZH_EN","chinese-english"],["EN_ZH","english-chinese"],["NL_EN","dutch-english"],["EN_NL","english-dutch"],["FR_EN","french-english"],["EN_FR","english-french"],["FR_DE","french-german"],["DE_FR","german-french"],["FR_PT","french-portuguese"],["PT_FR","portuguese-french"],["FR_ES","french-spanish"],["ES_FR","spanish-french"],["DE_EN","german-english"],["EN_DE","english-german"],["DE_PT","german-portuguese"],["PT_DE","portuguese-german"],["DE_ES","german-spanish"],["ES_DE","spanish-german"],["IT_EN","italian-english"],["EN_IT","english-italian"],["JA_EN","japanese-english"],["EN_JA","english-japanese"],["PL_EN","polish-english"],["EN_PL","english-polish"],["PT_EN","portuguese-english"],["EN_PT","english-portuguese"],["PT_ES","portuguese-spanish"],["ES_PT","spanish-portuguese"],["RU_EN","russian-english"],["EN_RU","english-russian"],["ES_EN","spanish-english"],["EN_ES","english-spanish"]]);async function JS(e){const t=function(e,t){const n=`${e.toUpperCase()}_${t.toUpperCase()}`;return HS.get(n)}(YS(e.sourceLang),YS(e.targetLang)),n=encodeURIComponent(e.text),r=`https://www-app.linguee.com/${t}/search?dlApp=BrowserExtension&il=${e.interfaceLang}&query=${n}`;let o=async function(e){let t;if(200!==e.status)throw 404===e.status?(console.error("Dictionary Entry not found: 404"),new nT(Mv)):(console.error("Dictionary Server Error"),new nT(Gv));{try{t=await e.text()}catch(e){throw new nT(Gv)}const n=/href=["']([^"']*)["']/g;t=t.replace(n,"")}return t}(await fetch(r));return o}function YS(e){return["EN-US","EN-GB","PT-PT","PT-BR","ZH-HANT"].includes(e)?["EN-US","EN-GB"].includes(e)?"EN":["PT-PT","PT-BR"].includes(e)?"PT":["ZH-CN","ZH-HANT"].includes(e)?"ZH":e:e}function zS(e,t){const n=1e-5;return n*Math.floor((.97*e+t)/n)}async function XS(){const e=ty("getClientState",{v:"20180814"},d()),t=await fetch("https://w.deepl.com/web",{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(e)});return(await t.json()).result}const KS="PROTOCOL_ERROR",QS="FULL_PAGE_SERVER_ERROR",ZS="-32003",eI="403",tI="401";class nI extends Error{constructor(e){super(e),this.name=KS,this.message=e}}class rI extends Error{constructor(e,t){super(t),this.name=e,this.message=t}}class oI extends Error{constructor(e){super(e),this.name=QS,this.message=e}}function aI(){let e=new Uint32Array(1);return crypto.getRandomValues(e),e[0]}function iI(e,t){return{jsonrpc:"2.0",method:e,params:t,id:aI()}}const sI={TRANSLATE:"translate",WRITE:"write"},cI="pro",lI="LMT_split_text",uI="LMT_handle_jobs",dI="getTermbases";const pI=async({mode:e,texts:t,config:n,sourceLang:r="auto",queryParameter:o,textType:a,advancedMode:i})=>{const s=await fI(n,e),c=o?`${s}&method=${lI}&${o}`:`${s}&method=${lI}`,l=iI(lI,{commonJobParams:{mode:e,...!0===i&&{advancedMode:!0}},lang:{lang_user_selected:r},texts:t,textType:a});return await hI(c,{method:"POST",headers:{"Content-Type":"application/json"},body:_I(l)},n)},gI=async({mode:e,jobs:t,sourceLang:n,targetLang:r,config:o,textType:a,formality:i,termbase:s,styleVariant:c,queryParameter:l,regionalVariant:u})=>{const d=await fI(o,e),p=l?`${d}&method=${uI}&${l}`:`${d}&method=${uI}`,g=iI(uI,{commonJobParams:{mode:e,...a&&{textType:a},...i&&{formality:i},...c&&{style_variant:c},...s&&{termbase:s},...c&&{style_variant:c},...u&&{regionalVariant:u}},lang:{source_lang_computed:n,target_lang:r},jobs:t,priority:1,timestamp:mI(t)});return await hI(p,{method:"POST",headers:{"Content-Type":"application/json"},body:_I(g)},o)},hI=async(e,t,n)=>{const r=await n.auth.getAuthTokens(),o=r?{access_token:r.access_token,refresh_token:r.refresh_token,token_url:n.auth.tokenUrl}:{},{response:a,accessToken:i}=await US(e,{...t,...o,omitCookies:n.omitCookies});return await n.auth.setAuthTokens(i,r.refresh_token,r.id_token),await vI({response:a,isHtml:!1})},fI=async({auth:e,baseUrls:t,isTermbase:n},r=void 0)=>{const o=await e.getAuthTokens(),a=r===sI.WRITE?t.write:t.translate;if(n)return t.glossary;if(!o||!o.access_token)return a.free;if(!e.getServiceLevels){const e=(e=>{try{return JSON.parse(atob(e.split(".")[1]))}catch(e){return null}})(o.access_token),t=e&&"Pro"===e.sessionType;return o.access_token&&t?a.pro:a.free}{const t=await e.getServiceLevels();switch(r){case sI.WRITE:return t.write===cI?a.pro:a.free;case sI.TRANSLATE:return t.translator===cI?a.pro:a.free;default:return a.free}}},mI=e=>{const t=e.reduce(((e,t)=>[...e,...t.sentences.map((e=>e.text))]),[]);let n=1;const r=Date.now();return t.forEach((e=>n+=(e.match(/[i]/g)||[]).length)),r-r%n+n},_I=e=>{let t=JSON.stringify(e);return t=(e.id+3)%13==0||(e.id+5)%29==0?t.replace('"method":"','"method" : "'):t.replace('"method":"','"method": "'),t},vI=async({response:e,isHtml:t})=>{let n;try{if(403===e.status)throw new rI(e.status.toString(),`Translation failed: Http status code ${e.status} forbidden request. re-authenticating makes no difference.`);if(401===e.status)throw new rI(e.status.toString(),`Translation failed: Http status code ${e.status} unauthorized request.`);n=JSON.parse(await e.text())}catch(n){throw 200===e.status?new nI("JSON_RPC: Parsing of response object failed"):e.status>=500&&t?new oI(`FPT failed: Http status code ${e.status}`):new rI(e.status.toString(),`Translation failed: Http status code ${e.status}`)}if("2.0"!==n.jsonrpc||void 0!==n.result&&200!==e.status||void 0===n.result&&void 0===n.error)throw new nI("JSON_RPC: missing field, wrong id, proper result without 200 status, or missing data");if(n.error){if(void 0===n.error.code)throw new nI('JSON_RPC: Missing field "code" in error response');throw new rI(n.error.code.toString(),n.error.message)}if(200!==e.status)throw new rI(e.status.toString(),`Http status code ${e.status}`);return n},TI=sI;async function yI({texts:e,mode:t=sI.TRANSLATE,targetLang:n}){return AI((async r=>await async function({texts:e,mode:t=sI.TRANSLATE,targetLang:n,config:r}){const o=await pI({mode:t,texts:e,config:r}),a=o.result.texts[0].chunks.map(((e,n,r)=>({kind:"default",preferred_num_beams:4,raw_en_context_after:n<r.length-1&&r.length>1?[r[n+1].sentences[0].text]:[],raw_en_context_before:n>0?[r[n-1].sentences[0].text]:[],sentences:[{...e.sentences[0],id:n}],...t===sI.WRITE&&{write_variant_requests:["main","variants"]}})));return await gI({mode:t,jobs:a,sourceLang:o.result.lang.detected,targetLang:t===sI.WRITE?o.result.lang.detected:n,config:r})}({texts:e,mode:t,targetLang:n,config:r})))}const EI=async({mode:e,texts:t,sourceLang:n="auto",textType:r="plaintext",advancedMode:o})=>AI((async a=>await pI({mode:e,texts:t,sourceLang:n,config:a,textType:r,advancedMode:o}))),SI=async({mode:e,jobs:t,sourceLang:n,targetLang:r,textType:o,formality:a,termbase:i,styleVariant:s,regionalVariant:c})=>AI((async l=>await gI({mode:e,jobs:t,sourceLang:n,targetLang:r,config:l,textType:o,formality:a,termbase:i,styleVariant:s,regionalVariant:c}))),II=async()=>AI((async e=>await(async({config:e})=>{const t=`${await fI({...e,isTermbase:!0})}&method=${dI}`,n=iI(dI,{});return await hI(t,{method:"POST",headers:{"Content-Type":"application/json"},body:_I(n)},e)})({config:e})));let bI;const AI=async e=>{try{return await e(wI())}catch(e){if(e.name===SS||e.name===IS||e.name===bS||e.name===ZS||e.name===eI||e.name===tI){if(bI)return;bI=setTimeout((async()=>{try{await VS({trigger:qt,reason:e.name})}finally{clearTimeout(bI),bI=void 0}}),5e3)}throw e}},wI=()=>({baseUrls:{translate:{free:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.42.0",pro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.42.0"},write:{free:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.42.0",pro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.42.0"},glossary:"https://api.deepl.com/termbases/jsonrpc?client=chrome-extension,1.42.0"},auth:{getAuthTokens:XE,setAuthTokens:JE,getServiceLevels:async()=>{const e=await pS();return{translator:e.translatorServiceType,write:e.writeServiceType}},tokenUrl:"https://w.deepl.com/oidc/token"},omitCookies:!0}),NI=e=>r(void 0,void 0,void 0,(function*(){const t=e.nicheIntegration===Lt||e.nicheIntegration===Dt||e.nicheIntegration===Ut||!e.nicheIntegration,n=yield dS(an.TRANSLATOR),r=yield dS(an.WRITE);if(!((!n||!r)&&t))return;const o=e.sourceTexts.reduce(((e,t)=>e+t.length),0),a=e.isWriteRequest?Iv.auth.writeServiceType:Iv.auth.translatorServiceType,i=yield uS(a);if(e.isWriteRequest){if(n&&!r&&o>i)throw new eT(i,"Char limit exceeded (Translator Pro, Write Free)");if(!r&&o>i)throw new Zv(i,"Char limit exceeded (Write Free Or Anonymous)")}else{let e;try{e=yield lS()}catch(t){e=N,console.log(t)}if(e===R&&r&&o>i)throw new tT(i,"Char limit exceeded (Free or Anon Translator, Write Pro)");if(e===R&&o>i)throw new Kv(i,"Char limit exceeded (Translator Free)");if(e===N&&o>i)throw new Qv(i,"Char limit exceeded (Translator Anon)")}})),OI=(e,t=[])=>{if(!e||0===t.length)return null;if(t.map((e=>e.id)).includes(e)){return t.find((t=>t.id===e))}return null},RI=e=>e.translations[0].beams.map((e=>e.sentences[0])).some((e=>e.glossary_highlights&&e.glossary_highlights.length>0)),LI=(e,t,n=void 0,r=void 0)=>{const o=[];let a=[],i=0;for(const s of e){const e=n?n(s):s,c=CI(e);a.length>0&&(i+c>t||r&&a.length>=r)&&(o.push(a),a=[],i=0),a.push(s),i+=c}return a.length>0&&o.push(a),o},CI=e=>(new TextEncoder).encode(e).length,PI=24576,xI=e=>DI(e),kI=e=>DI(e,$I),DI=async(e,t=void 0)=>{await fS(),await NI(e);const n=((e,t)=>Nv(e,t)===ln)(await oS(),an.TRANSLATOR),r=e.isWriteRequest?TI.WRITE:TI.TRANSLATE;if(n&&r===TI.TRANSLATE)throw new rI(eI,"User is not allowed to use the DeepL Translator, please contact your admin");const{activeTermbaseId:o,isGlossaryEnabled:a}=await qE(["activeTermbaseId","isGlossaryEnabled"]),{isLoggedIn:i,hasTermbaseService:s}=await oS(),{textLinesComponents:c,sentences:l,sourceLang:u}=await UI(e);let d,p=!1,g=!1;const h=jS(e.targetLangCode);if(Rv({isLoggedIn:i,hasTermbaseService:s})&&o&&!e.isWriteRequest&&a)try{const[e]=await ab(),t=OI(o,e);if(t)for(let e of t.termDictionaries)if(e.languagePair===`${u.substr(0,2)}>${h.langCode.substr(0,2)}`.toLowerCase()){d={id:t.id,dictionaryId:e.id},p=!0,g=t.shared;break}}catch(e){console.log({e:e,message:"fetching glossaries failed"})}let f;r===TI.WRITE?"EN"===u&&h.regionalVariant&&["EN-GB","EN-US"].includes(h.regionalVariant.toUpperCase())&&(f=h.regionalVariant):f=h.regionalVariant;const m={mode:r,sourceLang:u,targetLang:e.isWriteRequest?u:h.langCode,textType:e.textType,...e.formality&&{formality:e.formality},...d&&{termbase:d},...f&&{regionalVariant:f}},_=t??GI;let v=(await _(m,l)).result;const T=RI(v);e.autoImproveForTranslate&&r===TI.TRANSLATE&&(v=await MI(e,m,v));const y=v.translations.map(((e,t)=>`${l[t].prefix}${e.beams[0]?.sentences[0].text??""}`)),E=c.map((e=>e.map((e=>y[e]))));return{processedText:E,result:v,...p&&{glossaryTrackingInfo:{isGlossaryEnabled:!!d,isGlossaryShared:g,didGlossaryChangeTranslation:T}}}},UI=async e=>{const t=[],n=[],r=e.isWriteRequest?TI.WRITE:TI.TRANSLATE,o=await EI({texts:e.sourceTexts,mode:r});for(const e of o.result.texts){const r=[];for(const t of e.chunks)for(const e of t.sentences)n.push(e),r.push(n.length-1);t.push(r)}return{sentences:n,textLinesComponents:t,sourceLang:o.result.lang.detected}},MI=async(e,t,n)=>{const r=e.targetLangCode.substring(0,2).toUpperCase();if(n.source_lang.substring(0,2).toUpperCase()===r&&function(e){try{return e.replace(/[^\p{L}]/gu,"").length}catch(t){return e.replace(/[^a-zA-Z]/g,"").length}}(e.sourceTexts.join(""))>4&&(o=r,_.includes(o?.substr(0,2).toUpperCase()))){return(await SI({...t,mode:TI.WRITE})).result}var o;return n},GI=async(e,t)=>{const n=t.map(((e,n)=>({kind:"default",preferred_num_beams:4,raw_en_context_after:n<t.length-1?[t[n+1].text]:[],raw_en_context_before:n>0?[t[n-1].text]:[],sentences:[{...e,id:n+1}]}))),r={...e,jobs:n};return await SI(r)},$I=async(e,t)=>{const n=t.map(((e,n)=>({kind:"default",preferred_num_beams:4,raw_en_context_after:n<t.length-1?[t[n+1].text]:[],raw_en_context_before:n>0?[t[n-1].text]:[],sentences:[{...e,id:n+1}]}))),r=LI(n,PI,(e=>JSON.stringify(e))),o=await Promise.allSettled(r.map((async t=>{const n={...e,jobs:t};return await SI(n)})));if(o.some((e=>"rejected"===e.status)))throw new Error("Failed to process all jobs");const a=o.filter((e=>"fulfilled"===e.status)).map((e=>e.value)),i=a[0];if(a.length>1)for(let e=1;e<a.length;++e){const t=a[e];i.result.translations.push(...t.result.translations)}return i};async function VI(e){const t=await qE(["selectedTargetLanguage"]);chrome.tabs.sendMessage(e,{action:"dlTranslateInline",targetLang:t.selectedTargetLanguage})}async function FI(e){const t=await qE(["targetLanguageUserInput"]);chrome.tabs.sendMessage(e,{action:"dlTranslateInput",targetLang:t.targetLanguageUserInput})}async function jI(e){const t=await qE(["selectedTargetLanguage"]);chrome.tabs.sendMessage(e,{action:"dlImproveInline",targetLang:t.selectedTargetLanguage})}async function WI(e){const t=await qE(["selectedTargetLanguage"]);chrome.tabs.sendMessage(e,{action:"dlImproveInput",targetLang:t.selectedTargetLanguage})}async function qI(e){await HE();const t=await qE(["selectedTargetLanguage","session","installationId","languagePreferenceForReading"]),n=e.payload.nicheIntegration||Lt,r={sourceLang:e.payload.sourceLang||"auto",targetLangCode:t.selectedTargetLanguage,sessionId:t.session.id,id:d(),sourceTexts:e.payload.requests.map((e=>e.text)),weights:t.languagePreferenceForReading,splitting:"newlines",nicheIntegration:n,isWriteRequest:e.payload.isWriteRequest};let o,a,i;try{const e=await xI(r);o=e.result,a=e.processedText,i=e.glossaryTrackingInfo}catch(r){try{e.payload.isWriteRequest?nE(_n,{lang:e.payload.websiteLanguage,sourceLength:e.payload.requests.reduce(((e,t)=>e+t.text.length),0),targetLength:0,nicheIntegration:n,error:r.name,trigger:e.payload.trigger}):iy({errorCode:r.name,errorMessage:r.message,domainName:e.payload.domainName,targetLang:t.selectedTargetLanguage,websiteLanguage:e.payload.websiteLanguage,trigger:e.payload.trigger,characterCount:e.payload.requests.reduce(((e,t)=>e+t.text.length),0)})}catch(e){console.log(e)}throw r}Mb(o?.source_lang,t?.selectedTargetLanguage);let s=e.payload.trigger;e.payload.platformBehavior===Ut?(sA(),s=w):e.payload.platformBehavior&&e.payload.platformBehavior!==Lt&&(s=w);try{if(o.detectedLanguages){for(const e in o.detectedLanguages)(t.languagePreferenceForReading[e]||0===t.languagePreferenceForReading[e])&&(t.languagePreferenceForReading[e]=zS(t.languagePreferenceForReading[e],o.detectedLanguages[e]));chrome.storage.sync.set({languagePreferenceForReading:t.languagePreferenceForReading})}}catch(e){console.error(e)}try{e.payload.isWriteRequest?nE(un,{lang:e.payload.sourceLang,sourceLength:e.payload.requests.reduce(((e,t)=>e+t.text.length),0),targetLength:a.flat().reduce(((e,t)=>e+t.length),0),nicheIntegration:n,trigger:e.payload.trigger}):oy({installationId:t.installationId,trigger:s||y,websiteLanguage:o.source_lang,targetLanguage:t.selectedTargetLanguage,characterCount:e.payload.requests.reduce(((e,t)=>e+t.text.length),0),domainName:e.payload.domainName,nicheIntegration:n,glossaryTrackingInfo:i})}catch(e){console.error(e)}return a.map((e=>({text:e.join(""),detected_source_language:o.source_lang})))}async function BI(e){await HE();const t=await qE(["targetLanguageUserInput","session","installationId","languagePreferenceForWriting"]),n=e.payload.requests,r=e.payload.targetLang||t.targetLanguageUserInput,o=e.payload.platformBehavior||Lt,a={sourceLang:"auto",targetLangCode:r,sessionId:t.session.id,id:d(),sourceTexts:n.map((e=>e.text))||[],weights:t.languagePreferenceForWriting,splitting:"paragraphs",textType:"richtext",nicheIntegration:o,...e.payload.isHtml&&{isHtml:e.payload.isHtml},...e.payload.formality&&{formality:e.payload.formality},...e.payload.isWriteRequest&&{isWriteRequest:e.payload.isWriteRequest}};let i,s,c,l=I,u=rr;e.payload.platformBehavior&&e.payload.platformBehavior!==Lt&&(l=w,u=ar);try{const e=await xI(a);i=e.result,s=e.processedText,c=e.glossaryTrackingInfo}catch(t){try{e.payload.isWriteRequest?nE(_n,{lang:e.payload.source_lang,sourceLength:n.reduce(((e,t)=>e+t.text.length),0),targetLength:0,nicheIntegration:o,error:t.name,trigger:u}):iy({errorCode:t.name,errorMessage:t.message,domainName:e.payload.domainName,targetLang:r,websiteLanguage:e.payload.websiteLanguage,nicheIntegration:o,trigger:l,characterCount:n.reduce(((e,t)=>e+t.text.length),0)})}catch(e){console.log(e)}throw t}Mb(i?.source_lang,r),e.payload.platformBehavior===Dt?aA():e.payload.platformBehavior===Ut&&sA();try{if(i.detectedLanguages){for(const e in i.detectedLanguages)(t.languagePreferenceForWriting[e]||0===t.languagePreferenceForWriting[e])&&(t.languagePreferenceForWriting[e]=zS(t.languagePreferenceForWriting[e],i.detectedLanguages[e]));chrome.storage.sync.set({languagePreferenceForWriting:t.languagePreferenceForWriting})}}catch(e){console.error(e)}if(!0!==e.payload.skipDapReporting)try{e.payload.isWriteRequest?nE(un,{lang:e.payload.source_lang,sourceLength:n.reduce(((e,t)=>e+t.text.length),0),targetLength:s.flat().reduce(((e,t)=>e+t.length),0),nicheIntegration:o,trigger:u}):oy({installationId:t.installationId,trigger:l,websiteLanguage:i.sourceLang,targetLanguage:r,characterCount:n.reduce(((e,t)=>e+t.text.length),0),domainName:e.payload.domainName,nicheIntegration:o,glossaryTrackingInfo:c})}catch(e){console.error(e)}return[{detected_source_language:i.source_lang,text:s.flat().join(""),texts:s.map((e=>e.join("")))}]}async function HI(e){await fS(),await HE();const t=await qE(["session","installationId","languagePreferenceForWriting","zendeskActiveTermbase"]),n=[e.payload.content],r=e.payload.targetLang,o=Pt,a=TI.TRANSLATE,i=e.payload.formality;let s,c;const l=[],u=[];let d;try{const e=await EI({texts:n,mode:a});let o;if(c=e.result.lang.detected,t.zendeskActiveTermbase?.termDictionaries)for(let e of t.zendeskActiveTermbase.termDictionaries)if(e.languagePair===`${c.substring(0,2)}>${r.substring(0,2)}`.toLowerCase()){o={id:t.zendeskActiveTermbase.id,dictionaryId:e.id},d=!0;break}for(const t of e.result.texts){const e=[];for(const n of t.chunks)for(const t of n.sentences)u.push(t),e.push(u.length-1);l.push(e)}const p=u.map(((e,t)=>({kind:"default",preferred_num_beams:4,raw_en_context_after:t<u.length-1?[u[t+1].text]:[],raw_en_context_before:t>0?[u[t-1].text]:[],sentences:[{...e,id:t+1}]})));s=await SI({mode:a,jobs:p,sourceLang:c,targetLang:r.substr(0,2),textType:"richtext",...i&&{formality:i},...o&&{termbase:o}})}catch(t){try{iy({errorCode:t.name,errorMessage:t.message,domainName:e.payload.domainName,targetLang:r,websiteLanguage:e.payload.websiteLanguage,trigger:I,characterCount:n.reduce(((e,t)=>e+t.text.length),0)})}catch(e){console.log(e)}throw t}const p=s.result.translations.map(((e,t)=>`${u[t].prefix}${e.beams[0].sentences[0].text}`)),g=l.map((e=>e.map((e=>p[e]))));if(Mb(c,r),Ub(),!0!==e.payload.skipDapReporting)try{oy({installationId:t.installationId,trigger:w,websiteLanguage:c,targetLanguage:r,characterCount:n.reduce(((e,t)=>e+t.length),0),domainName:e.payload.domainName,nicheIntegration:o,isGlossaryEnabled:d})}catch(e){console.error(e)}return[{detected_source_language:c,text:g[0],texts:g}]}async function JI(e){await HE();const t=await qE(["targetLanguage","session","installationId"]),n=e.payload.requests,r=e.payload.sourceLang,o=e.payload.targetLang||t.targetLanguage,a=Dt,i={sourceLang:r||"auto",targetLangCode:o,sessionId:t.session.id,id:d(),sourceTexts:n.map((e=>e.text))||[],splitting:"newlines"};let s,c,l;try{const e=await xI(i);s=e.result,c=e.processedText,l=e.glossaryTrackingInfo}catch(t){try{iy({errorCode:t.name,errorMessage:t.message,domainName:e.payload.domainName,targetLang:o,trigger:I,characterCount:n.reduce(((e,t)=>e+t.text.length),0)})}catch(e){console.log(e)}throw t}Mb(s?.source_lang,o),aA();try{oy({installationId:t.installationId,trigger:w,websiteLanguage:s.source_lang,targetLanguage:o,characterCount:n.reduce(((e,t)=>e+t.text.length),0),domainName:e.payload.domainName,nicheIntegration:a,glossaryTrackingInfo:l})}catch(e){console.error(e)}return[{detected_source_language:s.source_lang,text:c.flat().join(""),texts:c.map((e=>e.join("")))}]}async function YI(e){await fS(),await HE();const t=await qE(["selectedTargetLanguage","session","installationId"]),n=e.payload.message,r=n.replace(/\n/g,"<br>"),o={sourceLang:"auto",targetLangCode:t.selectedTargetLanguage,sessionId:t.session.id,id:d(),textType:"richtext",sourceTexts:[r]};let a;try{a=(await BS(o)).texts[0]}catch(r){throw xA((()=>by({errorCode:r.name,errorMessage:r.message,domainName:e.payload.domainName,targetLang:t.selectedTargetLanguage,messageLang:e.payload.messageLang,messageLength:n.length}))),r}Mb(a?.source_lang,t?.selectedTargetLanguage),xA((()=>oy({installationId:t.installationId,trigger:e.payload.trigger||w,websiteLanguage:e.payload.messageLang,targetLanguage:t.selectedTargetLanguage,characterCount:n.length,domainName:e.payload.domainName,nicheIntegration:kt})));return a.replace(/<br\s*\/?>/gi,"\n")}async function zI(e){await HE();const t=await qE(["selectedTargetLanguage","session","installationId"]),n=e.payload.message,r={sourceLang:"auto",targetLangCode:t.selectedTargetLanguage,sessionId:t.session.id,id:d(),sourceTexts:[n],splitting:"paragraphs"};let o,a,i;try{const e=await xI(r);o=e.result,a=e.processedText,i=e.glossaryTrackingInfo}catch(r){throw xA((()=>Ay({errorCode:r.name,errorMessage:r.message,domainName:e.payload.domainName,targetLang:t.selectedTargetLanguage,messageLang:e.payload.messageLang,messageLength:n.length}))),r}return Mb(o?.source_lang,t?.selectedTargetLanguage),xA((()=>oy({installationId:t.installationId,trigger:e.payload.trigger||w,websiteLanguage:e.payload.messageLang,targetLanguage:t.selectedTargetLanguage,characterCount:n.length,domainName:e.payload.domainName,nicheIntegration:Gt,glossaryTrackingInfo:i}))),a.map((e=>({text:e.join(""),detected_source_language:o.source_lang})))}async function XI(e){await HE();const t=await qE(["selectedTargetLanguage","session","installationId"]),n=e.payload.message,r={sourceLang:"auto",targetLangCode:t.selectedTargetLanguage,sessionId:t.session.id,id:d(),sourceTexts:[n],splitting:"paragraphs"};let o,a,i;try{const e=await xI(r);o=e.result,a=e.processedText,i=e.glossaryTrackingInfo}catch(r){throw xA((()=>iy({errorCode:r.name,errorMessage:r.message,domainName:e.payload.domainName,targetLang:t.selectedTargetLanguage,websiteLanguage:e.payload.messageLang,characterCount:n.length,trigger:e.payload.trigger,nicheIntegration:Mt}))),r}return Mb(o?.source_lang,t?.selectedTargetLanguage),xA((()=>oy({installationId:t.installationId,trigger:e.payload.trigger||w,websiteLanguage:e.payload.messageLang,targetLanguage:t.selectedTargetLanguage,characterCount:n.length,domainName:e.payload.domainName,nicheIntegration:Mt,glossaryTrackingInfo:i}))),a.map((e=>({text:e.join(""),detected_source_language:o.source_lang})))}async function KI(e){await HE();const t=await qE(["selectedTargetLanguage","session","installationId"]),n=e.payload.message,r={sourceLang:"auto",targetLangCode:t.selectedTargetLanguage,sessionId:t.session.id,id:d(),sourceTexts:[n],splitting:"paragraphs"};let o,a,i;try{const e=await xI(r);o=e.result,a=e.processedText,i=e.glossaryTrackingInfo}catch(r){throw xA((()=>Iy({errorCode:r.name,errorMessage:r.message,domainName:e.payload.domainName,targetLang:t.selectedTargetLanguage,messageLang:e.payload.messageLang,messageLength:n.length,numberOfLanguages:1,numberOfMessages:1,translator:on}))),r}return Mb(o?.sourceLang,t?.selectedTargetLanguage),xA((()=>Sy({messageLang:e.payload.messageLang,targetLang:t.selectedTargetLanguage,messageLength:n.length,numberOfLanguages:1,numberOfMessages:1,translator:on}))),xA((()=>oy({installationId:t.installationId,trigger:e.payload.trigger||w,websiteLanguage:e.payload.messageLang,targetLanguage:t.selectedTargetLanguage,characterCount:n.length,domainName:e.payload.domainName,nicheIntegration:xt,glossaryTrackingInfo:i}))),a.map((e=>({text:e.join(""),detected_source_language:o.source_lang})))}async function QI(e){await HE();const t=await qE(["selectedTargetLanguage","session","installationId"]),n=e.payload.messages,r={sourceLang:"auto",targetLangCode:t.selectedTargetLanguage,sessionId:t.session.id,id:d(),sourceTexts:n,splitting:"paragraphs"};let o;try{o=await BS(r)}catch(r){try{Iy({errorCode:r.name,errorMessage:r.message,domainName:e.payload.domainName,targetLang:t.selectedTargetLanguage,messageLang:e.payload.messageLang,messageLength:n.reduce(((e,t)=>e+t.length),0),numberOfLanguages:e.payload.detectedLanguages?.length,numberOfMessages:n.length,translator:rn})}catch(e){console.log(e)}throw r}Mb(o?.sourceLang,t?.selectedTargetLanguage);try{Sy({messageLang:e.payload.messageLang,targetLang:t.selectedTargetLanguage,messageLength:n.reduce(((e,t)=>e+t.length),0),numberOfLanguages:e.payload.detectedLanguages?.length,numberOfMessages:n.length,translator:rn}),oy({installationId:t.installationId,trigger:e.payload.trigger||w,websiteLanguage:e.payload.messageLang,targetLanguage:t.selectedTargetLanguage,characterCount:n.reduce(((e,t)=>e+t.length),0),domainName:e.payload.domainName,nicheIntegration:xt})}catch(e){console.error(e)}return[{detected_source_language:o.sourceLang,texts:o.texts}]}async function ZI(e){await fS();const{texts:t,mode:n}=e.payload;return await EI({texts:t,mode:n})}async function eb(e){await HE();const t=await qE(["session","installationId","activeTermbaseId","isGlossaryEnabled",Iv.auth.isLoggedIn,"hasTermbaseService"]),{mode:n,sentences:r,sourceLang:o,targetLang:a,domain:i}=e.payload,s=n===TI.WRITE;let c;try{c=await bA({isLoggedIn:t.isLoggedIn,activeTermbaseId:t.activeTermbaseId,isGlossaryEnabled:t.isGlossaryEnabled,hasTermbaseService:t.hasTermbaseService,sourceLang:o,targetLang:a,mode:n})}catch(e){console.error(e)}let l=4,u=null,d=v.includes(o);s&&(d&&(l=1),u=o),await chrome.storage.sync.set({gdocsWriteLang:u});const p=r.map(((e,t)=>({kind:"default",preferred_num_beams:l,raw_en_context_after:t<r.length-1?[r[t+1].text]:[],raw_en_context_before:t>0?[r[t-1].text]:[],sentences:[{...e,id:t+1}],...s&&!d&&{write_variant_requests:["main"]}}))),g=new Date,h=jS(a),f=await SI({mode:n,jobs:p,sourceLang:o,targetLang:h.langCode,regionalVariant:h.regionalVariant,...c&&{termbase:c}});try{n===TI.TRANSLATE&&oy({installationId:t.installationId,trigger:e.payload.trigger||w,websiteLanguage:e.payload.sourceLang,targetLanguage:h.langCode,characterCount:r.map((e=>e.text)).reduce(((e,t)=>e+t.length),0),translationPerformance:{isFirstTime:!1,processingTimeInMs:new Date-g},domainName:i,nicheIntegration:Ct})}catch(e){console.error(e)}return f}async function tb(e){const{mode:t,sourceLang:n,targetLang:r,sentence:o,contextBefore:a,contextAfter:i}=e.payload,s=[{kind:"default",preferred_num_beams:4,raw_en_context_after:i?[i]:[],raw_en_context_before:a?[a]:[],sentences:[{...o,partial_translation:"",id:0}],...t===TI.WRITE&&{write_variant_requests:["main","variants"]}}];return await SI({mode:t,jobs:s,sourceLang:n,targetLang:r})}async function nb(e){const{mode:t,sourceLang:n,targetLang:r,sentence:o,contextBefore:a,contextAfter:i,partialTranslation:s}=e.payload,c=[{kind:"alternatives_at_position",raw_en_context_after:i?[i]:[],raw_en_context_before:a?[a]:[],sentences:[{...o,partial_translation:s,id:0}],...t===TI.WRITE&&{write_variant_requests:["main"]}}];return await SI({mode:t,jobs:c,sourceLang:n,targetLang:r})}async function rb(e){const{mode:t,sourceLang:n,targetLang:r,sentence:o,contextBefore:a,contextAfter:i,partialTranslation:s}=e.payload,c=t===TI.WRITE,l=v.includes(n);let u=4;c&&l&&(u=1);const d=[{kind:"default",raw_en_context_after:i?[i]:[],raw_en_context_before:a?[a]:[],preferred_num_beams:u,sentences:[{...o,partial_translation:s,id:0}],...t===TI.WRITE&&!l&&{write_variant_requests:["main"]}}];return await SI({mode:t,jobs:d,sourceLang:n,targetLang:r})}async function ob(e){await fS(),await HE();const t=await qE(["session","installationId","zendeskActiveTermbase"]),n=TI.TRANSLATE,r=Pt,{targetLang:o}=e.payload,a=[e.payload.text],i=a.map((e=>e.replaceAll("\n","<br>"))),s=[],c=[];let l,u,d,p;try{const e=await EI({texts:i,mode:n,textType:"richtext"});if(p=e.result.lang.detected,t.zendeskActiveTermbase?.termDictionaries)for(let e of t.zendeskActiveTermbase.termDictionaries)if(e.languagePair===`${p.substring(0,2)}>${o.substring(0,2)}`.toLowerCase()){l={id:t.zendeskActiveTermbase.id,dictionaryId:e.id},u=!0;break}for(const t of e.result.texts){const e=[];for(const n of t.chunks)for(const t of n.sentences)c.push(t),e.push(c.length-1);s.push(e)}const r=c.map(((e,t)=>({kind:"default",preferred_num_beams:4,raw_en_context_after:t<c.length-1?[c[t+1].text]:[],raw_en_context_before:t>0?[c[t-1].text]:[],sentences:[{...e,id:t+1}]})));d=await SI({mode:n,jobs:r,sourceLang:p,targetLang:o.substr(0,2),textType:"richtext",...l&&{termbase:l}})}catch(t){try{iy({errorCode:t.name,errorMessage:t.message,domainName:e.payload.domainName,targetLang:o,websiteLanguage:e.payload.websiteLanguage,trigger:y,characterCount:a.reduce(((e,t)=>e+t.text.length),0)})}catch(e){console.log(e)}throw t}Mb(p,o),Ub();const g=d.result.translations.map(((e,t)=>`${c[t].prefix}${e.beams[0].sentences[0].text}`)),h=s.map((e=>e.map((e=>g[e])))),f=h[0].join("");try{oy({installationId:t.installationId,trigger:w,websiteLanguage:p,targetLanguage:o,characterCount:a.reduce(((e,t)=>e+t.length),0),domainName:e.payload.domainName,nicheIntegration:r,isGlossaryEnabled:u})}catch(e){console.error(e)}return f}async function ab(){let e,t,n="";try{e=await Rb()}catch(e){t=e.message}if(!e?.isLoggedIn||t)return[[],t];try{n=(await II()).result||[]}catch(e){t=e.message}return[n,t]}async function ib(e){await xA((()=>vy({language:e.payload.language,domainName:e.payload.domainName})))}async function sb(e){await xA((()=>cy()))}async function cb(e){await xA((()=>ly({domainName:e.domainName,pathName:e.pathName,extensionOpenedFrom:pT(e.extensionContext)})))}async function lb(e){await xA((()=>uy({logoClickedFrom:gT(e.extensionContext)})))}async function ub(){await xA((()=>hy()))}async function db(){await xA((()=>fy()))}async function pb(e){await xA((()=>my({uiFunction:e.uiFunction,uiLocation:e.uiLocation,nicheIntegration:e.nicheIntegration||Lt})))}async function gb(e){await xA((()=>_y({settingType:e.settingType,newValue:e.newValue,uiFunction:e.uiFunction,uiLocation:e.uiLocation,domainName:e.domainName})))}async function hb(e){await xA((()=>Ty({translationType:e.translationType,domainName:e.domainName})))}async function fb(e){await xA((()=>yy({newPosition:e.newPosition})))}async function mb(e){await xA((()=>Ey(e)))}async function _b(e){await xA((()=>wy(e)))}async function vb(e){await xA((()=>Ry(e)))}async function Tb(e){await xA((()=>Ny(e)))}async function yb(e){await xA((()=>Ly(e)))}async function Eb(e){await xA((()=>Oy(e)))}async function Sb(e){await xA((()=>ky(e)))}async function Ib(e){await xA((()=>Cy(e)))}async function bb(e){await xA((()=>Py(e)))}async function Ab(e){await xA((()=>My(e)))}async function wb(e=!1){const t=await mS(e);return chrome.runtime.sendMessage({action:"dlExperimentsUpdated",payload:{experiments:[...t]}}),t}async function Nb(){$S()}async function Ob(){VS({trigger:Wt})}async function Rb(){const e=await oS();return{isLoggedIn:e.isLoggedIn,translatorServiceType:e.translatorServiceType,writeServiceType:e.writeServiceType,hasTermbaseService:e.hasTermbaseService}}async function Lb(e){switch(e.type){case V:{const e=await chrome.storage.sync.get(["notificationsViewed"]);if(e.notificationsViewed?.hintKeyboardShortcut)return;await chrome.storage.sync.set({notificationsViewed:{...e.notificationsViewed,hintKeyboardShortcut:!0}});break}case F:{const t=await chrome.storage.sync.get(["notificationsViewed"]),n=`showAdsFor${e.options.matchedWord}`;if(t.notificationsViewed?.[n])return;xA((()=>yE({matchedWord:e.options.matchedWord}))),await chrome.storage.sync.set({notificationsViewed:{...t.notificationsViewed,[n]:!0}});break}}xA((()=>dy({notificationType:e.type})));const t=await chrome.tabs.query({active:!0,currentWindow:!0});chrome.tabs.sendMessage(t[0].id,{action:"dlShowNotification",payload:e})}async function Cb(){return await chrome.commands.getAll()}async function Pb(e){const t=await Cb();try{py({shortcutType:e.shortcutType,location:e.location,shortcut:t.filter((t=>t.name===e.shortcutType))[0].shortcut,nicheIntegration:e.nicheIntegration||Lt})}catch(e){console.error(e)}}async function xb(e){gy({uiAction:e.uiAction,nicheIntegration:e.nicheIntegration||Lt})}function kb(e){chrome.tabs.query({active:!0,currentWindow:!0},(function(t){chrome.tabs.sendMessage(t[0].id,{action:"dlTranslateSelectionRightClick",payload:e})}))}async function Db(e){await xA((()=>xy(e)))}async function Ub(){const e=(await chrome.storage.sync.get(["zendeskSuccessfulTranslations"])).zendeskSuccessfulTranslations+1;await chrome.storage.sync.set({zendeskSuccessfulTranslations:e})}async function Mb(e,t){const n=await chrome.storage.sync.get(["isReviewPopupShown","successfulTranslations","hasUserSeenProCustomerSegmentationSurvey","hasUserSeenArabicSurvey","successfulArabicTranslations"]),r=await Rb();Ov(r,an.TRANSLATOR);const o=n.successfulTranslations+1;n.hasUserSeenProCustomerSegmentationSurvey;let a=n.isReviewPopupShown,i=n.hasUserSeenArabicSurvey,s=n.successfulArabicTranslations;if("AR"!==e&&"AR"!==t||(s+=1),!i&&"ar"===chrome.i18n.getUILanguage()&&o>=10){const e=await chrome.tabs.query({active:!0,currentWindow:!0});return chrome.tabs.sendMessage(e[0].id,{action:"dlShowArabicSurveyPopup"}),void await chrome.storage.sync.set({hasUserSeenArabicSurvey:!0,successfulArabicTranslations:s,successfulTranslations:o})}if(!i&&s>=10){const e=await chrome.tabs.query({active:!0,currentWindow:!0});return chrome.tabs.sendMessage(e[0].id,{action:"dlShowArabicSurveyPopup"}),void await chrome.storage.sync.set({hasUserSeenArabicSurvey:!0,successfulArabicTranslations:s,successfulTranslations:o})}if(!a&&o>=5){const e=await chrome.tabs.query({active:!0,currentWindow:!0});chrome.tabs.sendMessage(e[0].id,{action:"dlShowAskForAReviewPopup"}),a=!0}await chrome.storage.sync.set({isReviewPopupShown:a,successfulArabicTranslations:s,successfulTranslations:o})}async function Gb(e,t){let n=(e=>{let t=f.find((t=>t.langCode.toUpperCase()===e.toUpperCase()));return t||(t=f.find((t=>t.langCode.substring(0,2).toUpperCase()===e.substring(0,2).toUpperCase())),t)})(e.lang);if(xr())!function(e,t,n){const r=new SpeechSynthesisUtterance(e);r.lang=t,r.onend=function(){n()},speechSynthesis.speak(r)}(e.text,n.langCodeForSpeech,(()=>{chrome.tabs.sendMessage(t,{action:"dlVoiceOverStopped"})}));else{const r={lang:n.langCodeForSpeech,onEvent:function(e){"end"===e.type&&chrome.tabs.sendMessage(t,{action:"dlVoiceOverStopped"}),"error"==e.type&&chrome.tabs.sendMessage(t,{action:"dlVoiceOverErrorOccurred"})}};(function(){var e;const t=(null===(e=null===navigator||void 0===navigator?void 0:navigator.userAgentData)||void 0===e?void 0:e.platform)||(null===navigator||void 0===navigator?void 0:navigator.platform)||void 0;return t&&-1!==(null==t?void 0:t.toUpperCase().indexOf("MAC"))})()&&(r.rate=.9,n.voice&&At===chrome.runtime.id&&(r.voiceName=n.voice)),chrome.tts.speak(e.text,r)}}async function $b(){let e;return e=xr()?await new Promise(((e,t)=>{if("speechSynthesis"in window){const t=speechSynthesis.getVoices();t.length>0?e(t):speechSynthesis.onvoiceschanged=()=>{const t=speechSynthesis.getVoices();e(t)}}else t(new Error("SpeechSynthesis not supported"))})):await chrome.tts.getVoices(),e.map((e=>e.lang.substring(0,2).toUpperCase()))}async function Vb(){if(!xr())return chrome.tts.stop();speechSynthesis.cancel()}async function Fb(e){await xA((()=>Dy(e)))}async function jb(e){await xA((()=>$y(e)))}async function Wb(e){await xA((()=>Uy(e)))}async function qb(e){await xA((()=>Vy(e)))}async function Bb(e){return await JS(e)}async function Hb(e){await xA((()=>Fy(e)))}async function Jb(e){await xA((()=>jy()))}async function Yb(e){await xA((()=>Wy()))}async function zb({eventType:e,zendeskMetaData:t}){await xA((()=>By(e,t)))}async function Xb(e){await xA((()=>qy(e)))}async function Kb(e){await xA((()=>zy(e)))}async function Qb(e){await xA((()=>Xy(e)))}async function Zb(e){await xA((()=>Qy(e)))}async function eA(e){await xA((()=>Zy(e)))}async function tA({eventType:e,deeplWriteMetaData:t}){await xA((()=>nE(e,t)))}async function nA(e){let t=rr;e.payload.nicheIntegration&&e.payload.nicheIntegration!==Lt&&(t=ar);try{await HE();const n=await qE(["selectedTargetLanguage","session"]),r=e.payload.requests,o={sourceLang:e.payload?.sourceLang?e.payload.sourceLang:"auto",targetLangCode:n.selectedTargetLanguage,sessionId:n.session.id,id:d(),sourceTexts:r.map((e=>e.text))||[],isWriteRequest:!0,...e.payload.isHtml&&{isHtml:!0}},a=await xI(o),i=a.result,s=a.processedText;if(!e.payload.skipDapReporting)try{nE(un,{lang:i.source_lang,sourceLength:e.payload.requests.reduce(((e,t)=>e+t.text.length),0),targetLength:s.flat().reduce(((e,t)=>e+t.length),0),nicheIntegration:e.payload.nicheIntegration||Lt,trigger:t})}catch(e){console.error(e)}return[{detected_source_language:i.source_lang,text:s.flat().join(""),texts:s.map((e=>e.join("")))}]}catch(n){try{nE(_n,{lang:e.payload.sourceLang,sourceLength:e.payload.requests.reduce(((e,t)=>e+t.text.length),0),targetLength:void 0,nicheIntegration:e.payload.nicheIntegration||Lt,error:n.name,trigger:t})}catch(e){console.error(e)}throw n}}async function rA({eventType:e,acceptOrRevertMetadata:t}){await xA((()=>iE(e,t)))}async function oA(e){await xA((()=>sE(e)))}async function aA(){const e=await chrome.storage.sync.get(["wasGmailFeedbackPopupShown","successfulTranslationsGmail"]),t=e.successfulTranslationsGmail+1;let n=e.wasGmailFeedbackPopupShown;if(!n&&t>=10){const e=await chrome.tabs.query({active:!0,currentWindow:!0});chrome.tabs.sendMessage(e[0].id,{action:"dlShowGmailFeedbackPopup"}),n=!0}await chrome.storage.sync.set({wasGmailFeedbackPopupShown:n,successfulTranslationsGmail:t})}async function iA(e){await xA((()=>cE(e)))}async function sA(){const e=await chrome.storage.sync.get(["wasGSlidesFeedbackPopupShown","successfulTranslationsGSlides"]),t=e.successfulTranslationsGSlides+1;let n=e.wasGSlidesFeedbackPopupShown;if(!n&&t>=10){const e=await chrome.tabs.query({active:!0,currentWindow:!0});chrome.tabs.sendMessage(e[0].id,{action:"dlShowSlidesFeedbackPopup"}),n=!0}await chrome.storage.sync.set({wasGSlidesFeedbackPopupShown:n,successfulTranslationsGSlides:t})}async function cA({eventType:e,alternativesMetaData:t}){await xA((()=>pE(e,t)))}async function lA(e=!1,t=!0){let n;try{n=await MS(e,t)}catch(e){throw e.name===bS&&VS({trigger:qt,reason:e.name,showAlert:!0}),e}return n}async function uA(){let e;return e=await XS(),e}async function dA(){return await uS()}function pA(e){xA((()=>lE(e)))}function gA(e){xA((()=>uE(e)))}function hA(e){return xA((()=>Hy(e)))}function fA(e){return xA((()=>gE(!0,e)))}function mA(e){return xA((()=>gE(!1,e)))}function _A(e,t){xA((()=>dE(e,t)))}async function vA({text:e}){return await yI({texts:[e],targetLang:"EN",mode:TI.WRITE})}function TA(e){return hE(e)}function yA(){fE()}function EA(e){mE(e)}async function SA(e){await fS(),await HE();const t=e.payload.texts,n=e.payload.mode?e.payload.mode:TI.TRANSLATE;let r;const o=[],a=[],i=await EI({texts:t,mode:n});r=i.result.lang.detected;for(const e of i.result.texts){const t=[];for(const n of e.chunks)for(const e of n.sentences)a.push(e),t.push(a.length-1);o.push(t)}return{detected_source_language:r,sentences:a,textLinesComponents:o}}async function IA(e){await fS(),await HE();const t=await qE(["activeTermbaseId","targetLanguageUserInput","session","installationId","languagePreferenceForWriting",Iv.auth.isLoggedIn,"isGlossaryEnabled","hasTermbaseService"]),n=e.payload.texts,r=e.payload.mode?e.payload.mode:TI.TRANSLATE,o=e.payload.targetLang,a=e.payload.writeLang,i=jS(o);let s;const c=[],l=[];let u,d,p=!1,g=!1,h=!1;try{const h=await EI({texts:n,mode:r,advancedMode:!!e.payload.style});if(s=h.result.lang.detected,Rv({isLoggedIn:t.isLoggedIn,hasTermbaseService:t.hasTermbaseService})&&t.activeTermbaseId&&r!==TI.WRITE&&t.isGlossaryEnabled)try{const[e]=await ab(),n=OI(t.activeTermbaseId,e);if(n)for(let e of n.termDictionaries)if(e.languagePair===`${s.substring(0,2)}>${i.langCode.substring(0,2)}`.toLowerCase()){d={id:n.id,dictionaryId:e.id},p=!0,g=n.shared;break}}catch(e){console.log({e:e,message:"fetching glossaries failed"})}for(const e of h.result.texts){const t=[];for(const n of e.chunks)for(const e of n.sentences)l.push(e),t.push(l.length-1);c.push(t)}const f=l.map(((t,n)=>({kind:"default",preferred_num_beams:6,raw_en_context_after:n<l.length-1?[l[n+1].text]:[],raw_en_context_before:n>0?[l[n-1].text]:[],sentences:[{...t,id:n+1}],...e.payload.style&&{style_variant:e.payload.style,write_variant_requests:["main","variants"]},...e.payload.formality&&{formality:e.payload.formality}}))),m=i.regionalVariant&&!a;u=await SI({mode:r,jobs:f,sourceLang:a&&r===TI.WRITE?a.substr(0,2):s,targetLang:a&&r===TI.WRITE?a.substr(0,2):o.substr(0,2),textType:"plaintext",styleVariant:e.payload.style,...d&&{termbase:d},...m&&{regionalVariant:i.regionalVariant}})}catch(t){throw r===TI.WRITE?nE(_n,{lang:s,sourceLength:n.reduce(((e,t)=>e+t.length),0),targetLength:0,nicheIntegration:Lt,error:t.name,style:e.payload.style,trigger:or}):iy({errorCode:t.name,errorMessage:t.message,domainName:e.payload.domainName,targetLang:o,websiteLanguage:s,trigger:b,characterCount:n.reduce(((e,t)=>e+t.length),0)}),t}p&&(h=RI(u.result)),Mb(s,o);const f=u.result.translations,m=u.result.translations.map(((e,t)=>`${l[t].prefix}${e.beams[0].sentences[0].text}`)),_=function(e,t){let n=e[0].beams.length;e.forEach((e=>{e.beams.length<n&&(n=e.beams.length)}));const r=[];for(let o=0;o<n;o++){let n=[];for(let r=0;r<e.length;r++){const a=`${t[r].prefix}`;n.push(`${a}${e[r].beams[o].sentences[0].text}`)}r.push(n)}return r}(f,l),v=c.map((e=>e.map((e=>m[e])))),T=_.map((e=>c.map((t=>t.map((t=>e[t])))))),y=function(e,t){let n=e[0].beams.length;e.forEach((e=>{e.beams.length<n&&(n=e.beams.length)}));const r=[];for(let o=0;o<n;o++){let n="";for(let r=0;r<e.length;r++){n=`${n}${`${t[r].prefix}`}${e[r].beams[o].sentences[0].text}`}r.push(n)}return r}(f,l),E=T.map((e=>e.map((e=>e.join("")))));try{r===TI.WRITE?(nE(un,{lang:s,sourceLength:n.reduce(((e,t)=>e+t.length),0),targetLength:v.flat().reduce(((e,t)=>e+t.length),0),nicheIntegration:Lt,style:e.payload.style,trigger:or}),nE(mn,{lang:s,sourceLength:n.reduce(((e,t)=>e+t.length),0),targetLength:v.flat().reduce(((e,t)=>e+t.length),0),nicheIntegration:Lt,style:e.payload.style,trigger:or})):oy({installationId:t.installationId,trigger:b,websiteLanguage:s,targetLanguage:o,characterCount:n.reduce(((e,t)=>e+t.length),0),domainName:e.payload.domainName,nicheIntegration:Lt,...p&&{glossaryTrackingInfo:{isGlossaryEnabled:!!d,isGlossaryShared:g,didGlossaryChangeTranslation:h}}})}catch(e){console.error(e)}return{detected_source_language:s,processedText:v[0].join(""),textLinesComponents:c,alternatives:y,alternativeComponents:E}}const bA=async e=>{if(Rv(e)&&e.activeTermbaseId&&e.isGlossaryEnabled&&e.mode!==TI.WRITE){const[t]=await ab(),n=OI(e.activeTermbaseId,t);if(n)for(let t of n.termDictionaries)if(t.languagePair===`${e.sourceLang.substr(0,2)}>${e.targetLang.substr(0,2)}`.toLowerCase())return{id:n.id,dictionaryId:t.id}}};function AA(){_E()}function wA(e){vE(e)}function NA(){TE()}function OA(e){yE(e)}async function RA(e){await VE(e),await rS(e)}function LA(e){EE(e)}function CA(e){SE(e)}function PA(e){IE(e)}const xA=async e=>{try{await e()}catch(e){nv()&&console.log(e)}};async function kA(){const e=await mS(),t=2===ES(e,yS),n=xr();if(t){if(!n)return chrome.sidePanel.setPanelBehavior({openPanelOnActionClick:!0}).catch((e=>console.error(e))),void chrome.sidePanel.setOptions({enabled:!0}).catch((e=>console.error(e)))}else{if(n)return;chrome.sidePanel.setPanelBehavior({openPanelOnActionClick:!1}).catch((e=>console.error(e))),chrome.sidePanel.setOptions({enabled:!1}).catch((e=>console.error(e)))}}const DA="ITA_RATE_LIMITED",UA="ITA_RATE_LIMITED_RESTRICTED",MA="ITA_WRITE_GENERIC_ERROR",GA="ITA_TRANSLATE_GENERIC_ERROR",$A="ITA_TOKEN_EXPIRED",VA={session_ended_mutual_end:"000_session_ended_mutual_end",session_ended_idle_timeout:"400_session_ended_idle_timeout",quota_exceeded:"802_quota_exceeded",rate_limited:"800_rate_limited",rate_limited_restricted:"801_rate_limited_restricted",session_ended_transient:"1001_session_ended_transient",session_ended_internal_error:"1300_session_ended_internal_error",session_ended_manual_eviction:"1301_session_ended_manual_eviction",session_ended_authentication_token_expired:"1600_session_ended_authentication_token_expired",missing_or_invalid_authentication:"1601_missing_or_invalid_authentication"},FA={unsupported_session_mode:"300_unsupported_session_mode",obsolete_version_unavailable:"1200_obsolete_version_unavailable",missing_or_invalid_authentication:"1302_missing_or_invalid_authentication",unhandled_internal_error:"1302_unhandled_internal_error"},jA={invalid_session_token:"301_invalid_session_token",invalid_session_version:"302_invalid_session_version",unknown_session:"303_unknown_session",invalid_participant_id:"305_invalid_participant_id",service_level_mismatch:"700_service_level_mismatch",multiple_invocations_forbidden:"900_multiple_invocations_forbidden"},WA={message_validation_failed:"304_message_validation_failed",append_not_allowed:"901_append_not_allowed"};function qA(e){switch(e){case VA.quota_exceeded:case VA.rate_limited:case VA.rate_limited_restricted:case VA.session_ended_internal_error:case VA.session_ended_manual_eviction:case FA.unsupported_session_mode:case FA.obsolete_version_unavailable:case jA.invalid_session_token:case jA.invalid_session_version:case jA.unknown_session:case jA.invalid_participant_id:case jA.service_level_mismatch:case jA.multiple_invocations_forbidden:case WA.message_validation_failed:case VA.missing_or_invalid_authentication:case FA.unhandled_internal_error:return!0;default:return!1}}function BA(e,t=!1){switch(e){case VA.rate_limited:return DA;case VA.rate_limited_restricted:return UA;case VA.quota_exceeded:return DA;case VA.session_ended_authentication_token_expired:return $A;default:return t?MA:GA}}function HA(){let e=0,t=0;for(let n=0;n<28;n+=7){let r=this.buf[this.pos++];if(e|=(127&r)<<n,!(128&r))return this.assertBounds(),[e,t]}let n=this.buf[this.pos++];if(e|=(15&n)<<28,t=(112&n)>>4,!(128&n))return this.assertBounds(),[e,t];for(let n=3;n<=31;n+=7){let r=this.buf[this.pos++];if(t|=(127&r)<<n,!(128&r))return this.assertBounds(),[e,t]}throw new Error("invalid varint")}function JA(e,t,n){for(let r=0;r<28;r+=7){const o=e>>>r,a=!(o>>>7==0&&0==t),i=255&(a?128|o:o);if(n.push(i),!a)return}const r=e>>>28&15|(7&t)<<4,o=!!(t>>3);if(n.push(255&(o?128|r:r)),o){for(let e=3;e<31;e+=7){const r=t>>>e,o=!(r>>>7==0),a=255&(o?128|r:r);if(n.push(a),!o)return}n.push(t>>>31&1)}}const YA=4294967296;function zA(e){const t="-"===e[0];t&&(e=e.slice(1));const n=1e6;let r=0,o=0;function a(t,a){const i=Number(e.slice(t,a));o*=n,r=r*n+i,r>=YA&&(o+=r/YA|0,r%=YA)}return a(-24,-18),a(-18,-12),a(-12,-6),a(-6),t?QA(r,o):KA(r,o)}function XA(e,t){if(({lo:e,hi:t}=function(e,t){return{lo:e>>>0,hi:t>>>0}}(e,t)),t<=2097151)return String(YA*t+e);const n=16777215&(e>>>24|t<<8),r=t>>16&65535;let o=(16777215&e)+6777216*n+6710656*r,a=n+8147497*r,i=2*r;const s=1e7;return o>=s&&(a+=Math.floor(o/s),o%=s),a>=s&&(i+=Math.floor(a/s),a%=s),i.toString()+ZA(a)+ZA(o)}function KA(e,t){return{lo:0|e,hi:0|t}}function QA(e,t){return t=~t,e?e=1+~e:t+=1,KA(e,t)}const ZA=e=>{const t=String(e);return"0000000".slice(t.length)+t};function ew(e,t){if(e>=0){for(;e>127;)t.push(127&e|128),e>>>=7;t.push(e)}else{for(let n=0;n<9;n++)t.push(127&e|128),e>>=7;t.push(1)}}function tw(){let e=this.buf[this.pos++],t=127&e;if(!(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<7,!(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<14,!(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<21,!(128&e))return this.assertBounds(),t;e=this.buf[this.pos++],t|=(15&e)<<28;for(let t=5;128&e&&t<10;t++)e=this.buf[this.pos++];if(128&e)throw new Error("invalid varint");return this.assertBounds(),t>>>0}const nw=rw();function rw(){const e=new DataView(new ArrayBuffer(8));if("function"==typeof BigInt&&"function"==typeof e.getBigInt64&&"function"==typeof e.getBigUint64&&"function"==typeof e.setBigInt64&&"function"==typeof e.setBigUint64&&("object"!=typeof process||"object"!=typeof process.env||"1"!==process.env.BUF_BIGINT_DISABLE)){const t=BigInt("-9223372036854775808"),n=BigInt("9223372036854775807"),r=BigInt("0"),o=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(e){const r="bigint"==typeof e?e:BigInt(e);if(r>n||r<t)throw new Error(`invalid int64: ${e}`);return r},uParse(e){const t="bigint"==typeof e?e:BigInt(e);if(t>o||t<r)throw new Error(`invalid uint64: ${e}`);return t},enc(t){return e.setBigInt64(0,this.parse(t),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},uEnc(t){return e.setBigInt64(0,this.uParse(t),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},dec:(t,n)=>(e.setInt32(0,t,!0),e.setInt32(4,n,!0),e.getBigInt64(0,!0)),uDec:(t,n)=>(e.setInt32(0,t,!0),e.setInt32(4,n,!0),e.getBigUint64(0,!0))}}return{zero:"0",supported:!1,parse:e=>("string"!=typeof e&&(e=e.toString()),ow(e),e),uParse:e=>("string"!=typeof e&&(e=e.toString()),aw(e),e),enc:e=>("string"!=typeof e&&(e=e.toString()),ow(e),zA(e)),uEnc:e=>("string"!=typeof e&&(e=e.toString()),aw(e),zA(e)),dec:(e,t)=>function(e,t){let n=KA(e,t);const r=2147483648&n.hi;r&&(n=QA(n.lo,n.hi));const o=XA(n.lo,n.hi);return r?"-"+o:o}(e,t),uDec:(e,t)=>XA(e,t)}}function ow(e){if(!/^-?[0-9]+$/.test(e))throw new Error("invalid int64: "+e)}function aw(e){if(!/^[0-9]+$/.test(e))throw new Error("invalid uint64: "+e)}const iw=Symbol.for("@bufbuild/protobuf/text-encoding");function sw(){if(null==globalThis[iw]){const e=new globalThis.TextEncoder,t=new globalThis.TextDecoder;globalThis[iw]={encodeUtf8:t=>e.encode(t),decodeUtf8:e=>t.decode(e),checkUtf8(e){try{return encodeURIComponent(e),!0}catch(e){return!1}}}}return globalThis[iw]}var cw;!function(e){e[e.Varint=0]="Varint",e[e.Bit64=1]="Bit64",e[e.LengthDelimited=2]="LengthDelimited",e[e.StartGroup=3]="StartGroup",e[e.EndGroup=4]="EndGroup",e[e.Bit32=5]="Bit32"}(cw||(cw={}));const lw=34028234663852886e22,uw=-34028234663852886e22;class dw{constructor(e=sw().encodeUtf8){this.encodeUtf8=e,this.stack=[],this.chunks=[],this.buf=[]}finish(){this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]);let e=0;for(let t=0;t<this.chunks.length;t++)e+=this.chunks[t].length;let t=new Uint8Array(e),n=0;for(let e=0;e<this.chunks.length;e++)t.set(this.chunks[e],n),n+=this.chunks[e].length;return this.chunks=[],t}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),t=this.stack.pop();if(!t)throw new Error("invalid state, fork stack empty");return this.chunks=t.chunks,this.buf=t.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,t){return this.uint32((e<<3|t)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(hw(e);e>127;)this.buf.push(127&e|128),e>>>=7;return this.buf.push(e),this}int32(e){return gw(e),ew(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let t=this.encodeUtf8(e);return this.uint32(t.byteLength),this.raw(t)}float(e){!function(e){if("string"==typeof e){const t=e;if(e=Number(e),isNaN(e)&&"NaN"!==t)throw new Error("invalid float32: "+t)}else if("number"!=typeof e)throw new Error("invalid float32: "+typeof e);if(Number.isFinite(e)&&(e>lw||e<uw))throw new Error("invalid float32: "+e)}(e);let t=new Uint8Array(4);return new DataView(t.buffer).setFloat32(0,e,!0),this.raw(t)}double(e){let t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),this.raw(t)}fixed32(e){hw(e);let t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e,!0),this.raw(t)}sfixed32(e){gw(e);let t=new Uint8Array(4);return new DataView(t.buffer).setInt32(0,e,!0),this.raw(t)}sint32(e){return gw(e),ew(e=(e<<1^e>>31)>>>0,this.buf),this}sfixed64(e){let t=new Uint8Array(8),n=new DataView(t.buffer),r=nw.enc(e);return n.setInt32(0,r.lo,!0),n.setInt32(4,r.hi,!0),this.raw(t)}fixed64(e){let t=new Uint8Array(8),n=new DataView(t.buffer),r=nw.uEnc(e);return n.setInt32(0,r.lo,!0),n.setInt32(4,r.hi,!0),this.raw(t)}int64(e){let t=nw.enc(e);return JA(t.lo,t.hi,this.buf),this}sint64(e){let t=nw.enc(e),n=t.hi>>31;return JA(t.lo<<1^n,(t.hi<<1|t.lo>>>31)^n,this.buf),this}uint64(e){let t=nw.uEnc(e);return JA(t.lo,t.hi,this.buf),this}}class pw{constructor(e,t=sw().decodeUtf8){this.decodeUtf8=t,this.varint64=HA,this.uint32=tw,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength)}tag(){let e=this.uint32(),t=e>>>3,n=7&e;if(t<=0||n<0||n>5)throw new Error("illegal tag: field no "+t+" wire type "+n);return[t,n]}skip(e,t){let n=this.pos;switch(e){case cw.Varint:for(;128&this.buf[this.pos++];);break;case cw.Bit64:this.pos+=4;case cw.Bit32:this.pos+=4;break;case cw.LengthDelimited:let n=this.uint32();this.pos+=n;break;case cw.StartGroup:for(;;){const[e,n]=this.tag();if(n===cw.EndGroup){if(void 0!==t&&e!==t)throw new Error("invalid end group tag");break}this.skip(n,e)}break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(n,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return 0|this.uint32()}sint32(){let e=this.uint32();return e>>>1^-(1&e)}int64(){return nw.dec(...this.varint64())}uint64(){return nw.uDec(...this.varint64())}sint64(){let[e,t]=this.varint64(),n=-(1&e);return e=(e>>>1|(1&t)<<31)^n,t=t>>>1^n,nw.dec(e,t)}bool(){let[e,t]=this.varint64();return 0!==e||0!==t}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return nw.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return nw.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),t=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(t,t+e)}string(){return this.decodeUtf8(this.bytes())}}function gw(e){if("string"==typeof e)e=Number(e);else if("number"!=typeof e)throw new Error("invalid int32: "+typeof e);if(!Number.isInteger(e)||e>2147483647||e<-2147483648)throw new Error("invalid int32: "+e)}function hw(e){if("string"==typeof e)e=Number(e);else if("number"!=typeof e)throw new Error("invalid uint32: "+typeof e);if(!Number.isInteger(e)||e>4294967295||e<0)throw new Error("invalid uint32: "+e)}const fw={$type:"google.protobuf.Timestamp",encode:(e,t=new dw)=>(0!==e.seconds&&t.uint32(8).int64(e.seconds),0!==e.nanos&&t.uint32(16).int32(e.nanos),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"google.protobuf.Timestamp",seconds:0,nanos:0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(8!==e)break;o.seconds=mw(n.int64());continue;case 2:if(16!==e)break;o.nanos=n.int32();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:fw.$type,seconds:_w(e.seconds)?globalThis.Number(e.seconds):0,nanos:_w(e.nanos)?globalThis.Number(e.nanos):0}),toJSON(e){const t={};return 0!==e.seconds&&(t.seconds=Math.round(e.seconds)),0!==e.nanos&&(t.nanos=Math.round(e.nanos)),t},create:e=>fw.fromPartial(null!=e?e:{}),fromPartial(e){var t,n;const r={$type:"google.protobuf.Timestamp",seconds:0,nanos:0};return r.seconds=null!==(t=e.seconds)&&void 0!==t?t:0,r.nanos=null!==(n=e.nanos)&&void 0!==n?n:0,r}};function mw(e){const t=globalThis.Number(e.toString());if(t>globalThis.Number.MAX_SAFE_INTEGER)throw new globalThis.Error("Value is larger than Number.MAX_SAFE_INTEGER");if(t<globalThis.Number.MIN_SAFE_INTEGER)throw new globalThis.Error("Value is smaller than Number.MIN_SAFE_INTEGER");return t}function _w(e){return null!=e}const vw={$type:"google.protobuf.Int32Value",encode:(e,t=new dw)=>(0!==e.value&&t.uint32(8).int32(e.value),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"google.protobuf.Int32Value",value:0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(8!==e)break;o.value=n.int32();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON(e){return{$type:vw.$type,value:(t=e.value,null!=t?globalThis.Number(e.value):0)};var t},toJSON(e){const t={};return 0!==e.value&&(t.value=Math.round(e.value)),t},create:e=>vw.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"google.protobuf.Int32Value",value:0};return n.value=null!==(t=e.value)&&void 0!==t?t:0,n}};const Tw={$type:"deepl.pb.interactive_text_api.common.alternatives.WordAlternative",encode:(e,t=new dw)=>(""!==e.text&&t.uint32(10).string(e.text),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.alternatives.WordAlternative",text:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.text=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON(e){return{$type:Tw.$type,text:(t=e.text,null!=t?globalThis.String(e.text):"")};var t},toJSON(e){const t={};return""!==e.text&&(t.text=e.text),t},create:e=>Tw.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.common.alternatives.WordAlternative",text:""};return n.text=null!==(t=e.text)&&void 0!==t?t:"",n}};const yw={$type:"deepl.pb.interactive_text_api.common.alternatives.WordAlternativesFlowId",encode:(e,t=new dw)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.alternatives.WordAlternativesFlowId",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON(e){return{$type:yw.$type,value:(t=e.value,null!=t?globalThis.String(e.value):"")};var t},toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>yw.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.common.alternatives.WordAlternativesFlowId",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const Ew={$type:"deepl.pb.interactive_text_api.common.alternatives.ProvidedWordAlternativesAnnotationPayload",encode(e,t=new dw){void 0!==e.flowId&&yw.encode(e.flowId,t.uint32(10).fork()).join();for(const n of e.alternatives)Tw.encode(n,t.uint32(18).fork()).join();return t},decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.alternatives.ProvidedWordAlternativesAnnotationPayload",flowId:void 0,alternatives:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=yw.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.alternatives.push(Tw.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON(e){return{$type:Ew.$type,flowId:(t=e.flowId,null!=t?yw.fromJSON(e.flowId):void 0),alternatives:globalThis.Array.isArray(null==e?void 0:e.alternatives)?e.alternatives.map((e=>Tw.fromJSON(e))):[]};var t},toJSON(e){var t;const n={};return void 0!==e.flowId&&(n.flowId=yw.toJSON(e.flowId)),(null===(t=e.alternatives)||void 0===t?void 0:t.length)&&(n.alternatives=e.alternatives.map((e=>Tw.toJSON(e)))),n},create:e=>Ew.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.common.alternatives.ProvidedWordAlternativesAnnotationPayload",flowId:void 0,alternatives:[]};return n.flowId=void 0!==e.flowId&&null!==e.flowId?yw.fromPartial(e.flowId):void 0,n.alternatives=(null===(t=e.alternatives)||void 0===t?void 0:t.map((e=>Tw.fromPartial(e))))||[],n}};const Sw={$type:"deepl.pb.interactive_text_api.common.alternatives.TextUnitAlternativesFlowId",encode:(e,t=new dw)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.alternatives.TextUnitAlternativesFlowId",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON(e){return{$type:Sw.$type,value:(t=e.value,null!=t?globalThis.String(e.value):"")};var t},toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>Sw.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.common.alternatives.TextUnitAlternativesFlowId",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const Iw={$type:"deepl.pb.interactive_text_api.common.alternatives.RequestTextUnitAlternativesAnnotationPayload",encode:(e,t=new dw)=>(void 0!==e.flowId&&Sw.encode(e.flowId,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.alternatives.RequestTextUnitAlternativesAnnotationPayload",flowId:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=Sw.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON(e){return{$type:Iw.$type,flowId:(t=e.flowId,null!=t?Sw.fromJSON(e.flowId):void 0)};var t},toJSON(e){const t={};return void 0!==e.flowId&&(t.flowId=Sw.toJSON(e.flowId)),t},create:e=>Iw.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.common.alternatives.RequestTextUnitAlternativesAnnotationPayload",flowId:void 0};return t.flowId=void 0!==e.flowId&&null!==e.flowId?Sw.fromPartial(e.flowId):void 0,t}};const bw={$type:"deepl.pb.interactive_text_api.common.alternatives.RequestWordAlternativesAnnotationPayload",encode:(e,t=new dw)=>(void 0!==e.flowId&&yw.encode(e.flowId,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.alternatives.RequestWordAlternativesAnnotationPayload",flowId:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=yw.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON(e){return{$type:bw.$type,flowId:(t=e.flowId,null!=t?yw.fromJSON(e.flowId):void 0)};var t},toJSON(e){const t={};return void 0!==e.flowId&&(t.flowId=yw.toJSON(e.flowId)),t},create:e=>bw.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.common.alternatives.RequestWordAlternativesAnnotationPayload",flowId:void 0};return t.flowId=void 0!==e.flowId&&null!==e.flowId?yw.fromPartial(e.flowId):void 0,t}};const Aw={$type:"deepl.pb.interactive_text_api.common.alternatives.SelectAutomaticTextUnitAlternativeAnnotationPayload",encode:(e,t=new dw)=>(""!==e.selection&&t.uint32(10).string(e.selection),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.alternatives.SelectAutomaticTextUnitAlternativeAnnotationPayload",selection:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.selection=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON(e){return{$type:Aw.$type,selection:(t=e.selection,null!=t?globalThis.String(e.selection):"")};var t},toJSON(e){const t={};return""!==e.selection&&(t.selection=e.selection),t},create:e=>Aw.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.common.alternatives.SelectAutomaticTextUnitAlternativeAnnotationPayload",selection:""};return n.selection=null!==(t=e.selection)&&void 0!==t?t:"",n}};const ww={$type:"deepl.pb.interactive_text_api.common.alternatives.SelectTextUnitAlternativeAnnotationPayload",encode:(e,t=new dw)=>(void 0!==e.flowId&&Sw.encode(e.flowId,t.uint32(10).fork()).join(),""!==e.selection&&t.uint32(18).string(e.selection),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.alternatives.SelectTextUnitAlternativeAnnotationPayload",flowId:void 0,selection:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=Sw.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.selection=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:ww.$type,flowId:Nw(e.flowId)?Sw.fromJSON(e.flowId):void 0,selection:Nw(e.selection)?globalThis.String(e.selection):""}),toJSON(e){const t={};return void 0!==e.flowId&&(t.flowId=Sw.toJSON(e.flowId)),""!==e.selection&&(t.selection=e.selection),t},create:e=>ww.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.common.alternatives.SelectTextUnitAlternativeAnnotationPayload",flowId:void 0,selection:""};return n.flowId=void 0!==e.flowId&&null!==e.flowId?Sw.fromPartial(e.flowId):void 0,n.selection=null!==(t=e.selection)&&void 0!==t?t:"",n}};function Nw(e){return null!=e}const Ow={$type:"deepl.pb.interactive_text_api.common.alternatives.SelectWordAlternativeAnnotationPayload",encode:(e,t=new dw)=>(void 0!==e.flowId&&yw.encode(e.flowId,t.uint32(10).fork()).join(),""!==e.selection&&t.uint32(18).string(e.selection),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.alternatives.SelectWordAlternativeAnnotationPayload",flowId:void 0,selection:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=yw.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.selection=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:Ow.$type,flowId:Rw(e.flowId)?yw.fromJSON(e.flowId):void 0,selection:Rw(e.selection)?globalThis.String(e.selection):""}),toJSON(e){const t={};return void 0!==e.flowId&&(t.flowId=yw.toJSON(e.flowId)),""!==e.selection&&(t.selection=e.selection),t},create:e=>Ow.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.common.alternatives.SelectWordAlternativeAnnotationPayload",flowId:void 0,selection:""};return n.flowId=void 0!==e.flowId&&null!==e.flowId?yw.fromPartial(e.flowId):void 0,n.selection=null!==(t=e.selection)&&void 0!==t?t:"",n}};function Rw(e){return null!=e}const Lw={$type:"deepl.pb.interactive_text_api.common.text_formatting.TextFormattingId",encode:(e,t=new dw)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.text_formatting.TextFormattingId",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON(e){return{$type:Lw.$type,value:(t=e.value,null!=t?globalThis.String(e.value):"")};var t},toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>Lw.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.common.text_formatting.TextFormattingId",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const Cw={$type:"deepl.pb.interactive_text_api.common.text_formatting.TextFormattingAnnotationPayload",encode(e,t=new dw){void 0!==e.textFormattingId&&Lw.encode(e.textFormattingId,t.uint32(10).fork()).join(),""!==e.name&&t.uint32(18).string(e.name);for(const n of e.children)Lw.encode(n,t.uint32(26).fork()).join();return t},decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.text_formatting.TextFormattingAnnotationPayload",textFormattingId:void 0,name:"",children:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.textFormattingId=Lw.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.name=n.string();continue;case 3:if(26!==e)break;o.children.push(Lw.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:Cw.$type,textFormattingId:Pw(e.textFormattingId)?Lw.fromJSON(e.textFormattingId):void 0,name:Pw(e.name)?globalThis.String(e.name):"",children:globalThis.Array.isArray(null==e?void 0:e.children)?e.children.map((e=>Lw.fromJSON(e))):[]}),toJSON(e){var t;const n={};return void 0!==e.textFormattingId&&(n.textFormattingId=Lw.toJSON(e.textFormattingId)),""!==e.name&&(n.name=e.name),(null===(t=e.children)||void 0===t?void 0:t.length)&&(n.children=e.children.map((e=>Lw.toJSON(e)))),n},create:e=>Cw.fromPartial(null!=e?e:{}),fromPartial(e){var t,n;const r={$type:"deepl.pb.interactive_text_api.common.text_formatting.TextFormattingAnnotationPayload",textFormattingId:void 0,name:"",children:[]};return r.textFormattingId=void 0!==e.textFormattingId&&null!==e.textFormattingId?Lw.fromPartial(e.textFormattingId):void 0,r.name=null!==(t=e.name)&&void 0!==t?t:"",r.children=(null===(n=e.children)||void 0===n?void 0:n.map((e=>Lw.fromPartial(e))))||[],r}};function Pw(e){return null!=e}const xw={$type:"deepl.pb.interactive_text_api.TextRange",encode:(e,t=new dw)=>(0!==e.start&&t.uint32(8).int32(e.start),0!==e.end&&t.uint32(16).int32(e.end),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.TextRange",start:0,end:0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(8!==e)break;o.start=n.int32();continue;case 2:if(16!==e)break;o.end=n.int32();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:xw.$type,start:kw(e.start)?globalThis.Number(e.start):0,end:kw(e.end)?globalThis.Number(e.end):0}),toJSON(e){const t={};return 0!==e.start&&(t.start=Math.round(e.start)),0!==e.end&&(t.end=Math.round(e.end)),t},create:e=>xw.fromPartial(null!=e?e:{}),fromPartial(e){var t,n;const r={$type:"deepl.pb.interactive_text_api.TextRange",start:0,end:0};return r.start=null!==(t=e.start)&&void 0!==t?t:0,r.end=null!==(n=e.end)&&void 0!==n?n:0,r}};function kw(e){return null!=e}const Dw={$type:"deepl.pb.interactive_text_api.common.text_units.TextUnitId",encode:(e,t=new dw)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.text_units.TextUnitId",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON(e){return{$type:Dw.$type,value:(t=e.value,null!=t?globalThis.String(e.value):"")};var t},toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>Dw.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.common.text_units.TextUnitId",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const Uw={$type:"deepl.pb.interactive_text_api.common.text_units.TextUnitAnnotationPayload",encode:(e,t=new dw)=>(void 0!==e.textUnitId&&Dw.encode(e.textUnitId,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.text_units.TextUnitAnnotationPayload",textUnitId:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.textUnitId=Dw.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON(e){return{$type:Uw.$type,textUnitId:(t=e.textUnitId,null!=t?Dw.fromJSON(e.textUnitId):void 0)};var t},toJSON(e){const t={};return void 0!==e.textUnitId&&(t.textUnitId=Dw.toJSON(e.textUnitId)),t},create:e=>Uw.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.common.text_units.TextUnitAnnotationPayload",textUnitId:void 0};return t.textUnitId=void 0!==e.textUnitId&&null!==e.textUnitId?Dw.fromPartial(e.textUnitId):void 0,t}};const Mw={$type:"deepl.pb.interactive_text_api.common.alternatives.AutocompletionFlowId",encode:(e,t=new dw)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.alternatives.AutocompletionFlowId",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON(e){return{$type:Mw.$type,value:(t=e.value,null!=t?globalThis.String(e.value):"")};var t},toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>Mw.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.common.alternatives.AutocompletionFlowId",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const Gw={$type:"deepl.pb.interactive_text_api.common.glossaries.GlossaryId",encode:(e,t=new dw)=>(""!==e.id&&t.uint32(10).string(e.id),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.glossaries.GlossaryId",id:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.id=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON(e){return{$type:Gw.$type,id:(t=e.id,null!=t?globalThis.String(e.id):"")};var t},toJSON(e){const t={};return""!==e.id&&(t.id=e.id),t},create:e=>Gw.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.common.glossaries.GlossaryId",id:""};return n.id=null!==(t=e.id)&&void 0!==t?t:"",n}};var $w,Vw;function Fw(e){switch(e){case 0:case"CALCULATED_LANGUAGE_ORIGIN_UNSPECIFIED":return $w.UNSPECIFIED;case 1:case"CALCULATED_LANGUAGE_ORIGIN_REQUESTED_LANGUAGE":return $w.REQUESTED_LANGUAGE;case 2:case"CALCULATED_LANGUAGE_ORIGIN_LANGUAGE_DETECTION":return $w.LANGUAGE_DETECTION;default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum CalculatedLanguageOrigin")}}function jw(e){switch(e){case $w.UNSPECIFIED:return"CALCULATED_LANGUAGE_ORIGIN_UNSPECIFIED";case $w.REQUESTED_LANGUAGE:return"CALCULATED_LANGUAGE_ORIGIN_REQUESTED_LANGUAGE";case $w.LANGUAGE_DETECTION:return"CALCULATED_LANGUAGE_ORIGIN_LANGUAGE_DETECTION";default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum CalculatedLanguageOrigin")}}function Ww(e){switch(e){case 0:case"TEXT_DIRECTION_UNSPECIFIED":return Vw.UNSPECIFIED;case 1:case"TEXT_DIRECTION_LEFT_TO_RIGHT":return Vw.LEFT_TO_RIGHT;case 2:case"TEXT_DIRECTION_RIGHT_TO_LEFT":return Vw.RIGHT_TO_LEFT;default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum TextDirection")}}!function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.REQUESTED_LANGUAGE=1]="REQUESTED_LANGUAGE",e[e.LANGUAGE_DETECTION=2]="LANGUAGE_DETECTION"}($w||($w={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.LEFT_TO_RIGHT=1]="LEFT_TO_RIGHT",e[e.RIGHT_TO_LEFT=2]="RIGHT_TO_LEFT"}(Vw||(Vw={}));const qw={$type:"deepl.pb.interactive_text_api.translator.RequestAutocompletionAnnotationPayload",encode:(e,t=new dw)=>(void 0!==e.flowId&&Mw.encode(e.flowId,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.RequestAutocompletionAnnotationPayload",flowId:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=Mw.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:qw.$type,flowId:xN(e.flowId)?Mw.fromJSON(e.flowId):void 0}),toJSON(e){const t={};return void 0!==e.flowId&&(t.flowId=Mw.toJSON(e.flowId)),t},create:e=>qw.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.translator.RequestAutocompletionAnnotationPayload",flowId:void 0};return t.flowId=void 0!==e.flowId&&null!==e.flowId?Mw.fromPartial(e.flowId):void 0,t}};const Bw={$type:"deepl.pb.interactive_text_api.translator.ProvidedAutocompletionAnnotationPayload",encode(e,t=new dw){void 0!==e.flowId&&Mw.encode(e.flowId,t.uint32(10).fork()).join();for(const n of e.autocompletions)AN.encode(n,t.uint32(18).fork()).join();return t},decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.ProvidedAutocompletionAnnotationPayload",flowId:void 0,autocompletions:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=Mw.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.autocompletions.push(AN.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:Bw.$type,flowId:xN(e.flowId)?Mw.fromJSON(e.flowId):void 0,autocompletions:globalThis.Array.isArray(null==e?void 0:e.autocompletions)?e.autocompletions.map((e=>AN.fromJSON(e))):[]}),toJSON(e){var t;const n={};return void 0!==e.flowId&&(n.flowId=Mw.toJSON(e.flowId)),(null===(t=e.autocompletions)||void 0===t?void 0:t.length)&&(n.autocompletions=e.autocompletions.map((e=>AN.toJSON(e)))),n},create:e=>Bw.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.ProvidedAutocompletionAnnotationPayload",flowId:void 0,autocompletions:[]};return n.flowId=void 0!==e.flowId&&null!==e.flowId?Mw.fromPartial(e.flowId):void 0,n.autocompletions=(null===(t=e.autocompletions)||void 0===t?void 0:t.map((e=>AN.fromPartial(e))))||[],n}};const Hw={$type:"deepl.pb.interactive_text_api.translator.SelectAutocompletionAnnotationPayload",encode:(e,t=new dw)=>(void 0!==e.flowId&&Mw.encode(e.flowId,t.uint32(10).fork()).join(),""!==e.selection&&t.uint32(18).string(e.selection),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.SelectAutocompletionAnnotationPayload",flowId:void 0,selection:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=Mw.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.selection=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:Hw.$type,flowId:xN(e.flowId)?Mw.fromJSON(e.flowId):void 0,selection:xN(e.selection)?globalThis.String(e.selection):""}),toJSON(e){const t={};return void 0!==e.flowId&&(t.flowId=Mw.toJSON(e.flowId)),""!==e.selection&&(t.selection=e.selection),t},create:e=>Hw.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.SelectAutocompletionAnnotationPayload",flowId:void 0,selection:""};return n.flowId=void 0!==e.flowId&&null!==e.flowId?Mw.fromPartial(e.flowId):void 0,n.selection=null!==(t=e.selection)&&void 0!==t?t:"",n}};const Jw={$type:"deepl.pb.interactive_text_api.translator.GlossaryReplacementAnnotationPayload",encode:(e,t=new dw)=>(void 0!==e.replacement&&yN.encode(e.replacement,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.GlossaryReplacementAnnotationPayload",replacement:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.replacement=yN.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:Jw.$type,replacement:xN(e.replacement)?yN.fromJSON(e.replacement):void 0}),toJSON(e){const t={};return void 0!==e.replacement&&(t.replacement=yN.toJSON(e.replacement)),t},create:e=>Jw.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.translator.GlossaryReplacementAnnotationPayload",replacement:void 0};return t.replacement=void 0!==e.replacement&&null!==e.replacement?yN.fromPartial(e.replacement):void 0,t}};const Yw={$type:"deepl.pb.interactive_text_api.translator.ProvidedTextUnitAlternativesAnnotationPayload",encode(e,t=new dw){void 0!==e.flowId&&Sw.encode(e.flowId,t.uint32(10).fork()).join();for(const n of e.alternatives)AN.encode(n,t.uint32(18).fork()).join();return t},decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.ProvidedTextUnitAlternativesAnnotationPayload",flowId:void 0,alternatives:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=Sw.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.alternatives.push(AN.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:Yw.$type,flowId:xN(e.flowId)?Sw.fromJSON(e.flowId):void 0,alternatives:globalThis.Array.isArray(null==e?void 0:e.alternatives)?e.alternatives.map((e=>AN.fromJSON(e))):[]}),toJSON(e){var t;const n={};return void 0!==e.flowId&&(n.flowId=Sw.toJSON(e.flowId)),(null===(t=e.alternatives)||void 0===t?void 0:t.length)&&(n.alternatives=e.alternatives.map((e=>AN.toJSON(e)))),n},create:e=>Yw.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.ProvidedTextUnitAlternativesAnnotationPayload",flowId:void 0,alternatives:[]};return n.flowId=void 0!==e.flowId&&null!==e.flowId?Sw.fromPartial(e.flowId):void 0,n.alternatives=(null===(t=e.alternatives)||void 0===t?void 0:t.map((e=>AN.fromPartial(e))))||[],n}};const zw={$type:"deepl.pb.interactive_text_api.translator.ProvidedAutomaticTextUnitAlternativesAnnotationPayload",encode(e,t=new dw){for(const n of e.alternatives)AN.encode(n,t.uint32(10).fork()).join();return t},decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.ProvidedAutomaticTextUnitAlternativesAnnotationPayload",alternatives:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.alternatives.push(AN.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:zw.$type,alternatives:globalThis.Array.isArray(null==e?void 0:e.alternatives)?e.alternatives.map((e=>AN.fromJSON(e))):[]}),toJSON(e){var t;const n={};return(null===(t=e.alternatives)||void 0===t?void 0:t.length)&&(n.alternatives=e.alternatives.map((e=>AN.toJSON(e)))),n},create:e=>zw.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.ProvidedAutomaticTextUnitAlternativesAnnotationPayload",alternatives:[]};return n.alternatives=(null===(t=e.alternatives)||void 0===t?void 0:t.map((e=>AN.fromPartial(e))))||[],n}};const Xw={$type:"deepl.pb.interactive_text_api.translator.RequestClarifyAnnotationPayload",encode:(e,t=new dw)=>(void 0!==e.flowId&&CN.encode(e.flowId,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.RequestClarifyAnnotationPayload",flowId:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=CN.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:Xw.$type,flowId:xN(e.flowId)?CN.fromJSON(e.flowId):void 0}),toJSON(e){const t={};return void 0!==e.flowId&&(t.flowId=CN.toJSON(e.flowId)),t},create:e=>Xw.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.translator.RequestClarifyAnnotationPayload",flowId:void 0};return t.flowId=void 0!==e.flowId&&null!==e.flowId?CN.fromPartial(e.flowId):void 0,t}};const Kw={$type:"deepl.pb.interactive_text_api.translator.ProvidedClarifyHighlightAnnotationPayload",encode:(e,t=new dw)=>(void 0!==e.flowId&&CN.encode(e.flowId,t.uint32(10).fork()).join(),void 0!==e.questionId&&PN.encode(e.questionId,t.uint32(18).fork()).join(),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.ProvidedClarifyHighlightAnnotationPayload",flowId:void 0,questionId:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=CN.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.questionId=PN.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:Kw.$type,flowId:xN(e.flowId)?CN.fromJSON(e.flowId):void 0,questionId:xN(e.questionId)?PN.fromJSON(e.questionId):void 0}),toJSON(e){const t={};return void 0!==e.flowId&&(t.flowId=CN.toJSON(e.flowId)),void 0!==e.questionId&&(t.questionId=PN.toJSON(e.questionId)),t},create:e=>Kw.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.translator.ProvidedClarifyHighlightAnnotationPayload",flowId:void 0,questionId:void 0};return t.flowId=void 0!==e.flowId&&null!==e.flowId?CN.fromPartial(e.flowId):void 0,t.questionId=void 0!==e.questionId&&null!==e.questionId?PN.fromPartial(e.questionId):void 0,t}};const Qw={$type:"deepl.pb.interactive_text_api.translator.ProvidedClarifyQuestionAnnotationPayload",encode:(e,t=new dw)=>(void 0!==e.flowId&&CN.encode(e.flowId,t.uint32(10).fork()).join(),void 0!==e.questionWithAnswers&&RN.encode(e.questionWithAnswers,t.uint32(18).fork()).join(),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.ProvidedClarifyQuestionAnnotationPayload",flowId:void 0,questionWithAnswers:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=CN.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.questionWithAnswers=RN.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:Qw.$type,flowId:xN(e.flowId)?CN.fromJSON(e.flowId):void 0,questionWithAnswers:xN(e.questionWithAnswers)?RN.fromJSON(e.questionWithAnswers):void 0}),toJSON(e){const t={};return void 0!==e.flowId&&(t.flowId=CN.toJSON(e.flowId)),void 0!==e.questionWithAnswers&&(t.questionWithAnswers=RN.toJSON(e.questionWithAnswers)),t},create:e=>Qw.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.translator.ProvidedClarifyQuestionAnnotationPayload",flowId:void 0,questionWithAnswers:void 0};return t.flowId=void 0!==e.flowId&&null!==e.flowId?CN.fromPartial(e.flowId):void 0,t.questionWithAnswers=void 0!==e.questionWithAnswers&&null!==e.questionWithAnswers?RN.fromPartial(e.questionWithAnswers):void 0,t}};const Zw={$type:"deepl.pb.interactive_text_api.translator.SelectClarifyAnswerAnnotationPayload",encode:(e,t=new dw)=>(void 0!==e.flowId&&CN.encode(e.flowId,t.uint32(10).fork()).join(),void 0!==e.questionId&&PN.encode(e.questionId,t.uint32(18).fork()).join(),void 0!==e.answer&&LN.encode(e.answer,t.uint32(26).fork()).join(),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.SelectClarifyAnswerAnnotationPayload",flowId:void 0,questionId:void 0,answer:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=CN.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.questionId=PN.decode(n,n.uint32());continue;case 3:if(26!==e)break;o.answer=LN.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:Zw.$type,flowId:xN(e.flowId)?CN.fromJSON(e.flowId):void 0,questionId:xN(e.questionId)?PN.fromJSON(e.questionId):void 0,answer:xN(e.answer)?LN.fromJSON(e.answer):void 0}),toJSON(e){const t={};return void 0!==e.flowId&&(t.flowId=CN.toJSON(e.flowId)),void 0!==e.questionId&&(t.questionId=PN.toJSON(e.questionId)),void 0!==e.answer&&(t.answer=LN.toJSON(e.answer)),t},create:e=>Zw.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.translator.SelectClarifyAnswerAnnotationPayload",flowId:void 0,questionId:void 0,answer:void 0};return t.flowId=void 0!==e.flowId&&null!==e.flowId?CN.fromPartial(e.flowId):void 0,t.questionId=void 0!==e.questionId&&null!==e.questionId?PN.fromPartial(e.questionId):void 0,t.answer=void 0!==e.answer&&null!==e.answer?LN.fromPartial(e.answer):void 0,t}};const eN={$type:"deepl.pb.interactive_text_api.translator.SourceLanguagesPropertyValue",encode(e,t=new dw){for(const n of e.sourceLanguages)IN.encode(n,t.uint32(10).fork()).join();return t},decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.SourceLanguagesPropertyValue",sourceLanguages:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.sourceLanguages.push(IN.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:eN.$type,sourceLanguages:globalThis.Array.isArray(null==e?void 0:e.sourceLanguages)?e.sourceLanguages.map((e=>IN.fromJSON(e))):[]}),toJSON(e){var t;const n={};return(null===(t=e.sourceLanguages)||void 0===t?void 0:t.length)&&(n.sourceLanguages=e.sourceLanguages.map((e=>IN.toJSON(e)))),n},create:e=>eN.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.SourceLanguagesPropertyValue",sourceLanguages:[]};return n.sourceLanguages=(null===(t=e.sourceLanguages)||void 0===t?void 0:t.map((e=>IN.fromPartial(e))))||[],n}};const tN={$type:"deepl.pb.interactive_text_api.translator.TargetLanguagesPropertyValue",encode(e,t=new dw){for(const n of e.targetLanguages)bN.encode(n,t.uint32(10).fork()).join();return t},decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.TargetLanguagesPropertyValue",targetLanguages:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.targetLanguages.push(bN.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:tN.$type,targetLanguages:globalThis.Array.isArray(null==e?void 0:e.targetLanguages)?e.targetLanguages.map((e=>bN.fromJSON(e))):[]}),toJSON(e){var t;const n={};return(null===(t=e.targetLanguages)||void 0===t?void 0:t.length)&&(n.targetLanguages=e.targetLanguages.map((e=>bN.toJSON(e)))),n},create:e=>tN.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.TargetLanguagesPropertyValue",targetLanguages:[]};return n.targetLanguages=(null===(t=e.targetLanguages)||void 0===t?void 0:t.map((e=>bN.fromPartial(e))))||[],n}};const nN={$type:"deepl.pb.interactive_text_api.translator.RequestedSourceLanguagePropertyValue",encode:(e,t=new dw)=>(void 0!==e.sourceLanguage&&IN.encode(e.sourceLanguage,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.RequestedSourceLanguagePropertyValue",sourceLanguage:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.sourceLanguage=IN.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:nN.$type,sourceLanguage:xN(e.sourceLanguage)?IN.fromJSON(e.sourceLanguage):void 0}),toJSON(e){const t={};return void 0!==e.sourceLanguage&&(t.sourceLanguage=IN.toJSON(e.sourceLanguage)),t},create:e=>nN.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.translator.RequestedSourceLanguagePropertyValue",sourceLanguage:void 0};return t.sourceLanguage=void 0!==e.sourceLanguage&&null!==e.sourceLanguage?IN.fromPartial(e.sourceLanguage):void 0,t}};const rN={$type:"deepl.pb.interactive_text_api.translator.CalculatedSourceLanguagePropertyValue",encode:(e,t=new dw)=>(void 0!==e.sourceLanguage&&IN.encode(e.sourceLanguage,t.uint32(10).fork()).join(),0!==e.origin&&t.uint32(16).int32(e.origin),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.CalculatedSourceLanguagePropertyValue",sourceLanguage:void 0,origin:0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.sourceLanguage=IN.decode(n,n.uint32());continue;case 2:if(16!==e)break;o.origin=n.int32();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:rN.$type,sourceLanguage:xN(e.sourceLanguage)?IN.fromJSON(e.sourceLanguage):void 0,origin:xN(e.origin)?Fw(e.origin):0}),toJSON(e){const t={};return void 0!==e.sourceLanguage&&(t.sourceLanguage=IN.toJSON(e.sourceLanguage)),0!==e.origin&&(t.origin=jw(e.origin)),t},create:e=>rN.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.CalculatedSourceLanguagePropertyValue",sourceLanguage:void 0,origin:0};return n.sourceLanguage=void 0!==e.sourceLanguage&&null!==e.sourceLanguage?IN.fromPartial(e.sourceLanguage):void 0,n.origin=null!==(t=e.origin)&&void 0!==t?t:0,n}};const oN={$type:"deepl.pb.interactive_text_api.translator.RequestedTargetLanguagePropertyValue",encode:(e,t=new dw)=>(void 0!==e.targetLanguage&&bN.encode(e.targetLanguage,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.RequestedTargetLanguagePropertyValue",targetLanguage:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.targetLanguage=bN.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:oN.$type,targetLanguage:xN(e.targetLanguage)?bN.fromJSON(e.targetLanguage):void 0}),toJSON(e){const t={};return void 0!==e.targetLanguage&&(t.targetLanguage=bN.toJSON(e.targetLanguage)),t},create:e=>oN.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.translator.RequestedTargetLanguagePropertyValue",targetLanguage:void 0};return t.targetLanguage=void 0!==e.targetLanguage&&null!==e.targetLanguage?bN.fromPartial(e.targetLanguage):void 0,t}};const aN={$type:"deepl.pb.interactive_text_api.translator.CalculatedTargetLanguagePropertyValue",encode:(e,t=new dw)=>(void 0!==e.targetLanguage&&bN.encode(e.targetLanguage,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.CalculatedTargetLanguagePropertyValue",targetLanguage:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.targetLanguage=bN.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:aN.$type,targetLanguage:xN(e.targetLanguage)?bN.fromJSON(e.targetLanguage):void 0}),toJSON(e){const t={};return void 0!==e.targetLanguage&&(t.targetLanguage=bN.toJSON(e.targetLanguage)),t},create:e=>aN.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.translator.CalculatedTargetLanguagePropertyValue",targetLanguage:void 0};return t.targetLanguage=void 0!==e.targetLanguage&&null!==e.targetLanguage?bN.fromPartial(e.targetLanguage):void 0,t}};const iN={$type:"deepl.pb.interactive_text_api.translator.GlossaryIdPropertyValue",encode:(e,t=new dw)=>(void 0!==e.glossaryId&&Gw.encode(e.glossaryId,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.GlossaryIdPropertyValue",glossaryId:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.glossaryId=Gw.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:iN.$type,glossaryId:xN(e.glossaryId)?Gw.fromJSON(e.glossaryId):void 0}),toJSON(e){const t={};return void 0!==e.glossaryId&&(t.glossaryId=Gw.toJSON(e.glossaryId)),t},create:e=>iN.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.translator.GlossaryIdPropertyValue",glossaryId:void 0};return t.glossaryId=void 0!==e.glossaryId&&null!==e.glossaryId?Gw.fromPartial(e.glossaryId):void 0,t}};const sN={$type:"deepl.pb.interactive_text_api.translator.GlossarySupportPropertyValue",encode:(e,t=new dw)=>t,decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.GlossarySupportPropertyValue"};for(;n.pos<r;){const e=n.uint32();if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:sN.$type}),toJSON:e=>({}),create:e=>sN.fromPartial(null!=e?e:{}),fromPartial:e=>({$type:"deepl.pb.interactive_text_api.translator.GlossarySupportPropertyValue"})};const cN={$type:"deepl.pb.interactive_text_api.translator.TaskMetaInfo",encode:(e,t=new dw)=>(0!==e.progressInPercent&&t.uint32(8).int32(e.progressInPercent),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.TaskMetaInfo",progressInPercent:0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(8!==e)break;o.progressInPercent=n.int32();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:cN.$type,progressInPercent:xN(e.progressInPercent)?globalThis.Number(e.progressInPercent):0}),toJSON(e){const t={};return 0!==e.progressInPercent&&(t.progressInPercent=Math.round(e.progressInPercent)),t},create:e=>cN.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.TaskMetaInfo",progressInPercent:0};return n.progressInPercent=null!==(t=e.progressInPercent)&&void 0!==t?t:0,n}};const lN={$type:"deepl.pb.interactive_text_api.translator.FormalityModesPropertyValue",encode(e,t=new dw){for(const n of e.formalityModes)vN.encode(n,t.uint32(10).fork()).join();return t},decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.FormalityModesPropertyValue",formalityModes:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.formalityModes.push(vN.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:lN.$type,formalityModes:globalThis.Array.isArray(null==e?void 0:e.formalityModes)?e.formalityModes.map((e=>vN.fromJSON(e))):[]}),toJSON(e){var t;const n={};return(null===(t=e.formalityModes)||void 0===t?void 0:t.length)&&(n.formalityModes=e.formalityModes.map((e=>vN.toJSON(e)))),n},create:e=>lN.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.FormalityModesPropertyValue",formalityModes:[]};return n.formalityModes=(null===(t=e.formalityModes)||void 0===t?void 0:t.map((e=>vN.fromPartial(e))))||[],n}};const uN={$type:"deepl.pb.interactive_text_api.translator.FormalityModePropertyValue",encode:(e,t=new dw)=>(void 0!==e.formalityMode&&vN.encode(e.formalityMode,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.FormalityModePropertyValue",formalityMode:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.formalityMode=vN.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:uN.$type,formalityMode:xN(e.formalityMode)?vN.fromJSON(e.formalityMode):void 0}),toJSON(e){const t={};return void 0!==e.formalityMode&&(t.formalityMode=vN.toJSON(e.formalityMode)),t},create:e=>uN.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.translator.FormalityModePropertyValue",formalityMode:void 0};return t.formalityMode=void 0!==e.formalityMode&&null!==e.formalityMode?vN.fromPartial(e.formalityMode):void 0,t}};const dN={$type:"deepl.pb.interactive_text_api.translator.LanguageModelsPropertyValue",encode(e,t=new dw){for(const n of e.languageModels)TN.encode(n,t.uint32(10).fork()).join();return t},decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.LanguageModelsPropertyValue",languageModels:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.languageModels.push(TN.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:dN.$type,languageModels:globalThis.Array.isArray(null==e?void 0:e.languageModels)?e.languageModels.map((e=>TN.fromJSON(e))):[]}),toJSON(e){var t;const n={};return(null===(t=e.languageModels)||void 0===t?void 0:t.length)&&(n.languageModels=e.languageModels.map((e=>TN.toJSON(e)))),n},create:e=>dN.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.LanguageModelsPropertyValue",languageModels:[]};return n.languageModels=(null===(t=e.languageModels)||void 0===t?void 0:t.map((e=>TN.fromPartial(e))))||[],n}};const pN={$type:"deepl.pb.interactive_text_api.translator.LanguageModelPropertyValue",encode:(e,t=new dw)=>(void 0!==e.languageModel&&TN.encode(e.languageModel,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.LanguageModelPropertyValue",languageModel:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.languageModel=TN.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:pN.$type,languageModel:xN(e.languageModel)?TN.fromJSON(e.languageModel):void 0}),toJSON(e){const t={};return void 0!==e.languageModel&&(t.languageModel=TN.toJSON(e.languageModel)),t},create:e=>pN.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.translator.LanguageModelPropertyValue",languageModel:void 0};return t.languageModel=void 0!==e.languageModel&&null!==e.languageModel?TN.fromPartial(e.languageModel):void 0,t}};const gN={$type:"deepl.pb.interactive_text_api.translator.TextDirectionPropertyValue",encode:(e,t=new dw)=>(0!==e.textDirection&&t.uint32(8).int32(e.textDirection),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.TextDirectionPropertyValue",textDirection:0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(8!==e)break;o.textDirection=n.int32();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:gN.$type,textDirection:xN(e.textDirection)?Ww(e.textDirection):0}),toJSON(e){const t={};return 0!==e.textDirection&&(t.textDirection=function(e){switch(e){case Vw.UNSPECIFIED:return"TEXT_DIRECTION_UNSPECIFIED";case Vw.LEFT_TO_RIGHT:return"TEXT_DIRECTION_LEFT_TO_RIGHT";case Vw.RIGHT_TO_LEFT:return"TEXT_DIRECTION_RIGHT_TO_LEFT";default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum TextDirection")}}(e.textDirection)),t},create:e=>gN.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.TextDirectionPropertyValue",textDirection:0};return n.textDirection=null!==(t=e.textDirection)&&void 0!==t?t:0,n}};const hN={$type:"deepl.pb.interactive_text_api.translator.MaximumTextLengthPropertyValue",encode:(e,t=new dw)=>(0!==e.max&&t.uint32(8).int32(e.max),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.MaximumTextLengthPropertyValue",max:0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(8!==e)break;o.max=n.int32();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:hN.$type,max:xN(e.max)?globalThis.Number(e.max):0}),toJSON(e){const t={};return 0!==e.max&&(t.max=Math.round(e.max)),t},create:e=>hN.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.MaximumTextLengthPropertyValue",max:0};return n.max=null!==(t=e.max)&&void 0!==t?t:0,n}};const fN={$type:"deepl.pb.interactive_text_api.translator.UnsupportedSourceLanguagePropertyValue",encode:(e,t=new dw)=>t,decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.UnsupportedSourceLanguagePropertyValue"};for(;n.pos<r;){const e=n.uint32();if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:fN.$type}),toJSON:e=>({}),create:e=>fN.fromPartial(null!=e?e:{}),fromPartial:e=>({$type:"deepl.pb.interactive_text_api.translator.UnsupportedSourceLanguagePropertyValue"})};const mN={$type:"deepl.pb.interactive_text_api.translator.SourceLanguageDetectionWeightsPropertyValue",encode(e,t=new dw){for(const n of e.weights)wN.encode(n,t.uint32(10).fork()).join();return t},decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.SourceLanguageDetectionWeightsPropertyValue",weights:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.weights.push(wN.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:mN.$type,weights:globalThis.Array.isArray(null==e?void 0:e.weights)?e.weights.map((e=>wN.fromJSON(e))):[]}),toJSON(e){var t;const n={};return(null===(t=e.weights)||void 0===t?void 0:t.length)&&(n.weights=e.weights.map((e=>wN.toJSON(e)))),n},create:e=>mN.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.SourceLanguageDetectionWeightsPropertyValue",weights:[]};return n.weights=(null===(t=e.weights)||void 0===t?void 0:t.map((e=>wN.fromPartial(e))))||[],n}};const _N={$type:"deepl.pb.interactive_text_api.translator.SessionOptions",encode:(e,t=new dw)=>(!1!==e.enableTranscription&&t.uint32(8).bool(e.enableTranscription),!1!==e.enableTranslatorQuoteConversion&&t.uint32(16).bool(e.enableTranslatorQuoteConversion),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.SessionOptions",enableTranscription:!1,enableTranslatorQuoteConversion:!1};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(8!==e)break;o.enableTranscription=n.bool();continue;case 2:if(16!==e)break;o.enableTranslatorQuoteConversion=n.bool();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:_N.$type,enableTranscription:!!xN(e.enableTranscription)&&globalThis.Boolean(e.enableTranscription),enableTranslatorQuoteConversion:!!xN(e.enableTranslatorQuoteConversion)&&globalThis.Boolean(e.enableTranslatorQuoteConversion)}),toJSON(e){const t={};return!1!==e.enableTranscription&&(t.enableTranscription=e.enableTranscription),!1!==e.enableTranslatorQuoteConversion&&(t.enableTranslatorQuoteConversion=e.enableTranslatorQuoteConversion),t},create:e=>_N.fromPartial(null!=e?e:{}),fromPartial(e){var t,n;const r={$type:"deepl.pb.interactive_text_api.translator.SessionOptions",enableTranscription:!1,enableTranslatorQuoteConversion:!1};return r.enableTranscription=null!==(t=e.enableTranscription)&&void 0!==t&&t,r.enableTranslatorQuoteConversion=null!==(n=e.enableTranslatorQuoteConversion)&&void 0!==n&&n,r}};const vN={$type:"deepl.pb.interactive_text_api.translator.FormalityMode",encode:(e,t=new dw)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.FormalityMode",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:vN.$type,value:xN(e.value)?globalThis.String(e.value):""}),toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>vN.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.FormalityMode",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const TN={$type:"deepl.pb.interactive_text_api.translator.LanguageModel",encode:(e,t=new dw)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.LanguageModel",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:TN.$type,value:xN(e.value)?globalThis.String(e.value):""}),toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>TN.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.LanguageModel",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const yN={$type:"deepl.pb.interactive_text_api.translator.GlossaryEntry",encode:(e,t=new dw)=>(""!==e.source&&t.uint32(10).string(e.source),""!==e.target&&t.uint32(18).string(e.target),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.GlossaryEntry",source:"",target:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.source=n.string();continue;case 2:if(18!==e)break;o.target=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:yN.$type,source:xN(e.source)?globalThis.String(e.source):"",target:xN(e.target)?globalThis.String(e.target):""}),toJSON(e){const t={};return""!==e.source&&(t.source=e.source),""!==e.target&&(t.target=e.target),t},create:e=>yN.fromPartial(null!=e?e:{}),fromPartial(e){var t,n;const r={$type:"deepl.pb.interactive_text_api.translator.GlossaryEntry",source:"",target:""};return r.source=null!==(t=e.source)&&void 0!==t?t:"",r.target=null!==(n=e.target)&&void 0!==n?n:"",r}};const EN={$type:"deepl.pb.interactive_text_api.translator.GlossaryListPropertyValue",encode(e,t=new dw){for(const n of e.glossaryEntries)yN.encode(n,t.uint32(10).fork()).join();return t},decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.GlossaryListPropertyValue",glossaryEntries:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.glossaryEntries.push(yN.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:EN.$type,glossaryEntries:globalThis.Array.isArray(null==e?void 0:e.glossaryEntries)?e.glossaryEntries.map((e=>yN.fromJSON(e))):[]}),toJSON(e){var t;const n={};return(null===(t=e.glossaryEntries)||void 0===t?void 0:t.length)&&(n.glossaryEntries=e.glossaryEntries.map((e=>yN.toJSON(e)))),n},create:e=>EN.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.GlossaryListPropertyValue",glossaryEntries:[]};return n.glossaryEntries=(null===(t=e.glossaryEntries)||void 0===t?void 0:t.map((e=>yN.fromPartial(e))))||[],n}};const SN={$type:"deepl.pb.interactive_text_api.translator.GlossaryHighlight",encode(e,t=new dw){void 0!==e.entry&&yN.encode(e.entry,t.uint32(10).fork()).join();for(const n of e.ranges)xw.encode(n,t.uint32(18).fork()).join();return t},decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.GlossaryHighlight",entry:void 0,ranges:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.entry=yN.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.ranges.push(xw.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:SN.$type,entry:xN(e.entry)?yN.fromJSON(e.entry):void 0,ranges:globalThis.Array.isArray(null==e?void 0:e.ranges)?e.ranges.map((e=>xw.fromJSON(e))):[]}),toJSON(e){var t;const n={};return void 0!==e.entry&&(n.entry=yN.toJSON(e.entry)),(null===(t=e.ranges)||void 0===t?void 0:t.length)&&(n.ranges=e.ranges.map((e=>xw.toJSON(e)))),n},create:e=>SN.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.GlossaryHighlight",entry:void 0,ranges:[]};return n.entry=void 0!==e.entry&&null!==e.entry?yN.fromPartial(e.entry):void 0,n.ranges=(null===(t=e.ranges)||void 0===t?void 0:t.map((e=>xw.fromPartial(e))))||[],n}};const IN={$type:"deepl.pb.interactive_text_api.translator.SourceLanguage",encode:(e,t=new dw)=>(""!==e.code&&t.uint32(10).string(e.code),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.SourceLanguage",code:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.code=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:IN.$type,code:xN(e.code)?globalThis.String(e.code):""}),toJSON(e){const t={};return""!==e.code&&(t.code=e.code),t},create:e=>IN.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.SourceLanguage",code:""};return n.code=null!==(t=e.code)&&void 0!==t?t:"",n}};const bN={$type:"deepl.pb.interactive_text_api.translator.TargetLanguage",encode:(e,t=new dw)=>(""!==e.code&&t.uint32(10).string(e.code),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.TargetLanguage",code:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.code=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:bN.$type,code:xN(e.code)?globalThis.String(e.code):""}),toJSON(e){const t={};return""!==e.code&&(t.code=e.code),t},create:e=>bN.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.TargetLanguage",code:""};return n.code=null!==(t=e.code)&&void 0!==t?t:"",n}};const AN={$type:"deepl.pb.interactive_text_api.translator.TextUnitAlternative",encode(e,t=new dw){""!==e.text&&t.uint32(10).string(e.text);for(const n of e.glossaryHighlights)SN.encode(n,t.uint32(18).fork()).join();return""!==e.transcription&&t.uint32(26).string(e.transcription),t},decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.TextUnitAlternative",text:"",glossaryHighlights:[],transcription:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.text=n.string();continue;case 2:if(18!==e)break;o.glossaryHighlights.push(SN.decode(n,n.uint32()));continue;case 3:if(26!==e)break;o.transcription=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:AN.$type,text:xN(e.text)?globalThis.String(e.text):"",glossaryHighlights:globalThis.Array.isArray(null==e?void 0:e.glossaryHighlights)?e.glossaryHighlights.map((e=>SN.fromJSON(e))):[],transcription:xN(e.transcription)?globalThis.String(e.transcription):""}),toJSON(e){var t;const n={};return""!==e.text&&(n.text=e.text),(null===(t=e.glossaryHighlights)||void 0===t?void 0:t.length)&&(n.glossaryHighlights=e.glossaryHighlights.map((e=>SN.toJSON(e)))),""!==e.transcription&&(n.transcription=e.transcription),n},create:e=>AN.fromPartial(null!=e?e:{}),fromPartial(e){var t,n,r;const o={$type:"deepl.pb.interactive_text_api.translator.TextUnitAlternative",text:"",glossaryHighlights:[],transcription:""};return o.text=null!==(t=e.text)&&void 0!==t?t:"",o.glossaryHighlights=(null===(n=e.glossaryHighlights)||void 0===n?void 0:n.map((e=>SN.fromPartial(e))))||[],o.transcription=null!==(r=e.transcription)&&void 0!==r?r:"",o}};const wN={$type:"deepl.pb.interactive_text_api.translator.SourceLanguageDetectionWeight",encode:(e,t=new dw)=>(void 0!==e.language&&IN.encode(e.language,t.uint32(10).fork()).join(),0!==e.weight&&t.uint32(17).double(e.weight),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.SourceLanguageDetectionWeight",language:void 0,weight:0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.language=IN.decode(n,n.uint32());continue;case 2:if(17!==e)break;o.weight=n.double();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:wN.$type,language:xN(e.language)?IN.fromJSON(e.language):void 0,weight:xN(e.weight)?globalThis.Number(e.weight):0}),toJSON(e){const t={};return void 0!==e.language&&(t.language=IN.toJSON(e.language)),0!==e.weight&&(t.weight=e.weight),t},create:e=>wN.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.SourceLanguageDetectionWeight",language:void 0,weight:0};return n.language=void 0!==e.language&&null!==e.language?IN.fromPartial(e.language):void 0,n.weight=null!==(t=e.weight)&&void 0!==t?t:0,n}};const NN={$type:"deepl.pb.interactive_text_api.translator.ClarifyQuestion",encode:(e,t=new dw)=>(void 0!==e.id&&PN.encode(e.id,t.uint32(10).fork()).join(),""!==e.title&&t.uint32(18).string(e.title),""!==e.question&&t.uint32(26).string(e.question),""!==e.category&&t.uint32(34).string(e.category),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.ClarifyQuestion",id:void 0,title:"",question:"",category:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.id=PN.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.title=n.string();continue;case 3:if(26!==e)break;o.question=n.string();continue;case 4:if(34!==e)break;o.category=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:NN.$type,id:xN(e.id)?PN.fromJSON(e.id):void 0,title:xN(e.title)?globalThis.String(e.title):"",question:xN(e.question)?globalThis.String(e.question):"",category:xN(e.category)?globalThis.String(e.category):""}),toJSON(e){const t={};return void 0!==e.id&&(t.id=PN.toJSON(e.id)),""!==e.title&&(t.title=e.title),""!==e.question&&(t.question=e.question),""!==e.category&&(t.category=e.category),t},create:e=>NN.fromPartial(null!=e?e:{}),fromPartial(e){var t,n,r;const o={$type:"deepl.pb.interactive_text_api.translator.ClarifyQuestion",id:void 0,title:"",question:"",category:""};return o.id=void 0!==e.id&&null!==e.id?PN.fromPartial(e.id):void 0,o.title=null!==(t=e.title)&&void 0!==t?t:"",o.question=null!==(n=e.question)&&void 0!==n?n:"",o.category=null!==(r=e.category)&&void 0!==r?r:"",o}};const ON={$type:"deepl.pb.interactive_text_api.translator.ClarifyAnswer",encode:(e,t=new dw)=>(""!==e.answer&&t.uint32(10).string(e.answer),!1!==e.isDefault&&t.uint32(16).bool(e.isDefault),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.ClarifyAnswer",answer:"",isDefault:!1};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.answer=n.string();continue;case 2:if(16!==e)break;o.isDefault=n.bool();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:ON.$type,answer:xN(e.answer)?globalThis.String(e.answer):"",isDefault:!!xN(e.isDefault)&&globalThis.Boolean(e.isDefault)}),toJSON(e){const t={};return""!==e.answer&&(t.answer=e.answer),!1!==e.isDefault&&(t.isDefault=e.isDefault),t},create:e=>ON.fromPartial(null!=e?e:{}),fromPartial(e){var t,n;const r={$type:"deepl.pb.interactive_text_api.translator.ClarifyAnswer",answer:"",isDefault:!1};return r.answer=null!==(t=e.answer)&&void 0!==t?t:"",r.isDefault=null!==(n=e.isDefault)&&void 0!==n&&n,r}};const RN={$type:"deepl.pb.interactive_text_api.translator.ClarifyQuestionWithAnswers",encode(e,t=new dw){void 0!==e.question&&NN.encode(e.question,t.uint32(10).fork()).join();for(const n of e.answers)ON.encode(n,t.uint32(18).fork()).join();return t},decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.ClarifyQuestionWithAnswers",question:void 0,answers:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.question=NN.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.answers.push(ON.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:RN.$type,question:xN(e.question)?NN.fromJSON(e.question):void 0,answers:globalThis.Array.isArray(null==e?void 0:e.answers)?e.answers.map((e=>ON.fromJSON(e))):[]}),toJSON(e){var t;const n={};return void 0!==e.question&&(n.question=NN.toJSON(e.question)),(null===(t=e.answers)||void 0===t?void 0:t.length)&&(n.answers=e.answers.map((e=>ON.toJSON(e)))),n},create:e=>RN.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.ClarifyQuestionWithAnswers",question:void 0,answers:[]};return n.question=void 0!==e.question&&null!==e.question?NN.fromPartial(e.question):void 0,n.answers=(null===(t=e.answers)||void 0===t?void 0:t.map((e=>ON.fromPartial(e))))||[],n}};const LN={$type:"deepl.pb.interactive_text_api.translator.ClarifySelectedAnswer",encode:(e,t=new dw)=>(""!==e.answer&&t.uint32(10).string(e.answer),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.ClarifySelectedAnswer",answer:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.answer=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:LN.$type,answer:xN(e.answer)?globalThis.String(e.answer):""}),toJSON(e){const t={};return""!==e.answer&&(t.answer=e.answer),t},create:e=>LN.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.ClarifySelectedAnswer",answer:""};return n.answer=null!==(t=e.answer)&&void 0!==t?t:"",n}};const CN={$type:"deepl.pb.interactive_text_api.translator.ClarifyFlowId",encode:(e,t=new dw)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.ClarifyFlowId",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:CN.$type,value:xN(e.value)?globalThis.String(e.value):""}),toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>CN.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.ClarifyFlowId",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const PN={$type:"deepl.pb.interactive_text_api.translator.ClarifyQuestionId",encode:(e,t=new dw)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.ClarifyQuestionId",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:PN.$type,value:xN(e.value)?globalThis.String(e.value):""}),toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>PN.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.ClarifyQuestionId",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};function xN(e){return null!=e}const kN={$type:"deepl.pb.interactive_text_api.write.DiffUnitAnnotationPayload",encode:(e,t=new dw)=>(void 0!==e.diffUnitId&&HN.encode(e.diffUnitId,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.DiffUnitAnnotationPayload",diffUnitId:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.diffUnitId=HN.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:kN.$type,diffUnitId:iO(e.diffUnitId)?HN.fromJSON(e.diffUnitId):void 0}),toJSON(e){const t={};return void 0!==e.diffUnitId&&(t.diffUnitId=HN.toJSON(e.diffUnitId)),t},create:e=>kN.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.write.DiffUnitAnnotationPayload",diffUnitId:void 0};return t.diffUnitId=void 0!==e.diffUnitId&&null!==e.diffUnitId?HN.fromPartial(e.diffUnitId):void 0,t}};const DN={$type:"deepl.pb.interactive_text_api.write.ProvidedTextUnitAlternativesAnnotationPayload",encode(e,t=new dw){void 0!==e.flowId&&Sw.encode(e.flowId,t.uint32(10).fork()).join();for(const n of e.alternatives)ZN.encode(n,t.uint32(18).fork()).join();return t},decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.ProvidedTextUnitAlternativesAnnotationPayload",flowId:void 0,alternatives:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=Sw.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.alternatives.push(ZN.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:DN.$type,flowId:iO(e.flowId)?Sw.fromJSON(e.flowId):void 0,alternatives:globalThis.Array.isArray(null==e?void 0:e.alternatives)?e.alternatives.map((e=>ZN.fromJSON(e))):[]}),toJSON(e){var t;const n={};return void 0!==e.flowId&&(n.flowId=Sw.toJSON(e.flowId)),(null===(t=e.alternatives)||void 0===t?void 0:t.length)&&(n.alternatives=e.alternatives.map((e=>ZN.toJSON(e)))),n},create:e=>DN.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.ProvidedTextUnitAlternativesAnnotationPayload",flowId:void 0,alternatives:[]};return n.flowId=void 0!==e.flowId&&null!==e.flowId?Sw.fromPartial(e.flowId):void 0,n.alternatives=(null===(t=e.alternatives)||void 0===t?void 0:t.map((e=>ZN.fromPartial(e))))||[],n}};const UN={$type:"deepl.pb.interactive_text_api.write.ProvidedAutomaticTextUnitAlternativesAnnotationPayload",encode(e,t=new dw){for(const n of e.alternatives)ZN.encode(n,t.uint32(10).fork()).join();return t},decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.ProvidedAutomaticTextUnitAlternativesAnnotationPayload",alternatives:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.alternatives.push(ZN.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:UN.$type,alternatives:globalThis.Array.isArray(null==e?void 0:e.alternatives)?e.alternatives.map((e=>ZN.fromJSON(e))):[]}),toJSON(e){var t;const n={};return(null===(t=e.alternatives)||void 0===t?void 0:t.length)&&(n.alternatives=e.alternatives.map((e=>ZN.toJSON(e)))),n},create:e=>UN.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.ProvidedAutomaticTextUnitAlternativesAnnotationPayload",alternatives:[]};return n.alternatives=(null===(t=e.alternatives)||void 0===t?void 0:t.map((e=>ZN.fromPartial(e))))||[],n}};const MN={$type:"deepl.pb.interactive_text_api.write.LanguagesPropertyValue",encode(e,t=new dw){for(const n of e.languages)KN.encode(n,t.uint32(10).fork()).join();return t},decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.LanguagesPropertyValue",languages:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.languages.push(KN.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:MN.$type,languages:globalThis.Array.isArray(null==e?void 0:e.languages)?e.languages.map((e=>KN.fromJSON(e))):[]}),toJSON(e){var t;const n={};return(null===(t=e.languages)||void 0===t?void 0:t.length)&&(n.languages=e.languages.map((e=>KN.toJSON(e)))),n},create:e=>MN.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.LanguagesPropertyValue",languages:[]};return n.languages=(null===(t=e.languages)||void 0===t?void 0:t.map((e=>KN.fromPartial(e))))||[],n}};const GN={$type:"deepl.pb.interactive_text_api.write.GlossaryLanguagesPropertyValue",encode(e,t=new dw){for(const n of e.languages)KN.encode(n,t.uint32(10).fork()).join();return t},decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.GlossaryLanguagesPropertyValue",languages:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.languages.push(KN.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:GN.$type,languages:globalThis.Array.isArray(null==e?void 0:e.languages)?e.languages.map((e=>KN.fromJSON(e))):[]}),toJSON(e){var t;const n={};return(null===(t=e.languages)||void 0===t?void 0:t.length)&&(n.languages=e.languages.map((e=>KN.toJSON(e)))),n},create:e=>GN.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.GlossaryLanguagesPropertyValue",languages:[]};return n.languages=(null===(t=e.languages)||void 0===t?void 0:t.map((e=>KN.fromPartial(e))))||[],n}};const $N={$type:"deepl.pb.interactive_text_api.write.RequestedLanguagePropertyValue",encode:(e,t=new dw)=>(void 0!==e.language&&KN.encode(e.language,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.RequestedLanguagePropertyValue",language:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.language=KN.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:$N.$type,language:iO(e.language)?KN.fromJSON(e.language):void 0}),toJSON(e){const t={};return void 0!==e.language&&(t.language=KN.toJSON(e.language)),t},create:e=>$N.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.write.RequestedLanguagePropertyValue",language:void 0};return t.language=void 0!==e.language&&null!==e.language?KN.fromPartial(e.language):void 0,t}};const VN={$type:"deepl.pb.interactive_text_api.write.CalculatedLanguagePropertyValue",encode:(e,t=new dw)=>(void 0!==e.language&&KN.encode(e.language,t.uint32(10).fork()).join(),0!==e.origin&&t.uint32(16).int32(e.origin),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.CalculatedLanguagePropertyValue",language:void 0,origin:0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.language=KN.decode(n,n.uint32());continue;case 2:if(16!==e)break;o.origin=n.int32();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:VN.$type,language:iO(e.language)?KN.fromJSON(e.language):void 0,origin:iO(e.origin)?Fw(e.origin):0}),toJSON(e){const t={};return void 0!==e.language&&(t.language=KN.toJSON(e.language)),0!==e.origin&&(t.origin=jw(e.origin)),t},create:e=>VN.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.CalculatedLanguagePropertyValue",language:void 0,origin:0};return n.language=void 0!==e.language&&null!==e.language?KN.fromPartial(e.language):void 0,n.origin=null!==(t=e.origin)&&void 0!==t?t:0,n}};const FN={$type:"deepl.pb.interactive_text_api.write.GlossaryIdPropertyValue",encode:(e,t=new dw)=>(void 0!==e.glossaryId&&Gw.encode(e.glossaryId,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.GlossaryIdPropertyValue",glossaryId:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.glossaryId=Gw.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:FN.$type,glossaryId:iO(e.glossaryId)?Gw.fromJSON(e.glossaryId):void 0}),toJSON(e){const t={};return void 0!==e.glossaryId&&(t.glossaryId=Gw.toJSON(e.glossaryId)),t},create:e=>FN.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.write.GlossaryIdPropertyValue",glossaryId:void 0};return t.glossaryId=void 0!==e.glossaryId&&null!==e.glossaryId?Gw.fromPartial(e.glossaryId):void 0,t}};const jN={$type:"deepl.pb.interactive_text_api.write.MaximumTextLengthPropertyValue",encode:(e,t=new dw)=>(0!==e.max&&t.uint32(8).int32(e.max),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.MaximumTextLengthPropertyValue",max:0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(8!==e)break;o.max=n.int32();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:jN.$type,max:iO(e.max)?globalThis.Number(e.max):0}),toJSON(e){const t={};return 0!==e.max&&(t.max=Math.round(e.max)),t},create:e=>jN.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.MaximumTextLengthPropertyValue",max:0};return n.max=null!==(t=e.max)&&void 0!==t?t:0,n}};const WN={$type:"deepl.pb.interactive_text_api.write.StyleVariantsPropertyValue",encode(e,t=new dw){for(const n of e.styleVariants)eO.encode(n,t.uint32(10).fork()).join();return t},decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.StyleVariantsPropertyValue",styleVariants:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.styleVariants.push(eO.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:WN.$type,styleVariants:globalThis.Array.isArray(null==e?void 0:e.styleVariants)?e.styleVariants.map((e=>eO.fromJSON(e))):[]}),toJSON(e){var t;const n={};return(null===(t=e.styleVariants)||void 0===t?void 0:t.length)&&(n.styleVariants=e.styleVariants.map((e=>eO.toJSON(e)))),n},create:e=>WN.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.StyleVariantsPropertyValue",styleVariants:[]};return n.styleVariants=(null===(t=e.styleVariants)||void 0===t?void 0:t.map((e=>eO.fromPartial(e))))||[],n}};const qN={$type:"deepl.pb.interactive_text_api.write.StyleVariantPropertyValue",encode:(e,t=new dw)=>(void 0!==e.styleVariant&&eO.encode(e.styleVariant,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.StyleVariantPropertyValue",styleVariant:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.styleVariant=eO.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:qN.$type,styleVariant:iO(e.styleVariant)?eO.fromJSON(e.styleVariant):void 0}),toJSON(e){const t={};return void 0!==e.styleVariant&&(t.styleVariant=eO.toJSON(e.styleVariant)),t},create:e=>qN.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.write.StyleVariantPropertyValue",styleVariant:void 0};return t.styleVariant=void 0!==e.styleVariant&&null!==e.styleVariant?eO.fromPartial(e.styleVariant):void 0,t}};const BN={$type:"deepl.pb.interactive_text_api.write.UnsupportedLanguagePropertyValue",encode:(e,t=new dw)=>t,decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.UnsupportedLanguagePropertyValue"};for(;n.pos<r;){const e=n.uint32();if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:BN.$type}),toJSON:e=>({}),create:e=>BN.fromPartial(null!=e?e:{}),fromPartial:e=>({$type:"deepl.pb.interactive_text_api.write.UnsupportedLanguagePropertyValue"})};const HN={$type:"deepl.pb.interactive_text_api.write.DiffUnitId",encode:(e,t=new dw)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.DiffUnitId",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:HN.$type,value:iO(e.value)?globalThis.String(e.value):""}),toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>HN.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.DiffUnitId",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const JN={$type:"deepl.pb.interactive_text_api.write.GlossaryEntry",encode:(e,t=new dw)=>(""!==e.term&&t.uint32(10).string(e.term),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.GlossaryEntry",term:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.term=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:JN.$type,term:iO(e.term)?globalThis.String(e.term):""}),toJSON(e){const t={};return""!==e.term&&(t.term=e.term),t},create:e=>JN.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.GlossaryEntry",term:""};return n.term=null!==(t=e.term)&&void 0!==t?t:"",n}};const YN={$type:"deepl.pb.interactive_text_api.write.GlossaryListPropertyValue",encode(e,t=new dw){for(const n of e.glossaryEntries)JN.encode(n,t.uint32(10).fork()).join();return t},decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.GlossaryListPropertyValue",glossaryEntries:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.glossaryEntries.push(JN.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:YN.$type,glossaryEntries:globalThis.Array.isArray(null==e?void 0:e.glossaryEntries)?e.glossaryEntries.map((e=>JN.fromJSON(e))):[]}),toJSON(e){var t;const n={};return(null===(t=e.glossaryEntries)||void 0===t?void 0:t.length)&&(n.glossaryEntries=e.glossaryEntries.map((e=>JN.toJSON(e)))),n},create:e=>YN.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.GlossaryListPropertyValue",glossaryEntries:[]};return n.glossaryEntries=(null===(t=e.glossaryEntries)||void 0===t?void 0:t.map((e=>JN.fromPartial(e))))||[],n}};const zN={$type:"deepl.pb.interactive_text_api.write.GlossarySupportPropertyValue",encode:(e,t=new dw)=>t,decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.GlossarySupportPropertyValue"};for(;n.pos<r;){const e=n.uint32();if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:zN.$type}),toJSON:e=>({}),create:e=>zN.fromPartial(null!=e?e:{}),fromPartial:e=>({$type:"deepl.pb.interactive_text_api.write.GlossarySupportPropertyValue"})};const XN={$type:"deepl.pb.interactive_text_api.write.GlossaryHighlight",encode(e,t=new dw){void 0!==e.entry&&JN.encode(e.entry,t.uint32(10).fork()).join();for(const n of e.ranges)xw.encode(n,t.uint32(18).fork()).join();return t},decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.GlossaryHighlight",entry:void 0,ranges:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.entry=JN.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.ranges.push(xw.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:XN.$type,entry:iO(e.entry)?JN.fromJSON(e.entry):void 0,ranges:globalThis.Array.isArray(null==e?void 0:e.ranges)?e.ranges.map((e=>xw.fromJSON(e))):[]}),toJSON(e){var t;const n={};return void 0!==e.entry&&(n.entry=JN.toJSON(e.entry)),(null===(t=e.ranges)||void 0===t?void 0:t.length)&&(n.ranges=e.ranges.map((e=>xw.toJSON(e)))),n},create:e=>XN.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.GlossaryHighlight",entry:void 0,ranges:[]};return n.entry=void 0!==e.entry&&null!==e.entry?JN.fromPartial(e.entry):void 0,n.ranges=(null===(t=e.ranges)||void 0===t?void 0:t.map((e=>xw.fromPartial(e))))||[],n}};const KN={$type:"deepl.pb.interactive_text_api.write.Language",encode:(e,t=new dw)=>(""!==e.code&&t.uint32(10).string(e.code),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.Language",code:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.code=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:KN.$type,code:iO(e.code)?globalThis.String(e.code):""}),toJSON(e){const t={};return""!==e.code&&(t.code=e.code),t},create:e=>KN.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.Language",code:""};return n.code=null!==(t=e.code)&&void 0!==t?t:"",n}};const QN={$type:"deepl.pb.interactive_text_api.write.TextUnitAlternativeDiff",encode:(e,t=new dw)=>(void 0!==e.sourceRange&&xw.encode(e.sourceRange,t.uint32(10).fork()).join(),void 0!==e.alternativeRange&&xw.encode(e.alternativeRange,t.uint32(18).fork()).join(),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.TextUnitAlternativeDiff",sourceRange:void 0,alternativeRange:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.sourceRange=xw.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.alternativeRange=xw.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:QN.$type,sourceRange:iO(e.sourceRange)?xw.fromJSON(e.sourceRange):void 0,alternativeRange:iO(e.alternativeRange)?xw.fromJSON(e.alternativeRange):void 0}),toJSON(e){const t={};return void 0!==e.sourceRange&&(t.sourceRange=xw.toJSON(e.sourceRange)),void 0!==e.alternativeRange&&(t.alternativeRange=xw.toJSON(e.alternativeRange)),t},create:e=>QN.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.write.TextUnitAlternativeDiff",sourceRange:void 0,alternativeRange:void 0};return t.sourceRange=void 0!==e.sourceRange&&null!==e.sourceRange?xw.fromPartial(e.sourceRange):void 0,t.alternativeRange=void 0!==e.alternativeRange&&null!==e.alternativeRange?xw.fromPartial(e.alternativeRange):void 0,t}};const ZN={$type:"deepl.pb.interactive_text_api.write.TextUnitAlternative",encode(e,t=new dw){""!==e.text&&t.uint32(10).string(e.text);for(const n of e.glossaryHighlights)XN.encode(n,t.uint32(18).fork()).join();for(const n of e.diffs)QN.encode(n,t.uint32(26).fork()).join();return t},decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.TextUnitAlternative",text:"",glossaryHighlights:[],diffs:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.text=n.string();continue;case 2:if(18!==e)break;o.glossaryHighlights.push(XN.decode(n,n.uint32()));continue;case 3:if(26!==e)break;o.diffs.push(QN.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:ZN.$type,text:iO(e.text)?globalThis.String(e.text):"",glossaryHighlights:globalThis.Array.isArray(null==e?void 0:e.glossaryHighlights)?e.glossaryHighlights.map((e=>XN.fromJSON(e))):[],diffs:globalThis.Array.isArray(null==e?void 0:e.diffs)?e.diffs.map((e=>QN.fromJSON(e))):[]}),toJSON(e){var t,n;const r={};return""!==e.text&&(r.text=e.text),(null===(t=e.glossaryHighlights)||void 0===t?void 0:t.length)&&(r.glossaryHighlights=e.glossaryHighlights.map((e=>XN.toJSON(e)))),(null===(n=e.diffs)||void 0===n?void 0:n.length)&&(r.diffs=e.diffs.map((e=>QN.toJSON(e)))),r},create:e=>ZN.fromPartial(null!=e?e:{}),fromPartial(e){var t,n,r;const o={$type:"deepl.pb.interactive_text_api.write.TextUnitAlternative",text:"",glossaryHighlights:[],diffs:[]};return o.text=null!==(t=e.text)&&void 0!==t?t:"",o.glossaryHighlights=(null===(n=e.glossaryHighlights)||void 0===n?void 0:n.map((e=>XN.fromPartial(e))))||[],o.diffs=(null===(r=e.diffs)||void 0===r?void 0:r.map((e=>QN.fromPartial(e))))||[],o}};const eO={$type:"deepl.pb.interactive_text_api.write.StyleVariant",encode:(e,t=new dw)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.StyleVariant",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:eO.$type,value:iO(e.value)?globalThis.String(e.value):""}),toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>eO.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.StyleVariant",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const tO={$type:"deepl.pb.interactive_text_api.write.ChangeStyleAlternativesFlowId",encode:(e,t=new dw)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.ChangeStyleAlternativesFlowId",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:tO.$type,value:iO(e.value)?globalThis.String(e.value):""}),toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>tO.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.ChangeStyleAlternativesFlowId",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const nO={$type:"deepl.pb.interactive_text_api.write.RequestChangeStyleAlternativesAnnotationPayload",encode:(e,t=new dw)=>(void 0!==e.flowId&&tO.encode(e.flowId,t.uint32(10).fork()).join(),void 0!==e.styleVariant&&eO.encode(e.styleVariant,t.uint32(18).fork()).join(),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.RequestChangeStyleAlternativesAnnotationPayload",flowId:void 0,styleVariant:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=tO.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.styleVariant=eO.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:nO.$type,flowId:iO(e.flowId)?tO.fromJSON(e.flowId):void 0,styleVariant:iO(e.styleVariant)?eO.fromJSON(e.styleVariant):void 0}),toJSON(e){const t={};return void 0!==e.flowId&&(t.flowId=tO.toJSON(e.flowId)),void 0!==e.styleVariant&&(t.styleVariant=eO.toJSON(e.styleVariant)),t},create:e=>nO.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.write.RequestChangeStyleAlternativesAnnotationPayload",flowId:void 0,styleVariant:void 0};return t.flowId=void 0!==e.flowId&&null!==e.flowId?tO.fromPartial(e.flowId):void 0,t.styleVariant=void 0!==e.styleVariant&&null!==e.styleVariant?eO.fromPartial(e.styleVariant):void 0,t}};const rO={$type:"deepl.pb.interactive_text_api.write.ChangeStyleAlternative",encode:(e,t=new dw)=>(""!==e.text&&t.uint32(10).string(e.text),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.ChangeStyleAlternative",text:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.text=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:rO.$type,text:iO(e.text)?globalThis.String(e.text):""}),toJSON(e){const t={};return""!==e.text&&(t.text=e.text),t},create:e=>rO.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.ChangeStyleAlternative",text:""};return n.text=null!==(t=e.text)&&void 0!==t?t:"",n}};const oO={$type:"deepl.pb.interactive_text_api.write.ProvidedChangeStyleAlternativesAnnotationPayload",encode(e,t=new dw){void 0!==e.flowId&&Sw.encode(e.flowId,t.uint32(10).fork()).join();for(const n of e.alternatives)rO.encode(n,t.uint32(18).fork()).join();return t},decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.ProvidedChangeStyleAlternativesAnnotationPayload",flowId:void 0,alternatives:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=Sw.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.alternatives.push(rO.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:oO.$type,flowId:iO(e.flowId)?Sw.fromJSON(e.flowId):void 0,alternatives:globalThis.Array.isArray(null==e?void 0:e.alternatives)?e.alternatives.map((e=>rO.fromJSON(e))):[]}),toJSON(e){var t;const n={};return void 0!==e.flowId&&(n.flowId=Sw.toJSON(e.flowId)),(null===(t=e.alternatives)||void 0===t?void 0:t.length)&&(n.alternatives=e.alternatives.map((e=>rO.toJSON(e)))),n},create:e=>oO.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.ProvidedChangeStyleAlternativesAnnotationPayload",flowId:void 0,alternatives:[]};return n.flowId=void 0!==e.flowId&&null!==e.flowId?Sw.fromPartial(e.flowId):void 0,n.alternatives=(null===(t=e.alternatives)||void 0===t?void 0:t.map((e=>rO.fromPartial(e))))||[],n}};const aO={$type:"deepl.pb.interactive_text_api.write.SelectChangeStyleAlternativeAnnotationPayload",encode:(e,t=new dw)=>(void 0!==e.flowId&&tO.encode(e.flowId,t.uint32(10).fork()).join(),""!==e.selection&&t.uint32(18).string(e.selection),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.SelectChangeStyleAlternativeAnnotationPayload",flowId:void 0,selection:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=tO.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.selection=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:aO.$type,flowId:iO(e.flowId)?tO.fromJSON(e.flowId):void 0,selection:iO(e.selection)?globalThis.String(e.selection):""}),toJSON(e){const t={};return void 0!==e.flowId&&(t.flowId=tO.toJSON(e.flowId)),""!==e.selection&&(t.selection=e.selection),t},create:e=>aO.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.SelectChangeStyleAlternativeAnnotationPayload",flowId:void 0,selection:""};return n.flowId=void 0!==e.flowId&&null!==e.flowId?tO.fromPartial(e.flowId):void 0,n.selection=null!==(t=e.selection)&&void 0!==t?t:"",n}};function iO(e){return null!=e}var sO,cO,lO;function uO(e){switch(e){case 0:case"FIELD_NAME_UNSPECIFIED":return sO.UNSPECIFIED;case 1:case"FIELD_NAME_TRANSLATOR_SOURCE_TEXT":return sO.TRANSLATOR_SOURCE_TEXT;case 2:case"FIELD_NAME_TRANSLATOR_TARGET_TEXT":return sO.TRANSLATOR_TARGET_TEXT;case 4:case"FIELD_NAME_TRANSLATOR_TARGET_TRANSCRIPTION_TEXT":return sO.TRANSLATOR_TARGET_TRANSCRIPTION_TEXT;case 5:case"FIELD_NAME_WRITE_SOURCE_TEXT":return sO.WRITE_SOURCE_TEXT;case 6:case"FIELD_NAME_WRITE_TARGET_TEXT":return sO.WRITE_TARGET_TEXT;default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum FieldName")}}function dO(e){switch(e){case sO.UNSPECIFIED:return"FIELD_NAME_UNSPECIFIED";case sO.TRANSLATOR_SOURCE_TEXT:return"FIELD_NAME_TRANSLATOR_SOURCE_TEXT";case sO.TRANSLATOR_TARGET_TEXT:return"FIELD_NAME_TRANSLATOR_TARGET_TEXT";case sO.TRANSLATOR_TARGET_TRANSCRIPTION_TEXT:return"FIELD_NAME_TRANSLATOR_TARGET_TRANSCRIPTION_TEXT";case sO.WRITE_SOURCE_TEXT:return"FIELD_NAME_WRITE_SOURCE_TEXT";case sO.WRITE_TARGET_TEXT:return"FIELD_NAME_WRITE_TARGET_TEXT";default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum FieldName")}}function pO(e){switch(e){case 0:case"PROPERTY_NAME_UNSPECIFIED":return cO.UNSPECIFIED;case 1:case"PROPERTY_NAME_TRANSLATOR_SOURCE_LANGUAGES":return cO.TRANSLATOR_SOURCE_LANGUAGES;case 2:case"PROPERTY_NAME_TRANSLATOR_TARGET_LANGUAGES":return cO.TRANSLATOR_TARGET_LANGUAGES;case 3:case"PROPERTY_NAME_TRANSLATOR_REQUESTED_SOURCE_LANGUAGE":return cO.TRANSLATOR_REQUESTED_SOURCE_LANGUAGE;case 4:case"PROPERTY_NAME_TRANSLATOR_CALCULATED_SOURCE_LANGUAGE":return cO.TRANSLATOR_CALCULATED_SOURCE_LANGUAGE;case 5:case"PROPERTY_NAME_TRANSLATOR_REQUESTED_TARGET_LANGUAGE":return cO.TRANSLATOR_REQUESTED_TARGET_LANGUAGE;case 7:case"PROPERTY_NAME_TRANSLATOR_FORMALITY_MODES":return cO.TRANSLATOR_FORMALITY_MODES;case 8:case"PROPERTY_NAME_TRANSLATOR_FORMALITY_MODE":return cO.TRANSLATOR_FORMALITY_MODE;case 9:case"PROPERTY_NAME_TRANSLATOR_GLOSSARY_SUPPORT":return cO.TRANSLATOR_GLOSSARY_SUPPORT;case 10:case"PROPERTY_NAME_TRANSLATOR_GLOSSARY_LIST":return cO.TRANSLATOR_GLOSSARY_LIST;case 12:case"PROPERTY_NAME_TRANSLATOR_TEXT_DIRECTION":return cO.TRANSLATOR_TEXT_DIRECTION;case 13:case"PROPERTY_NAME_TRANSLATOR_GLOSSARY_SUGGESTIONS":return cO.TRANSLATOR_GLOSSARY_SUGGESTIONS;case 14:case"PROPERTY_NAME_TRANSLATOR_MAXIMUM_TEXT_LENGTH":return cO.TRANSLATOR_MAXIMUM_TEXT_LENGTH;case 15:case"PROPERTY_NAME_TRANSLATOR_LANGUAGE_MODELS":return cO.TRANSLATOR_LANGUAGE_MODELS;case 16:case"PROPERTY_NAME_TRANSLATOR_LANGUAGE_MODEL":return cO.TRANSLATOR_LANGUAGE_MODEL;case 17:case"PROPERTY_NAME_TRANSLATOR_GLOSSARY_ID":return cO.TRANSLATOR_GLOSSARY_ID;case 18:case"PROPERTY_NAME_TRANSLATOR_CALCULATED_TARGET_LANGUAGE":return cO.TRANSLATOR_CALCULATED_TARGET_LANGUAGE;case 19:case"PROPERTY_NAME_TRANSLATOR_UNSUPPORTED_SOURCE_LANGUAGE":return cO.TRANSLATOR_UNSUPPORTED_SOURCE_LANGUAGE;case 20:case"PROPERTY_NAME_WRITE_LANGUAGES":return cO.WRITE_LANGUAGES;case 21:case"PROPERTY_NAME_WRITE_REQUESTED_LANGUAGE":return cO.WRITE_REQUESTED_LANGUAGE;case 22:case"PROPERTY_NAME_WRITE_CALCULATED_LANGUAGE":return cO.WRITE_CALCULATED_LANGUAGE;case 23:case"PROPERTY_NAME_WRITE_STYLE_VARIANTS":return cO.WRITE_STYLE_VARIANTS;case 24:case"PROPERTY_NAME_WRITE_STYLE_VARIANT":return cO.WRITE_STYLE_VARIANT;case 25:case"PROPERTY_NAME_WRITE_GLOSSARY_ID":return cO.WRITE_GLOSSARY_ID;case 26:case"PROPERTY_NAME_WRITE_GLOSSARY_LIST":return cO.WRITE_GLOSSARY_LIST;case 27:case"PROPERTY_NAME_WRITE_GLOSSARY_SUPPORT":return cO.WRITE_GLOSSARY_SUPPORT;case 28:case"PROPERTY_NAME_WRITE_MAXIMUM_TEXT_LENGTH":return cO.WRITE_MAXIMUM_TEXT_LENGTH;case 29:case"PROPERTY_NAME_WRITE_UNSUPPORTED_LANGUAGE":return cO.WRITE_UNSUPPORTED_LANGUAGE;case 30:case"PROPERTY_NAME_TRANSLATOR_SOURCE_LANGUAGE_DETECTION_WEIGHTS":return cO.TRANSLATOR_SOURCE_LANGUAGE_DETECTION_WEIGHTS;case 31:case"PROPERTY_NAME_WRITE_GLOSSARY_LANGUAGES":return cO.WRITE_GLOSSARY_LANGUAGES;default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum PropertyName")}}function gO(e){switch(e){case 0:case"SESSION_MODE_UNSPECIFIED":return lO.UNSPECIFIED;case 1:case"SESSION_MODE_TRANSLATOR":return lO.TRANSLATOR;case 2:case"SESSION_MODE_WRITE":return lO.WRITE;default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum SessionMode")}}!function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.TRANSLATOR_SOURCE_TEXT=1]="TRANSLATOR_SOURCE_TEXT",e[e.TRANSLATOR_TARGET_TEXT=2]="TRANSLATOR_TARGET_TEXT",e[e.TRANSLATOR_TARGET_TRANSCRIPTION_TEXT=4]="TRANSLATOR_TARGET_TRANSCRIPTION_TEXT",e[e.WRITE_SOURCE_TEXT=5]="WRITE_SOURCE_TEXT",e[e.WRITE_TARGET_TEXT=6]="WRITE_TARGET_TEXT"}(sO||(sO={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.TRANSLATOR_SOURCE_LANGUAGES=1]="TRANSLATOR_SOURCE_LANGUAGES",e[e.TRANSLATOR_TARGET_LANGUAGES=2]="TRANSLATOR_TARGET_LANGUAGES",e[e.TRANSLATOR_REQUESTED_SOURCE_LANGUAGE=3]="TRANSLATOR_REQUESTED_SOURCE_LANGUAGE",e[e.TRANSLATOR_CALCULATED_SOURCE_LANGUAGE=4]="TRANSLATOR_CALCULATED_SOURCE_LANGUAGE",e[e.TRANSLATOR_REQUESTED_TARGET_LANGUAGE=5]="TRANSLATOR_REQUESTED_TARGET_LANGUAGE",e[e.TRANSLATOR_FORMALITY_MODES=7]="TRANSLATOR_FORMALITY_MODES",e[e.TRANSLATOR_FORMALITY_MODE=8]="TRANSLATOR_FORMALITY_MODE",e[e.TRANSLATOR_GLOSSARY_SUPPORT=9]="TRANSLATOR_GLOSSARY_SUPPORT",e[e.TRANSLATOR_GLOSSARY_LIST=10]="TRANSLATOR_GLOSSARY_LIST",e[e.TRANSLATOR_TEXT_DIRECTION=12]="TRANSLATOR_TEXT_DIRECTION",e[e.TRANSLATOR_GLOSSARY_SUGGESTIONS=13]="TRANSLATOR_GLOSSARY_SUGGESTIONS",e[e.TRANSLATOR_MAXIMUM_TEXT_LENGTH=14]="TRANSLATOR_MAXIMUM_TEXT_LENGTH",e[e.TRANSLATOR_LANGUAGE_MODELS=15]="TRANSLATOR_LANGUAGE_MODELS",e[e.TRANSLATOR_LANGUAGE_MODEL=16]="TRANSLATOR_LANGUAGE_MODEL",e[e.TRANSLATOR_GLOSSARY_ID=17]="TRANSLATOR_GLOSSARY_ID",e[e.TRANSLATOR_CALCULATED_TARGET_LANGUAGE=18]="TRANSLATOR_CALCULATED_TARGET_LANGUAGE",e[e.TRANSLATOR_UNSUPPORTED_SOURCE_LANGUAGE=19]="TRANSLATOR_UNSUPPORTED_SOURCE_LANGUAGE",e[e.WRITE_LANGUAGES=20]="WRITE_LANGUAGES",e[e.WRITE_REQUESTED_LANGUAGE=21]="WRITE_REQUESTED_LANGUAGE",e[e.WRITE_CALCULATED_LANGUAGE=22]="WRITE_CALCULATED_LANGUAGE",e[e.WRITE_STYLE_VARIANTS=23]="WRITE_STYLE_VARIANTS",e[e.WRITE_STYLE_VARIANT=24]="WRITE_STYLE_VARIANT",e[e.WRITE_GLOSSARY_ID=25]="WRITE_GLOSSARY_ID",e[e.WRITE_GLOSSARY_LIST=26]="WRITE_GLOSSARY_LIST",e[e.WRITE_GLOSSARY_SUPPORT=27]="WRITE_GLOSSARY_SUPPORT",e[e.WRITE_MAXIMUM_TEXT_LENGTH=28]="WRITE_MAXIMUM_TEXT_LENGTH",e[e.WRITE_UNSUPPORTED_LANGUAGE=29]="WRITE_UNSUPPORTED_LANGUAGE",e[e.TRANSLATOR_SOURCE_LANGUAGE_DETECTION_WEIGHTS=30]="TRANSLATOR_SOURCE_LANGUAGE_DETECTION_WEIGHTS",e[e.WRITE_GLOSSARY_LANGUAGES=31]="WRITE_GLOSSARY_LANGUAGES"}(cO||(cO={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.TRANSLATOR=1]="TRANSLATOR",e[e.WRITE=2]="WRITE"}(lO||(lO={}));const hO={$type:"deepl.pb.interactive_text_api.TextChangeOperation",encode:(e,t=new dw)=>(void 0!==e.range&&xw.encode(e.range,t.uint32(10).fork()).join(),""!==e.text&&t.uint32(18).string(e.text),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.TextChangeOperation",range:void 0,text:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.range=xw.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.text=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:hO.$type,range:$O(e.range)?xw.fromJSON(e.range):void 0,text:$O(e.text)?globalThis.String(e.text):""}),toJSON(e){const t={};return void 0!==e.range&&(t.range=xw.toJSON(e.range)),""!==e.text&&(t.text=e.text),t},create:e=>hO.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.TextChangeOperation",range:void 0,text:""};return n.range=void 0!==e.range&&null!==e.range?xw.fromPartial(e.range):void 0,n.text=null!==(t=e.text)&&void 0!==t?t:"",n}};const fO={$type:"deepl.pb.interactive_text_api.CreateAnnotationOperation",encode:(e,t=new dw)=>(void 0!==e.annotationId&&kO.encode(e.annotationId,t.uint32(10).fork()).join(),void 0!==e.range&&xw.encode(e.range,t.uint32(18).fork()).join(),void 0!==e.textUnitPayload&&Uw.encode(e.textUnitPayload,t.uint32(26).fork()).join(),void 0!==e.requestWordAlternativesPayload&&bw.encode(e.requestWordAlternativesPayload,t.uint32(34).fork()).join(),void 0!==e.providedWordAlternativesPayload&&Ew.encode(e.providedWordAlternativesPayload,t.uint32(42).fork()).join(),void 0!==e.selectWordAlternativePayload&&Ow.encode(e.selectWordAlternativePayload,t.uint32(50).fork()).join(),void 0!==e.translatorGlossaryReplacementPayload&&Jw.encode(e.translatorGlossaryReplacementPayload,t.uint32(58).fork()).join(),void 0!==e.requestTextUnitAlternativesPayload&&Iw.encode(e.requestTextUnitAlternativesPayload,t.uint32(66).fork()).join(),void 0!==e.translatorProvidedTextUnitAlternativesPayload&&Yw.encode(e.translatorProvidedTextUnitAlternativesPayload,t.uint32(74).fork()).join(),void 0!==e.selectTextUnitAlternativePayload&&ww.encode(e.selectTextUnitAlternativePayload,t.uint32(82).fork()).join(),void 0!==e.translatorRequestAutocompletionPayload&&qw.encode(e.translatorRequestAutocompletionPayload,t.uint32(90).fork()).join(),void 0!==e.translatorProvidedAutocompletionPayload&&Bw.encode(e.translatorProvidedAutocompletionPayload,t.uint32(98).fork()).join(),void 0!==e.translatorSelectAutocompletionPayload&&Hw.encode(e.translatorSelectAutocompletionPayload,t.uint32(106).fork()).join(),void 0!==e.translatorProvidedAutomaticTextUnitAlternativesPayload&&zw.encode(e.translatorProvidedAutomaticTextUnitAlternativesPayload,t.uint32(114).fork()).join(),void 0!==e.selectAutomaticTextUnitAlternativePayload&&Aw.encode(e.selectAutomaticTextUnitAlternativePayload,t.uint32(122).fork()).join(),void 0!==e.writeDiffUnitPayload&&kN.encode(e.writeDiffUnitPayload,t.uint32(130).fork()).join(),void 0!==e.textFormattingPayload&&Cw.encode(e.textFormattingPayload,t.uint32(138).fork()).join(),void 0!==e.writeProvidedTextUnitAlternativesPayload&&DN.encode(e.writeProvidedTextUnitAlternativesPayload,t.uint32(146).fork()).join(),void 0!==e.writeProvidedAutomaticTextUnitAlternativesPayload&&UN.encode(e.writeProvidedAutomaticTextUnitAlternativesPayload,t.uint32(154).fork()).join(),void 0!==e.translatorRequestClarifyPayload&&Xw.encode(e.translatorRequestClarifyPayload,t.uint32(162).fork()).join(),void 0!==e.translatorProvidedClarifyQuestionPayload&&Qw.encode(e.translatorProvidedClarifyQuestionPayload,t.uint32(170).fork()).join(),void 0!==e.translatorProvidedClarifyHighlightPayload&&Kw.encode(e.translatorProvidedClarifyHighlightPayload,t.uint32(178).fork()).join(),void 0!==e.translatorSelectClarifyAnswerPayload&&Zw.encode(e.translatorSelectClarifyAnswerPayload,t.uint32(186).fork()).join(),void 0!==e.writeRequestChangeStyleAlternativesAnnotationPayload&&nO.encode(e.writeRequestChangeStyleAlternativesAnnotationPayload,t.uint32(194).fork()).join(),void 0!==e.writeProvidedChangeStyleAlternativesAnnotationPayload&&oO.encode(e.writeProvidedChangeStyleAlternativesAnnotationPayload,t.uint32(202).fork()).join(),void 0!==e.writeSelectChangeStyleAlternativeAnnotationPayload&&aO.encode(e.writeSelectChangeStyleAlternativeAnnotationPayload,t.uint32(210).fork()).join(),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.CreateAnnotationOperation",annotationId:void 0,range:void 0,textUnitPayload:void 0,requestWordAlternativesPayload:void 0,providedWordAlternativesPayload:void 0,selectWordAlternativePayload:void 0,translatorGlossaryReplacementPayload:void 0,requestTextUnitAlternativesPayload:void 0,translatorProvidedTextUnitAlternativesPayload:void 0,selectTextUnitAlternativePayload:void 0,translatorRequestAutocompletionPayload:void 0,translatorProvidedAutocompletionPayload:void 0,translatorSelectAutocompletionPayload:void 0,translatorProvidedAutomaticTextUnitAlternativesPayload:void 0,selectAutomaticTextUnitAlternativePayload:void 0,writeDiffUnitPayload:void 0,textFormattingPayload:void 0,writeProvidedTextUnitAlternativesPayload:void 0,writeProvidedAutomaticTextUnitAlternativesPayload:void 0,translatorRequestClarifyPayload:void 0,translatorProvidedClarifyQuestionPayload:void 0,translatorProvidedClarifyHighlightPayload:void 0,translatorSelectClarifyAnswerPayload:void 0,writeRequestChangeStyleAlternativesAnnotationPayload:void 0,writeProvidedChangeStyleAlternativesAnnotationPayload:void 0,writeSelectChangeStyleAlternativeAnnotationPayload:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.annotationId=kO.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.range=xw.decode(n,n.uint32());continue;case 3:if(26!==e)break;o.textUnitPayload=Uw.decode(n,n.uint32());continue;case 4:if(34!==e)break;o.requestWordAlternativesPayload=bw.decode(n,n.uint32());continue;case 5:if(42!==e)break;o.providedWordAlternativesPayload=Ew.decode(n,n.uint32());continue;case 6:if(50!==e)break;o.selectWordAlternativePayload=Ow.decode(n,n.uint32());continue;case 7:if(58!==e)break;o.translatorGlossaryReplacementPayload=Jw.decode(n,n.uint32());continue;case 8:if(66!==e)break;o.requestTextUnitAlternativesPayload=Iw.decode(n,n.uint32());continue;case 9:if(74!==e)break;o.translatorProvidedTextUnitAlternativesPayload=Yw.decode(n,n.uint32());continue;case 10:if(82!==e)break;o.selectTextUnitAlternativePayload=ww.decode(n,n.uint32());continue;case 11:if(90!==e)break;o.translatorRequestAutocompletionPayload=qw.decode(n,n.uint32());continue;case 12:if(98!==e)break;o.translatorProvidedAutocompletionPayload=Bw.decode(n,n.uint32());continue;case 13:if(106!==e)break;o.translatorSelectAutocompletionPayload=Hw.decode(n,n.uint32());continue;case 14:if(114!==e)break;o.translatorProvidedAutomaticTextUnitAlternativesPayload=zw.decode(n,n.uint32());continue;case 15:if(122!==e)break;o.selectAutomaticTextUnitAlternativePayload=Aw.decode(n,n.uint32());continue;case 16:if(130!==e)break;o.writeDiffUnitPayload=kN.decode(n,n.uint32());continue;case 17:if(138!==e)break;o.textFormattingPayload=Cw.decode(n,n.uint32());continue;case 18:if(146!==e)break;o.writeProvidedTextUnitAlternativesPayload=DN.decode(n,n.uint32());continue;case 19:if(154!==e)break;o.writeProvidedAutomaticTextUnitAlternativesPayload=UN.decode(n,n.uint32());continue;case 20:if(162!==e)break;o.translatorRequestClarifyPayload=Xw.decode(n,n.uint32());continue;case 21:if(170!==e)break;o.translatorProvidedClarifyQuestionPayload=Qw.decode(n,n.uint32());continue;case 22:if(178!==e)break;o.translatorProvidedClarifyHighlightPayload=Kw.decode(n,n.uint32());continue;case 23:if(186!==e)break;o.translatorSelectClarifyAnswerPayload=Zw.decode(n,n.uint32());continue;case 24:if(194!==e)break;o.writeRequestChangeStyleAlternativesAnnotationPayload=nO.decode(n,n.uint32());continue;case 25:if(202!==e)break;o.writeProvidedChangeStyleAlternativesAnnotationPayload=oO.decode(n,n.uint32());continue;case 26:if(210!==e)break;o.writeSelectChangeStyleAlternativeAnnotationPayload=aO.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:fO.$type,annotationId:$O(e.annotationId)?kO.fromJSON(e.annotationId):void 0,range:$O(e.range)?xw.fromJSON(e.range):void 0,textUnitPayload:$O(e.textUnitPayload)?Uw.fromJSON(e.textUnitPayload):void 0,requestWordAlternativesPayload:$O(e.requestWordAlternativesPayload)?bw.fromJSON(e.requestWordAlternativesPayload):void 0,providedWordAlternativesPayload:$O(e.providedWordAlternativesPayload)?Ew.fromJSON(e.providedWordAlternativesPayload):void 0,selectWordAlternativePayload:$O(e.selectWordAlternativePayload)?Ow.fromJSON(e.selectWordAlternativePayload):void 0,translatorGlossaryReplacementPayload:$O(e.translatorGlossaryReplacementPayload)?Jw.fromJSON(e.translatorGlossaryReplacementPayload):void 0,requestTextUnitAlternativesPayload:$O(e.requestTextUnitAlternativesPayload)?Iw.fromJSON(e.requestTextUnitAlternativesPayload):void 0,translatorProvidedTextUnitAlternativesPayload:$O(e.translatorProvidedTextUnitAlternativesPayload)?Yw.fromJSON(e.translatorProvidedTextUnitAlternativesPayload):void 0,selectTextUnitAlternativePayload:$O(e.selectTextUnitAlternativePayload)?ww.fromJSON(e.selectTextUnitAlternativePayload):void 0,translatorRequestAutocompletionPayload:$O(e.translatorRequestAutocompletionPayload)?qw.fromJSON(e.translatorRequestAutocompletionPayload):void 0,translatorProvidedAutocompletionPayload:$O(e.translatorProvidedAutocompletionPayload)?Bw.fromJSON(e.translatorProvidedAutocompletionPayload):void 0,translatorSelectAutocompletionPayload:$O(e.translatorSelectAutocompletionPayload)?Hw.fromJSON(e.translatorSelectAutocompletionPayload):void 0,translatorProvidedAutomaticTextUnitAlternativesPayload:$O(e.translatorProvidedAutomaticTextUnitAlternativesPayload)?zw.fromJSON(e.translatorProvidedAutomaticTextUnitAlternativesPayload):void 0,selectAutomaticTextUnitAlternativePayload:$O(e.selectAutomaticTextUnitAlternativePayload)?Aw.fromJSON(e.selectAutomaticTextUnitAlternativePayload):void 0,writeDiffUnitPayload:$O(e.writeDiffUnitPayload)?kN.fromJSON(e.writeDiffUnitPayload):void 0,textFormattingPayload:$O(e.textFormattingPayload)?Cw.fromJSON(e.textFormattingPayload):void 0,writeProvidedTextUnitAlternativesPayload:$O(e.writeProvidedTextUnitAlternativesPayload)?DN.fromJSON(e.writeProvidedTextUnitAlternativesPayload):void 0,writeProvidedAutomaticTextUnitAlternativesPayload:$O(e.writeProvidedAutomaticTextUnitAlternativesPayload)?UN.fromJSON(e.writeProvidedAutomaticTextUnitAlternativesPayload):void 0,translatorRequestClarifyPayload:$O(e.translatorRequestClarifyPayload)?Xw.fromJSON(e.translatorRequestClarifyPayload):void 0,translatorProvidedClarifyQuestionPayload:$O(e.translatorProvidedClarifyQuestionPayload)?Qw.fromJSON(e.translatorProvidedClarifyQuestionPayload):void 0,translatorProvidedClarifyHighlightPayload:$O(e.translatorProvidedClarifyHighlightPayload)?Kw.fromJSON(e.translatorProvidedClarifyHighlightPayload):void 0,translatorSelectClarifyAnswerPayload:$O(e.translatorSelectClarifyAnswerPayload)?Zw.fromJSON(e.translatorSelectClarifyAnswerPayload):void 0,writeRequestChangeStyleAlternativesAnnotationPayload:$O(e.writeRequestChangeStyleAlternativesAnnotationPayload)?nO.fromJSON(e.writeRequestChangeStyleAlternativesAnnotationPayload):void 0,writeProvidedChangeStyleAlternativesAnnotationPayload:$O(e.writeProvidedChangeStyleAlternativesAnnotationPayload)?oO.fromJSON(e.writeProvidedChangeStyleAlternativesAnnotationPayload):void 0,writeSelectChangeStyleAlternativeAnnotationPayload:$O(e.writeSelectChangeStyleAlternativeAnnotationPayload)?aO.fromJSON(e.writeSelectChangeStyleAlternativeAnnotationPayload):void 0}),toJSON(e){const t={};return void 0!==e.annotationId&&(t.annotationId=kO.toJSON(e.annotationId)),void 0!==e.range&&(t.range=xw.toJSON(e.range)),void 0!==e.textUnitPayload&&(t.textUnitPayload=Uw.toJSON(e.textUnitPayload)),void 0!==e.requestWordAlternativesPayload&&(t.requestWordAlternativesPayload=bw.toJSON(e.requestWordAlternativesPayload)),void 0!==e.providedWordAlternativesPayload&&(t.providedWordAlternativesPayload=Ew.toJSON(e.providedWordAlternativesPayload)),void 0!==e.selectWordAlternativePayload&&(t.selectWordAlternativePayload=Ow.toJSON(e.selectWordAlternativePayload)),void 0!==e.translatorGlossaryReplacementPayload&&(t.translatorGlossaryReplacementPayload=Jw.toJSON(e.translatorGlossaryReplacementPayload)),void 0!==e.requestTextUnitAlternativesPayload&&(t.requestTextUnitAlternativesPayload=Iw.toJSON(e.requestTextUnitAlternativesPayload)),void 0!==e.translatorProvidedTextUnitAlternativesPayload&&(t.translatorProvidedTextUnitAlternativesPayload=Yw.toJSON(e.translatorProvidedTextUnitAlternativesPayload)),void 0!==e.selectTextUnitAlternativePayload&&(t.selectTextUnitAlternativePayload=ww.toJSON(e.selectTextUnitAlternativePayload)),void 0!==e.translatorRequestAutocompletionPayload&&(t.translatorRequestAutocompletionPayload=qw.toJSON(e.translatorRequestAutocompletionPayload)),void 0!==e.translatorProvidedAutocompletionPayload&&(t.translatorProvidedAutocompletionPayload=Bw.toJSON(e.translatorProvidedAutocompletionPayload)),void 0!==e.translatorSelectAutocompletionPayload&&(t.translatorSelectAutocompletionPayload=Hw.toJSON(e.translatorSelectAutocompletionPayload)),void 0!==e.translatorProvidedAutomaticTextUnitAlternativesPayload&&(t.translatorProvidedAutomaticTextUnitAlternativesPayload=zw.toJSON(e.translatorProvidedAutomaticTextUnitAlternativesPayload)),void 0!==e.selectAutomaticTextUnitAlternativePayload&&(t.selectAutomaticTextUnitAlternativePayload=Aw.toJSON(e.selectAutomaticTextUnitAlternativePayload)),void 0!==e.writeDiffUnitPayload&&(t.writeDiffUnitPayload=kN.toJSON(e.writeDiffUnitPayload)),void 0!==e.textFormattingPayload&&(t.textFormattingPayload=Cw.toJSON(e.textFormattingPayload)),void 0!==e.writeProvidedTextUnitAlternativesPayload&&(t.writeProvidedTextUnitAlternativesPayload=DN.toJSON(e.writeProvidedTextUnitAlternativesPayload)),void 0!==e.writeProvidedAutomaticTextUnitAlternativesPayload&&(t.writeProvidedAutomaticTextUnitAlternativesPayload=UN.toJSON(e.writeProvidedAutomaticTextUnitAlternativesPayload)),void 0!==e.translatorRequestClarifyPayload&&(t.translatorRequestClarifyPayload=Xw.toJSON(e.translatorRequestClarifyPayload)),void 0!==e.translatorProvidedClarifyQuestionPayload&&(t.translatorProvidedClarifyQuestionPayload=Qw.toJSON(e.translatorProvidedClarifyQuestionPayload)),void 0!==e.translatorProvidedClarifyHighlightPayload&&(t.translatorProvidedClarifyHighlightPayload=Kw.toJSON(e.translatorProvidedClarifyHighlightPayload)),void 0!==e.translatorSelectClarifyAnswerPayload&&(t.translatorSelectClarifyAnswerPayload=Zw.toJSON(e.translatorSelectClarifyAnswerPayload)),void 0!==e.writeRequestChangeStyleAlternativesAnnotationPayload&&(t.writeRequestChangeStyleAlternativesAnnotationPayload=nO.toJSON(e.writeRequestChangeStyleAlternativesAnnotationPayload)),void 0!==e.writeProvidedChangeStyleAlternativesAnnotationPayload&&(t.writeProvidedChangeStyleAlternativesAnnotationPayload=oO.toJSON(e.writeProvidedChangeStyleAlternativesAnnotationPayload)),void 0!==e.writeSelectChangeStyleAlternativeAnnotationPayload&&(t.writeSelectChangeStyleAlternativeAnnotationPayload=aO.toJSON(e.writeSelectChangeStyleAlternativeAnnotationPayload)),t},create:e=>fO.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.CreateAnnotationOperation",annotationId:void 0,range:void 0,textUnitPayload:void 0,requestWordAlternativesPayload:void 0,providedWordAlternativesPayload:void 0,selectWordAlternativePayload:void 0,translatorGlossaryReplacementPayload:void 0,requestTextUnitAlternativesPayload:void 0,translatorProvidedTextUnitAlternativesPayload:void 0,selectTextUnitAlternativePayload:void 0,translatorRequestAutocompletionPayload:void 0,translatorProvidedAutocompletionPayload:void 0,translatorSelectAutocompletionPayload:void 0,translatorProvidedAutomaticTextUnitAlternativesPayload:void 0,selectAutomaticTextUnitAlternativePayload:void 0,writeDiffUnitPayload:void 0,textFormattingPayload:void 0,writeProvidedTextUnitAlternativesPayload:void 0,writeProvidedAutomaticTextUnitAlternativesPayload:void 0,translatorRequestClarifyPayload:void 0,translatorProvidedClarifyQuestionPayload:void 0,translatorProvidedClarifyHighlightPayload:void 0,translatorSelectClarifyAnswerPayload:void 0,writeRequestChangeStyleAlternativesAnnotationPayload:void 0,writeProvidedChangeStyleAlternativesAnnotationPayload:void 0,writeSelectChangeStyleAlternativeAnnotationPayload:void 0};return t.annotationId=void 0!==e.annotationId&&null!==e.annotationId?kO.fromPartial(e.annotationId):void 0,t.range=void 0!==e.range&&null!==e.range?xw.fromPartial(e.range):void 0,t.textUnitPayload=void 0!==e.textUnitPayload&&null!==e.textUnitPayload?Uw.fromPartial(e.textUnitPayload):void 0,t.requestWordAlternativesPayload=void 0!==e.requestWordAlternativesPayload&&null!==e.requestWordAlternativesPayload?bw.fromPartial(e.requestWordAlternativesPayload):void 0,t.providedWordAlternativesPayload=void 0!==e.providedWordAlternativesPayload&&null!==e.providedWordAlternativesPayload?Ew.fromPartial(e.providedWordAlternativesPayload):void 0,t.selectWordAlternativePayload=void 0!==e.selectWordAlternativePayload&&null!==e.selectWordAlternativePayload?Ow.fromPartial(e.selectWordAlternativePayload):void 0,t.translatorGlossaryReplacementPayload=void 0!==e.translatorGlossaryReplacementPayload&&null!==e.translatorGlossaryReplacementPayload?Jw.fromPartial(e.translatorGlossaryReplacementPayload):void 0,t.requestTextUnitAlternativesPayload=void 0!==e.requestTextUnitAlternativesPayload&&null!==e.requestTextUnitAlternativesPayload?Iw.fromPartial(e.requestTextUnitAlternativesPayload):void 0,t.translatorProvidedTextUnitAlternativesPayload=void 0!==e.translatorProvidedTextUnitAlternativesPayload&&null!==e.translatorProvidedTextUnitAlternativesPayload?Yw.fromPartial(e.translatorProvidedTextUnitAlternativesPayload):void 0,t.selectTextUnitAlternativePayload=void 0!==e.selectTextUnitAlternativePayload&&null!==e.selectTextUnitAlternativePayload?ww.fromPartial(e.selectTextUnitAlternativePayload):void 0,t.translatorRequestAutocompletionPayload=void 0!==e.translatorRequestAutocompletionPayload&&null!==e.translatorRequestAutocompletionPayload?qw.fromPartial(e.translatorRequestAutocompletionPayload):void 0,t.translatorProvidedAutocompletionPayload=void 0!==e.translatorProvidedAutocompletionPayload&&null!==e.translatorProvidedAutocompletionPayload?Bw.fromPartial(e.translatorProvidedAutocompletionPayload):void 0,t.translatorSelectAutocompletionPayload=void 0!==e.translatorSelectAutocompletionPayload&&null!==e.translatorSelectAutocompletionPayload?Hw.fromPartial(e.translatorSelectAutocompletionPayload):void 0,t.translatorProvidedAutomaticTextUnitAlternativesPayload=void 0!==e.translatorProvidedAutomaticTextUnitAlternativesPayload&&null!==e.translatorProvidedAutomaticTextUnitAlternativesPayload?zw.fromPartial(e.translatorProvidedAutomaticTextUnitAlternativesPayload):void 0,t.selectAutomaticTextUnitAlternativePayload=void 0!==e.selectAutomaticTextUnitAlternativePayload&&null!==e.selectAutomaticTextUnitAlternativePayload?Aw.fromPartial(e.selectAutomaticTextUnitAlternativePayload):void 0,t.writeDiffUnitPayload=void 0!==e.writeDiffUnitPayload&&null!==e.writeDiffUnitPayload?kN.fromPartial(e.writeDiffUnitPayload):void 0,t.textFormattingPayload=void 0!==e.textFormattingPayload&&null!==e.textFormattingPayload?Cw.fromPartial(e.textFormattingPayload):void 0,t.writeProvidedTextUnitAlternativesPayload=void 0!==e.writeProvidedTextUnitAlternativesPayload&&null!==e.writeProvidedTextUnitAlternativesPayload?DN.fromPartial(e.writeProvidedTextUnitAlternativesPayload):void 0,t.writeProvidedAutomaticTextUnitAlternativesPayload=void 0!==e.writeProvidedAutomaticTextUnitAlternativesPayload&&null!==e.writeProvidedAutomaticTextUnitAlternativesPayload?UN.fromPartial(e.writeProvidedAutomaticTextUnitAlternativesPayload):void 0,t.translatorRequestClarifyPayload=void 0!==e.translatorRequestClarifyPayload&&null!==e.translatorRequestClarifyPayload?Xw.fromPartial(e.translatorRequestClarifyPayload):void 0,t.translatorProvidedClarifyQuestionPayload=void 0!==e.translatorProvidedClarifyQuestionPayload&&null!==e.translatorProvidedClarifyQuestionPayload?Qw.fromPartial(e.translatorProvidedClarifyQuestionPayload):void 0,t.translatorProvidedClarifyHighlightPayload=void 0!==e.translatorProvidedClarifyHighlightPayload&&null!==e.translatorProvidedClarifyHighlightPayload?Kw.fromPartial(e.translatorProvidedClarifyHighlightPayload):void 0,t.translatorSelectClarifyAnswerPayload=void 0!==e.translatorSelectClarifyAnswerPayload&&null!==e.translatorSelectClarifyAnswerPayload?Zw.fromPartial(e.translatorSelectClarifyAnswerPayload):void 0,t.writeRequestChangeStyleAlternativesAnnotationPayload=void 0!==e.writeRequestChangeStyleAlternativesAnnotationPayload&&null!==e.writeRequestChangeStyleAlternativesAnnotationPayload?nO.fromPartial(e.writeRequestChangeStyleAlternativesAnnotationPayload):void 0,t.writeProvidedChangeStyleAlternativesAnnotationPayload=void 0!==e.writeProvidedChangeStyleAlternativesAnnotationPayload&&null!==e.writeProvidedChangeStyleAlternativesAnnotationPayload?oO.fromPartial(e.writeProvidedChangeStyleAlternativesAnnotationPayload):void 0,t.writeSelectChangeStyleAlternativeAnnotationPayload=void 0!==e.writeSelectChangeStyleAlternativeAnnotationPayload&&null!==e.writeSelectChangeStyleAlternativeAnnotationPayload?aO.fromPartial(e.writeSelectChangeStyleAlternativeAnnotationPayload):void 0,t}};const mO={$type:"deepl.pb.interactive_text_api.RemoveAnnotationOperation",encode:(e,t=new dw)=>(void 0!==e.annotationId&&kO.encode(e.annotationId,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.RemoveAnnotationOperation",annotationId:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.annotationId=kO.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:mO.$type,annotationId:$O(e.annotationId)?kO.fromJSON(e.annotationId):void 0}),toJSON(e){const t={};return void 0!==e.annotationId&&(t.annotationId=kO.toJSON(e.annotationId)),t},create:e=>mO.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.RemoveAnnotationOperation",annotationId:void 0};return t.annotationId=void 0!==e.annotationId&&null!==e.annotationId?kO.fromPartial(e.annotationId):void 0,t}};const _O={$type:"deepl.pb.interactive_text_api.SetPropertyOperation",encode:(e,t=new dw)=>(0!==e.propertyName&&t.uint32(8).int32(e.propertyName),void 0!==e.translatorSourceLanguagesValue&&eN.encode(e.translatorSourceLanguagesValue,t.uint32(18).fork()).join(),void 0!==e.translatorTargetLanguagesValue&&tN.encode(e.translatorTargetLanguagesValue,t.uint32(26).fork()).join(),void 0!==e.translatorRequestedSourceLanguageValue&&nN.encode(e.translatorRequestedSourceLanguageValue,t.uint32(34).fork()).join(),void 0!==e.translatorRequestedTargetLanguageValue&&oN.encode(e.translatorRequestedTargetLanguageValue,t.uint32(42).fork()).join(),void 0!==e.translatorFormalityModesValue&&lN.encode(e.translatorFormalityModesValue,t.uint32(58).fork()).join(),void 0!==e.translatorFormalityModeValue&&uN.encode(e.translatorFormalityModeValue,t.uint32(66).fork()).join(),void 0!==e.translatorGlossarySupportValue&&sN.encode(e.translatorGlossarySupportValue,t.uint32(74).fork()).join(),void 0!==e.translatorGlossaryListValue&&EN.encode(e.translatorGlossaryListValue,t.uint32(82).fork()).join(),void 0!==e.translatorTextDirectionValue&&gN.encode(e.translatorTextDirectionValue,t.uint32(98).fork()).join(),void 0!==e.translatorCalculatedSourceLanguageValue&&rN.encode(e.translatorCalculatedSourceLanguageValue,t.uint32(106).fork()).join(),void 0!==e.translatorMaximumTextLengthValue&&hN.encode(e.translatorMaximumTextLengthValue,t.uint32(114).fork()).join(),void 0!==e.translatorLanguageModelsValue&&dN.encode(e.translatorLanguageModelsValue,t.uint32(122).fork()).join(),void 0!==e.translatorLanguageModelValue&&pN.encode(e.translatorLanguageModelValue,t.uint32(130).fork()).join(),void 0!==e.translatorGlossaryIdValue&&iN.encode(e.translatorGlossaryIdValue,t.uint32(138).fork()).join(),void 0!==e.translatorCalculatedTargetLanguageValue&&aN.encode(e.translatorCalculatedTargetLanguageValue,t.uint32(146).fork()).join(),void 0!==e.translatorUnsupportedSourceLanguageValue&&fN.encode(e.translatorUnsupportedSourceLanguageValue,t.uint32(154).fork()).join(),void 0!==e.writeLanguagesValue&&MN.encode(e.writeLanguagesValue,t.uint32(162).fork()).join(),void 0!==e.writeRequestedLanguageValue&&$N.encode(e.writeRequestedLanguageValue,t.uint32(170).fork()).join(),void 0!==e.writeCalculatedLanguageValue&&VN.encode(e.writeCalculatedLanguageValue,t.uint32(178).fork()).join(),void 0!==e.writeStyleVariantsValue&&WN.encode(e.writeStyleVariantsValue,t.uint32(186).fork()).join(),void 0!==e.writeStyleVariantValue&&qN.encode(e.writeStyleVariantValue,t.uint32(194).fork()).join(),void 0!==e.writeGlossaryIdValue&&FN.encode(e.writeGlossaryIdValue,t.uint32(202).fork()).join(),void 0!==e.writeGlossaryListValue&&YN.encode(e.writeGlossaryListValue,t.uint32(210).fork()).join(),void 0!==e.writeGlossarySupportValue&&zN.encode(e.writeGlossarySupportValue,t.uint32(218).fork()).join(),void 0!==e.writeMaximumTextLengthValue&&jN.encode(e.writeMaximumTextLengthValue,t.uint32(226).fork()).join(),void 0!==e.writeUnsupportedLanguageValue&&BN.encode(e.writeUnsupportedLanguageValue,t.uint32(234).fork()).join(),void 0!==e.translatorSourceLanguageDetectionWeightsValue&&mN.encode(e.translatorSourceLanguageDetectionWeightsValue,t.uint32(242).fork()).join(),void 0!==e.writeGlossaryLanguagesValue&&GN.encode(e.writeGlossaryLanguagesValue,t.uint32(250).fork()).join(),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.SetPropertyOperation",propertyName:0,translatorSourceLanguagesValue:void 0,translatorTargetLanguagesValue:void 0,translatorRequestedSourceLanguageValue:void 0,translatorRequestedTargetLanguageValue:void 0,translatorFormalityModesValue:void 0,translatorFormalityModeValue:void 0,translatorGlossarySupportValue:void 0,translatorGlossaryListValue:void 0,translatorTextDirectionValue:void 0,translatorCalculatedSourceLanguageValue:void 0,translatorMaximumTextLengthValue:void 0,translatorLanguageModelsValue:void 0,translatorLanguageModelValue:void 0,translatorGlossaryIdValue:void 0,translatorCalculatedTargetLanguageValue:void 0,translatorUnsupportedSourceLanguageValue:void 0,writeLanguagesValue:void 0,writeRequestedLanguageValue:void 0,writeCalculatedLanguageValue:void 0,writeStyleVariantsValue:void 0,writeStyleVariantValue:void 0,writeGlossaryIdValue:void 0,writeGlossaryListValue:void 0,writeGlossarySupportValue:void 0,writeMaximumTextLengthValue:void 0,writeUnsupportedLanguageValue:void 0,translatorSourceLanguageDetectionWeightsValue:void 0,writeGlossaryLanguagesValue:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(8!==e)break;o.propertyName=n.int32();continue;case 2:if(18!==e)break;o.translatorSourceLanguagesValue=eN.decode(n,n.uint32());continue;case 3:if(26!==e)break;o.translatorTargetLanguagesValue=tN.decode(n,n.uint32());continue;case 4:if(34!==e)break;o.translatorRequestedSourceLanguageValue=nN.decode(n,n.uint32());continue;case 5:if(42!==e)break;o.translatorRequestedTargetLanguageValue=oN.decode(n,n.uint32());continue;case 7:if(58!==e)break;o.translatorFormalityModesValue=lN.decode(n,n.uint32());continue;case 8:if(66!==e)break;o.translatorFormalityModeValue=uN.decode(n,n.uint32());continue;case 9:if(74!==e)break;o.translatorGlossarySupportValue=sN.decode(n,n.uint32());continue;case 10:if(82!==e)break;o.translatorGlossaryListValue=EN.decode(n,n.uint32());continue;case 12:if(98!==e)break;o.translatorTextDirectionValue=gN.decode(n,n.uint32());continue;case 13:if(106!==e)break;o.translatorCalculatedSourceLanguageValue=rN.decode(n,n.uint32());continue;case 14:if(114!==e)break;o.translatorMaximumTextLengthValue=hN.decode(n,n.uint32());continue;case 15:if(122!==e)break;o.translatorLanguageModelsValue=dN.decode(n,n.uint32());continue;case 16:if(130!==e)break;o.translatorLanguageModelValue=pN.decode(n,n.uint32());continue;case 17:if(138!==e)break;o.translatorGlossaryIdValue=iN.decode(n,n.uint32());continue;case 18:if(146!==e)break;o.translatorCalculatedTargetLanguageValue=aN.decode(n,n.uint32());continue;case 19:if(154!==e)break;o.translatorUnsupportedSourceLanguageValue=fN.decode(n,n.uint32());continue;case 20:if(162!==e)break;o.writeLanguagesValue=MN.decode(n,n.uint32());continue;case 21:if(170!==e)break;o.writeRequestedLanguageValue=$N.decode(n,n.uint32());continue;case 22:if(178!==e)break;o.writeCalculatedLanguageValue=VN.decode(n,n.uint32());continue;case 23:if(186!==e)break;o.writeStyleVariantsValue=WN.decode(n,n.uint32());continue;case 24:if(194!==e)break;o.writeStyleVariantValue=qN.decode(n,n.uint32());continue;case 25:if(202!==e)break;o.writeGlossaryIdValue=FN.decode(n,n.uint32());continue;case 26:if(210!==e)break;o.writeGlossaryListValue=YN.decode(n,n.uint32());continue;case 27:if(218!==e)break;o.writeGlossarySupportValue=zN.decode(n,n.uint32());continue;case 28:if(226!==e)break;o.writeMaximumTextLengthValue=jN.decode(n,n.uint32());continue;case 29:if(234!==e)break;o.writeUnsupportedLanguageValue=BN.decode(n,n.uint32());continue;case 30:if(242!==e)break;o.translatorSourceLanguageDetectionWeightsValue=mN.decode(n,n.uint32());continue;case 31:if(250!==e)break;o.writeGlossaryLanguagesValue=GN.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:_O.$type,propertyName:$O(e.propertyName)?pO(e.propertyName):0,translatorSourceLanguagesValue:$O(e.translatorSourceLanguagesValue)?eN.fromJSON(e.translatorSourceLanguagesValue):void 0,translatorTargetLanguagesValue:$O(e.translatorTargetLanguagesValue)?tN.fromJSON(e.translatorTargetLanguagesValue):void 0,translatorRequestedSourceLanguageValue:$O(e.translatorRequestedSourceLanguageValue)?nN.fromJSON(e.translatorRequestedSourceLanguageValue):void 0,translatorRequestedTargetLanguageValue:$O(e.translatorRequestedTargetLanguageValue)?oN.fromJSON(e.translatorRequestedTargetLanguageValue):void 0,translatorFormalityModesValue:$O(e.translatorFormalityModesValue)?lN.fromJSON(e.translatorFormalityModesValue):void 0,translatorFormalityModeValue:$O(e.translatorFormalityModeValue)?uN.fromJSON(e.translatorFormalityModeValue):void 0,translatorGlossarySupportValue:$O(e.translatorGlossarySupportValue)?sN.fromJSON(e.translatorGlossarySupportValue):void 0,translatorGlossaryListValue:$O(e.translatorGlossaryListValue)?EN.fromJSON(e.translatorGlossaryListValue):void 0,translatorTextDirectionValue:$O(e.translatorTextDirectionValue)?gN.fromJSON(e.translatorTextDirectionValue):void 0,translatorCalculatedSourceLanguageValue:$O(e.translatorCalculatedSourceLanguageValue)?rN.fromJSON(e.translatorCalculatedSourceLanguageValue):void 0,translatorMaximumTextLengthValue:$O(e.translatorMaximumTextLengthValue)?hN.fromJSON(e.translatorMaximumTextLengthValue):void 0,translatorLanguageModelsValue:$O(e.translatorLanguageModelsValue)?dN.fromJSON(e.translatorLanguageModelsValue):void 0,translatorLanguageModelValue:$O(e.translatorLanguageModelValue)?pN.fromJSON(e.translatorLanguageModelValue):void 0,translatorGlossaryIdValue:$O(e.translatorGlossaryIdValue)?iN.fromJSON(e.translatorGlossaryIdValue):void 0,translatorCalculatedTargetLanguageValue:$O(e.translatorCalculatedTargetLanguageValue)?aN.fromJSON(e.translatorCalculatedTargetLanguageValue):void 0,translatorUnsupportedSourceLanguageValue:$O(e.translatorUnsupportedSourceLanguageValue)?fN.fromJSON(e.translatorUnsupportedSourceLanguageValue):void 0,writeLanguagesValue:$O(e.writeLanguagesValue)?MN.fromJSON(e.writeLanguagesValue):void 0,writeRequestedLanguageValue:$O(e.writeRequestedLanguageValue)?$N.fromJSON(e.writeRequestedLanguageValue):void 0,writeCalculatedLanguageValue:$O(e.writeCalculatedLanguageValue)?VN.fromJSON(e.writeCalculatedLanguageValue):void 0,writeStyleVariantsValue:$O(e.writeStyleVariantsValue)?WN.fromJSON(e.writeStyleVariantsValue):void 0,writeStyleVariantValue:$O(e.writeStyleVariantValue)?qN.fromJSON(e.writeStyleVariantValue):void 0,writeGlossaryIdValue:$O(e.writeGlossaryIdValue)?FN.fromJSON(e.writeGlossaryIdValue):void 0,writeGlossaryListValue:$O(e.writeGlossaryListValue)?YN.fromJSON(e.writeGlossaryListValue):void 0,writeGlossarySupportValue:$O(e.writeGlossarySupportValue)?zN.fromJSON(e.writeGlossarySupportValue):void 0,writeMaximumTextLengthValue:$O(e.writeMaximumTextLengthValue)?jN.fromJSON(e.writeMaximumTextLengthValue):void 0,writeUnsupportedLanguageValue:$O(e.writeUnsupportedLanguageValue)?BN.fromJSON(e.writeUnsupportedLanguageValue):void 0,translatorSourceLanguageDetectionWeightsValue:$O(e.translatorSourceLanguageDetectionWeightsValue)?mN.fromJSON(e.translatorSourceLanguageDetectionWeightsValue):void 0,writeGlossaryLanguagesValue:$O(e.writeGlossaryLanguagesValue)?GN.fromJSON(e.writeGlossaryLanguagesValue):void 0}),toJSON(e){const t={};return 0!==e.propertyName&&(t.propertyName=function(e){switch(e){case cO.UNSPECIFIED:return"PROPERTY_NAME_UNSPECIFIED";case cO.TRANSLATOR_SOURCE_LANGUAGES:return"PROPERTY_NAME_TRANSLATOR_SOURCE_LANGUAGES";case cO.TRANSLATOR_TARGET_LANGUAGES:return"PROPERTY_NAME_TRANSLATOR_TARGET_LANGUAGES";case cO.TRANSLATOR_REQUESTED_SOURCE_LANGUAGE:return"PROPERTY_NAME_TRANSLATOR_REQUESTED_SOURCE_LANGUAGE";case cO.TRANSLATOR_CALCULATED_SOURCE_LANGUAGE:return"PROPERTY_NAME_TRANSLATOR_CALCULATED_SOURCE_LANGUAGE";case cO.TRANSLATOR_REQUESTED_TARGET_LANGUAGE:return"PROPERTY_NAME_TRANSLATOR_REQUESTED_TARGET_LANGUAGE";case cO.TRANSLATOR_FORMALITY_MODES:return"PROPERTY_NAME_TRANSLATOR_FORMALITY_MODES";case cO.TRANSLATOR_FORMALITY_MODE:return"PROPERTY_NAME_TRANSLATOR_FORMALITY_MODE";case cO.TRANSLATOR_GLOSSARY_SUPPORT:return"PROPERTY_NAME_TRANSLATOR_GLOSSARY_SUPPORT";case cO.TRANSLATOR_GLOSSARY_LIST:return"PROPERTY_NAME_TRANSLATOR_GLOSSARY_LIST";case cO.TRANSLATOR_TEXT_DIRECTION:return"PROPERTY_NAME_TRANSLATOR_TEXT_DIRECTION";case cO.TRANSLATOR_GLOSSARY_SUGGESTIONS:return"PROPERTY_NAME_TRANSLATOR_GLOSSARY_SUGGESTIONS";case cO.TRANSLATOR_MAXIMUM_TEXT_LENGTH:return"PROPERTY_NAME_TRANSLATOR_MAXIMUM_TEXT_LENGTH";case cO.TRANSLATOR_LANGUAGE_MODELS:return"PROPERTY_NAME_TRANSLATOR_LANGUAGE_MODELS";case cO.TRANSLATOR_LANGUAGE_MODEL:return"PROPERTY_NAME_TRANSLATOR_LANGUAGE_MODEL";case cO.TRANSLATOR_GLOSSARY_ID:return"PROPERTY_NAME_TRANSLATOR_GLOSSARY_ID";case cO.TRANSLATOR_CALCULATED_TARGET_LANGUAGE:return"PROPERTY_NAME_TRANSLATOR_CALCULATED_TARGET_LANGUAGE";case cO.TRANSLATOR_UNSUPPORTED_SOURCE_LANGUAGE:return"PROPERTY_NAME_TRANSLATOR_UNSUPPORTED_SOURCE_LANGUAGE";case cO.WRITE_LANGUAGES:return"PROPERTY_NAME_WRITE_LANGUAGES";case cO.WRITE_REQUESTED_LANGUAGE:return"PROPERTY_NAME_WRITE_REQUESTED_LANGUAGE";case cO.WRITE_CALCULATED_LANGUAGE:return"PROPERTY_NAME_WRITE_CALCULATED_LANGUAGE";case cO.WRITE_STYLE_VARIANTS:return"PROPERTY_NAME_WRITE_STYLE_VARIANTS";case cO.WRITE_STYLE_VARIANT:return"PROPERTY_NAME_WRITE_STYLE_VARIANT";case cO.WRITE_GLOSSARY_ID:return"PROPERTY_NAME_WRITE_GLOSSARY_ID";case cO.WRITE_GLOSSARY_LIST:return"PROPERTY_NAME_WRITE_GLOSSARY_LIST";case cO.WRITE_GLOSSARY_SUPPORT:return"PROPERTY_NAME_WRITE_GLOSSARY_SUPPORT";case cO.WRITE_MAXIMUM_TEXT_LENGTH:return"PROPERTY_NAME_WRITE_MAXIMUM_TEXT_LENGTH";case cO.WRITE_UNSUPPORTED_LANGUAGE:return"PROPERTY_NAME_WRITE_UNSUPPORTED_LANGUAGE";case cO.TRANSLATOR_SOURCE_LANGUAGE_DETECTION_WEIGHTS:return"PROPERTY_NAME_TRANSLATOR_SOURCE_LANGUAGE_DETECTION_WEIGHTS";case cO.WRITE_GLOSSARY_LANGUAGES:return"PROPERTY_NAME_WRITE_GLOSSARY_LANGUAGES";default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum PropertyName")}}(e.propertyName)),void 0!==e.translatorSourceLanguagesValue&&(t.translatorSourceLanguagesValue=eN.toJSON(e.translatorSourceLanguagesValue)),void 0!==e.translatorTargetLanguagesValue&&(t.translatorTargetLanguagesValue=tN.toJSON(e.translatorTargetLanguagesValue)),void 0!==e.translatorRequestedSourceLanguageValue&&(t.translatorRequestedSourceLanguageValue=nN.toJSON(e.translatorRequestedSourceLanguageValue)),void 0!==e.translatorRequestedTargetLanguageValue&&(t.translatorRequestedTargetLanguageValue=oN.toJSON(e.translatorRequestedTargetLanguageValue)),void 0!==e.translatorFormalityModesValue&&(t.translatorFormalityModesValue=lN.toJSON(e.translatorFormalityModesValue)),void 0!==e.translatorFormalityModeValue&&(t.translatorFormalityModeValue=uN.toJSON(e.translatorFormalityModeValue)),void 0!==e.translatorGlossarySupportValue&&(t.translatorGlossarySupportValue=sN.toJSON(e.translatorGlossarySupportValue)),void 0!==e.translatorGlossaryListValue&&(t.translatorGlossaryListValue=EN.toJSON(e.translatorGlossaryListValue)),void 0!==e.translatorTextDirectionValue&&(t.translatorTextDirectionValue=gN.toJSON(e.translatorTextDirectionValue)),void 0!==e.translatorCalculatedSourceLanguageValue&&(t.translatorCalculatedSourceLanguageValue=rN.toJSON(e.translatorCalculatedSourceLanguageValue)),void 0!==e.translatorMaximumTextLengthValue&&(t.translatorMaximumTextLengthValue=hN.toJSON(e.translatorMaximumTextLengthValue)),void 0!==e.translatorLanguageModelsValue&&(t.translatorLanguageModelsValue=dN.toJSON(e.translatorLanguageModelsValue)),void 0!==e.translatorLanguageModelValue&&(t.translatorLanguageModelValue=pN.toJSON(e.translatorLanguageModelValue)),void 0!==e.translatorGlossaryIdValue&&(t.translatorGlossaryIdValue=iN.toJSON(e.translatorGlossaryIdValue)),void 0!==e.translatorCalculatedTargetLanguageValue&&(t.translatorCalculatedTargetLanguageValue=aN.toJSON(e.translatorCalculatedTargetLanguageValue)),void 0!==e.translatorUnsupportedSourceLanguageValue&&(t.translatorUnsupportedSourceLanguageValue=fN.toJSON(e.translatorUnsupportedSourceLanguageValue)),void 0!==e.writeLanguagesValue&&(t.writeLanguagesValue=MN.toJSON(e.writeLanguagesValue)),void 0!==e.writeRequestedLanguageValue&&(t.writeRequestedLanguageValue=$N.toJSON(e.writeRequestedLanguageValue)),void 0!==e.writeCalculatedLanguageValue&&(t.writeCalculatedLanguageValue=VN.toJSON(e.writeCalculatedLanguageValue)),void 0!==e.writeStyleVariantsValue&&(t.writeStyleVariantsValue=WN.toJSON(e.writeStyleVariantsValue)),void 0!==e.writeStyleVariantValue&&(t.writeStyleVariantValue=qN.toJSON(e.writeStyleVariantValue)),void 0!==e.writeGlossaryIdValue&&(t.writeGlossaryIdValue=FN.toJSON(e.writeGlossaryIdValue)),void 0!==e.writeGlossaryListValue&&(t.writeGlossaryListValue=YN.toJSON(e.writeGlossaryListValue)),void 0!==e.writeGlossarySupportValue&&(t.writeGlossarySupportValue=zN.toJSON(e.writeGlossarySupportValue)),void 0!==e.writeMaximumTextLengthValue&&(t.writeMaximumTextLengthValue=jN.toJSON(e.writeMaximumTextLengthValue)),void 0!==e.writeUnsupportedLanguageValue&&(t.writeUnsupportedLanguageValue=BN.toJSON(e.writeUnsupportedLanguageValue)),void 0!==e.translatorSourceLanguageDetectionWeightsValue&&(t.translatorSourceLanguageDetectionWeightsValue=mN.toJSON(e.translatorSourceLanguageDetectionWeightsValue)),void 0!==e.writeGlossaryLanguagesValue&&(t.writeGlossaryLanguagesValue=GN.toJSON(e.writeGlossaryLanguagesValue)),t},create:e=>_O.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.SetPropertyOperation",propertyName:0,translatorSourceLanguagesValue:void 0,translatorTargetLanguagesValue:void 0,translatorRequestedSourceLanguageValue:void 0,translatorRequestedTargetLanguageValue:void 0,translatorFormalityModesValue:void 0,translatorFormalityModeValue:void 0,translatorGlossarySupportValue:void 0,translatorGlossaryListValue:void 0,translatorTextDirectionValue:void 0,translatorCalculatedSourceLanguageValue:void 0,translatorMaximumTextLengthValue:void 0,translatorLanguageModelsValue:void 0,translatorLanguageModelValue:void 0,translatorGlossaryIdValue:void 0,translatorCalculatedTargetLanguageValue:void 0,translatorUnsupportedSourceLanguageValue:void 0,writeLanguagesValue:void 0,writeRequestedLanguageValue:void 0,writeCalculatedLanguageValue:void 0,writeStyleVariantsValue:void 0,writeStyleVariantValue:void 0,writeGlossaryIdValue:void 0,writeGlossaryListValue:void 0,writeGlossarySupportValue:void 0,writeMaximumTextLengthValue:void 0,writeUnsupportedLanguageValue:void 0,translatorSourceLanguageDetectionWeightsValue:void 0,writeGlossaryLanguagesValue:void 0};return n.propertyName=null!==(t=e.propertyName)&&void 0!==t?t:0,n.translatorSourceLanguagesValue=void 0!==e.translatorSourceLanguagesValue&&null!==e.translatorSourceLanguagesValue?eN.fromPartial(e.translatorSourceLanguagesValue):void 0,n.translatorTargetLanguagesValue=void 0!==e.translatorTargetLanguagesValue&&null!==e.translatorTargetLanguagesValue?tN.fromPartial(e.translatorTargetLanguagesValue):void 0,n.translatorRequestedSourceLanguageValue=void 0!==e.translatorRequestedSourceLanguageValue&&null!==e.translatorRequestedSourceLanguageValue?nN.fromPartial(e.translatorRequestedSourceLanguageValue):void 0,n.translatorRequestedTargetLanguageValue=void 0!==e.translatorRequestedTargetLanguageValue&&null!==e.translatorRequestedTargetLanguageValue?oN.fromPartial(e.translatorRequestedTargetLanguageValue):void 0,n.translatorFormalityModesValue=void 0!==e.translatorFormalityModesValue&&null!==e.translatorFormalityModesValue?lN.fromPartial(e.translatorFormalityModesValue):void 0,n.translatorFormalityModeValue=void 0!==e.translatorFormalityModeValue&&null!==e.translatorFormalityModeValue?uN.fromPartial(e.translatorFormalityModeValue):void 0,n.translatorGlossarySupportValue=void 0!==e.translatorGlossarySupportValue&&null!==e.translatorGlossarySupportValue?sN.fromPartial(e.translatorGlossarySupportValue):void 0,n.translatorGlossaryListValue=void 0!==e.translatorGlossaryListValue&&null!==e.translatorGlossaryListValue?EN.fromPartial(e.translatorGlossaryListValue):void 0,n.translatorTextDirectionValue=void 0!==e.translatorTextDirectionValue&&null!==e.translatorTextDirectionValue?gN.fromPartial(e.translatorTextDirectionValue):void 0,n.translatorCalculatedSourceLanguageValue=void 0!==e.translatorCalculatedSourceLanguageValue&&null!==e.translatorCalculatedSourceLanguageValue?rN.fromPartial(e.translatorCalculatedSourceLanguageValue):void 0,n.translatorMaximumTextLengthValue=void 0!==e.translatorMaximumTextLengthValue&&null!==e.translatorMaximumTextLengthValue?hN.fromPartial(e.translatorMaximumTextLengthValue):void 0,n.translatorLanguageModelsValue=void 0!==e.translatorLanguageModelsValue&&null!==e.translatorLanguageModelsValue?dN.fromPartial(e.translatorLanguageModelsValue):void 0,n.translatorLanguageModelValue=void 0!==e.translatorLanguageModelValue&&null!==e.translatorLanguageModelValue?pN.fromPartial(e.translatorLanguageModelValue):void 0,n.translatorGlossaryIdValue=void 0!==e.translatorGlossaryIdValue&&null!==e.translatorGlossaryIdValue?iN.fromPartial(e.translatorGlossaryIdValue):void 0,n.translatorCalculatedTargetLanguageValue=void 0!==e.translatorCalculatedTargetLanguageValue&&null!==e.translatorCalculatedTargetLanguageValue?aN.fromPartial(e.translatorCalculatedTargetLanguageValue):void 0,n.translatorUnsupportedSourceLanguageValue=void 0!==e.translatorUnsupportedSourceLanguageValue&&null!==e.translatorUnsupportedSourceLanguageValue?fN.fromPartial(e.translatorUnsupportedSourceLanguageValue):void 0,n.writeLanguagesValue=void 0!==e.writeLanguagesValue&&null!==e.writeLanguagesValue?MN.fromPartial(e.writeLanguagesValue):void 0,n.writeRequestedLanguageValue=void 0!==e.writeRequestedLanguageValue&&null!==e.writeRequestedLanguageValue?$N.fromPartial(e.writeRequestedLanguageValue):void 0,n.writeCalculatedLanguageValue=void 0!==e.writeCalculatedLanguageValue&&null!==e.writeCalculatedLanguageValue?VN.fromPartial(e.writeCalculatedLanguageValue):void 0,n.writeStyleVariantsValue=void 0!==e.writeStyleVariantsValue&&null!==e.writeStyleVariantsValue?WN.fromPartial(e.writeStyleVariantsValue):void 0,n.writeStyleVariantValue=void 0!==e.writeStyleVariantValue&&null!==e.writeStyleVariantValue?qN.fromPartial(e.writeStyleVariantValue):void 0,n.writeGlossaryIdValue=void 0!==e.writeGlossaryIdValue&&null!==e.writeGlossaryIdValue?FN.fromPartial(e.writeGlossaryIdValue):void 0,n.writeGlossaryListValue=void 0!==e.writeGlossaryListValue&&null!==e.writeGlossaryListValue?YN.fromPartial(e.writeGlossaryListValue):void 0,n.writeGlossarySupportValue=void 0!==e.writeGlossarySupportValue&&null!==e.writeGlossarySupportValue?zN.fromPartial(e.writeGlossarySupportValue):void 0,n.writeMaximumTextLengthValue=void 0!==e.writeMaximumTextLengthValue&&null!==e.writeMaximumTextLengthValue?jN.fromPartial(e.writeMaximumTextLengthValue):void 0,n.writeUnsupportedLanguageValue=void 0!==e.writeUnsupportedLanguageValue&&null!==e.writeUnsupportedLanguageValue?BN.fromPartial(e.writeUnsupportedLanguageValue):void 0,n.translatorSourceLanguageDetectionWeightsValue=void 0!==e.translatorSourceLanguageDetectionWeightsValue&&null!==e.translatorSourceLanguageDetectionWeightsValue?mN.fromPartial(e.translatorSourceLanguageDetectionWeightsValue):void 0,n.writeGlossaryLanguagesValue=void 0!==e.writeGlossaryLanguagesValue&&null!==e.writeGlossaryLanguagesValue?GN.fromPartial(e.writeGlossaryLanguagesValue):void 0,n}};const vO={$type:"deepl.pb.interactive_text_api.StartSessionRequest",encode:(e,t=new dw)=>(0!==e.sessionMode&&t.uint32(8).int32(e.sessionMode),void 0!==e.baseDocument&&DO.encode(e.baseDocument,t.uint32(18).fork()).join(),void 0!==e.translatorSessionOptions&&_N.encode(e.translatorSessionOptions,t.uint32(26).fork()).join(),void 0!==e.appInformation&&RO.encode(e.appInformation,t.uint32(34).fork()).join(),void 0!==e.previousSessionId&&LO.encode(e.previousSessionId,t.uint32(42).fork()).join(),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.StartSessionRequest",sessionMode:0,baseDocument:void 0,translatorSessionOptions:void 0,appInformation:void 0,previousSessionId:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(8!==e)break;o.sessionMode=n.int32();continue;case 2:if(18!==e)break;o.baseDocument=DO.decode(n,n.uint32());continue;case 3:if(26!==e)break;o.translatorSessionOptions=_N.decode(n,n.uint32());continue;case 4:if(34!==e)break;o.appInformation=RO.decode(n,n.uint32());continue;case 5:if(42!==e)break;o.previousSessionId=LO.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:vO.$type,sessionMode:$O(e.sessionMode)?gO(e.sessionMode):0,baseDocument:$O(e.baseDocument)?DO.fromJSON(e.baseDocument):void 0,translatorSessionOptions:$O(e.translatorSessionOptions)?_N.fromJSON(e.translatorSessionOptions):void 0,appInformation:$O(e.appInformation)?RO.fromJSON(e.appInformation):void 0,previousSessionId:$O(e.previousSessionId)?LO.fromJSON(e.previousSessionId):void 0}),toJSON(e){const t={};return 0!==e.sessionMode&&(t.sessionMode=function(e){switch(e){case lO.UNSPECIFIED:return"SESSION_MODE_UNSPECIFIED";case lO.TRANSLATOR:return"SESSION_MODE_TRANSLATOR";case lO.WRITE:return"SESSION_MODE_WRITE";default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum SessionMode")}}(e.sessionMode)),void 0!==e.baseDocument&&(t.baseDocument=DO.toJSON(e.baseDocument)),void 0!==e.translatorSessionOptions&&(t.translatorSessionOptions=_N.toJSON(e.translatorSessionOptions)),void 0!==e.appInformation&&(t.appInformation=RO.toJSON(e.appInformation)),void 0!==e.previousSessionId&&(t.previousSessionId=LO.toJSON(e.previousSessionId)),t},create:e=>vO.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.StartSessionRequest",sessionMode:0,baseDocument:void 0,translatorSessionOptions:void 0,appInformation:void 0,previousSessionId:void 0};return n.sessionMode=null!==(t=e.sessionMode)&&void 0!==t?t:0,n.baseDocument=void 0!==e.baseDocument&&null!==e.baseDocument?DO.fromPartial(e.baseDocument):void 0,n.translatorSessionOptions=void 0!==e.translatorSessionOptions&&null!==e.translatorSessionOptions?_N.fromPartial(e.translatorSessionOptions):void 0,n.appInformation=void 0!==e.appInformation&&null!==e.appInformation?RO.fromPartial(e.appInformation):void 0,n.previousSessionId=void 0!==e.previousSessionId&&null!==e.previousSessionId?LO.fromPartial(e.previousSessionId):void 0,n}};const TO={$type:"deepl.pb.interactive_text_api.StartSessionResponse",encode:(e,t=new dw)=>(void 0!==e.sessionId&&LO.encode(e.sessionId,t.uint32(10).fork()).join(),void 0!==e.participantId&&xO.encode(e.participantId,t.uint32(18).fork()).join(),""!==e.sessionToken&&t.uint32(26).string(e.sessionToken),void 0!==e.versionRemovedAt&&fw.encode(function(e){const t=Math.trunc(e.getTime()/1e3),n=e.getTime()%1e3*1e6;return{$type:"google.protobuf.Timestamp",seconds:t,nanos:n}}(e.versionRemovedAt),t.uint32(34).fork()).join(),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.StartSessionResponse",sessionId:void 0,participantId:void 0,sessionToken:"",versionRemovedAt:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.sessionId=LO.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.participantId=xO.decode(n,n.uint32());continue;case 3:if(26!==e)break;o.sessionToken=n.string();continue;case 4:if(34!==e)break;o.versionRemovedAt=MO(fw.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:TO.$type,sessionId:$O(e.sessionId)?LO.fromJSON(e.sessionId):void 0,participantId:$O(e.participantId)?xO.fromJSON(e.participantId):void 0,sessionToken:$O(e.sessionToken)?globalThis.String(e.sessionToken):"",versionRemovedAt:$O(e.versionRemovedAt)?GO(e.versionRemovedAt):void 0}),toJSON(e){const t={};return void 0!==e.sessionId&&(t.sessionId=LO.toJSON(e.sessionId)),void 0!==e.participantId&&(t.participantId=xO.toJSON(e.participantId)),""!==e.sessionToken&&(t.sessionToken=e.sessionToken),void 0!==e.versionRemovedAt&&(t.versionRemovedAt=e.versionRemovedAt.toISOString()),t},create:e=>TO.fromPartial(null!=e?e:{}),fromPartial(e){var t,n;const r={$type:"deepl.pb.interactive_text_api.StartSessionResponse",sessionId:void 0,participantId:void 0,sessionToken:"",versionRemovedAt:void 0};return r.sessionId=void 0!==e.sessionId&&null!==e.sessionId?LO.fromPartial(e.sessionId):void 0,r.participantId=void 0!==e.participantId&&null!==e.participantId?xO.fromPartial(e.participantId):void 0,r.sessionToken=null!==(t=e.sessionToken)&&void 0!==t?t:"",r.versionRemovedAt=null!==(n=e.versionRemovedAt)&&void 0!==n?n:void 0,r}};const yO={$type:"deepl.pb.interactive_text_api.ParticipantRequest",encode:(e,t=new dw)=>(void 0!==e.appendMessage&&NO.encode(e.appendMessage,t.uint32(10).fork()).join(),void 0!==e.updateAuthenticationTokenMessage&&OO.encode(e.updateAuthenticationTokenMessage,t.uint32(18).fork()).join(),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.ParticipantRequest",appendMessage:void 0,updateAuthenticationTokenMessage:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.appendMessage=NO.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.updateAuthenticationTokenMessage=OO.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:yO.$type,appendMessage:$O(e.appendMessage)?NO.fromJSON(e.appendMessage):void 0,updateAuthenticationTokenMessage:$O(e.updateAuthenticationTokenMessage)?OO.fromJSON(e.updateAuthenticationTokenMessage):void 0}),toJSON(e){const t={};return void 0!==e.appendMessage&&(t.appendMessage=NO.toJSON(e.appendMessage)),void 0!==e.updateAuthenticationTokenMessage&&(t.updateAuthenticationTokenMessage=OO.toJSON(e.updateAuthenticationTokenMessage)),t},create:e=>yO.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.ParticipantRequest",appendMessage:void 0,updateAuthenticationTokenMessage:void 0};return t.appendMessage=void 0!==e.appendMessage&&null!==e.appendMessage?NO.fromPartial(e.appendMessage):void 0,t.updateAuthenticationTokenMessage=void 0!==e.updateAuthenticationTokenMessage&&null!==e.updateAuthenticationTokenMessage?OO.fromPartial(e.updateAuthenticationTokenMessage):void 0,t}};const EO={$type:"deepl.pb.interactive_text_api.ParticipantResponse",encode:(e,t=new dw)=>(void 0!==e.confirmedMessage&&SO.encode(e.confirmedMessage,t.uint32(10).fork()).join(),void 0!==e.initializedMessage&&IO.encode(e.initializedMessage,t.uint32(18).fork()).join(),void 0!==e.publishedMessage&&bO.encode(e.publishedMessage,t.uint32(26).fork()).join(),void 0!==e.metaInfoMessage&&AO.encode(e.metaInfoMessage,t.uint32(34).fork()).join(),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.ParticipantResponse",confirmedMessage:void 0,initializedMessage:void 0,publishedMessage:void 0,metaInfoMessage:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.confirmedMessage=SO.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.initializedMessage=IO.decode(n,n.uint32());continue;case 3:if(26!==e)break;o.publishedMessage=bO.decode(n,n.uint32());continue;case 4:if(34!==e)break;o.metaInfoMessage=AO.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:EO.$type,confirmedMessage:$O(e.confirmedMessage)?SO.fromJSON(e.confirmedMessage):void 0,initializedMessage:$O(e.initializedMessage)?IO.fromJSON(e.initializedMessage):void 0,publishedMessage:$O(e.publishedMessage)?bO.fromJSON(e.publishedMessage):void 0,metaInfoMessage:$O(e.metaInfoMessage)?AO.fromJSON(e.metaInfoMessage):void 0}),toJSON(e){const t={};return void 0!==e.confirmedMessage&&(t.confirmedMessage=SO.toJSON(e.confirmedMessage)),void 0!==e.initializedMessage&&(t.initializedMessage=IO.toJSON(e.initializedMessage)),void 0!==e.publishedMessage&&(t.publishedMessage=bO.toJSON(e.publishedMessage)),void 0!==e.metaInfoMessage&&(t.metaInfoMessage=AO.toJSON(e.metaInfoMessage)),t},create:e=>EO.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.ParticipantResponse",confirmedMessage:void 0,initializedMessage:void 0,publishedMessage:void 0,metaInfoMessage:void 0};return t.confirmedMessage=void 0!==e.confirmedMessage&&null!==e.confirmedMessage?SO.fromPartial(e.confirmedMessage):void 0,t.initializedMessage=void 0!==e.initializedMessage&&null!==e.initializedMessage?IO.fromPartial(e.initializedMessage):void 0,t.publishedMessage=void 0!==e.publishedMessage&&null!==e.publishedMessage?bO.fromPartial(e.publishedMessage):void 0,t.metaInfoMessage=void 0!==e.metaInfoMessage&&null!==e.metaInfoMessage?AO.fromPartial(e.metaInfoMessage):void 0,t}};const SO={$type:"deepl.pb.interactive_text_api.ConfirmedMessage",encode:(e,t=new dw)=>(void 0!==e.currentVersion&&CO.encode(e.currentVersion,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.ConfirmedMessage",currentVersion:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.currentVersion=CO.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:SO.$type,currentVersion:$O(e.currentVersion)?CO.fromJSON(e.currentVersion):void 0}),toJSON(e){const t={};return void 0!==e.currentVersion&&(t.currentVersion=CO.toJSON(e.currentVersion)),t},create:e=>SO.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.ConfirmedMessage",currentVersion:void 0};return t.currentVersion=void 0!==e.currentVersion&&null!==e.currentVersion?CO.fromPartial(e.currentVersion):void 0,t}};const IO={$type:"deepl.pb.interactive_text_api.InitializedMessage",encode:(e,t=new dw)=>t,decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.InitializedMessage"};for(;n.pos<r;){const e=n.uint32();if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:IO.$type}),toJSON:e=>({}),create:e=>IO.fromPartial(null!=e?e:{}),fromPartial:e=>({$type:"deepl.pb.interactive_text_api.InitializedMessage"})};const bO={$type:"deepl.pb.interactive_text_api.PublishedMessage",encode(e,t=new dw){for(const n of e.events)PO.encode(n,t.uint32(10).fork()).join();return void 0!==e.currentVersion&&CO.encode(e.currentVersion,t.uint32(18).fork()).join(),t},decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.PublishedMessage",events:[],currentVersion:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.events.push(PO.decode(n,n.uint32()));continue;case 2:if(18!==e)break;o.currentVersion=CO.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:bO.$type,events:globalThis.Array.isArray(null==e?void 0:e.events)?e.events.map((e=>PO.fromJSON(e))):[],currentVersion:$O(e.currentVersion)?CO.fromJSON(e.currentVersion):void 0}),toJSON(e){var t;const n={};return(null===(t=e.events)||void 0===t?void 0:t.length)&&(n.events=e.events.map((e=>PO.toJSON(e)))),void 0!==e.currentVersion&&(n.currentVersion=CO.toJSON(e.currentVersion)),n},create:e=>bO.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.PublishedMessage",events:[],currentVersion:void 0};return n.events=(null===(t=e.events)||void 0===t?void 0:t.map((e=>PO.fromPartial(e))))||[],n.currentVersion=void 0!==e.currentVersion&&null!==e.currentVersion?CO.fromPartial(e.currentVersion):void 0,n}};const AO={$type:"deepl.pb.interactive_text_api.MetaInfoMessage",encode:(e,t=new dw)=>(void 0!==e.idle&&wO.encode(e.idle,t.uint32(10).fork()).join(),void 0!==e.translatorTaskMetaInfo&&cN.encode(e.translatorTaskMetaInfo,t.uint32(18).fork()).join(),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.MetaInfoMessage",idle:void 0,translatorTaskMetaInfo:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.idle=wO.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.translatorTaskMetaInfo=cN.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:AO.$type,idle:$O(e.idle)?wO.fromJSON(e.idle):void 0,translatorTaskMetaInfo:$O(e.translatorTaskMetaInfo)?cN.fromJSON(e.translatorTaskMetaInfo):void 0}),toJSON(e){const t={};return void 0!==e.idle&&(t.idle=wO.toJSON(e.idle)),void 0!==e.translatorTaskMetaInfo&&(t.translatorTaskMetaInfo=cN.toJSON(e.translatorTaskMetaInfo)),t},create:e=>AO.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.MetaInfoMessage",idle:void 0,translatorTaskMetaInfo:void 0};return t.idle=void 0!==e.idle&&null!==e.idle?wO.fromPartial(e.idle):void 0,t.translatorTaskMetaInfo=void 0!==e.translatorTaskMetaInfo&&null!==e.translatorTaskMetaInfo?cN.fromPartial(e.translatorTaskMetaInfo):void 0,t}};const wO={$type:"deepl.pb.interactive_text_api.Idle",encode:(e,t=new dw)=>(void 0!==e.eventVersion&&CO.encode(e.eventVersion,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.Idle",eventVersion:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.eventVersion=CO.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:wO.$type,eventVersion:$O(e.eventVersion)?CO.fromJSON(e.eventVersion):void 0}),toJSON(e){const t={};return void 0!==e.eventVersion&&(t.eventVersion=CO.toJSON(e.eventVersion)),t},create:e=>wO.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.Idle",eventVersion:void 0};return t.eventVersion=void 0!==e.eventVersion&&null!==e.eventVersion?CO.fromPartial(e.eventVersion):void 0,t}};const NO={$type:"deepl.pb.interactive_text_api.AppendMessage",encode(e,t=new dw){for(const n of e.events)PO.encode(n,t.uint32(10).fork()).join();return void 0!==e.baseVersion&&CO.encode(e.baseVersion,t.uint32(18).fork()).join(),t},decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.AppendMessage",events:[],baseVersion:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.events.push(PO.decode(n,n.uint32()));continue;case 2:if(18!==e)break;o.baseVersion=CO.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:NO.$type,events:globalThis.Array.isArray(null==e?void 0:e.events)?e.events.map((e=>PO.fromJSON(e))):[],baseVersion:$O(e.baseVersion)?CO.fromJSON(e.baseVersion):void 0}),toJSON(e){var t;const n={};return(null===(t=e.events)||void 0===t?void 0:t.length)&&(n.events=e.events.map((e=>PO.toJSON(e)))),void 0!==e.baseVersion&&(n.baseVersion=CO.toJSON(e.baseVersion)),n},create:e=>NO.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.AppendMessage",events:[],baseVersion:void 0};return n.events=(null===(t=e.events)||void 0===t?void 0:t.map((e=>PO.fromPartial(e))))||[],n.baseVersion=void 0!==e.baseVersion&&null!==e.baseVersion?CO.fromPartial(e.baseVersion):void 0,n}};const OO={$type:"deepl.pb.interactive_text_api.UpdateAuthenticationTokenMessage",encode:(e,t=new dw)=>(""!==e.token&&t.uint32(10).string(e.token),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.UpdateAuthenticationTokenMessage",token:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.token=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:OO.$type,token:$O(e.token)?globalThis.String(e.token):""}),toJSON(e){const t={};return""!==e.token&&(t.token=e.token),t},create:e=>OO.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.UpdateAuthenticationTokenMessage",token:""};return n.token=null!==(t=e.token)&&void 0!==t?t:"",n}};const RO={$type:"deepl.pb.interactive_text_api.AppInformation",encode:(e,t=new dw)=>(""!==e.os&&t.uint32(10).string(e.os),""!==e.osVersion&&t.uint32(18).string(e.osVersion),""!==e.appVersion&&t.uint32(26).string(e.appVersion),""!==e.appBuild&&t.uint32(34).string(e.appBuild),""!==e.instanceId&&t.uint32(42).string(e.instanceId),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.AppInformation",os:"",osVersion:"",appVersion:"",appBuild:"",instanceId:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.os=n.string();continue;case 2:if(18!==e)break;o.osVersion=n.string();continue;case 3:if(26!==e)break;o.appVersion=n.string();continue;case 4:if(34!==e)break;o.appBuild=n.string();continue;case 5:if(42!==e)break;o.instanceId=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:RO.$type,os:$O(e.os)?globalThis.String(e.os):"",osVersion:$O(e.osVersion)?globalThis.String(e.osVersion):"",appVersion:$O(e.appVersion)?globalThis.String(e.appVersion):"",appBuild:$O(e.appBuild)?globalThis.String(e.appBuild):"",instanceId:$O(e.instanceId)?globalThis.String(e.instanceId):""}),toJSON(e){const t={};return""!==e.os&&(t.os=e.os),""!==e.osVersion&&(t.osVersion=e.osVersion),""!==e.appVersion&&(t.appVersion=e.appVersion),""!==e.appBuild&&(t.appBuild=e.appBuild),""!==e.instanceId&&(t.instanceId=e.instanceId),t},create:e=>RO.fromPartial(null!=e?e:{}),fromPartial(e){var t,n,r,o,a;const i={$type:"deepl.pb.interactive_text_api.AppInformation",os:"",osVersion:"",appVersion:"",appBuild:"",instanceId:""};return i.os=null!==(t=e.os)&&void 0!==t?t:"",i.osVersion=null!==(n=e.osVersion)&&void 0!==n?n:"",i.appVersion=null!==(r=e.appVersion)&&void 0!==r?r:"",i.appBuild=null!==(o=e.appBuild)&&void 0!==o?o:"",i.instanceId=null!==(a=e.instanceId)&&void 0!==a?a:"",i}};const LO={$type:"deepl.pb.interactive_text_api.SessionId",encode:(e,t=new dw)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.SessionId",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:LO.$type,value:$O(e.value)?globalThis.String(e.value):""}),toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>LO.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.SessionId",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const CO={$type:"deepl.pb.interactive_text_api.EventVersion",encode:(e,t=new dw)=>(void 0!==e.version&&vw.encode({$type:"google.protobuf.Int32Value",value:e.version},t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.EventVersion",version:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.version=vw.decode(n,n.uint32()).value;continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:CO.$type,version:$O(e.version)?Number(e.version):void 0}),toJSON(e){const t={};return void 0!==e.version&&(t.version=e.version),t},create:e=>CO.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.EventVersion",version:void 0};return n.version=null!==(t=e.version)&&void 0!==t?t:void 0,n}};const PO={$type:"deepl.pb.interactive_text_api.FieldEvent",encode:(e,t=new dw)=>(0!==e.fieldName&&t.uint32(8).int32(e.fieldName),void 0!==e.textChangeOperation&&hO.encode(e.textChangeOperation,t.uint32(18).fork()).join(),void 0!==e.createAnnotationOperation&&fO.encode(e.createAnnotationOperation,t.uint32(26).fork()).join(),void 0!==e.removeAnnotationOperation&&mO.encode(e.removeAnnotationOperation,t.uint32(34).fork()).join(),void 0!==e.setPropertyOperation&&_O.encode(e.setPropertyOperation,t.uint32(42).fork()).join(),void 0!==e.participantId&&xO.encode(e.participantId,t.uint32(50).fork()).join(),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.FieldEvent",fieldName:0,textChangeOperation:void 0,createAnnotationOperation:void 0,removeAnnotationOperation:void 0,setPropertyOperation:void 0,participantId:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(8!==e)break;o.fieldName=n.int32();continue;case 2:if(18!==e)break;o.textChangeOperation=hO.decode(n,n.uint32());continue;case 3:if(26!==e)break;o.createAnnotationOperation=fO.decode(n,n.uint32());continue;case 4:if(34!==e)break;o.removeAnnotationOperation=mO.decode(n,n.uint32());continue;case 5:if(42!==e)break;o.setPropertyOperation=_O.decode(n,n.uint32());continue;case 6:if(50!==e)break;o.participantId=xO.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:PO.$type,fieldName:$O(e.fieldName)?uO(e.fieldName):0,textChangeOperation:$O(e.textChangeOperation)?hO.fromJSON(e.textChangeOperation):void 0,createAnnotationOperation:$O(e.createAnnotationOperation)?fO.fromJSON(e.createAnnotationOperation):void 0,removeAnnotationOperation:$O(e.removeAnnotationOperation)?mO.fromJSON(e.removeAnnotationOperation):void 0,setPropertyOperation:$O(e.setPropertyOperation)?_O.fromJSON(e.setPropertyOperation):void 0,participantId:$O(e.participantId)?xO.fromJSON(e.participantId):void 0}),toJSON(e){const t={};return 0!==e.fieldName&&(t.fieldName=dO(e.fieldName)),void 0!==e.textChangeOperation&&(t.textChangeOperation=hO.toJSON(e.textChangeOperation)),void 0!==e.createAnnotationOperation&&(t.createAnnotationOperation=fO.toJSON(e.createAnnotationOperation)),void 0!==e.removeAnnotationOperation&&(t.removeAnnotationOperation=mO.toJSON(e.removeAnnotationOperation)),void 0!==e.setPropertyOperation&&(t.setPropertyOperation=_O.toJSON(e.setPropertyOperation)),void 0!==e.participantId&&(t.participantId=xO.toJSON(e.participantId)),t},create:e=>PO.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.FieldEvent",fieldName:0,textChangeOperation:void 0,createAnnotationOperation:void 0,removeAnnotationOperation:void 0,setPropertyOperation:void 0,participantId:void 0};return n.fieldName=null!==(t=e.fieldName)&&void 0!==t?t:0,n.textChangeOperation=void 0!==e.textChangeOperation&&null!==e.textChangeOperation?hO.fromPartial(e.textChangeOperation):void 0,n.createAnnotationOperation=void 0!==e.createAnnotationOperation&&null!==e.createAnnotationOperation?fO.fromPartial(e.createAnnotationOperation):void 0,n.removeAnnotationOperation=void 0!==e.removeAnnotationOperation&&null!==e.removeAnnotationOperation?mO.fromPartial(e.removeAnnotationOperation):void 0,n.setPropertyOperation=void 0!==e.setPropertyOperation&&null!==e.setPropertyOperation?_O.fromPartial(e.setPropertyOperation):void 0,n.participantId=void 0!==e.participantId&&null!==e.participantId?xO.fromPartial(e.participantId):void 0,n}};const xO={$type:"deepl.pb.interactive_text_api.ParticipantId",encode:(e,t=new dw)=>(0!==e.value&&t.uint32(8).int32(e.value),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.ParticipantId",value:0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(8!==e)break;o.value=n.int32();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:xO.$type,value:$O(e.value)?globalThis.Number(e.value):0}),toJSON(e){const t={};return 0!==e.value&&(t.value=Math.round(e.value)),t},create:e=>xO.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.ParticipantId",value:0};return n.value=null!==(t=e.value)&&void 0!==t?t:0,n}};const kO={$type:"deepl.pb.interactive_text_api.AnnotationId",encode:(e,t=new dw)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.AnnotationId",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:kO.$type,value:$O(e.value)?globalThis.String(e.value):""}),toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>kO.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.AnnotationId",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const DO={$type:"deepl.pb.interactive_text_api.BaseDocument",encode(e,t=new dw){for(const n of e.fields)UO.encode(n,t.uint32(10).fork()).join();return t},decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.BaseDocument",fields:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.fields.push(UO.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:DO.$type,fields:globalThis.Array.isArray(null==e?void 0:e.fields)?e.fields.map((e=>UO.fromJSON(e))):[]}),toJSON(e){var t;const n={};return(null===(t=e.fields)||void 0===t?void 0:t.length)&&(n.fields=e.fields.map((e=>UO.toJSON(e)))),n},create:e=>DO.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.BaseDocument",fields:[]};return n.fields=(null===(t=e.fields)||void 0===t?void 0:t.map((e=>UO.fromPartial(e))))||[],n}};const UO={$type:"deepl.pb.interactive_text_api.Field",encode(e,t=new dw){0!==e.fieldName&&t.uint32(8).int32(e.fieldName),""!==e.text&&t.uint32(18).string(e.text);for(const n of e.annotations)fO.encode(n,t.uint32(26).fork()).join();for(const n of e.properties)_O.encode(n,t.uint32(34).fork()).join();return t},decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.Field",fieldName:0,text:"",annotations:[],properties:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(8!==e)break;o.fieldName=n.int32();continue;case 2:if(18!==e)break;o.text=n.string();continue;case 3:if(26!==e)break;o.annotations.push(fO.decode(n,n.uint32()));continue;case 4:if(34!==e)break;o.properties.push(_O.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:UO.$type,fieldName:$O(e.fieldName)?uO(e.fieldName):0,text:$O(e.text)?globalThis.String(e.text):"",annotations:globalThis.Array.isArray(null==e?void 0:e.annotations)?e.annotations.map((e=>fO.fromJSON(e))):[],properties:globalThis.Array.isArray(null==e?void 0:e.properties)?e.properties.map((e=>_O.fromJSON(e))):[]}),toJSON(e){var t,n;const r={};return 0!==e.fieldName&&(r.fieldName=dO(e.fieldName)),""!==e.text&&(r.text=e.text),(null===(t=e.annotations)||void 0===t?void 0:t.length)&&(r.annotations=e.annotations.map((e=>fO.toJSON(e)))),(null===(n=e.properties)||void 0===n?void 0:n.length)&&(r.properties=e.properties.map((e=>_O.toJSON(e)))),r},create:e=>UO.fromPartial(null!=e?e:{}),fromPartial(e){var t,n,r,o;const a={$type:"deepl.pb.interactive_text_api.Field",fieldName:0,text:"",annotations:[],properties:[]};return a.fieldName=null!==(t=e.fieldName)&&void 0!==t?t:0,a.text=null!==(n=e.text)&&void 0!==n?n:"",a.annotations=(null===(r=e.annotations)||void 0===r?void 0:r.map((e=>fO.fromPartial(e))))||[],a.properties=(null===(o=e.properties)||void 0===o?void 0:o.map((e=>_O.fromPartial(e))))||[],a}};function MO(e){let t=1e3*(e.seconds||0);return t+=(e.nanos||0)/1e6,new globalThis.Date(t)}function GO(e){return e instanceof globalThis.Date?e:"string"==typeof e?new globalThis.Date(e):MO(fw.fromJSON(e))}function $O(e){return null!=e}const VO={TEXT_CHANGE:"textChange",TARGET_LANGUAGE_CHANGE:"targetLanguageChange",FORMALITY_CHANGE:"formalityChange",WRITE_STYLE_CHANGE:"writeStyleChange"},FO="translatorRequestedTargetLanguageValue",jO="translatorFormalityModeValue",WO="writeStyleVariantValue",qO={},BO=(e,t)=>{qO[e]||(qO[e]={}),qO[e]={...qO[e],...t},nv()&&console.log("Updated translate port settings",qO)},HO=e=>qO[e]??{};function JO(e){e.name in qO&&delete qO[e.name]}const YO={},zO=(e,t)=>{YO[e]||(YO[e]={}),YO[e]={...YO[e],...t},nv()&&console.log("Updated write port settings",YO)},XO=e=>YO[e]??{};function KO(e){e.name in YO&&delete YO[e.name]}class QO extends Error{constructor(e,t){const n=new.target.prototype;super(`${e}: Status code '${t}'`),this.statusCode=t,this.__proto__=n}}class ZO extends Error{constructor(e="A timeout occurred."){const t=new.target.prototype;super(e),this.__proto__=t}}class eR extends Error{constructor(e="An abort occurred."){const t=new.target.prototype;super(e),this.__proto__=t}}class tR extends Error{constructor(e,t){const n=new.target.prototype;super(e),this.transport=t,this.errorType="UnsupportedTransportError",this.__proto__=n}}class nR extends Error{constructor(e,t){const n=new.target.prototype;super(e),this.transport=t,this.errorType="DisabledTransportError",this.__proto__=n}}class rR extends Error{constructor(e,t){const n=new.target.prototype;super(e),this.transport=t,this.errorType="FailedToStartTransportError",this.__proto__=n}}class oR extends Error{constructor(e){const t=new.target.prototype;super(e),this.errorType="FailedToNegotiateWithServerError",this.__proto__=t}}class aR extends Error{constructor(e,t){const n=new.target.prototype;super(e),this.innerErrors=t,this.__proto__=n}}class iR{constructor(e,t,n){this.statusCode=e,this.statusText=t,this.content=n}}class sR{get(e,t){return this.send({...t,method:"GET",url:e})}post(e,t){return this.send({...t,method:"POST",url:e})}delete(e,t){return this.send({...t,method:"DELETE",url:e})}getCookieString(e){return""}}var cR;!function(e){e[e.Trace=0]="Trace",e[e.Debug=1]="Debug",e[e.Information=2]="Information",e[e.Warning=3]="Warning",e[e.Error=4]="Error",e[e.Critical=5]="Critical",e[e.None=6]="None"}(cR||(cR={}));class lR{constructor(){}log(e,t){}}lR.instance=new lR;class uR{static isRequired(e,t){if(null==e)throw new Error(`The '${t}' argument is required.`)}static isNotEmpty(e,t){if(!e||e.match(/^\s*$/))throw new Error(`The '${t}' argument should not be empty.`)}static isIn(e,t,n){if(!(e in t))throw new Error(`Unknown ${n} value: ${e}.`)}}class dR{static get isBrowser(){return!dR.isNode&&"object"==typeof window&&"object"==typeof window.document}static get isWebWorker(){return!dR.isNode&&"object"==typeof self&&"importScripts"in self}static get isReactNative(){return!dR.isNode&&"object"==typeof window&&void 0===window.document}static get isNode(){return"undefined"!=typeof process&&process.release&&"node"===process.release.name}}function pR(e,t){let n="";return gR(e)?(n=`Binary data of length ${e.byteLength}`,t&&(n+=`. Content: '${function(e){const t=new Uint8Array(e);let n="";return t.forEach((e=>{n+=`0x${e<16?"0":""}${e.toString(16)} `})),n.substr(0,n.length-1)}(e)}'`)):"string"==typeof e&&(n=`String data of length ${e.length}`,t&&(n+=`. Content: '${e}'`)),n}function gR(e){return e&&"undefined"!=typeof ArrayBuffer&&(e instanceof ArrayBuffer||e.constructor&&"ArrayBuffer"===e.constructor.name)}async function hR(e,t,n,r,o,a){const i={},[s,c]=_R();i[s]=c,e.log(cR.Trace,`(${t} transport) sending data. ${pR(o,a.logMessageContent)}.`);const l=gR(o)?"arraybuffer":"text",u=await n.post(r,{content:o,headers:{...i,...a.headers},responseType:l,timeout:a.timeout,withCredentials:a.withCredentials});e.log(cR.Trace,`(${t} transport) request complete. Response status: ${u.statusCode}.`)}class fR{constructor(e,t){this._subject=e,this._observer=t}dispose(){const e=this._subject.observers.indexOf(this._observer);e>-1&&this._subject.observers.splice(e,1),0===this._subject.observers.length&&this._subject.cancelCallback&&this._subject.cancelCallback().catch((e=>{}))}}class mR{constructor(e){this._minLevel=e,this.out=console}log(e,t){if(e>=this._minLevel){const n=`[${(new Date).toISOString()}] ${cR[e]}: ${t}`;switch(e){case cR.Critical:case cR.Error:this.out.error(n);break;case cR.Warning:this.out.warn(n);break;case cR.Information:this.out.info(n);break;default:this.out.log(n)}}}}function _R(){let e="X-SignalR-User-Agent";return dR.isNode&&(e="User-Agent"),[e,vR("8.0.7",TR(),ER(),yR())]}function vR(e,t,n,r){let o="Microsoft SignalR/";const a=e.split(".");return o+=`${a[0]}.${a[1]}`,o+=` (${e}; `,o+=t&&""!==t?`${t}; `:"Unknown OS; ",o+=`${n}`,o+=r?`; ${r}`:"; Unknown Runtime Version",o+=")",o}function TR(){if(!dR.isNode)return"";switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}}function yR(){if(dR.isNode)return process.versions.node}function ER(){return dR.isNode?"NodeJS":"Browser"}function SR(e){return e.stack?e.stack:e.message?e.message:`${e}`}class IR extends sR{constructor(e){if(super(),this._logger=e,"undefined"==typeof fetch||dR.isNode){const e="function"==typeof __webpack_require__?__non_webpack_require__:require;this._jar=new(e("tough-cookie").CookieJar),"undefined"==typeof fetch?this._fetchType=e("node-fetch"):this._fetchType=fetch,this._fetchType=e("fetch-cookie")(this._fetchType,this._jar)}else this._fetchType=fetch.bind(function(){if("undefined"!=typeof globalThis)return globalThis;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("could not find global")}());if("undefined"==typeof AbortController){const e="function"==typeof __webpack_require__?__non_webpack_require__:require;this._abortControllerType=e("abort-controller")}else this._abortControllerType=AbortController}async send(e){if(e.abortSignal&&e.abortSignal.aborted)throw new eR;if(!e.method)throw new Error("No method defined.");if(!e.url)throw new Error("No url defined.");const t=new this._abortControllerType;let n;e.abortSignal&&(e.abortSignal.onabort=()=>{t.abort(),n=new eR});let r,o=null;if(e.timeout){const r=e.timeout;o=setTimeout((()=>{t.abort(),this._logger.log(cR.Warning,"Timeout from HTTP request."),n=new ZO}),r)}""===e.content&&(e.content=void 0),e.content&&(e.headers=e.headers||{},gR(e.content)?e.headers["Content-Type"]="application/octet-stream":e.headers["Content-Type"]="text/plain;charset=UTF-8");try{r=await this._fetchType(e.url,{body:e.content,cache:"no-cache",credentials:!0===e.withCredentials?"include":"same-origin",headers:{"X-Requested-With":"XMLHttpRequest",...e.headers},method:e.method,mode:"cors",redirect:"follow",signal:t.signal})}catch(e){if(n)throw n;throw this._logger.log(cR.Warning,`Error from HTTP request. ${e}.`),e}finally{o&&clearTimeout(o),e.abortSignal&&(e.abortSignal.onabort=null)}if(!r.ok){const e=await bR(r,"text");throw new QO(e||r.statusText,r.status)}const a=bR(r,e.responseType),i=await a;return new iR(r.status,r.statusText,i)}getCookieString(e){let t="";return dR.isNode&&this._jar&&this._jar.getCookies(e,((e,n)=>t=n.join("; "))),t}}function bR(e,t){let n;switch(t){case"arraybuffer":n=e.arrayBuffer();break;case"text":default:n=e.text();break;case"blob":case"document":case"json":throw new Error(`${t} is not supported.`)}return n}class AR extends sR{constructor(e){super(),this._logger=e}send(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new eR):e.method?e.url?new Promise(((t,n)=>{const r=new XMLHttpRequest;r.open(e.method,e.url,!0),r.withCredentials=void 0===e.withCredentials||e.withCredentials,r.setRequestHeader("X-Requested-With","XMLHttpRequest"),""===e.content&&(e.content=void 0),e.content&&(gR(e.content)?r.setRequestHeader("Content-Type","application/octet-stream"):r.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));const o=e.headers;o&&Object.keys(o).forEach((e=>{r.setRequestHeader(e,o[e])})),e.responseType&&(r.responseType=e.responseType),e.abortSignal&&(e.abortSignal.onabort=()=>{r.abort(),n(new eR)}),e.timeout&&(r.timeout=e.timeout),r.onload=()=>{e.abortSignal&&(e.abortSignal.onabort=null),r.status>=200&&r.status<300?t(new iR(r.status,r.statusText,r.response||r.responseText)):n(new QO(r.response||r.responseText||r.statusText,r.status))},r.onerror=()=>{this._logger.log(cR.Warning,`Error from HTTP request. ${r.status}: ${r.statusText}.`),n(new QO(r.statusText,r.status))},r.ontimeout=()=>{this._logger.log(cR.Warning,"Timeout from HTTP request."),n(new ZO)},r.send(e.content)})):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}}class wR extends sR{constructor(e){if(super(),"undefined"!=typeof fetch||dR.isNode)this._httpClient=new IR(e);else{if("undefined"==typeof XMLHttpRequest)throw new Error("No usable HttpClient found.");this._httpClient=new AR(e)}}send(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new eR):e.method?e.url?this._httpClient.send(e):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(e){return this._httpClient.getCookieString(e)}}class NR{static write(e){return`${e}${NR.RecordSeparator}`}static parse(e){if(e[e.length-1]!==NR.RecordSeparator)throw new Error("Message is incomplete.");const t=e.split(NR.RecordSeparator);return t.pop(),t}}NR.RecordSeparatorCode=30,NR.RecordSeparator=String.fromCharCode(NR.RecordSeparatorCode);class OR{writeHandshakeRequest(e){return NR.write(JSON.stringify(e))}parseHandshakeResponse(e){let t,n;if(gR(e)){const r=new Uint8Array(e),o=r.indexOf(NR.RecordSeparatorCode);if(-1===o)throw new Error("Message is incomplete.");const a=o+1;t=String.fromCharCode.apply(null,Array.prototype.slice.call(r.slice(0,a))),n=r.byteLength>a?r.slice(a).buffer:null}else{const r=e,o=r.indexOf(NR.RecordSeparator);if(-1===o)throw new Error("Message is incomplete.");const a=o+1;t=r.substring(0,a),n=r.length>a?r.substring(a):null}const r=NR.parse(t),o=JSON.parse(r[0]);if(o.type)throw new Error("Expected a handshake response from the server.");return[n,o]}}var RR;!function(e){e[e.Invocation=1]="Invocation",e[e.StreamItem=2]="StreamItem",e[e.Completion=3]="Completion",e[e.StreamInvocation=4]="StreamInvocation",e[e.CancelInvocation=5]="CancelInvocation",e[e.Ping=6]="Ping",e[e.Close=7]="Close",e[e.Ack=8]="Ack",e[e.Sequence=9]="Sequence"}(RR||(RR={}));let LR=class{constructor(){this.observers=[]}next(e){for(const t of this.observers)t.next(e)}error(e){for(const t of this.observers)t.error&&t.error(e)}complete(){for(const e of this.observers)e.complete&&e.complete()}subscribe(e){return this.observers.push(e),new fR(this,e)}};class CR{constructor(e,t,n){this._bufferSize=1e5,this._messages=[],this._totalMessageCount=0,this._waitForSequenceMessage=!1,this._nextReceivingSequenceId=1,this._latestReceivedSequenceId=0,this._bufferedByteCount=0,this._reconnectInProgress=!1,this._protocol=e,this._connection=t,this._bufferSize=n}async _send(e){const t=this._protocol.writeMessage(e);let n=Promise.resolve();if(this._isInvocationMessage(e)){this._totalMessageCount++;let e=()=>{},r=()=>{};gR(t)?this._bufferedByteCount+=t.byteLength:this._bufferedByteCount+=t.length,this._bufferedByteCount>=this._bufferSize&&(n=new Promise(((t,n)=>{e=t,r=n}))),this._messages.push(new PR(t,this._totalMessageCount,e,r))}try{this._reconnectInProgress||await this._connection.send(t)}catch{this._disconnected()}await n}_ack(e){let t=-1;for(let n=0;n<this._messages.length;n++){const r=this._messages[n];if(r._id<=e.sequenceId)t=n,gR(r._message)?this._bufferedByteCount-=r._message.byteLength:this._bufferedByteCount-=r._message.length,r._resolver();else{if(!(this._bufferedByteCount<this._bufferSize))break;r._resolver()}}-1!==t&&(this._messages=this._messages.slice(t+1))}_shouldProcessMessage(e){if(this._waitForSequenceMessage)return e.type===RR.Sequence&&(this._waitForSequenceMessage=!1,!0);if(!this._isInvocationMessage(e))return!0;const t=this._nextReceivingSequenceId;return this._nextReceivingSequenceId++,t<=this._latestReceivedSequenceId?(t===this._latestReceivedSequenceId&&this._ackTimer(),!1):(this._latestReceivedSequenceId=t,this._ackTimer(),!0)}_resetSequence(e){e.sequenceId>this._nextReceivingSequenceId?this._connection.stop(new Error("Sequence ID greater than amount of messages we've received.")):this._nextReceivingSequenceId=e.sequenceId}_disconnected(){this._reconnectInProgress=!0,this._waitForSequenceMessage=!0}async _resend(){const e=0!==this._messages.length?this._messages[0]._id:this._totalMessageCount+1;await this._connection.send(this._protocol.writeMessage({type:RR.Sequence,sequenceId:e}));const t=this._messages;for(const e of t)await this._connection.send(e._message);this._reconnectInProgress=!1}_dispose(e){null!=e||(e=new Error("Unable to reconnect to server."));for(const t of this._messages)t._rejector(e)}_isInvocationMessage(e){switch(e.type){case RR.Invocation:case RR.StreamItem:case RR.Completion:case RR.StreamInvocation:case RR.CancelInvocation:return!0;case RR.Close:case RR.Sequence:case RR.Ping:case RR.Ack:return!1}}_ackTimer(){void 0===this._ackTimerHandle&&(this._ackTimerHandle=setTimeout((async()=>{try{this._reconnectInProgress||await this._connection.send(this._protocol.writeMessage({type:RR.Ack,sequenceId:this._latestReceivedSequenceId}))}catch{}clearTimeout(this._ackTimerHandle),this._ackTimerHandle=void 0}),1e3))}}class PR{constructor(e,t,n,r){this._message=e,this._id=t,this._resolver=n,this._rejector=r}}var xR;!function(e){e.Disconnected="Disconnected",e.Connecting="Connecting",e.Connected="Connected",e.Disconnecting="Disconnecting",e.Reconnecting="Reconnecting"}(xR||(xR={}));class kR{static create(e,t,n,r,o,a,i){return new kR(e,t,n,r,o,a,i)}constructor(e,t,n,r,o,a,i){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(cR.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://learn.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},uR.isRequired(e,"connection"),uR.isRequired(t,"logger"),uR.isRequired(n,"protocol"),this.serverTimeoutInMilliseconds=null!=o?o:3e4,this.keepAliveIntervalInMilliseconds=null!=a?a:15e3,this._statefulReconnectBufferSize=null!=i?i:1e5,this._logger=t,this._protocol=n,this.connection=e,this._reconnectPolicy=r,this._handshakeProtocol=new OR,this.connection.onreceive=e=>this._processIncomingData(e),this.connection.onclose=e=>this._connectionClosed(e),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=xR.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:RR.Ping})}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(e){if(this._connectionState!==xR.Disconnected&&this._connectionState!==xR.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!e)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=e}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}async _startWithStateTransitions(){if(this._connectionState!==xR.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));this._connectionState=xR.Connecting,this._logger.log(cR.Debug,"Starting HubConnection.");try{await this._startInternal(),dR.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=xR.Connected,this._connectionStarted=!0,this._logger.log(cR.Debug,"HubConnection connected successfully.")}catch(e){return this._connectionState=xR.Disconnected,this._logger.log(cR.Debug,`HubConnection failed to start successfully because of error '${e}'.`),Promise.reject(e)}}async _startInternal(){this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1;const e=new Promise(((e,t)=>{this._handshakeResolver=e,this._handshakeRejecter=t}));await this.connection.start(this._protocol.transferFormat);try{let t=this._protocol.version;this.connection.features.reconnect||(t=1);const n={protocol:this._protocol.name,version:t};if(this._logger.log(cR.Debug,"Sending handshake request."),await this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(n)),this._logger.log(cR.Information,`Using HubProtocol '${this._protocol.name}'.`),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),await e,this._stopDuringStartError)throw this._stopDuringStartError;(this.connection.features.reconnect||!1)&&(this._messageBuffer=new CR(this._protocol,this.connection,this._statefulReconnectBufferSize),this.connection.features.disconnected=this._messageBuffer._disconnected.bind(this._messageBuffer),this.connection.features.resend=()=>{if(this._messageBuffer)return this._messageBuffer._resend()}),this.connection.features.inherentKeepAlive||await this._sendMessage(this._cachedPingMessage)}catch(e){throw this._logger.log(cR.Debug,`Hub handshake failed with error '${e}' during start(). Stopping HubConnection.`),this._cleanupTimeout(),this._cleanupPingTimer(),await this.connection.stop(e),e}}async stop(){const e=this._startPromise;this.connection.features.reconnect=!1,this._stopPromise=this._stopInternal(),await this._stopPromise;try{await e}catch(e){}}_stopInternal(e){if(this._connectionState===xR.Disconnected)return this._logger.log(cR.Debug,`Call to HubConnection.stop(${e}) ignored because it is already in the disconnected state.`),Promise.resolve();if(this._connectionState===xR.Disconnecting)return this._logger.log(cR.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;const t=this._connectionState;return this._connectionState=xR.Disconnecting,this._logger.log(cR.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(cR.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(t===xR.Connected&&this._sendCloseMessage(),this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=e||new eR("The connection was stopped before the hub handshake could complete."),this.connection.stop(e))}async _sendCloseMessage(){try{await this._sendWithProtocol(this._createCloseMessage())}catch{}}stream(e,...t){const[n,r]=this._replaceStreamingParams(t),o=this._createStreamInvocation(e,t,r);let a;const i=new LR;return i.cancelCallback=()=>{const e=this._createCancelInvocation(o.invocationId);return delete this._callbacks[o.invocationId],a.then((()=>this._sendWithProtocol(e)))},this._callbacks[o.invocationId]=(e,t)=>{t?i.error(t):e&&(e.type===RR.Completion?e.error?i.error(new Error(e.error)):i.complete():i.next(e.item))},a=this._sendWithProtocol(o).catch((e=>{i.error(e),delete this._callbacks[o.invocationId]})),this._launchStreams(n,a),i}_sendMessage(e){return this._resetKeepAliveInterval(),this.connection.send(e)}_sendWithProtocol(e){return this._messageBuffer?this._messageBuffer._send(e):this._sendMessage(this._protocol.writeMessage(e))}send(e,...t){const[n,r]=this._replaceStreamingParams(t),o=this._sendWithProtocol(this._createInvocation(e,t,!0,r));return this._launchStreams(n,o),o}invoke(e,...t){const[n,r]=this._replaceStreamingParams(t),o=this._createInvocation(e,t,!1,r),a=new Promise(((e,t)=>{this._callbacks[o.invocationId]=(n,r)=>{r?t(r):n&&(n.type===RR.Completion?n.error?t(new Error(n.error)):e(n.result):t(new Error(`Unexpected message type: ${n.type}`)))};const r=this._sendWithProtocol(o).catch((e=>{t(e),delete this._callbacks[o.invocationId]}));this._launchStreams(n,r)}));return a}on(e,t){e&&t&&(e=e.toLowerCase(),this._methods[e]||(this._methods[e]=[]),-1===this._methods[e].indexOf(t)&&this._methods[e].push(t))}off(e,t){if(!e)return;e=e.toLowerCase();const n=this._methods[e];if(n)if(t){const r=n.indexOf(t);-1!==r&&(n.splice(r,1),0===n.length&&delete this._methods[e])}else delete this._methods[e]}onclose(e){e&&this._closedCallbacks.push(e)}onreconnecting(e){e&&this._reconnectingCallbacks.push(e)}onreconnected(e){e&&this._reconnectedCallbacks.push(e)}_processIncomingData(e){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(e=this._processHandshakeResponse(e),this._receivedHandshakeResponse=!0),e){const t=this._protocol.parseMessages(e,this._logger);for(const e of t)if(!this._messageBuffer||this._messageBuffer._shouldProcessMessage(e))switch(e.type){case RR.Invocation:this._invokeClientMethod(e).catch((e=>{this._logger.log(cR.Error,`Invoke client method threw error: ${SR(e)}`)}));break;case RR.StreamItem:case RR.Completion:{const t=this._callbacks[e.invocationId];if(t){e.type===RR.Completion&&delete this._callbacks[e.invocationId];try{t(e)}catch(e){this._logger.log(cR.Error,`Stream callback threw error: ${SR(e)}`)}}break}case RR.Ping:break;case RR.Close:{this._logger.log(cR.Information,"Close message received from server.");const t=e.error?new Error("Server returned an error on close: "+e.error):void 0;!0===e.allowReconnect?this.connection.stop(t):this._stopPromise=this._stopInternal(t);break}case RR.Ack:this._messageBuffer&&this._messageBuffer._ack(e);break;case RR.Sequence:this._messageBuffer&&this._messageBuffer._resetSequence(e);break;default:this._logger.log(cR.Warning,`Invalid message type: ${e.type}.`)}}this._resetTimeoutPeriod()}_processHandshakeResponse(e){let t,n;try{[n,t]=this._handshakeProtocol.parseHandshakeResponse(e)}catch(e){const t="Error parsing handshake response: "+e;this._logger.log(cR.Error,t);const n=new Error(t);throw this._handshakeRejecter(n),n}if(t.error){const e="Server returned handshake error: "+t.error;this._logger.log(cR.Error,e);const n=new Error(e);throw this._handshakeRejecter(n),n}return this._logger.log(cR.Debug,"Server handshake complete."),this._handshakeResolver(),n}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=(new Date).getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){if(!(this.connection.features&&this.connection.features.inherentKeepAlive||(this._timeoutHandle=setTimeout((()=>this.serverTimeout()),this.serverTimeoutInMilliseconds),void 0!==this._pingServerHandle))){let e=this._nextKeepAlive-(new Date).getTime();e<0&&(e=0),this._pingServerHandle=setTimeout((async()=>{if(this._connectionState===xR.Connected)try{await this._sendMessage(this._cachedPingMessage)}catch{this._cleanupPingTimer()}}),e)}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}async _invokeClientMethod(e){const t=e.target.toLowerCase(),n=this._methods[t];if(!n)return this._logger.log(cR.Warning,`No client method with the name '${t}' found.`),void(e.invocationId&&(this._logger.log(cR.Warning,`No result given for '${t}' method and invocation ID '${e.invocationId}'.`),await this._sendWithProtocol(this._createCompletionMessage(e.invocationId,"Client didn't provide a result.",null))));const r=n.slice(),o=!!e.invocationId;let a,i,s;for(const n of r)try{const r=a;a=await n.apply(this,e.arguments),o&&a&&r&&(this._logger.log(cR.Error,`Multiple results provided for '${t}'. Sending error to server.`),s=this._createCompletionMessage(e.invocationId,"Client provided multiple results.",null)),i=void 0}catch(e){i=e,this._logger.log(cR.Error,`A callback for the method '${t}' threw error '${e}'.`)}s?await this._sendWithProtocol(s):o?(i?s=this._createCompletionMessage(e.invocationId,`${i}`,null):void 0!==a?s=this._createCompletionMessage(e.invocationId,null,a):(this._logger.log(cR.Warning,`No result given for '${t}' method and invocation ID '${e.invocationId}'.`),s=this._createCompletionMessage(e.invocationId,"Client didn't provide a result.",null)),await this._sendWithProtocol(s)):a&&this._logger.log(cR.Error,`Result given for '${t}' method but server is not expecting a result.`)}_connectionClosed(e){this._logger.log(cR.Debug,`HubConnection.connectionClosed(${e}) called while in state ${this._connectionState}.`),this._stopDuringStartError=this._stopDuringStartError||e||new eR("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(e||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===xR.Disconnecting?this._completeClose(e):this._connectionState===xR.Connected&&this._reconnectPolicy?this._reconnect(e):this._connectionState===xR.Connected&&this._completeClose(e)}_completeClose(e){if(this._connectionStarted){this._connectionState=xR.Disconnected,this._connectionStarted=!1,this._messageBuffer&&(this._messageBuffer._dispose(null!=e?e:new Error("Connection closed.")),this._messageBuffer=void 0),dR.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach((t=>t.apply(this,[e])))}catch(t){this._logger.log(cR.Error,`An onclose callback called with error '${e}' threw error '${t}'.`)}}}async _reconnect(e){const t=Date.now();let n=0,r=void 0!==e?e:new Error("Attempting to reconnect due to a unknown error."),o=this._getNextRetryDelay(n++,0,r);if(null===o)return this._logger.log(cR.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),void this._completeClose(e);if(this._connectionState=xR.Reconnecting,e?this._logger.log(cR.Information,`Connection reconnecting because of error '${e}'.`):this._logger.log(cR.Information,"Connection reconnecting."),0!==this._reconnectingCallbacks.length){try{this._reconnectingCallbacks.forEach((t=>t.apply(this,[e])))}catch(t){this._logger.log(cR.Error,`An onreconnecting callback called with error '${e}' threw error '${t}'.`)}if(this._connectionState!==xR.Reconnecting)return void this._logger.log(cR.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.")}for(;null!==o;){if(this._logger.log(cR.Information,`Reconnect attempt number ${n} will start in ${o} ms.`),await new Promise((e=>{this._reconnectDelayHandle=setTimeout(e,o)})),this._reconnectDelayHandle=void 0,this._connectionState!==xR.Reconnecting)return void this._logger.log(cR.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");try{if(await this._startInternal(),this._connectionState=xR.Connected,this._logger.log(cR.Information,"HubConnection reconnected successfully."),0!==this._reconnectedCallbacks.length)try{this._reconnectedCallbacks.forEach((e=>e.apply(this,[this.connection.connectionId])))}catch(e){this._logger.log(cR.Error,`An onreconnected callback called with connectionId '${this.connection.connectionId}; threw error '${e}'.`)}return}catch(e){if(this._logger.log(cR.Information,`Reconnect attempt failed because of error '${e}'.`),this._connectionState!==xR.Reconnecting)return this._logger.log(cR.Debug,`Connection moved to the '${this._connectionState}' from the reconnecting state during reconnect attempt. Done reconnecting.`),void(this._connectionState===xR.Disconnecting&&this._completeClose());r=e instanceof Error?e:new Error(e.toString()),o=this._getNextRetryDelay(n++,Date.now()-t,r)}}this._logger.log(cR.Information,`Reconnect retries have been exhausted after ${Date.now()-t} ms and ${n} failed attempts. Connection disconnecting.`),this._completeClose()}_getNextRetryDelay(e,t,n){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:t,previousRetryCount:e,retryReason:n})}catch(n){return this._logger.log(cR.Error,`IRetryPolicy.nextRetryDelayInMilliseconds(${e}, ${t}) threw error '${n}'.`),null}}_cancelCallbacksWithError(e){const t=this._callbacks;this._callbacks={},Object.keys(t).forEach((n=>{const r=t[n];try{r(null,e)}catch(t){this._logger.log(cR.Error,`Stream 'error' callback called with '${e}' threw error: ${SR(t)}`)}}))}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(e,t,n,r){if(n)return 0!==r.length?{arguments:t,streamIds:r,target:e,type:RR.Invocation}:{arguments:t,target:e,type:RR.Invocation};{const n=this._invocationId;return this._invocationId++,0!==r.length?{arguments:t,invocationId:n.toString(),streamIds:r,target:e,type:RR.Invocation}:{arguments:t,invocationId:n.toString(),target:e,type:RR.Invocation}}}_launchStreams(e,t){if(0!==e.length){t||(t=Promise.resolve());for(const n in e)e[n].subscribe({complete:()=>{t=t.then((()=>this._sendWithProtocol(this._createCompletionMessage(n))))},error:e=>{let r;r=e instanceof Error?e.message:e&&e.toString?e.toString():"Unknown error",t=t.then((()=>this._sendWithProtocol(this._createCompletionMessage(n,r))))},next:e=>{t=t.then((()=>this._sendWithProtocol(this._createStreamItemMessage(n,e))))}})}}_replaceStreamingParams(e){const t=[],n=[];for(let r=0;r<e.length;r++){const o=e[r];if(this._isObservable(o)){const a=this._invocationId;this._invocationId++,t[a]=o,n.push(a.toString()),e.splice(r,1)}}return[t,n]}_isObservable(e){return e&&e.subscribe&&"function"==typeof e.subscribe}_createStreamInvocation(e,t,n){const r=this._invocationId;return this._invocationId++,0!==n.length?{arguments:t,invocationId:r.toString(),streamIds:n,target:e,type:RR.StreamInvocation}:{arguments:t,invocationId:r.toString(),target:e,type:RR.StreamInvocation}}_createCancelInvocation(e){return{invocationId:e,type:RR.CancelInvocation}}_createStreamItemMessage(e,t){return{invocationId:e,item:t,type:RR.StreamItem}}_createCompletionMessage(e,t,n){return t?{error:t,invocationId:e,type:RR.Completion}:{invocationId:e,result:n,type:RR.Completion}}_createCloseMessage(){return{type:RR.Close}}}const DR=[0,2e3,1e4,3e4,null];class UR{constructor(e){this._retryDelays=void 0!==e?[...e,null]:DR}nextRetryDelayInMilliseconds(e){return this._retryDelays[e.previousRetryCount]}}class MR{}MR.Authorization="Authorization",MR.Cookie="Cookie";class GR extends sR{constructor(e,t){super(),this._innerClient=e,this._accessTokenFactory=t}async send(e){let t=!0;this._accessTokenFactory&&(!this._accessToken||e.url&&e.url.indexOf("/negotiate?")>0)&&(t=!1,this._accessToken=await this._accessTokenFactory()),this._setAuthorizationHeader(e);const n=await this._innerClient.send(e);return t&&401===n.statusCode&&this._accessTokenFactory?(this._accessToken=await this._accessTokenFactory(),this._setAuthorizationHeader(e),await this._innerClient.send(e)):n}_setAuthorizationHeader(e){e.headers||(e.headers={}),this._accessToken?e.headers[MR.Authorization]=`Bearer ${this._accessToken}`:this._accessTokenFactory&&e.headers[MR.Authorization]&&delete e.headers[MR.Authorization]}getCookieString(e){return this._innerClient.getCookieString(e)}}var $R,VR;!function(e){e[e.None=0]="None",e[e.WebSockets=1]="WebSockets",e[e.ServerSentEvents=2]="ServerSentEvents",e[e.LongPolling=4]="LongPolling"}($R||($R={})),function(e){e[e.Text=1]="Text",e[e.Binary=2]="Binary"}(VR||(VR={}));let FR=class{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}};class jR{get pollAborted(){return this._pollAbort.aborted}constructor(e,t,n){this._httpClient=e,this._logger=t,this._pollAbort=new FR,this._options=n,this._running=!1,this.onreceive=null,this.onclose=null}async connect(e,t){if(uR.isRequired(e,"url"),uR.isRequired(t,"transferFormat"),uR.isIn(t,VR,"transferFormat"),this._url=e,this._logger.log(cR.Trace,"(LongPolling transport) Connecting."),t===VR.Binary&&"undefined"!=typeof XMLHttpRequest&&"string"!=typeof(new XMLHttpRequest).responseType)throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");const[n,r]=_R(),o={[n]:r,...this._options.headers},a={abortSignal:this._pollAbort.signal,headers:o,timeout:1e5,withCredentials:this._options.withCredentials};t===VR.Binary&&(a.responseType="arraybuffer");const i=`${e}&_=${Date.now()}`;this._logger.log(cR.Trace,`(LongPolling transport) polling: ${i}.`);const s=await this._httpClient.get(i,a);200!==s.statusCode?(this._logger.log(cR.Error,`(LongPolling transport) Unexpected response code: ${s.statusCode}.`),this._closeError=new QO(s.statusText||"",s.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,a)}async _poll(e,t){try{for(;this._running;)try{const n=`${e}&_=${Date.now()}`;this._logger.log(cR.Trace,`(LongPolling transport) polling: ${n}.`);const r=await this._httpClient.get(n,t);204===r.statusCode?(this._logger.log(cR.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):200!==r.statusCode?(this._logger.log(cR.Error,`(LongPolling transport) Unexpected response code: ${r.statusCode}.`),this._closeError=new QO(r.statusText||"",r.statusCode),this._running=!1):r.content?(this._logger.log(cR.Trace,`(LongPolling transport) data received. ${pR(r.content,this._options.logMessageContent)}.`),this.onreceive&&this.onreceive(r.content)):this._logger.log(cR.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(e){this._running?e instanceof ZO?this._logger.log(cR.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=e,this._running=!1):this._logger.log(cR.Trace,`(LongPolling transport) Poll errored after shutdown: ${e.message}`)}}finally{this._logger.log(cR.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose()}}async send(e){return this._running?hR(this._logger,"LongPolling",this._httpClient,this._url,e,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}async stop(){this._logger.log(cR.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort();try{await this._receiving,this._logger.log(cR.Trace,`(LongPolling transport) sending DELETE request to ${this._url}.`);const e={},[t,n]=_R();e[t]=n;const r={headers:{...e,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials};let o;try{await this._httpClient.delete(this._url,r)}catch(e){o=e}o?o instanceof QO&&(404===o.statusCode?this._logger.log(cR.Trace,"(LongPolling transport) A 404 response was returned from sending a DELETE request."):this._logger.log(cR.Trace,`(LongPolling transport) Error sending a DELETE request: ${o}`)):this._logger.log(cR.Trace,"(LongPolling transport) DELETE request accepted.")}finally{this._logger.log(cR.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose()}}_raiseOnClose(){if(this.onclose){let e="(LongPolling transport) Firing onclose event.";this._closeError&&(e+=" Error: "+this._closeError),this._logger.log(cR.Trace,e),this.onclose(this._closeError)}}}class WR{constructor(e,t,n,r){this._httpClient=e,this._accessToken=t,this._logger=n,this._options=r,this.onreceive=null,this.onclose=null}async connect(e,t){return uR.isRequired(e,"url"),uR.isRequired(t,"transferFormat"),uR.isIn(t,VR,"transferFormat"),this._logger.log(cR.Trace,"(SSE transport) Connecting."),this._url=e,this._accessToken&&(e+=(e.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(this._accessToken)}`),new Promise(((n,r)=>{let o,a=!1;if(t===VR.Text){if(dR.isBrowser||dR.isWebWorker)o=new this._options.EventSource(e,{withCredentials:this._options.withCredentials});else{const t=this._httpClient.getCookieString(e),n={};n.Cookie=t;const[r,a]=_R();n[r]=a,o=new this._options.EventSource(e,{withCredentials:this._options.withCredentials,headers:{...n,...this._options.headers}})}try{o.onmessage=e=>{if(this.onreceive)try{this._logger.log(cR.Trace,`(SSE transport) data received. ${pR(e.data,this._options.logMessageContent)}.`),this.onreceive(e.data)}catch(e){return void this._close(e)}},o.onerror=e=>{a?this._close():r(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},o.onopen=()=>{this._logger.log(cR.Information,`SSE connected to ${this._url}`),this._eventSource=o,a=!0,n()}}catch(e){return void r(e)}}else r(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"))}))}async send(e){return this._eventSource?hR(this._logger,"SSE",this._httpClient,this._url,e,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}stop(){return this._close(),Promise.resolve()}_close(e){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(e))}}class qR{constructor(e,t,n,r,o,a){this._logger=n,this._accessTokenFactory=t,this._logMessageContent=r,this._webSocketConstructor=o,this._httpClient=e,this.onreceive=null,this.onclose=null,this._headers=a}async connect(e,t){let n;return uR.isRequired(e,"url"),uR.isRequired(t,"transferFormat"),uR.isIn(t,VR,"transferFormat"),this._logger.log(cR.Trace,"(WebSockets transport) Connecting."),this._accessTokenFactory&&(n=await this._accessTokenFactory()),new Promise(((r,o)=>{let a;e=e.replace(/^http/,"ws");const i=this._httpClient.getCookieString(e);let s=!1;if(dR.isNode||dR.isReactNative){const t={},[r,o]=_R();t[r]=o,n&&(t[MR.Authorization]=`Bearer ${n}`),i&&(t[MR.Cookie]=i),a=new this._webSocketConstructor(e,void 0,{headers:{...t,...this._headers}})}else n&&(e+=(e.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(n)}`);a||(a=new this._webSocketConstructor(e)),t===VR.Binary&&(a.binaryType="arraybuffer"),a.onopen=t=>{this._logger.log(cR.Information,`WebSocket connected to ${e}.`),this._webSocket=a,s=!0,r()},a.onerror=e=>{let t=null;t="undefined"!=typeof ErrorEvent&&e instanceof ErrorEvent?e.error:"There was an error with the transport",this._logger.log(cR.Information,`(WebSockets transport) ${t}.`)},a.onmessage=e=>{if(this._logger.log(cR.Trace,`(WebSockets transport) data received. ${pR(e.data,this._logMessageContent)}.`),this.onreceive)try{this.onreceive(e.data)}catch(e){return void this._close(e)}},a.onclose=e=>{if(s)this._close(e);else{let t=null;t="undefined"!=typeof ErrorEvent&&e instanceof ErrorEvent?e.error:"WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",o(new Error(t))}}}))}send(e){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(cR.Trace,`(WebSockets transport) sending data. ${pR(e,this._logMessageContent)}.`),this._webSocket.send(e),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(e){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(cR.Trace,"(WebSockets transport) socket closed."),this.onclose&&(!this._isCloseEvent(e)||!1!==e.wasClean&&1e3===e.code?e instanceof Error?this.onclose(e):this.onclose():this.onclose(new Error(`WebSocket closed with status code: ${e.code} (${e.reason||"no reason given"}).`)))}_isCloseEvent(e){return e&&"boolean"==typeof e.wasClean&&"number"==typeof e.code}}class BR{constructor(e,t={}){if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,uR.isRequired(e,"url"),this._logger=function(e){return void 0===e?new mR(cR.Information):null===e?lR.instance:void 0!==e.log?e:new mR(e)}(t.logger),this.baseUrl=this._resolveUrl(e),(t=t||{}).logMessageContent=void 0!==t.logMessageContent&&t.logMessageContent,"boolean"!=typeof t.withCredentials&&void 0!==t.withCredentials)throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");t.withCredentials=void 0===t.withCredentials||t.withCredentials,t.timeout=void 0===t.timeout?1e5:t.timeout;let n=null,r=null;if(dR.isNode&&"undefined"!=typeof require){const e="function"==typeof __webpack_require__?__non_webpack_require__:require;n=e("ws"),r=e("eventsource")}dR.isNode||"undefined"==typeof WebSocket||t.WebSocket?dR.isNode&&!t.WebSocket&&n&&(t.WebSocket=n):t.WebSocket=WebSocket,dR.isNode||"undefined"==typeof EventSource||t.EventSource?dR.isNode&&!t.EventSource&&void 0!==r&&(t.EventSource=r):t.EventSource=EventSource,this._httpClient=new GR(t.httpClient||new wR(this._logger),t.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=t,this.onreceive=null,this.onclose=null}async start(e){if(e=e||VR.Binary,uR.isIn(e,VR,"transferFormat"),this._logger.log(cR.Debug,`Starting connection with transfer format '${VR[e]}'.`),"Disconnected"!==this._connectionState)return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(this._connectionState="Connecting",this._startInternalPromise=this._startInternal(e),await this._startInternalPromise,"Disconnecting"===this._connectionState){const e="Failed to start the HttpConnection before stop() was called.";return this._logger.log(cR.Error,e),await this._stopPromise,Promise.reject(new eR(e))}if("Connected"!==this._connectionState){const e="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return this._logger.log(cR.Error,e),Promise.reject(new eR(e))}this._connectionStarted=!0}send(e){return"Connected"!==this._connectionState?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new HR(this.transport)),this._sendQueue.send(e))}async stop(e){return"Disconnected"===this._connectionState?(this._logger.log(cR.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnected state.`),Promise.resolve()):"Disconnecting"===this._connectionState?(this._logger.log(cR.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnecting state.`),this._stopPromise):(this._connectionState="Disconnecting",this._stopPromise=new Promise((e=>{this._stopPromiseResolver=e})),await this._stopInternal(e),void await this._stopPromise)}async _stopInternal(e){this._stopError=e;try{await this._startInternalPromise}catch(e){}if(this.transport){try{await this.transport.stop()}catch(e){this._logger.log(cR.Error,`HttpConnection.transport.stop() threw error '${e}'.`),this._stopConnection()}this.transport=void 0}else this._logger.log(cR.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")}async _startInternal(e){let t=this.baseUrl;this._accessTokenFactory=this._options.accessTokenFactory,this._httpClient._accessTokenFactory=this._accessTokenFactory;try{if(this._options.skipNegotiation){if(this._options.transport!==$R.WebSockets)throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");this.transport=this._constructTransport($R.WebSockets),await this._startTransport(t,e)}else{let n=null,r=0;do{if(n=await this._getNegotiationResponse(t),"Disconnecting"===this._connectionState||"Disconnected"===this._connectionState)throw new eR("The connection was stopped during negotiation.");if(n.error)throw new Error(n.error);if(n.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(n.url&&(t=n.url),n.accessToken){const e=n.accessToken;this._accessTokenFactory=()=>e,this._httpClient._accessToken=e,this._httpClient._accessTokenFactory=void 0}r++}while(n.url&&r<100);if(100===r&&n.url)throw new Error("Negotiate redirection limit exceeded.");await this._createTransport(t,this._options.transport,n,e)}this.transport instanceof jR&&(this.features.inherentKeepAlive=!0),"Connecting"===this._connectionState&&(this._logger.log(cR.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected")}catch(e){return this._logger.log(cR.Error,"Failed to start the connection: "+e),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),Promise.reject(e)}}async _getNegotiationResponse(e){const t={},[n,r]=_R();t[n]=r;const o=this._resolveNegotiateUrl(e);this._logger.log(cR.Debug,`Sending negotiation request: ${o}.`);try{const e=await this._httpClient.post(o,{content:"",headers:{...t,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials});if(200!==e.statusCode)return Promise.reject(new Error(`Unexpected status code returned from negotiate '${e.statusCode}'`));const n=JSON.parse(e.content);return(!n.negotiateVersion||n.negotiateVersion<1)&&(n.connectionToken=n.connectionId),n.useStatefulReconnect&&!0!==this._options._useStatefulReconnect?Promise.reject(new oR("Client didn't negotiate Stateful Reconnect but the server did.")):n}catch(e){let t="Failed to complete negotiation with the server: "+e;return e instanceof QO&&404===e.statusCode&&(t+=" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(cR.Error,t),Promise.reject(new oR(t))}}_createConnectUrl(e,t){return t?e+(-1===e.indexOf("?")?"?":"&")+`id=${t}`:e}async _createTransport(e,t,n,r){let o=this._createConnectUrl(e,n.connectionToken);if(this._isITransport(t))return this._logger.log(cR.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=t,await this._startTransport(o,r),void(this.connectionId=n.connectionId);const a=[],i=n.availableTransports||[];let s=n;for(const n of i){const i=this._resolveTransportOrError(n,t,r,!0===(null==s?void 0:s.useStatefulReconnect));if(i instanceof Error)a.push(`${n.transport} failed:`),a.push(i);else if(this._isITransport(i)){if(this.transport=i,!s){try{s=await this._getNegotiationResponse(e)}catch(e){return Promise.reject(e)}o=this._createConnectUrl(e,s.connectionToken)}try{return await this._startTransport(o,r),void(this.connectionId=s.connectionId)}catch(e){if(this._logger.log(cR.Error,`Failed to start the transport '${n.transport}': ${e}`),s=void 0,a.push(new rR(`${n.transport} failed: ${e}`,$R[n.transport])),"Connecting"!==this._connectionState){const e="Failed to select transport before stop() was called.";return this._logger.log(cR.Debug,e),Promise.reject(new eR(e))}}}}return a.length>0?Promise.reject(new aR(`Unable to connect to the server with any of the available transports. ${a.join(" ")}`,a)):Promise.reject(new Error("None of the transports supported by the client are supported by the server."))}_constructTransport(e){switch(e){case $R.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new qR(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case $R.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new WR(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case $R.LongPolling:return new jR(this._httpClient,this._logger,this._options);default:throw new Error(`Unknown transport: ${e}.`)}}_startTransport(e,t){return this.transport.onreceive=this.onreceive,this.features.reconnect?this.transport.onclose=async n=>{let r=!1;if(this.features.reconnect){try{this.features.disconnected(),await this.transport.connect(e,t),await this.features.resend()}catch{r=!0}r&&this._stopConnection(n)}else this._stopConnection(n)}:this.transport.onclose=e=>this._stopConnection(e),this.transport.connect(e,t)}_resolveTransportOrError(e,t,n,r){const o=$R[e.transport];if(null==o)return this._logger.log(cR.Debug,`Skipping transport '${e.transport}' because it is not supported by this client.`),new Error(`Skipping transport '${e.transport}' because it is not supported by this client.`);if(!function(e,t){return!e||!!(t&e)}(t,o))return this._logger.log(cR.Debug,`Skipping transport '${$R[o]}' because it was disabled by the client.`),new nR(`'${$R[o]}' is disabled by the client.`,o);if(!(e.transferFormats.map((e=>VR[e])).indexOf(n)>=0))return this._logger.log(cR.Debug,`Skipping transport '${$R[o]}' because it does not support the requested transfer format '${VR[n]}'.`),new Error(`'${$R[o]}' does not support ${VR[n]}.`);if(o===$R.WebSockets&&!this._options.WebSocket||o===$R.ServerSentEvents&&!this._options.EventSource)return this._logger.log(cR.Debug,`Skipping transport '${$R[o]}' because it is not supported in your environment.'`),new tR(`'${$R[o]}' is not supported in your environment.`,o);this._logger.log(cR.Debug,`Selecting transport '${$R[o]}'.`);try{return this.features.reconnect=o===$R.WebSockets?r:void 0,this._constructTransport(o)}catch(e){return e}}_isITransport(e){return e&&"object"==typeof e&&"connect"in e}_stopConnection(e){if(this._logger.log(cR.Debug,`HttpConnection.stopConnection(${e}) called while in state ${this._connectionState}.`),this.transport=void 0,e=this._stopError||e,this._stopError=void 0,"Disconnected"!==this._connectionState){if("Connecting"===this._connectionState)throw this._logger.log(cR.Warning,`Call to HttpConnection.stopConnection(${e}) was ignored because the connection is still in the connecting state.`),new Error(`HttpConnection.stopConnection(${e}) was called while the connection is still in the connecting state.`);if("Disconnecting"===this._connectionState&&this._stopPromiseResolver(),e?this._logger.log(cR.Error,`Connection disconnected with error '${e}'.`):this._logger.log(cR.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch((e=>{this._logger.log(cR.Error,`TransportSendQueue.stop() threw error '${e}'.`)})),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(e)}catch(t){this._logger.log(cR.Error,`HttpConnection.onclose(${e}) threw error '${t}'.`)}}}else this._logger.log(cR.Debug,`Call to HttpConnection.stopConnection(${e}) was ignored because the connection is already in the disconnected state.`)}_resolveUrl(e){if(0===e.lastIndexOf("https://",0)||0===e.lastIndexOf("http://",0))return e;if(!dR.isBrowser)throw new Error(`Cannot resolve '${e}'.`);const t=window.document.createElement("a");return t.href=e,this._logger.log(cR.Information,`Normalizing '${e}' to '${t.href}'.`),t.href}_resolveNegotiateUrl(e){const t=new URL(e);t.pathname.endsWith("/")?t.pathname+="negotiate":t.pathname+="/negotiate";const n=new URLSearchParams(t.searchParams);return n.has("negotiateVersion")||n.append("negotiateVersion",this._negotiateVersion.toString()),n.has("useStatefulReconnect")?"true"===n.get("useStatefulReconnect")&&(this._options._useStatefulReconnect=!0):!0===this._options._useStatefulReconnect&&n.append("useStatefulReconnect","true"),t.search=n.toString(),t.toString()}}class HR{constructor(e){this._transport=e,this._buffer=[],this._executing=!0,this._sendBufferedData=new JR,this._transportResult=new JR,this._sendLoopPromise=this._sendLoop()}send(e){return this._bufferData(e),this._transportResult||(this._transportResult=new JR),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(e){if(this._buffer.length&&typeof this._buffer[0]!=typeof e)throw new Error(`Expected data to be of type ${typeof this._buffer} but was of type ${typeof e}`);this._buffer.push(e),this._sendBufferedData.resolve()}async _sendLoop(){for(;;){if(await this._sendBufferedData.promise,!this._executing){this._transportResult&&this._transportResult.reject("Connection stopped.");break}this._sendBufferedData=new JR;const e=this._transportResult;this._transportResult=void 0;const t="string"==typeof this._buffer[0]?this._buffer.join(""):HR._concatBuffers(this._buffer);this._buffer.length=0;try{await this._transport.send(t),e.resolve()}catch(t){e.reject(t)}}}static _concatBuffers(e){const t=e.map((e=>e.byteLength)).reduce(((e,t)=>e+t)),n=new Uint8Array(t);let r=0;for(const t of e)n.set(new Uint8Array(t),r),r+=t.byteLength;return n.buffer}}class JR{constructor(){this.promise=new Promise(((e,t)=>[this._resolver,this._rejecter]=[e,t]))}resolve(){this._resolver()}reject(e){this._rejecter(e)}}class YR{constructor(){this.name="json",this.version=2,this.transferFormat=VR.Text}parseMessages(e,t){if("string"!=typeof e)throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!e)return[];null===t&&(t=lR.instance);const n=NR.parse(e),r=[];for(const e of n){const n=JSON.parse(e);if("number"!=typeof n.type)throw new Error("Invalid payload.");switch(n.type){case RR.Invocation:this._isInvocationMessage(n);break;case RR.StreamItem:this._isStreamItemMessage(n);break;case RR.Completion:this._isCompletionMessage(n);break;case RR.Ping:case RR.Close:break;case RR.Ack:this._isAckMessage(n);break;case RR.Sequence:this._isSequenceMessage(n);break;default:t.log(cR.Information,"Unknown message type '"+n.type+"' ignored.");continue}r.push(n)}return r}writeMessage(e){return NR.write(JSON.stringify(e))}_isInvocationMessage(e){this._assertNotEmptyString(e.target,"Invalid payload for Invocation message."),void 0!==e.invocationId&&this._assertNotEmptyString(e.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(e){if(this._assertNotEmptyString(e.invocationId,"Invalid payload for StreamItem message."),void 0===e.item)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(e){if(e.result&&e.error)throw new Error("Invalid payload for Completion message.");!e.result&&e.error&&this._assertNotEmptyString(e.error,"Invalid payload for Completion message."),this._assertNotEmptyString(e.invocationId,"Invalid payload for Completion message.")}_isAckMessage(e){if("number"!=typeof e.sequenceId)throw new Error("Invalid SequenceId for Ack message.")}_isSequenceMessage(e){if("number"!=typeof e.sequenceId)throw new Error("Invalid SequenceId for Sequence message.")}_assertNotEmptyString(e,t){if("string"!=typeof e||""===e)throw new Error(t)}}const zR={trace:cR.Trace,debug:cR.Debug,info:cR.Information,information:cR.Information,warn:cR.Warning,warning:cR.Warning,error:cR.Error,critical:cR.Critical,none:cR.None};class XR{configureLogging(e){if(uR.isRequired(e,"logging"),function(e){return void 0!==e.log}(e))this.logger=e;else if("string"==typeof e){const t=function(e){const t=zR[e.toLowerCase()];if(void 0!==t)return t;throw new Error(`Unknown log level: ${e}`)}(e);this.logger=new mR(t)}else this.logger=new mR(e);return this}withUrl(e,t){return uR.isRequired(e,"url"),uR.isNotEmpty(e,"url"),this.url=e,this.httpConnectionOptions="object"==typeof t?{...this.httpConnectionOptions,...t}:{...this.httpConnectionOptions,transport:t},this}withHubProtocol(e){return uR.isRequired(e,"protocol"),this.protocol=e,this}withAutomaticReconnect(e){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return e?Array.isArray(e)?this.reconnectPolicy=new UR(e):this.reconnectPolicy=e:this.reconnectPolicy=new UR,this}withServerTimeout(e){return uR.isRequired(e,"milliseconds"),this._serverTimeoutInMilliseconds=e,this}withKeepAliveInterval(e){return uR.isRequired(e,"milliseconds"),this._keepAliveIntervalInMilliseconds=e,this}withStatefulReconnect(e){return void 0===this.httpConnectionOptions&&(this.httpConnectionOptions={}),this.httpConnectionOptions._useStatefulReconnect=!0,this._statefulReconnectBufferSize=null==e?void 0:e.bufferSize,this}build(){const e=this.httpConnectionOptions||{};if(void 0===e.logger&&(e.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");const t=new BR(this.url,e);return kR.create(t,this.logger||lR.instance,this.protocol||new YR,this.reconnectPolicy,this._serverTimeoutInMilliseconds,this._keepAliveIntervalInMilliseconds,this._statefulReconnectBufferSize)}}var KR,QR,ZR,eL=4294967295;function tL(e,t,n){var r=Math.floor(n/4294967296),o=n;e.setUint32(t,r),e.setUint32(t+4,o)}function nL(e,t){return 4294967296*e.getInt32(t)+e.getUint32(t+4)}var rL=("undefined"==typeof process||"never"!==(null===(KR=null===process||void 0===process?void 0:process.env)||void 0===KR?void 0:KR.TEXT_ENCODING))&&"undefined"!=typeof TextEncoder&&"undefined"!=typeof TextDecoder;function oL(e){for(var t=e.length,n=0,r=0;r<t;){var o=e.charCodeAt(r++);if(4294967168&o)if(4294965248&o){if(o>=55296&&o<=56319&&r<t){var a=e.charCodeAt(r);56320==(64512&a)&&(++r,o=((1023&o)<<10)+(1023&a)+65536)}n+=4294901760&o?4:3}else n+=2;else n++}return n}var aL=rL?new TextEncoder:void 0,iL=rL?"undefined"!=typeof process&&"force"!==(null===(QR=null===process||void 0===process?void 0:process.env)||void 0===QR?void 0:QR.TEXT_ENCODING)?200:0:eL;var sL=(null==aL?void 0:aL.encodeInto)?function(e,t,n){aL.encodeInto(e,t.subarray(n))}:function(e,t,n){t.set(aL.encode(e),n)};function cL(e,t,n){for(var r=t,o=r+n,a=[],i="";r<o;){var s=e[r++];if(128&s)if(192==(224&s)){var c=63&e[r++];a.push((31&s)<<6|c)}else if(224==(240&s)){c=63&e[r++];var l=63&e[r++];a.push((31&s)<<12|c<<6|l)}else if(240==(248&s)){var u=(7&s)<<18|(c=63&e[r++])<<12|(l=63&e[r++])<<6|63&e[r++];u>65535&&(u-=65536,a.push(u>>>10&1023|55296),u=56320|1023&u),a.push(u)}else a.push(s);else a.push(s);a.length>=4096&&(i+=String.fromCharCode.apply(String,a),a.length=0)}return a.length>0&&(i+=String.fromCharCode.apply(String,a)),i}var lL=rL?new TextDecoder:null,uL=rL?"undefined"!=typeof process&&"force"!==(null===(ZR=null===process||void 0===process?void 0:process.env)||void 0===ZR?void 0:ZR.TEXT_DECODER)?200:0:eL;var dL=function(e,t){this.type=e,this.data=t},pL=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),gL=function(e){function t(n){var r=e.call(this,n)||this,o=Object.create(t.prototype);return Object.setPrototypeOf(r,o),Object.defineProperty(r,"name",{configurable:!0,enumerable:!1,value:t.name}),r}return pL(t,e),t}(Error);var hL={type:-1,encode:function(e){var t,n,r,o;return e instanceof Date?function(e){var t,n=e.sec,r=e.nsec;if(n>=0&&r>=0&&n<=17179869183){if(0===r&&n<=4294967295){var o=new Uint8Array(4);return(t=new DataView(o.buffer)).setUint32(0,n),o}var a=n/4294967296,i=4294967295&n;return o=new Uint8Array(8),(t=new DataView(o.buffer)).setUint32(0,r<<2|3&a),t.setUint32(4,i),o}return o=new Uint8Array(12),(t=new DataView(o.buffer)).setUint32(0,r),tL(t,4,n),o}((t=e.getTime(),n=Math.floor(t/1e3),r=1e6*(t-1e3*n),o=Math.floor(r/1e9),{sec:n+o,nsec:r-1e9*o})):null},decode:function(e){var t=function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);switch(e.byteLength){case 4:return{sec:t.getUint32(0),nsec:0};case 8:var n=t.getUint32(0);return{sec:4294967296*(3&n)+t.getUint32(4),nsec:n>>>2};case 12:return{sec:nL(t,4),nsec:t.getUint32(0)};default:throw new gL("Unrecognized data size for timestamp (expected 4, 8, or 12): ".concat(e.length))}}(e);return new Date(1e3*t.sec+t.nsec/1e6)}},fL=function(){function e(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(hL)}return e.prototype.register=function(e){var t=e.type,n=e.encode,r=e.decode;if(t>=0)this.encoders[t]=n,this.decoders[t]=r;else{var o=1+t;this.builtInEncoders[o]=n,this.builtInDecoders[o]=r}},e.prototype.tryToEncode=function(e,t){for(var n=0;n<this.builtInEncoders.length;n++){if(null!=(r=this.builtInEncoders[n]))if(null!=(o=r(e,t)))return new dL(-1-n,o)}for(n=0;n<this.encoders.length;n++){var r,o;if(null!=(r=this.encoders[n]))if(null!=(o=r(e,t)))return new dL(n,o)}return e instanceof dL?e:null},e.prototype.decode=function(e,t,n){var r=t<0?this.builtInDecoders[-1-t]:this.decoders[t];return r?r(e,t,n):new dL(t,e)},e.defaultCodec=new e,e}();function mL(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer?new Uint8Array(e):Uint8Array.from(e)}var _L=function(){function e(e,t,n,r,o,a,i,s){void 0===e&&(e=fL.defaultCodec),void 0===t&&(t=void 0),void 0===n&&(n=100),void 0===r&&(r=2048),void 0===o&&(o=!1),void 0===a&&(a=!1),void 0===i&&(i=!1),void 0===s&&(s=!1),this.extensionCodec=e,this.context=t,this.maxDepth=n,this.initialBufferSize=r,this.sortKeys=o,this.forceFloat32=a,this.ignoreUndefined=i,this.forceIntegerToFloat=s,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}return e.prototype.reinitializeState=function(){this.pos=0},e.prototype.encodeSharedRef=function(e){return this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)},e.prototype.encode=function(e){return this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)},e.prototype.doEncode=function(e,t){if(t>this.maxDepth)throw new Error("Too deep objects in depth ".concat(t));null==e?this.encodeNil():"boolean"==typeof e?this.encodeBoolean(e):"number"==typeof e?this.encodeNumber(e):"string"==typeof e?this.encodeString(e):this.encodeObject(e,t)},e.prototype.ensureBufferSizeToWrite=function(e){var t=this.pos+e;this.view.byteLength<t&&this.resizeBuffer(2*t)},e.prototype.resizeBuffer=function(e){var t=new ArrayBuffer(e),n=new Uint8Array(t),r=new DataView(t);n.set(this.bytes),this.view=r,this.bytes=n},e.prototype.encodeNil=function(){this.writeU8(192)},e.prototype.encodeBoolean=function(e){!1===e?this.writeU8(194):this.writeU8(195)},e.prototype.encodeNumber=function(e){Number.isSafeInteger(e)&&!this.forceIntegerToFloat?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):(this.writeU8(211),this.writeI64(e)):this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))},e.prototype.writeStringHeader=function(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else{if(!(e<4294967296))throw new Error("Too long string: ".concat(e," bytes in UTF-8"));this.writeU8(219),this.writeU32(e)}},e.prototype.encodeString=function(e){if(e.length>iL){var t=oL(e);this.ensureBufferSizeToWrite(5+t),this.writeStringHeader(t),sL(e,this.bytes,this.pos),this.pos+=t}else{t=oL(e);this.ensureBufferSizeToWrite(5+t),this.writeStringHeader(t),function(e,t,n){for(var r=e.length,o=n,a=0;a<r;){var i=e.charCodeAt(a++);if(4294967168&i){if(4294965248&i){if(i>=55296&&i<=56319&&a<r){var s=e.charCodeAt(a);56320==(64512&s)&&(++a,i=((1023&i)<<10)+(1023&s)+65536)}4294901760&i?(t[o++]=i>>18&7|240,t[o++]=i>>12&63|128,t[o++]=i>>6&63|128):(t[o++]=i>>12&15|224,t[o++]=i>>6&63|128)}else t[o++]=i>>6&31|192;t[o++]=63&i|128}else t[o++]=i}}(e,this.bytes,this.pos),this.pos+=t}},e.prototype.encodeObject=function(e,t){var n=this.extensionCodec.tryToEncode(e,this.context);if(null!=n)this.encodeExtension(n);else if(Array.isArray(e))this.encodeArray(e,t);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else{if("object"!=typeof e)throw new Error("Unrecognized object: ".concat(Object.prototype.toString.apply(e)));this.encodeMap(e,t)}},e.prototype.encodeBinary=function(e){var t=e.byteLength;if(t<256)this.writeU8(196),this.writeU8(t);else if(t<65536)this.writeU8(197),this.writeU16(t);else{if(!(t<4294967296))throw new Error("Too large binary: ".concat(t));this.writeU8(198),this.writeU32(t)}var n=mL(e);this.writeU8a(n)},e.prototype.encodeArray=function(e,t){var n=e.length;if(n<16)this.writeU8(144+n);else if(n<65536)this.writeU8(220),this.writeU16(n);else{if(!(n<4294967296))throw new Error("Too large array: ".concat(n));this.writeU8(221),this.writeU32(n)}for(var r=0,o=e;r<o.length;r++){var a=o[r];this.doEncode(a,t+1)}},e.prototype.countWithoutUndefined=function(e,t){for(var n=0,r=0,o=t;r<o.length;r++){void 0!==e[o[r]]&&n++}return n},e.prototype.encodeMap=function(e,t){var n=Object.keys(e);this.sortKeys&&n.sort();var r=this.ignoreUndefined?this.countWithoutUndefined(e,n):n.length;if(r<16)this.writeU8(128+r);else if(r<65536)this.writeU8(222),this.writeU16(r);else{if(!(r<4294967296))throw new Error("Too large map object: ".concat(r));this.writeU8(223),this.writeU32(r)}for(var o=0,a=n;o<a.length;o++){var i=a[o],s=e[i];this.ignoreUndefined&&void 0===s||(this.encodeString(i),this.doEncode(s,t+1))}},e.prototype.encodeExtension=function(e){var t=e.data.length;if(1===t)this.writeU8(212);else if(2===t)this.writeU8(213);else if(4===t)this.writeU8(214);else if(8===t)this.writeU8(215);else if(16===t)this.writeU8(216);else if(t<256)this.writeU8(199),this.writeU8(t);else if(t<65536)this.writeU8(200),this.writeU16(t);else{if(!(t<4294967296))throw new Error("Too large extension object: ".concat(t));this.writeU8(201),this.writeU32(t)}this.writeI8(e.type),this.writeU8a(e.data)},e.prototype.writeU8=function(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++},e.prototype.writeU8a=function(e){var t=e.length;this.ensureBufferSizeToWrite(t),this.bytes.set(e,this.pos),this.pos+=t},e.prototype.writeI8=function(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++},e.prototype.writeU16=function(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2},e.prototype.writeI16=function(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2},e.prototype.writeU32=function(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4},e.prototype.writeI32=function(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4},e.prototype.writeF32=function(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4},e.prototype.writeF64=function(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8},e.prototype.writeU64=function(e){this.ensureBufferSizeToWrite(8),function(e,t,n){var r=n/4294967296,o=n;e.setUint32(t,r),e.setUint32(t+4,o)}(this.view,this.pos,e),this.pos+=8},e.prototype.writeI64=function(e){this.ensureBufferSizeToWrite(8),tL(this.view,this.pos,e),this.pos+=8},e}();function vL(e){return"".concat(e<0?"-":"","0x").concat(Math.abs(e).toString(16).padStart(2,"0"))}var TL=function(){function e(e,t){void 0===e&&(e=16),void 0===t&&(t=16),this.maxKeyLength=e,this.maxLengthPerKey=t,this.hit=0,this.miss=0,this.caches=[];for(var n=0;n<this.maxKeyLength;n++)this.caches.push([])}return e.prototype.canBeCached=function(e){return e>0&&e<=this.maxKeyLength},e.prototype.find=function(e,t,n){e:for(var r=0,o=this.caches[n-1];r<o.length;r++){for(var a=o[r],i=a.bytes,s=0;s<n;s++)if(i[s]!==e[t+s])continue e;return a.str}return null},e.prototype.store=function(e,t){var n=this.caches[e.length-1],r={bytes:e,str:t};n.length>=this.maxLengthPerKey?n[Math.random()*n.length|0]=r:n.push(r)},e.prototype.decode=function(e,t,n){var r=this.find(e,t,n);if(null!=r)return this.hit++,r;this.miss++;var o=cL(e,t,n),a=Uint8Array.prototype.slice.call(e,t,t+n);return this.store(a,o),o},e}(),yL=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))},EL=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},SL=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,o){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,o,(t=e[n](t)).done,t.value)}))}}},IL=function(e){return this instanceof IL?(this.v=e,this):new IL(e)},bL=function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),a=[];return r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r;function i(e){o[e]&&(r[e]=function(t){return new Promise((function(n,r){a.push([e,t,n,r])>1||s(e,t)}))})}function s(e,t){try{!function(e){e.value instanceof IL?Promise.resolve(e.value.v).then(c,l):u(a[0][2],e)}(o[e](t))}catch(e){u(a[0][3],e)}}function c(e){s("next",e)}function l(e){s("throw",e)}function u(e,t){e(t),a.shift(),a.length&&s(a[0][0],a[0][1])}},AL=new DataView(new ArrayBuffer(0)),wL=new Uint8Array(AL.buffer),NL=function(){try{AL.getInt8(0)}catch(e){return e.constructor}throw new Error("never reached")}(),OL=new NL("Insufficient data"),RL=new TL,LL=function(){function e(e,t,n,r,o,a,i,s){void 0===e&&(e=fL.defaultCodec),void 0===t&&(t=void 0),void 0===n&&(n=eL),void 0===r&&(r=eL),void 0===o&&(o=eL),void 0===a&&(a=eL),void 0===i&&(i=eL),void 0===s&&(s=RL),this.extensionCodec=e,this.context=t,this.maxStrLength=n,this.maxBinLength=r,this.maxArrayLength=o,this.maxMapLength=a,this.maxExtLength=i,this.keyDecoder=s,this.totalPos=0,this.pos=0,this.view=AL,this.bytes=wL,this.headByte=-1,this.stack=[]}return e.prototype.reinitializeState=function(){this.totalPos=0,this.headByte=-1,this.stack.length=0},e.prototype.setBuffer=function(e){this.bytes=mL(e),this.view=function(e){if(e instanceof ArrayBuffer)return new DataView(e);var t=mL(e);return new DataView(t.buffer,t.byteOffset,t.byteLength)}(this.bytes),this.pos=0},e.prototype.appendBuffer=function(e){if(-1!==this.headByte||this.hasRemaining(1)){var t=this.bytes.subarray(this.pos),n=mL(e),r=new Uint8Array(t.length+n.length);r.set(t),r.set(n,t.length),this.setBuffer(r)}else this.setBuffer(e)},e.prototype.hasRemaining=function(e){return this.view.byteLength-this.pos>=e},e.prototype.createExtraByteError=function(e){var t=this.view,n=this.pos;return new RangeError("Extra ".concat(t.byteLength-n," of ").concat(t.byteLength," byte(s) found at buffer[").concat(e,"]"))},e.prototype.decode=function(e){this.reinitializeState(),this.setBuffer(e);var t=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return t},e.prototype.decodeMulti=function(e){return EL(this,(function(t){switch(t.label){case 0:this.reinitializeState(),this.setBuffer(e),t.label=1;case 1:return this.hasRemaining(1)?[4,this.doDecodeSync()]:[3,3];case 2:return t.sent(),[3,1];case 3:return[2]}}))},e.prototype.decodeAsync=function(e){var t,n,r,o;return yL(this,void 0,void 0,(function(){var a,i,s,c,l,u,d,p;return EL(this,(function(g){switch(g.label){case 0:a=!1,g.label=1;case 1:g.trys.push([1,6,7,12]),t=SL(e),g.label=2;case 2:return[4,t.next()];case 3:if((n=g.sent()).done)return[3,5];if(s=n.value,a)throw this.createExtraByteError(this.totalPos);this.appendBuffer(s);try{i=this.doDecodeSync(),a=!0}catch(e){if(!(e instanceof NL))throw e}this.totalPos+=this.pos,g.label=4;case 4:return[3,2];case 5:return[3,12];case 6:return c=g.sent(),r={error:c},[3,12];case 7:return g.trys.push([7,,10,11]),n&&!n.done&&(o=t.return)?[4,o.call(t)]:[3,9];case 8:g.sent(),g.label=9;case 9:return[3,11];case 10:if(r)throw r.error;return[7];case 11:return[7];case 12:if(a){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return[2,i]}throw u=(l=this).headByte,d=l.pos,p=l.totalPos,new RangeError("Insufficient data in parsing ".concat(vL(u)," at ").concat(p," (").concat(d," in the current buffer)"))}}))}))},e.prototype.decodeArrayStream=function(e){return this.decodeMultiAsync(e,!0)},e.prototype.decodeStream=function(e){return this.decodeMultiAsync(e,!1)},e.prototype.decodeMultiAsync=function(e,t){return bL(this,arguments,(function(){var n,r,o,a,i,s,c,l,u;return EL(this,(function(d){switch(d.label){case 0:n=t,r=-1,d.label=1;case 1:d.trys.push([1,13,14,19]),o=SL(e),d.label=2;case 2:return[4,IL(o.next())];case 3:if((a=d.sent()).done)return[3,12];if(i=a.value,t&&0===r)throw this.createExtraByteError(this.totalPos);this.appendBuffer(i),n&&(r=this.readArraySize(),n=!1,this.complete()),d.label=4;case 4:d.trys.push([4,9,,10]),d.label=5;case 5:return[4,IL(this.doDecodeSync())];case 6:return[4,d.sent()];case 7:return d.sent(),0==--r?[3,8]:[3,5];case 8:return[3,10];case 9:if(!((s=d.sent())instanceof NL))throw s;return[3,10];case 10:this.totalPos+=this.pos,d.label=11;case 11:return[3,2];case 12:return[3,19];case 13:return c=d.sent(),l={error:c},[3,19];case 14:return d.trys.push([14,,17,18]),a&&!a.done&&(u=o.return)?[4,IL(u.call(o))]:[3,16];case 15:d.sent(),d.label=16;case 16:return[3,18];case 17:if(l)throw l.error;return[7];case 18:return[7];case 19:return[2]}}))}))},e.prototype.doDecodeSync=function(){e:for(;;){var e=this.readHeadByte(),t=void 0;if(e>=224)t=e-256;else if(e<192)if(e<128)t=e;else if(e<144){if(0!==(r=e-128)){this.pushMapState(r),this.complete();continue e}t={}}else if(e<160){if(0!==(r=e-144)){this.pushArrayState(r),this.complete();continue e}t=[]}else{var n=e-160;t=this.decodeUtf8String(n,0)}else if(192===e)t=null;else if(194===e)t=!1;else if(195===e)t=!0;else if(202===e)t=this.readF32();else if(203===e)t=this.readF64();else if(204===e)t=this.readU8();else if(205===e)t=this.readU16();else if(206===e)t=this.readU32();else if(207===e)t=this.readU64();else if(208===e)t=this.readI8();else if(209===e)t=this.readI16();else if(210===e)t=this.readI32();else if(211===e)t=this.readI64();else if(217===e){n=this.lookU8();t=this.decodeUtf8String(n,1)}else if(218===e){n=this.lookU16();t=this.decodeUtf8String(n,2)}else if(219===e){n=this.lookU32();t=this.decodeUtf8String(n,4)}else if(220===e){if(0!==(r=this.readU16())){this.pushArrayState(r),this.complete();continue e}t=[]}else if(221===e){if(0!==(r=this.readU32())){this.pushArrayState(r),this.complete();continue e}t=[]}else if(222===e){if(0!==(r=this.readU16())){this.pushMapState(r),this.complete();continue e}t={}}else if(223===e){if(0!==(r=this.readU32())){this.pushMapState(r),this.complete();continue e}t={}}else if(196===e){var r=this.lookU8();t=this.decodeBinary(r,1)}else if(197===e){r=this.lookU16();t=this.decodeBinary(r,2)}else if(198===e){r=this.lookU32();t=this.decodeBinary(r,4)}else if(212===e)t=this.decodeExtension(1,0);else if(213===e)t=this.decodeExtension(2,0);else if(214===e)t=this.decodeExtension(4,0);else if(215===e)t=this.decodeExtension(8,0);else if(216===e)t=this.decodeExtension(16,0);else if(199===e){r=this.lookU8();t=this.decodeExtension(r,1)}else if(200===e){r=this.lookU16();t=this.decodeExtension(r,2)}else{if(201!==e)throw new gL("Unrecognized type byte: ".concat(vL(e)));r=this.lookU32();t=this.decodeExtension(r,4)}this.complete();for(var o=this.stack;o.length>0;){var a=o[o.length-1];if(0===a.type){if(a.array[a.position]=t,a.position++,a.position!==a.size)continue e;o.pop(),t=a.array}else{if(1===a.type){if(i=void 0,"string"!==(i=typeof t)&&"number"!==i)throw new gL("The type of key must be string or number but "+typeof t);if("__proto__"===t)throw new gL("The key __proto__ is not allowed");a.key=t,a.type=2;continue e}if(a.map[a.key]=t,a.readCount++,a.readCount!==a.size){a.key=null,a.type=1;continue e}o.pop(),t=a.map}}return t}var i},e.prototype.readHeadByte=function(){return-1===this.headByte&&(this.headByte=this.readU8()),this.headByte},e.prototype.complete=function(){this.headByte=-1},e.prototype.readArraySize=function(){var e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:if(e<160)return e-144;throw new gL("Unrecognized array type byte: ".concat(vL(e)))}},e.prototype.pushMapState=function(e){if(e>this.maxMapLength)throw new gL("Max length exceeded: map length (".concat(e,") > maxMapLengthLength (").concat(this.maxMapLength,")"));this.stack.push({type:1,size:e,key:null,readCount:0,map:{}})},e.prototype.pushArrayState=function(e){if(e>this.maxArrayLength)throw new gL("Max length exceeded: array length (".concat(e,") > maxArrayLength (").concat(this.maxArrayLength,")"));this.stack.push({type:0,size:e,array:new Array(e),position:0})},e.prototype.decodeUtf8String=function(e,t){var n;if(e>this.maxStrLength)throw new gL("Max length exceeded: UTF-8 byte length (".concat(e,") > maxStrLength (").concat(this.maxStrLength,")"));if(this.bytes.byteLength<this.pos+t+e)throw OL;var r,o=this.pos+t;return r=this.stateIsMapKey()&&(null===(n=this.keyDecoder)||void 0===n?void 0:n.canBeCached(e))?this.keyDecoder.decode(this.bytes,o,e):e>uL?function(e,t,n){var r=e.subarray(t,t+n);return lL.decode(r)}(this.bytes,o,e):cL(this.bytes,o,e),this.pos+=t+e,r},e.prototype.stateIsMapKey=function(){return this.stack.length>0&&1===this.stack[this.stack.length-1].type},e.prototype.decodeBinary=function(e,t){if(e>this.maxBinLength)throw new gL("Max length exceeded: bin length (".concat(e,") > maxBinLength (").concat(this.maxBinLength,")"));if(!this.hasRemaining(e+t))throw OL;var n=this.pos+t,r=this.bytes.subarray(n,n+e);return this.pos+=t+e,r},e.prototype.decodeExtension=function(e,t){if(e>this.maxExtLength)throw new gL("Max length exceeded: ext length (".concat(e,") > maxExtLength (").concat(this.maxExtLength,")"));var n=this.view.getInt8(this.pos+t),r=this.decodeBinary(e,t+1);return this.extensionCodec.decode(r,n,this.context)},e.prototype.lookU8=function(){return this.view.getUint8(this.pos)},e.prototype.lookU16=function(){return this.view.getUint16(this.pos)},e.prototype.lookU32=function(){return this.view.getUint32(this.pos)},e.prototype.readU8=function(){var e=this.view.getUint8(this.pos);return this.pos++,e},e.prototype.readI8=function(){var e=this.view.getInt8(this.pos);return this.pos++,e},e.prototype.readU16=function(){var e=this.view.getUint16(this.pos);return this.pos+=2,e},e.prototype.readI16=function(){var e=this.view.getInt16(this.pos);return this.pos+=2,e},e.prototype.readU32=function(){var e=this.view.getUint32(this.pos);return this.pos+=4,e},e.prototype.readI32=function(){var e=this.view.getInt32(this.pos);return this.pos+=4,e},e.prototype.readU64=function(){var e,t,n=(e=this.view,t=this.pos,4294967296*e.getUint32(t)+e.getUint32(t+4));return this.pos+=8,n},e.prototype.readI64=function(){var e=nL(this.view,this.pos);return this.pos+=8,e},e.prototype.readF32=function(){var e=this.view.getFloat32(this.pos);return this.pos+=4,e},e.prototype.readF64=function(){var e=this.view.getFloat64(this.pos);return this.pos+=8,e},e}();class CL{static write(e){let t=e.byteLength||e.length;const n=[];do{let e=127&t;t>>=7,t>0&&(e|=128),n.push(e)}while(t>0);t=e.byteLength||e.length;const r=new Uint8Array(n.length+t);return r.set(n,0),r.set(e,n.length),r.buffer}static parse(e){const t=[],n=new Uint8Array(e),r=[0,7,14,21,28];for(let o=0;o<e.byteLength;){let a,i=0,s=0;do{a=n[o+i],s|=(127&a)<<r[i],i++}while(i<Math.min(5,e.byteLength-o)&&128&a);if(128&a&&i<5)throw new Error("Cannot read message size.");if(5===i&&a>7)throw new Error("Messages bigger than 2GB are not supported.");if(!(n.byteLength>=o+i+s))throw new Error("Incomplete message.");t.push(n.slice?n.slice(o+i,o+i+s):n.subarray(o+i,o+i+s)),o=o+i+s}return t}}const PL=new Uint8Array([145,RR.Ping]);class xL{constructor(e){this.name="messagepack",this.version=2,this.transferFormat=VR.Binary,this._errorResult=1,this._voidResult=2,this._nonVoidResult=3,e=e||{},this._encoder=new _L(e.extensionCodec,e.context,e.maxDepth,e.initialBufferSize,e.sortKeys,e.forceFloat32,e.ignoreUndefined,e.forceIntegerToFloat),this._decoder=new LL(e.extensionCodec,e.context,e.maxStrLength,e.maxBinLength,e.maxArrayLength,e.maxMapLength,e.maxExtLength)}parseMessages(e,t){if(!(n=e)||"undefined"==typeof ArrayBuffer||!(n instanceof ArrayBuffer||n.constructor&&"ArrayBuffer"===n.constructor.name))throw new Error("Invalid input for MessagePack hub protocol. Expected an ArrayBuffer.");var n;null===t&&(t=lR.instance);const r=CL.parse(e),o=[];for(const e of r){const n=this._parseMessage(e,t);n&&o.push(n)}return o}writeMessage(e){switch(e.type){case RR.Invocation:return this._writeInvocation(e);case RR.StreamInvocation:return this._writeStreamInvocation(e);case RR.StreamItem:return this._writeStreamItem(e);case RR.Completion:return this._writeCompletion(e);case RR.Ping:return CL.write(PL);case RR.CancelInvocation:return this._writeCancelInvocation(e);case RR.Close:return this._writeClose();case RR.Ack:return this._writeAck(e);case RR.Sequence:return this._writeSequence(e);default:throw new Error("Invalid message type.")}}_parseMessage(e,t){if(0===e.length)throw new Error("Invalid payload.");const n=this._decoder.decode(e);if(0===n.length||!(n instanceof Array))throw new Error("Invalid payload.");const r=n[0];switch(r){case RR.Invocation:return this._createInvocationMessage(this._readHeaders(n),n);case RR.StreamItem:return this._createStreamItemMessage(this._readHeaders(n),n);case RR.Completion:return this._createCompletionMessage(this._readHeaders(n),n);case RR.Ping:return this._createPingMessage(n);case RR.Close:return this._createCloseMessage(n);case RR.Ack:return this._createAckMessage(n);case RR.Sequence:return this._createSequenceMessage(n);default:return t.log(cR.Information,"Unknown message type '"+r+"' ignored."),null}}_createCloseMessage(e){if(e.length<2)throw new Error("Invalid payload for Close message.");return{allowReconnect:e.length>=3?e[2]:void 0,error:e[1],type:RR.Close}}_createPingMessage(e){if(e.length<1)throw new Error("Invalid payload for Ping message.");return{type:RR.Ping}}_createInvocationMessage(e,t){if(t.length<5)throw new Error("Invalid payload for Invocation message.");const n=t[2];return n?{arguments:t[4],headers:e,invocationId:n,streamIds:[],target:t[3],type:RR.Invocation}:{arguments:t[4],headers:e,streamIds:[],target:t[3],type:RR.Invocation}}_createStreamItemMessage(e,t){if(t.length<4)throw new Error("Invalid payload for StreamItem message.");return{headers:e,invocationId:t[2],item:t[3],type:RR.StreamItem}}_createCompletionMessage(e,t){if(t.length<4)throw new Error("Invalid payload for Completion message.");const n=t[3];if(n!==this._voidResult&&t.length<5)throw new Error("Invalid payload for Completion message.");let r,o;switch(n){case this._errorResult:r=t[4];break;case this._nonVoidResult:o=t[4]}return{error:r,headers:e,invocationId:t[2],result:o,type:RR.Completion}}_createAckMessage(e){if(e.length<1)throw new Error("Invalid payload for Ack message.");return{sequenceId:e[1],type:RR.Ack}}_createSequenceMessage(e){if(e.length<1)throw new Error("Invalid payload for Sequence message.");return{sequenceId:e[1],type:RR.Sequence}}_writeInvocation(e){let t;return t=e.streamIds?this._encoder.encode([RR.Invocation,e.headers||{},e.invocationId||null,e.target,e.arguments,e.streamIds]):this._encoder.encode([RR.Invocation,e.headers||{},e.invocationId||null,e.target,e.arguments]),CL.write(t.slice())}_writeStreamInvocation(e){let t;return t=e.streamIds?this._encoder.encode([RR.StreamInvocation,e.headers||{},e.invocationId,e.target,e.arguments,e.streamIds]):this._encoder.encode([RR.StreamInvocation,e.headers||{},e.invocationId,e.target,e.arguments]),CL.write(t.slice())}_writeStreamItem(e){const t=this._encoder.encode([RR.StreamItem,e.headers||{},e.invocationId,e.item]);return CL.write(t.slice())}_writeCompletion(e){const t=e.error?this._errorResult:void 0!==e.result?this._nonVoidResult:this._voidResult;let n;switch(t){case this._errorResult:n=this._encoder.encode([RR.Completion,e.headers||{},e.invocationId,t,e.error]);break;case this._voidResult:n=this._encoder.encode([RR.Completion,e.headers||{},e.invocationId,t]);break;case this._nonVoidResult:n=this._encoder.encode([RR.Completion,e.headers||{},e.invocationId,t,e.result])}return CL.write(n.slice())}_writeCancelInvocation(e){const t=this._encoder.encode([RR.CancelInvocation,e.headers||{},e.invocationId]);return CL.write(t.slice())}_writeClose(){const e=this._encoder.encode([RR.Close,null]);return CL.write(e.slice())}_writeAck(e){const t=this._encoder.encode([RR.Ack,e.sequenceId]);return CL.write(t.slice())}_writeSequence(e){const t=this._encoder.encode([RR.Sequence,e.sequenceId]);return CL.write(t.slice())}_readHeaders(e){const t=e[1];if("object"!=typeof t)throw new Error("Invalid headers.");return t}}function kL(e){return"function"==typeof e}function DL(e){var t=e((function(e){Error.call(e),e.stack=(new Error).stack}));return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var UL=DL((function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}}));function ML(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var GL=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}var t;return e.prototype.unsubscribe=function(){var e,t,n,r,o;if(!this.closed){this.closed=!0;var c=this._parentage;if(c)if(this._parentage=null,Array.isArray(c))try{for(var l=a(c),u=l.next();!u.done;u=l.next()){u.value.remove(this)}}catch(t){e={error:t}}finally{try{u&&!u.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}else c.remove(this);var d=this.initialTeardown;if(kL(d))try{d()}catch(e){o=e instanceof UL?e.errors:[e]}var p=this._finalizers;if(p){this._finalizers=null;try{for(var g=a(p),h=g.next();!h.done;h=g.next()){var f=h.value;try{FL(f)}catch(e){o=null!=o?o:[],e instanceof UL?o=s(s([],i(o)),i(e.errors)):o.push(e)}}}catch(e){n={error:e}}finally{try{h&&!h.done&&(r=g.return)&&r.call(g)}finally{if(n)throw n.error}}}if(o)throw new UL(o)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)FL(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&ML(t,e)},e.prototype.remove=function(t){var n=this._finalizers;n&&ML(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=((t=new e).closed=!0,t),e}(),$L=GL.EMPTY;function VL(e){return e instanceof GL||e&&"closed"in e&&kL(e.remove)&&kL(e.add)&&kL(e.unsubscribe)}function FL(e){kL(e)?e():e.unsubscribe()}var jL={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},WL={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout.apply(void 0,s([e,t],i(n)))},clearTimeout:function(e){var t=WL.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function qL(e){WL.setTimeout((function(){throw e}))}function BL(){}function HL(e){e()}var JL=function(e){function t(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,VL(t)&&t.add(n)):n.destination=KL,n}return n(t,e),t.create=function(e,t,n){return new zL(e,t,n)},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(GL),YL=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){XL(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){XL(e)}else XL(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){XL(e)}},e}(),zL=function(e){function t(t,n,r){var o,a=e.call(this)||this;return o=kL(t)||!t?{next:null!=t?t:void 0,error:null!=n?n:void 0,complete:null!=r?r:void 0}:t,a.destination=new YL(o),a}return n(t,e),t}(JL);function XL(e){qL(e)}var KL={closed:!0,next:BL,error:function(e){throw e},complete:BL},QL="function"==typeof Symbol&&Symbol.observable||"@@observable";function ZL(e){return e}var eC=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r,o=this,a=(r=e)&&r instanceof JL||function(e){return e&&kL(e.next)&&kL(e.error)&&kL(e.complete)}(r)&&VL(r)?e:new zL(e,t,n);return HL((function(){var e=o,t=e.operator,n=e.source;a.add(t?t.call(a,n):n?o._subscribe(a):o._trySubscribe(a))})),a},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=tC(t))((function(t,r){var o=new zL({next:function(t){try{e(t)}catch(e){r(e),o.unsubscribe()}},error:r,complete:t});n.subscribe(o)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[QL]=function(){return this},e.prototype.pipe=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(0===(e=t).length?ZL:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)})(this)},e.prototype.toPromise=function(e){var t=this;return new(e=tC(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}();function tC(e){var t;return null!==(t=null!=e?e:jL.Promise)&&void 0!==t?t:Promise}function nC(e){return function(t){if(function(e){return kL(null==e?void 0:e.lift)}(t))return t.lift((function(t){try{return e(t,this)}catch(e){this.error(e)}}));throw new TypeError("Unable to lift unknown Observable type")}}function rC(e,t,n,r,o){return new oC(e,t,n,r,o)}var oC=function(e){function t(t,n,r,o,a,i){var s=e.call(this,t)||this;return s.onFinalize=a,s.shouldUnsubscribe=i,s._next=n?function(e){try{n(e)}catch(e){t.error(e)}}:e.prototype._next,s._error=o?function(e){try{o(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,s._complete=r?function(){try{r()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,s}return n(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}},t}(JL),aC=DL((function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),iC=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return n(t,e),t.prototype.lift=function(e){var t=new sC(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new aC},t.prototype.next=function(e){var t=this;HL((function(){var n,r;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var o=a(t.currentObservers),i=o.next();!i.done;i=o.next()){i.value.next(e)}}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}}))},t.prototype.error=function(e){var t=this;HL((function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var n=t.observers;n.length;)n.shift().error(e)}}))},t.prototype.complete=function(){var e=this;HL((function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}}))},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,n=this,r=n.hasError,o=n.isStopped,a=n.observers;return r||o?$L:(this.currentObservers=null,a.push(e),new GL((function(){t.currentObservers=null,ML(a,e)})))},t.prototype._checkFinalizedStatuses=function(e){var t=this,n=t.hasError,r=t.thrownError,o=t.isStopped;n?e.error(r):o&&e.complete()},t.prototype.asObservable=function(){var e=new eC;return e.source=this,e},t.create=function(e,t){return new sC(e,t)},t}(eC),sC=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return n(t,e),t.prototype.next=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===n||n.call(t,e)},t.prototype.error=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===n||n.call(t,e)},t.prototype.complete=function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)},t.prototype._subscribe=function(e){var t,n;return null!==(n=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==n?n:$L},t}(iC),cC=function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}return n(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return!n.closed&&t.next(this._value),n},t.prototype.getValue=function(){var e=this,t=e.hasError,n=e.thrownError,r=e._value;if(t)throw n;return this._throwIfClosed(),r},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(iC);function lC(e){return e[e.length-1]}function uC(e){return(t=lC(e))&&kL(t.schedule)?e.pop():void 0;var t}var dC=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function pC(e){return kL(null==e?void 0:e.then)}function gC(e){return kL(e[QL])}function hC(e){return Symbol.asyncIterator&&kL(null==e?void 0:e[Symbol.asyncIterator])}function fC(e){return new TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var mC="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function _C(e){return kL(null==e?void 0:e[mC])}function vC(e){return l(this,arguments,(function(){var t,n,r;return o(this,(function(o){switch(o.label){case 0:t=e.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,c(t.read())];case 3:return n=o.sent(),r=n.value,n.done?[4,c(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,c(r)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))}function TC(e){return kL(null==e?void 0:e.getReader)}function yC(e){if(e instanceof eC)return e;if(null!=e){if(gC(e))return o=e,new eC((function(e){var t=o[QL]();if(kL(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if(dC(e))return r=e,new eC((function(e){for(var t=0;t<r.length&&!e.closed;t++)e.next(r[t]);e.complete()}));if(pC(e))return n=e,new eC((function(e){n.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,qL)}));if(hC(e))return EC(e);if(_C(e))return t=e,new eC((function(e){var n,r;try{for(var o=a(t),i=o.next();!i.done;i=o.next()){var s=i.value;if(e.next(s),e.closed)return}}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}e.complete()}));if(TC(e))return EC(vC(e))}var t,n,r,o;throw fC(e)}function EC(e){return new eC((function(t){(function(e,t){var n,a,i,s;return r(this,void 0,void 0,(function(){var r,c;return o(this,(function(o){switch(o.label){case 0:o.trys.push([0,5,6,11]),n=u(e),o.label=1;case 1:return[4,n.next()];case 2:if((a=o.sent()).done)return[3,4];if(r=a.value,t.next(r),t.closed)return[2];o.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return c=o.sent(),i={error:c},[3,11];case 6:return o.trys.push([6,,9,10]),a&&!a.done&&(s=n.return)?[4,s.call(n)]:[3,8];case 7:o.sent(),o.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}}))}))})(e,t).catch((function(e){return t.error(e)}))}))}function SC(e,t,n,r,o){void 0===r&&(r=0),void 0===o&&(o=!1);var a=t.schedule((function(){n(),o?e.add(this.schedule(null,r)):this.unsubscribe()}),r);if(e.add(a),!o)return a}function IC(e,t){return void 0===t&&(t=0),nC((function(n,r){n.subscribe(rC(r,(function(n){return SC(r,e,(function(){return r.next(n)}),t)}),(function(){return SC(r,e,(function(){return r.complete()}),t)}),(function(n){return SC(r,e,(function(){return r.error(n)}),t)})))}))}function bC(e,t){return void 0===t&&(t=0),nC((function(n,r){r.add(e.schedule((function(){return n.subscribe(r)}),t))}))}function AC(e,t){if(!e)throw new Error("Iterable cannot be null");return new eC((function(n){SC(n,t,(function(){var r=e[Symbol.asyncIterator]();SC(n,t,(function(){r.next().then((function(e){e.done?n.complete():n.next(e.value)}))}),0,!0)}))}))}function wC(e,t){if(null!=e){if(gC(e))return function(e,t){return yC(e).pipe(bC(t),IC(t))}(e,t);if(dC(e))return function(e,t){return new eC((function(n){var r=0;return t.schedule((function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())}))}))}(e,t);if(pC(e))return function(e,t){return yC(e).pipe(bC(t),IC(t))}(e,t);if(hC(e))return AC(e,t);if(_C(e))return function(e,t){return new eC((function(n){var r;return SC(n,t,(function(){r=e[mC](),SC(n,t,(function(){var e,t,o;try{t=(e=r.next()).value,o=e.done}catch(e){return void n.error(e)}o?n.complete():n.next(t)}),0,!0)})),function(){return kL(null==r?void 0:r.return)&&r.return()}}))}(e,t);if(TC(e))return function(e,t){return AC(vC(e),t)}(e,t)}throw fC(e)}function NC(e,t){return t?wC(e,t):yC(e)}function OC(e,t){return nC((function(n,r){var o=0;n.subscribe(rC(r,(function(n){r.next(e.call(t,n,o++))})))}))}var RC=Array.isArray;function LC(e){return OC((function(t){return function(e,t){return RC(t)?e.apply(void 0,s([],i(t))):e(t)}(e,t)}))}var CC,PC,xC=Array.isArray,kC=Object.getPrototypeOf,DC=Object.prototype,UC=Object.keys;function MC(e){if(1===e.length){var t=e[0];if(xC(t))return{args:t,keys:null};if((r=t)&&"object"==typeof r&&kC(r)===DC){var n=UC(t);return{args:n.map((function(e){return t[e]})),keys:n}}}var r;return{args:e,keys:null}}function GC(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=uC(e),r=function(e){return kL(lC(e))?e.pop():void 0}(e),o=MC(e),a=o.args,i=o.keys;if(0===a.length)return NC([],n);var s=new eC(function(e,t,n){void 0===n&&(n=ZL);return function(r){$C(t,(function(){for(var o=e.length,a=new Array(o),i=o,s=o,c=function(o){$C(t,(function(){var c=NC(e[o],t),l=!1;c.subscribe(rC(r,(function(e){a[o]=e,l||(l=!0,s--),s||r.next(n(a.slice()))}),(function(){--i||r.complete()})))}),r)},l=0;l<o;l++)c(l)}),r)}}(a,n,i?function(e){return function(e,t){return e.reduce((function(e,n,r){return e[n]=t[r],e}),{})}(i,e)}:ZL));return r?s.pipe(LC(r)):s}function $C(e,t,n){e?SC(n,e,t):t()}function VC(e,t){return nC((function(n,r){var o=0;n.subscribe(rC(r,(function(n){return e.call(t,n,o++)&&r.next(n)})))}))}function FC(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!0!==t){if(!1!==t){var o=new zL({next:function(){o.unsubscribe(),e()}});return yC(t.apply(void 0,s([],i(n)))).subscribe(o)}}else e()}function jC(e){switch(e){case 0:case"STATUS_CODE_UNSPECIFIED":return PC.UNSPECIFIED;case 1:case"STATUS_CODE_CANCELLED":return PC.CANCELLED;case 2:case"STATUS_CODE_UNKNOWN":return PC.UNKNOWN;case 3:case"STATUS_CODE_INVALID_ARGUMENT":return PC.INVALID_ARGUMENT;case 4:case"STATUS_CODE_DEADLINE_EXCEEDED":return PC.DEADLINE_EXCEEDED;case 5:case"STATUS_CODE_NOT_FOUND":return PC.NOT_FOUND;case 6:case"STATUS_CODE_ALREADY_EXISTS":return PC.ALREADY_EXISTS;case 7:case"STATUS_CODE_PERMISSION_DENIED":return PC.PERMISSION_DENIED;case 8:case"STATUS_CODE_RESOURCE_EXHAUSTED":return PC.RESOURCE_EXHAUSTED;case 9:case"STATUS_CODE_FAILED_PRECONDITION":return PC.FAILED_PRECONDITION;case 10:case"STATUS_CODE_ABORTED":return PC.ABORTED;case 11:case"STATUS_CODE_OUT_OF_RANGE":return PC.OUT_OF_RANGE;case 12:case"STATUS_CODE_UNIMPLEMENTED":return PC.UNIMPLEMENTED;case 13:case"STATUS_CODE_INTERNAL":return PC.INTERNAL;case 14:case"STATUS_CODE_UNAVAILABLE":return PC.UNAVAILABLE;case 15:case"STATUS_CODE_DATA_LOSS":return PC.DATA_LOSS;case 16:case"STATUS_CODE_UNAUTHENTICATED":return PC.UNAUTHENTICATED;default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum StatusCode")}}!function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.START_SESSION_REQUEST=1]="START_SESSION_REQUEST",e[e.START_SESSION_RESPONSE=2]="START_SESSION_RESPONSE",e[e.EVENT_VERSION=3]="EVENT_VERSION",e[e.PARTICIPANT_REQUEST=4]="PARTICIPANT_REQUEST",e[e.PARTICIPANT_RESPONSE=5]="PARTICIPANT_RESPONSE",e[e.CLIENT_ERROR_INFO=6]="CLIENT_ERROR_INFO"}(CC||(CC={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.CANCELLED=1]="CANCELLED",e[e.UNKNOWN=2]="UNKNOWN",e[e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",e[e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",e[e.NOT_FOUND=5]="NOT_FOUND",e[e.ALREADY_EXISTS=6]="ALREADY_EXISTS",e[e.PERMISSION_DENIED=7]="PERMISSION_DENIED",e[e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",e[e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",e[e.ABORTED=10]="ABORTED",e[e.OUT_OF_RANGE=11]="OUT_OF_RANGE",e[e.UNIMPLEMENTED=12]="UNIMPLEMENTED",e[e.INTERNAL=13]="INTERNAL",e[e.UNAVAILABLE=14]="UNAVAILABLE",e[e.DATA_LOSS=15]="DATA_LOSS",e[e.UNAUTHENTICATED=16]="UNAUTHENTICATED"}(PC||(PC={}));const WC={$type:"deepl.pb.interactive_text_api.signalr.DetailCode",encode:(e,t=new dw)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.signalr.DetailCode",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:WC.$type,value:BC(e.value)?globalThis.String(e.value):""}),toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>WC.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.signalr.DetailCode",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const qC={$type:"deepl.pb.interactive_text_api.signalr.ClientErrorInfo",encode(e,t=new dw){0!==e.statusCode&&t.uint32(8).int32(e.statusCode),void 0!==e.detailCode&&WC.encode(e.detailCode,t.uint32(18).fork()).join();for(const n of e.fallbackDetailCodes)WC.encode(n,t.uint32(26).fork()).join();return t},decode(e,t){const n=e instanceof pw?e:new pw(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.signalr.ClientErrorInfo",statusCode:0,detailCode:void 0,fallbackDetailCodes:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(8!==e)break;o.statusCode=n.int32();continue;case 2:if(18!==e)break;o.detailCode=WC.decode(n,n.uint32());continue;case 3:if(26!==e)break;o.fallbackDetailCodes.push(WC.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:qC.$type,statusCode:BC(e.statusCode)?jC(e.statusCode):0,detailCode:BC(e.detailCode)?WC.fromJSON(e.detailCode):void 0,fallbackDetailCodes:globalThis.Array.isArray(null==e?void 0:e.fallbackDetailCodes)?e.fallbackDetailCodes.map((e=>WC.fromJSON(e))):[]}),toJSON(e){var t;const n={};return 0!==e.statusCode&&(n.statusCode=function(e){switch(e){case PC.UNSPECIFIED:return"STATUS_CODE_UNSPECIFIED";case PC.CANCELLED:return"STATUS_CODE_CANCELLED";case PC.UNKNOWN:return"STATUS_CODE_UNKNOWN";case PC.INVALID_ARGUMENT:return"STATUS_CODE_INVALID_ARGUMENT";case PC.DEADLINE_EXCEEDED:return"STATUS_CODE_DEADLINE_EXCEEDED";case PC.NOT_FOUND:return"STATUS_CODE_NOT_FOUND";case PC.ALREADY_EXISTS:return"STATUS_CODE_ALREADY_EXISTS";case PC.PERMISSION_DENIED:return"STATUS_CODE_PERMISSION_DENIED";case PC.RESOURCE_EXHAUSTED:return"STATUS_CODE_RESOURCE_EXHAUSTED";case PC.FAILED_PRECONDITION:return"STATUS_CODE_FAILED_PRECONDITION";case PC.ABORTED:return"STATUS_CODE_ABORTED";case PC.OUT_OF_RANGE:return"STATUS_CODE_OUT_OF_RANGE";case PC.UNIMPLEMENTED:return"STATUS_CODE_UNIMPLEMENTED";case PC.INTERNAL:return"STATUS_CODE_INTERNAL";case PC.UNAVAILABLE:return"STATUS_CODE_UNAVAILABLE";case PC.DATA_LOSS:return"STATUS_CODE_DATA_LOSS";case PC.UNAUTHENTICATED:return"STATUS_CODE_UNAUTHENTICATED";default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum StatusCode")}}(e.statusCode)),void 0!==e.detailCode&&(n.detailCode=WC.toJSON(e.detailCode)),(null===(t=e.fallbackDetailCodes)||void 0===t?void 0:t.length)&&(n.fallbackDetailCodes=e.fallbackDetailCodes.map((e=>WC.toJSON(e)))),n},create:e=>qC.fromPartial(null!=e?e:{}),fromPartial(e){var t,n;const r={$type:"deepl.pb.interactive_text_api.signalr.ClientErrorInfo",statusCode:0,detailCode:void 0,fallbackDetailCodes:[]};return r.statusCode=null!==(t=e.statusCode)&&void 0!==t?t:0,r.detailCode=void 0!==e.detailCode&&null!==e.detailCode?WC.fromPartial(e.detailCode):void 0,r.fallbackDetailCodes=(null===(n=e.fallbackDetailCodes)||void 0===n?void 0:n.map((e=>WC.fromPartial(e))))||[],r}};function BC(e){return null!=e}function HC(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function JC(){const e=new fL;return e.register({type:CC.START_SESSION_REQUEST,encode:e=>HC(e)&&"sessionMode"in e?vO.encode(e).finish():null,decode:e=>vO.decode(e)}),e.register({type:CC.START_SESSION_RESPONSE,encode:e=>HC(e)&&"sessionId"in e&&"participantId"in e&&"sessionToken"in e?TO.encode(e).finish():null,decode:e=>TO.decode(e)}),e.register({type:CC.EVENT_VERSION,encode:e=>HC(e)&&"version"in e?CO.encode(e).finish():null,decode:e=>CO.decode(e)}),e.register({type:CC.PARTICIPANT_REQUEST,encode:e=>HC(e)&&("appendMessage"in e||"updateAuthenticationTokenMessage"in e)?yO.encode(e).finish():null,decode:e=>yO.decode(e)}),e.register({type:CC.PARTICIPANT_RESPONSE,encode:e=>HC(e)&&"confirmedMessage"in e&&"initializedMessage"in e&&"publishedMessage"in e?EO.encode(e).finish():null,decode:e=>EO.decode(e)}),e.register({type:CC.CLIENT_ERROR_INFO,encode:e=>HC(e)&&"statusCode"in e&&"detailCode"in e&&"fallbackDetailCodes"in e?qC.encode(e).finish():null,decode:e=>qC.decode(e)}),e}function YC(e){return e.$type===hO.$type}function zC(e){return e.$type===fO.$type}function XC(e){return e.$type===mO.$type}function KC(e){return e.$type===_O.$type}function QC(e){if(e.textChangeOperation)return e.textChangeOperation;if(e.createAnnotationOperation)return e.createAnnotationOperation;if(e.removeAnnotationOperation)return e.removeAnnotationOperation;if(e.setPropertyOperation)return e.setPropertyOperation;throw new Error("FieldEvent does not contain an operation")}function ZC(e,t,n){const r={fieldName:t,participantId:n,$type:PO.$type};switch(e.$type){case hO.$type:return Object.assign(Object.assign({},r),{textChangeOperation:e});case fO.$type:return Object.assign(Object.assign({},r),{createAnnotationOperation:e});case mO.$type:return Object.assign(Object.assign({},r),{removeAnnotationOperation:e});case _O.$type:return Object.assign(Object.assign({},r),{setPropertyOperation:e})}}function eP(e,t,n){return{$type:hO.$type,range:{$type:xw.$type,start:e,end:t},text:n}}function tP(e,t,n,r){return function(e,t){switch(t.$type){case Uw.$type:return Object.assign(Object.assign({},e),{textUnitPayload:t});case bw.$type:return Object.assign(Object.assign({},e),{requestWordAlternativesPayload:t});case Ew.$type:return Object.assign(Object.assign({},e),{providedWordAlternativesPayload:t});case Ow.$type:return Object.assign(Object.assign({},e),{selectWordAlternativePayload:t});case Jw.$type:return Object.assign(Object.assign({},e),{translatorGlossaryReplacementPayload:t});case Iw.$type:return Object.assign(Object.assign({},e),{requestTextUnitAlternativesPayload:t});case Yw.$type:return Object.assign(Object.assign({},e),{translatorProvidedTextUnitAlternativesPayload:t});case ww.$type:return Object.assign(Object.assign({},e),{selectTextUnitAlternativePayload:t});case qw.$type:return Object.assign(Object.assign({},e),{translatorRequestAutocompletionPayload:t});case Bw.$type:return Object.assign(Object.assign({},e),{translatorProvidedAutocompletionPayload:t});case Hw.$type:return Object.assign(Object.assign({},e),{translatorSelectAutocompletionPayload:t});case zw.$type:return Object.assign(Object.assign({},e),{translatorProvidedAutomaticTextUnitAlternativesPayload:t});case Aw.$type:return Object.assign(Object.assign({},e),{selectAutomaticTextUnitAlternativePayload:t});case DN.$type:return Object.assign(Object.assign({},e),{writeProvidedTextUnitAlternativesPayload:t});case UN.$type:return Object.assign(Object.assign({},e),{writeProvidedAutomaticTextUnitAlternativesPayload:t});case kN.$type:return Object.assign(Object.assign({},e),{writeDiffUnitPayload:t});case Cw.$type:return Object.assign(Object.assign({},e),{textFormattingPayload:t});case Xw.$type:return Object.assign(Object.assign({},e),{translatorRequestClarifyPayload:t});case Zw.$type:return Object.assign(Object.assign({},e),{translatorSelectClarifyAnswerPayload:t});case nO.$type:return Object.assign(Object.assign({},e),{writeRequestChangeStyleAlternativesAnnotationPayload:t});case oO.$type:return Object.assign(Object.assign({},e),{writeProvidedChangeStyleAlternativesAnnotationPayload:t});case aO.$type:return Object.assign(Object.assign({},e),{writeSelectChangeStyleAlternativeAnnotationPayload:t});default:throw new Error("Could not match annotation payload.")}}({$type:fO.$type,annotationId:e,range:{$type:xw.$type,start:t,end:n}},r)}function nP(e,t){const n={$type:_O.$type,propertyName:e};return void 0===t?n:function(e,t){switch(t.$type){case eN.$type:return Object.assign(Object.assign({},e),{translatorSourceLanguagesValue:t});case nN.$type:return Object.assign(Object.assign({},e),{translatorRequestedSourceLanguageValue:t});case rN.$type:return Object.assign(Object.assign({},e),{translatorCalculatedSourceLanguageValue:t});case tN.$type:return Object.assign(Object.assign({},e),{translatorTargetLanguagesValue:t});case oN.$type:return Object.assign(Object.assign({},e),{translatorRequestedTargetLanguageValue:t});case aN.$type:return Object.assign(Object.assign({},e),{translatorCalculatedTargetLanguageValue:t});case lN.$type:return Object.assign(Object.assign({},e),{translatorFormalityModesValue:t});case uN.$type:return Object.assign(Object.assign({},e),{translatorFormalityModeValue:t});case sN.$type:return Object.assign(Object.assign({},e),{translatorGlossarySupportValue:t});case EN.$type:return Object.assign(Object.assign({},e),{translatorGlossaryListValue:t});case iN.$type:return Object.assign(Object.assign({},e),{translatorGlossaryIdValue:t});case dN.$type:return Object.assign(Object.assign({},e),{translatorLanguageModelsValue:t});case pN.$type:return Object.assign(Object.assign({},e),{translatorLanguageModelValue:t});case gN.$type:return Object.assign(Object.assign({},e),{translatorTextDirectionValue:t});case hN.$type:return Object.assign(Object.assign({},e),{translatorMaximumTextLengthValue:t});case fN.$type:return Object.assign(Object.assign({},e),{translatorUnsupportedSourceLanguageValue:t});case MN.$type:return Object.assign(Object.assign({},e),{writeLanguagesValue:t});case $N.$type:return Object.assign(Object.assign({},e),{writeRequestedLanguageValue:t});case VN.$type:return Object.assign(Object.assign({},e),{writeCalculatedLanguageValue:t});case WN.$type:return Object.assign(Object.assign({},e),{writeStyleVariantsValue:t});case qN.$type:return Object.assign(Object.assign({},e),{writeStyleVariantValue:t});case FN.$type:return Object.assign(Object.assign({},e),{writeGlossaryIdValue:t});case zN.$type:return Object.assign(Object.assign({},e),{writeGlossarySupportValue:t});case YN.$type:return Object.assign(Object.assign({},e),{writeGlossaryListValue:t});case jN.$type:return Object.assign(Object.assign({},e),{writeMaximumTextLengthValue:t});case BN.$type:return Object.assign(Object.assign({},e),{writeUnsupportedLanguageValue:t});case mN.$type:return Object.assign(Object.assign({},e),{translatorSourceLanguageDetectionWeightsValue:t});case GN.$type:return Object.assign(Object.assign({},e),{writeGlossaryLanguagesValue:t})}}(n,t)}let rP=class{constructor(){this.fields=[]}registerField(e){return this.fields.push(e),e}applyItaEvent(e){const t=this.fields.find((t=>t.name===e.fieldName));t&&t.applyOperation(QC(e))}serialize(){return{$type:DO.$type,fields:this.fields.map((e=>e.serialize()))}}prettyPrint(){return{fields:this.fields.map((e=>e.prettyPrint()))}}reset(){this.fields.forEach((e=>e.reset()))}};function oP(){}function aP(e,t,n,r,o){for(var a,i=[];t;)i.push(t),a=t.previousComponent,delete t.previousComponent,t=a;i.reverse();for(var s=0,c=i.length,l=0,u=0;s<c;s++){var d=i[s];if(d.removed){if(d.value=e.join(r.slice(u,u+d.count)),u+=d.count,s&&i[s-1].added){var p=i[s-1];i[s-1]=i[s],i[s]=p}}else{if(!d.added&&o){var g=n.slice(l,l+d.count);g=g.map((function(e,t){var n=r[u+t];return n.length>e.length?n:e})),d.value=e.join(g)}else d.value=e.join(n.slice(l,l+d.count));l+=d.count,d.added||(u+=d.count)}}var h=i[c-1];return c>1&&"string"==typeof h.value&&(h.added||h.removed)&&e.equals("",h.value)&&(i[c-2].value+=h.value,i.pop()),i}oP.prototype={diff:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=r.callback;"function"==typeof r&&(o=r,r={}),this.options=r;var a=this;function i(e){return o?(setTimeout((function(){o(void 0,e)}),0),!0):e}e=this.castInput(e),t=this.castInput(t),e=this.removeEmpty(this.tokenize(e));var s=(t=this.removeEmpty(this.tokenize(t))).length,c=e.length,l=1,u=s+c;r.maxEditLength&&(u=Math.min(u,r.maxEditLength));var d=null!==(n=r.timeout)&&void 0!==n?n:1/0,p=Date.now()+d,g=[{oldPos:-1,lastComponent:void 0}],h=this.extractCommon(g[0],t,e,0);if(g[0].oldPos+1>=c&&h+1>=s)return i([{value:this.join(t),count:t.length}]);var f=-1/0,m=1/0;function _(){for(var n=Math.max(f,-l);n<=Math.min(m,l);n+=2){var r=void 0,o=g[n-1],u=g[n+1];o&&(g[n-1]=void 0);var d=!1;if(u){var p=u.oldPos-n;d=u&&0<=p&&p<s}var _=o&&o.oldPos+1<c;if(d||_){if(r=!_||d&&o.oldPos+1<u.oldPos?a.addToPath(u,!0,void 0,0):a.addToPath(o,void 0,!0,1),h=a.extractCommon(r,t,e,n),r.oldPos+1>=c&&h+1>=s)return i(aP(a,r.lastComponent,t,e,a.useLongestToken));g[n]=r,r.oldPos+1>=c&&(m=Math.min(m,n-1)),h+1>=s&&(f=Math.max(f,n+1))}else g[n]=void 0}l++}if(o)!function e(){setTimeout((function(){if(l>u||Date.now()>p)return o();_()||e()}),0)}();else for(;l<=u&&Date.now()<=p;){var v=_();if(v)return v}},addToPath:function(e,t,n,r){var o=e.lastComponent;return o&&o.added===t&&o.removed===n?{oldPos:e.oldPos+r,lastComponent:{count:o.count+1,added:t,removed:n,previousComponent:o.previousComponent}}:{oldPos:e.oldPos+r,lastComponent:{count:1,added:t,removed:n,previousComponent:o}}},extractCommon:function(e,t,n,r){for(var o=t.length,a=n.length,i=e.oldPos,s=i-r,c=0;s+1<o&&i+1<a&&this.equals(t[s+1],n[i+1]);)s++,i++,c++;return c&&(e.lastComponent={count:c,previousComponent:e.lastComponent}),e.oldPos=i,s},equals:function(e,t){return this.options.comparator?this.options.comparator(e,t):e===t||this.options.ignoreCase&&e.toLowerCase()===t.toLowerCase()},removeEmpty:function(e){for(var t=[],n=0;n<e.length;n++)e[n]&&t.push(e[n]);return t},castInput:function(e){return e},tokenize:function(e){return e.split("")},join:function(e){return e.join("")}};var iP=new oP;var sP=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,cP=/\S/,lP=new oP;lP.equals=function(e,t){return this.options.ignoreCase&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t||this.options.ignoreWhitespace&&!cP.test(e)&&!cP.test(t)},lP.tokenize=function(e){for(var t=e.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),n=0;n<t.length-1;n++)!t[n+1]&&t[n+2]&&sP.test(t[n])&&sP.test(t[n+2])&&(t[n]+=t[n+2],t.splice(n+1,2),n--);return t};var uP=new oP;function dP(e){return dP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dP(e)}uP.tokenize=function(e){this.options.stripTrailingCr&&(e=e.replace(/\r\n/g,"\n"));var t=[],n=e.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var r=0;r<n.length;r++){var o=n[r];r%2&&!this.options.newlineIsToken?t[t.length-1]+=o:(this.options.ignoreWhitespace&&(o=o.trim()),t.push(o))}return t},(new oP).tokenize=function(e){return e.split(/(\S.+?[.!?])(?=\s+|$)/)},(new oP).tokenize=function(e){return e.split(/([{}:;,]|\s+)/)};var pP=Object.prototype.toString,gP=new oP;function hP(e,t,n,r,o){var a,i;for(t=t||[],n=n||[],r&&(e=r(o,e)),a=0;a<t.length;a+=1)if(t[a]===e)return n[a];if("[object Array]"===pP.call(e)){for(t.push(e),i=new Array(e.length),n.push(i),a=0;a<e.length;a+=1)i[a]=hP(e[a],t,n,r,o);return t.pop(),n.pop(),i}if(e&&e.toJSON&&(e=e.toJSON()),"object"===dP(e)&&null!==e){t.push(e),i={},n.push(i);var s,c=[];for(s in e)e.hasOwnProperty(s)&&c.push(s);for(c.sort(),a=0;a<c.length;a+=1)i[s=c[a]]=hP(e[s],t,n,r,s);t.pop(),n.pop()}else i=e;return i}gP.useLongestToken=!0,gP.tokenize=uP.tokenize,gP.castInput=function(e){var t=this.options,n=t.undefinedReplacement,r=t.stringifyReplacer,o=void 0===r?function(e,t){return void 0===t?n:t}:r;return"string"==typeof e?e:JSON.stringify(hP(e,null,null,o),o,"  ")},gP.equals=function(e,t){return oP.prototype.equals.call(gP,e.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"))};var fP=new oP;fP.tokenize=function(e){return e.slice()},fP.join=fP.removeEmpty=function(e){return e};var mP;function _P(e,t){return{$type:xw.$type,start:e,end:t}}!function(e){e[e.BaseThenNew=0]="BaseThenNew",e[e.NewThenBase=1]="NewThenBase"}(mP||(mP={}));const vP=(e,t,n=mP.BaseThenNew)=>{var r,o;if(XC(t)||XC(e)||zC(e)||YC(e)&&(null===(r=e.range)||void 0===r?void 0:r.start)===(null===(o=e.range)||void 0===o?void 0:o.end)&&0===e.text.length)return t;if(KC(e)&&KC(t))return((e,t,n)=>e.propertyName!==t.propertyName||n===mP.BaseThenNew?t:e)(e,t,n);if(KC(e)||KC(t))return t;if(YC(e)&&YC(t))return((e,t,n)=>{const r=e.range,o=t.range;if(r.start>o.end)return t;const a=e.text.length+r.start-r.end;if(r.end<o.start)return Object.assign(Object.assign({},t),{range:_P(o.start+a,o.end+a)});const i=r.start<o.start||r.start===o.start&&n===mP.BaseThenNew,s=r.end<o.end;if(i){const n=r.start+e.text.length;return s?Object.assign(Object.assign({},t),{range:_P(n,o.end+a)}):Object.assign(Object.assign({},t),{range:_P(n,n)})}return s?Object.assign(Object.assign({},t),{range:_P(o.start,o.end+a),text:t.text+e.text}):Object.assign(Object.assign({},t),{range:_P(o.start,r.start)})})(e,t,n);if(YC(e)&&zC(t))return((e,t)=>{const n=e.range,r=t.range;if(n.start>r.end)return t;const o=e.text.length+n.start-n.end;if(n.end<r.start)return Object.assign(Object.assign({},t),{range:_P(r.start+o,r.end+o)});const a=n.start<r.start,i=n.end<r.end,s=n.start+e.text.length;return a?i?Object.assign(Object.assign({},t),{range:_P(s,r.end+o)}):n.end===r.end?Object.assign(Object.assign({},t),{range:_P(s,s)}):Object.assign(Object.assign({},t),{range:_P(n.start,n.start)}):i?n.start===r.start?Object.assign(Object.assign({},t),{range:_P(s,r.end+o)}):Object.assign(Object.assign({},t),{range:_P(r.start,r.end+o)}):Object.assign(Object.assign({},t),{range:_P(r.start,s)})})(e,t);throw new Error(`Operational transform for operations of type [${null==e?void 0:e.$type}, ${null==t?void 0:t.$type}] not implemented.`)},TP=(e,t)=>[vP(t,e,mP.NewThenBase),vP(e,t,mP.BaseThenNew)],yP=(e,t)=>{let n=[...e];const r=t.map((e=>{let t=e;return n=n.map((e=>{const[n,r]=TP(t,e);return t=n,r})),t}));return[n,r]},EP=(e,t)=>{let n=[...t];return{transformedIncomingEvents:e.map((e=>{let t=QC(e);return n=n.map((n=>{if(e.fieldName!==n.fieldName)return n;const[r,o]=TP(t,QC(n));return t=r,"participantId"in n?ZC(o,n.fieldName,n.participantId):ZC(o,n.fieldName)})),ZC(t,e.fieldName,e.participantId)})),transformedExistingEvents:n}};function SP(e){return e.$type===NO.$type?{$type:yO.$type,appendMessage:e}:{$type:yO.$type,updateAuthenticationTokenMessage:e}}function IP(e){if(!e.range)throw new Error("TextChangeOperation must have a range to calculate delta");return e.text.length-e.range.end+e.range.start}function bP(e,t){const n=(r=e,o=t,a={ignoreCase:!1},iP.diff(r,o,a));var r,o,a;const{compactedOperations:i}=n.reduce((({compactedOperations:e,index:t},r,o)=>{if(!r.added&&!r.removed)return{compactedOperations:e,index:t+r.value.length};const a=n[o-1];if(!a||!a.added&&!a.removed){const n=function(e,t){if(!e.added&&!e.removed)throw new Error("Cannot convert change object that represents common chunk to text change operation");return e.removed?eP(t,t+e.value.length,""):eP(t,t,e.value)}(r,t);return{compactedOperations:[...e,n],index:t+n.text.length}}const i=e.at(-1),s=function(e,t){return t.removed?eP(e.range.start,e.range.end+t.value.length,e.text):eP(e.range.start,e.range.end,e.text+t.value)}(i,r);return{compactedOperations:[...e.slice(0,-1),s],index:t-IP(i)+IP(s)}}),{compactedOperations:[],index:0});return i}const AP=(e,t)=>e.split("-")[0]===t.split("-")[0];class wP{constructor(e){this.name=e,this.content=new cC(void 0),this.annotations=[],this.annotationsRequiringTransformation=[],this.changeNotifier=new iC,this.wasChanged=this.changeNotifier.asObservable(),this.properties=new Map}registerAnnotation(e){return e.config.requiresTransformation&&this.annotationsRequiringTransformation.push(e),this.annotations.push(e),e}registerProperty(e){return this.properties.set(e.propertyName,e),e}applyOperation(e){YC(e)?this.applyTextChangeOperation(e):zC(e)?this.applyCreateAnnotationOperation(e):XC(e)?this.applyRemoveAnnotationOperation(e):KC(e)&&this.applySetPropertyOperation(e)}applyTextChangeOperation(e){var t;const n=((e,t)=>{var n,r;if(void 0===t.range||t.range.start>e.length||t.range.start<0||t.range.end>e.length||t.range.end<0||t.range.start>t.range.end)throw new Error(`Tried to apply out of range operation to string: start ${null===(n=t.range)||void 0===n?void 0:n.start}, end ${null===(r=t.range)||void 0===r?void 0:r.end}, length ${e.length}`);return e.slice(0,t.range.start)+t.text+e.slice(t.range.end)})(null!==(t=this.content.value)&&void 0!==t?t:"",e);this.content.next(n),this.changeNotifier.next();for(const t of this.annotationsRequiringTransformation){const n=t.annotations.value.map((t=>Object.assign(Object.assign({},t),{operation:vP(e,t.operation)})));t.set(n)}}applyCreateAnnotationOperation(e){const t=function(e){if(e.textUnitPayload)return e.textUnitPayload;if(e.requestWordAlternativesPayload)return e.requestWordAlternativesPayload;if(e.providedWordAlternativesPayload)return e.providedWordAlternativesPayload;if(e.selectWordAlternativePayload)return e.selectWordAlternativePayload;if(e.translatorGlossaryReplacementPayload)return e.translatorGlossaryReplacementPayload;if(e.requestTextUnitAlternativesPayload)return e.requestTextUnitAlternativesPayload;if(e.translatorProvidedTextUnitAlternativesPayload)return e.translatorProvidedTextUnitAlternativesPayload;if(e.selectTextUnitAlternativePayload)return e.selectTextUnitAlternativePayload;if(e.translatorRequestAutocompletionPayload)return e.translatorRequestAutocompletionPayload;if(e.translatorProvidedAutocompletionPayload)return e.translatorProvidedAutocompletionPayload;if(e.translatorSelectAutocompletionPayload)return e.translatorSelectAutocompletionPayload;if(e.translatorProvidedAutomaticTextUnitAlternativesPayload)return e.translatorProvidedAutomaticTextUnitAlternativesPayload;if(e.selectAutomaticTextUnitAlternativePayload)return e.selectAutomaticTextUnitAlternativePayload;if(e.writeProvidedTextUnitAlternativesPayload)return e.writeProvidedTextUnitAlternativesPayload;if(e.writeProvidedAutomaticTextUnitAlternativesPayload)return e.writeProvidedAutomaticTextUnitAlternativesPayload;if(e.writeDiffUnitPayload)return e.writeDiffUnitPayload;if(e.textFormattingPayload)return e.textFormattingPayload;if(e.translatorProvidedClarifyHighlightPayload)return e.translatorProvidedClarifyHighlightPayload;if(e.translatorProvidedClarifyQuestionPayload)return e.translatorProvidedClarifyQuestionPayload;if(e.writeRequestChangeStyleAlternativesAnnotationPayload)return e.writeRequestChangeStyleAlternativesAnnotationPayload;if(e.writeProvidedChangeStyleAlternativesAnnotationPayload)return e.writeProvidedChangeStyleAlternativesAnnotationPayload;if(e.writeSelectChangeStyleAlternativeAnnotationPayload)return e.writeSelectChangeStyleAlternativeAnnotationPayload;throw new Error("CreateAnnotationOperation does not contain a known payload")}(e),n=this.annotations.find((e=>e.payloadType===t.$type));n&&(n.applyCreateAnnotationOperation({operation:e,specificPayload:t}),this.changeNotifier.next())}applyRemoveAnnotationOperation(e){this.annotations.forEach((t=>t.applyRemoveAnnotationOperation(e))),this.changeNotifier.next()}applySetPropertyOperation(e){const{propertyName:t}=e,n=this.properties.get(t);n&&(n.applySetPropertyOperation(e),this.changeNotifier.next())}update(e){var t;const n=function(e){const t=[],n=[];let r=0,o=0;for(const a of e){const e=IP(a);e<0?(o+=e,t.push(Object.assign(Object.assign({},a),{range:Object.assign(Object.assign({},a.range),{start:a.range.start-r,end:a.range.end-r})}))):(r+=e,n.push(Object.assign(Object.assign({},a),{range:Object.assign(Object.assign({},a.range),{start:a.range.start-o,end:a.range.end-o})})))}const[a,i]=yP(t,n);return[...t,...i]}(bP(null!==(t=this.content.value)&&void 0!==t?t:"",e));this.content.next(e),this.changeNotifier.next();for(const e of this.annotationsRequiringTransformation){const t=e.annotations.value,[r,o]=yP(n,t.map((e=>e.operation)));e.set(o.map(((e,n)=>Object.assign(Object.assign({},t[n]),{operation:e}))))}return n}serialize(){var e;return{$type:UO.$type,fieldName:this.name,text:null!==(e=this.content.value)&&void 0!==e?e:"",annotations:this.annotations.flatMap((e=>e.serialize())),properties:Array.from(this.properties.values()).map((e=>e.serialize()))}}prettyPrint(){return{fieldName:sO[this.name],text:this.content.value,annotations:this.annotations.flatMap((e=>e.prettyPrint())),properties:Array.from(this.properties.values()).map((e=>e.prettyPrint()))}}reset(){this.content.next(""),this.annotations.forEach((e=>e.reset())),this.properties.forEach((e=>e.reset())),this.changeNotifier.next()}}class NP extends wP{constructor(){super(...arguments),this.excessText="",this.fullContent=this.content.pipe(OC((e=>{if(void 0!==e)return e+this.excessText})))}updateWithLimit(e,t){const n=e.slice(0,t);return this.excessText=e.slice(t),super.update(n)}}class OP{constructor(e,t,n){this.name=e,this.sessionMode=t,this.document=n,this.bufferedInitialEvents=[]}addChangeHandler(e){this.onChange=e,this.onChange(this.bufferedInitialEvents),this.bufferedInitialEvents=[]}applyFieldEvent(e){this.document.applyItaEvent(e)}publishChange(e,t){const n=t.map((t=>ZC(t,e)));this.publishEvents(n)}publishChanges(e){const t=e.flatMap((([e,t])=>t.map((t=>ZC(t,e)))));this.publishEvents(t)}publishEvents(e){this.onChange?this.onChange(e):this.bufferedInitialEvents=[...this.bufferedInitialEvents,...e]}}function RP(e){return e.$type===AO.$type}function LP(e){if(function(e){return e.$type===EO.$type}(e))return function(e){if(null==e?void 0:e.confirmedMessage)return e.confirmedMessage;if(null==e?void 0:e.initializedMessage)return e.initializedMessage;if(null==e?void 0:e.publishedMessage)return e.publishedMessage;if(null==e?void 0:e.metaInfoMessage)return e.metaInfoMessage;throw new Error("ParticipantResponse does not contain a message")}(e);if(function(e){return e.$type===yO.$type}(e))return function(e){if(null==e?void 0:e.appendMessage)return e.appendMessage;if(null==e?void 0:e.updateAuthenticationTokenMessage)return e.updateAuthenticationTokenMessage;throw new Error("ParticipantRequest does not contain a message")}(e);throw new Error("Extracting message failed, you need to pass a ParticipantRequest or ParticipantResponse")}class CP{constructor(e){var t,n,r,o,a,i;this.currentVersion={$type:CO.$type,version:void 0},this.isInitialized=!1,this.pendingEvents=[],this.sentEvents=[],this.confirmedEvents=[],this.incomingEvents=e.pipe(OC((e=>LP(e))),(i=kL(r=e=>{(function(e){return e.$type===SO.$type})(e)&&this.handleConfirmedMessage(e),function(e){return e.$type===IO.$type}(e)&&this.handleInitializedMessage()})||o||a?{next:r,error:o,complete:a}:r)?nC((function(e,t){var n;null===(n=i.subscribe)||void 0===n||n.call(i);var r=!0;e.subscribe(rC(t,(function(e){var n;null===(n=i.next)||void 0===n||n.call(i,e),t.next(e)}),(function(){var e;r=!1,null===(e=i.complete)||void 0===e||e.call(i),t.complete()}),(function(e){var n;r=!1,null===(n=i.error)||void 0===n||n.call(i,e),t.error(e)}),(function(){var e,t;r&&(null===(e=i.unsubscribe)||void 0===e||e.call(i)),null===(t=i.finalize)||void 0===t||t.call(i)})))})):ZL,VC((e=>function(e){return e.$type===bO.$type}(e))),OC((e=>this.handlePublished(e))),(t=e=>NC(e),nC((function(e,r){var o=null,a=0,i=!1,s=function(){return i&&!o&&r.complete()};e.subscribe(rC(r,(function(e){null==o||o.unsubscribe();var i=0,c=a++;yC(t(e,c)).subscribe(o=rC(r,(function(t){return r.next(n?n(e,t,c,i++):t)}),(function(){o=null,s()})))}),(function(){i=!0,s()})))}))),function(e){void 0===e&&(e={});var t=e.connector,n=void 0===t?function(){return new iC}:t,r=e.resetOnError,o=void 0===r||r,a=e.resetOnComplete,i=void 0===a||a,s=e.resetOnRefCountZero,c=void 0===s||s;return function(e){var t,r,a,s=0,l=!1,u=!1,d=function(){null==r||r.unsubscribe(),r=void 0},p=function(){d(),t=a=void 0,l=u=!1},g=function(){var e=t;p(),null==e||e.unsubscribe()};return nC((function(e,h){s++,u||l||d();var f=a=null!=a?a:n();h.add((function(){0!=--s||u||l||(r=FC(g,c))})),f.subscribe(h),!t&&s>0&&(t=new zL({next:function(e){return f.next(e)},error:function(e){u=!0,d(),r=FC(p,o,e),f.error(e)},complete:function(){l=!0,d(),r=FC(p,i),f.complete()}}),yC(e).subscribe(t))}))(e)}}())}addClientEvents(e){this.pendingEvents.push(...e),this.trySendPendingEvents()}handleConfirmedMessage(e){this.currentVersion=e.currentVersion,this.confirmedEvents.push(...this.sentEvents),this.sentEvents=[],this.trySendPendingEvents()}handlePublished(e){const t=e.events,{transformedIncomingEvents:n,transformedExistingEvents:r}=EP(t,this.sentEvents);this.sentEvents=r;const{transformedIncomingEvents:o,transformedExistingEvents:a}=EP(n,this.pendingEvents);return this.pendingEvents=a,this.confirmedEvents.push(...o),this.currentVersion=e.currentVersion,this.trySendPendingEvents(),o}connectToSession(e){this.sendEvents=e,this.trySendPendingEvents()}trySendPendingEvents(){0===this.pendingEvents.length||this.sentEvents.length>0||!this.isInitialized||!this.sendEvents||(this.sentEvents=this.sendEvents(this.pendingEvents.reduce(((e,t)=>{if(function(e){var t,n;return void 0!==e&&(null===(t=e.range)||void 0===t?void 0:t.start)===(null===(n=e.range)||void 0===n?void 0:n.end)&&0===e.text.length}(t.textChangeOperation))return e;if(0===e.length)return[t];const n=e.at(-1);if(n.fieldName!==t.fieldName||!t.textChangeOperation||!n.textChangeOperation)return[...e,t];const r=n.textChangeOperation,o=t.textChangeOperation,a=o.range.start-r.range.start,i=o.range.end-r.range.start,s=Math.max(0,a),c=Math.min(r.text.length,i);if(s>c)return[...e,t];const l=Math.min(0,a),u=i-a-(c-s),d=ZC(eP(r.range.start+l,r.range.end+l+u,r.text.slice(0,s)+o.text+r.text.slice(c)),t.fieldName);return[...e.slice(0,-1),d]}),new Array),this.currentVersion),this.pendingEvents=[])}handleInitializedMessage(){this.sentEvents.length>0&&this.sendEvents(this.sentEvents,this.currentVersion),this.isInitialized=!0,this.trySendPendingEvents()}}var PP,xP=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))};!function(e){e[e.Connecting=0]="Connecting",e[e.Reconnecting=1]="Reconnecting",e[e.Restoring=2]="Restoring",e[e.Connected=3]="Connected",e[e.Disconnected=4]="Disconnected"}(PP||(PP={}));class kP extends Error{constructor(){super(...arguments),this.name="ConnectionError"}}class DP extends Error{constructor(e){super("There was an error with the session on the server. See the info property for details."),this.info=e,this.name="SessionError"}}class UP{constructor(e,t,n,r){this.connectionBuilder=e,this.config=t,this.client=n,this.metaInfo=r,this.participantResponses=new iC,this.participantRequests=new iC,this.errorInfoSubject=new iC,this.error=this.errorInfoSubject.asObservable(),this.statusSubject=new cC(PP.Disconnected),this.status=this.statusSubject.asObservable(),this.messagesSubject=new iC,this.messages=this.messagesSubject.asObservable(),this.connection=this.connectionBuilder.build(),this.participantRequests.subscribe((e=>this.messagesSubject.next(e))),this.participantResponses.subscribe((e=>this.messagesSubject.next(e))),this.eventHandler=new CP(this.participantResponses),this.client.addChangeHandler((e=>this.eventHandler.addClientEvents(e))),this.eventHandler.incomingEvents.subscribe((e=>this.client.applyFieldEvent(e))),this.participantResponses.pipe(OC(LP),VC(RP)).subscribe((e=>{var t;return null===(t=this.metaInfo)||void 0===t?void 0:t.addMetaInfoMessage(e)})),this.connection.onclose((e=>{this.statusSubject.value===PP.Connected&&(this.statusSubject.next(PP.Disconnected),this.errorInfoSubject.next(new kP(`The connection was closed with error: ${e}`)))}))}connect(e){return xP(this,void 0,void 0,(function*(){if(this.statusSubject.value!==PP.Disconnected)return;if(this.connection.on("OnError",(e=>{this.connection.off("OnError"),this.statusSubject.next(PP.Disconnected),this.errorInfoSubject.next(new DP(e))})),this.startSessionResponse&&!e?this.statusSubject.next(PP.Reconnecting):this.statusSubject.next(PP.Connecting),this.connection.state!==xR.Connected)try{yield this.connection.start()}catch(e){throw this.statusSubject.next(PP.Disconnected),new kP(`Error starting connection: ${e}`)}this.startSessionResponse&&!e||(this.startSessionResponse=yield this.startSession(e));const t=this.connection.stream("GetMessages",this.startSessionResponse.sessionToken,this.eventHandler.currentVersion).subscribe({next:e=>{this.statusSubject.value!==PP.Connected&&this.statusSubject.next(PP.Connected),this.participantResponses.next(e)},error:()=>{},complete:()=>{}});this.connection.on("OnError",(()=>t.dispose()));try{yield this.connection.send("AppendMessages",this.startSessionResponse.sessionToken,this.participantRequests)}catch(e){throw this.statusSubject.next(PP.Disconnected),new kP(`Error starting 'AppendMessages': ${e}`)}var n;this.eventHandler.connectToSession(((e,t)=>{const n=e.map((e=>Object.assign(Object.assign({},e),{participantId:this.startSessionResponse.participantId})));if(this.statusSubject.value!==PP.Connected)return this.errorInfoSubject.next(new kP("Error sending message to the server: hub connection is not in a connected state")),n;const r=SP(function(e,t){return{$type:NO.$type,events:e,baseVersion:t}}(n,t));return this.participantRequests.next(r),n})),this.config.accessToken.pipe((n=this.status.pipe(VC((e=>e===PP.Connected))),nC((function(e,t){var r=!1,o=rC(t,(function(){null==o||o.unsubscribe(),r=!0}),BL);yC(n).subscribe(o),e.subscribe(rC(t,(function(e){return r&&t.next(e)})))}))),function(e){return nC((function(t,n){yC(e).subscribe(rC(n,(function(){return n.complete()}),BL)),!n.closed&&t.subscribe(n)}))}(this.status.pipe(VC((e=>e===PP.Disconnected))))).subscribe((e=>this.updateAuthenticationToken(e)))}))}startSession(e){return xP(this,void 0,void 0,(function*(){const t={$type:vO.$type,sessionMode:this.client.sessionMode,baseDocument:e,translatorSessionOptions:{$type:_N.$type,enableTranscription:this.config.enableTranscription,enableTranslatorQuoteConversion:this.config.enableTranslatorQuoteConversion}};let n;try{n=yield this.connection.invoke("StartSession",t)}catch(e){throw this.statusSubject.next(PP.Disconnected),new kP(`Error starting session: ${e}`)}if(!n)throw this.statusSubject.next(PP.Disconnected),new kP("No StartSessionResponse returned from StartSession");return n}))}restore(){return xP(this,void 0,void 0,(function*(){this.statusSubject.next(PP.Restoring),this.participantResponses.complete(),this.connection.stop();const e=this.client.document.serialize();this.client.document.reset();const t=new UP(this.connectionBuilder,this.config,this.client,this.metaInfo);try{yield t.connect(e)}catch(e){throw this.statusSubject.next(PP.Disconnected),e}return t}))}updateAuthenticationToken(e){this.participantRequests.next(SP({$type:OO.$type,token:e}))}}class MP{constructor(e,t){this.serverUrl=e;const n=new URL(e);n.pathname+="/sessions",this.accessTokenSubject=new cC(t),this.connectionBuilder=(new XR).withHubProtocol(new xL({extensionCodec:JC()})).configureLogging(cR.Critical),this.connectionBuilder=t?this.connectionBuilder.withUrl(n.toString(),{accessTokenFactory:()=>this.accessTokenSubject.value}):this.connectionBuilder.withUrl(n.toString())}createSession(e,t,n){const r=Object.assign(Object.assign({},{enableTranscription:!1,enableTranslatorQuoteConversion:!1}),n);return new UP(this.connectionBuilder,Object.assign({accessToken:this.accessTokenSubject.pipe(VC((e=>"string"==typeof e)))},r),e,t)}updateAccessToken(e){this.accessTokenSubject.next(e)}}const GP=1500,$P={requiresTransformation:!1};class VP{constructor(e,t){this.payloadType=e,this.annotations=new cC([]),this.payloads=this.annotations.pipe(OC((e=>e.map((e=>e.specificPayload))))),this.config=Object.assign(Object.assign({},$P),t)}applyCreateAnnotationOperation(e){if(!e.operation.range||!e.operation.annotationId)return;const t=[...this.annotations.value,e];this.annotations.next(t)}applyRemoveAnnotationOperation(e){const t=this.annotations.value.filter((t=>{var n,r;return(null===(n=t.operation.annotationId)||void 0===n?void 0:n.value)!==(null===(r=e.annotationId)||void 0===r?void 0:r.value)}));this.annotations.next(t)}add(e,t,n){const r=tP({$type:kO.$type,value:crypto.randomUUID()},e,t,n);return this.annotations.next([...this.annotations.value,{operation:r,specificPayload:n}]),[r]}set(e){this.annotations.next(e)}removeAnnotation(e){const t=this.annotations.value.filter((t=>{var n;return(null===(n=t.operation.annotationId)||void 0===n?void 0:n.value)===(null==e?void 0:e.value)})).map((e=>function(e){return{$type:mO.$type,annotationId:e}}(e.operation.annotationId))),n=this.annotations.value.filter((t=>{var n;return(null===(n=t.operation.annotationId)||void 0===n?void 0:n.value)!==(null==e?void 0:e.value)}));return this.annotations.next(n),t}serialize(){return this.annotations.value.map((e=>e.operation))}prettyPrint(){return this.annotations.value.map((e=>{var t;return{id:null===(t=e.operation.annotationId)||void 0===t?void 0:t.value,range:e.operation.range,annotationPayload:e.specificPayload}}))}reset(){this.annotations.next([])}}class FP{constructor(e,t){this.propertyName=e,this.propertyType=t,this.value=new cC(void 0)}applySetPropertyOperation(e){const t=function(e){return e.translatorSourceLanguagesValue?e.translatorSourceLanguagesValue:e.translatorTargetLanguagesValue?e.translatorTargetLanguagesValue:e.translatorRequestedSourceLanguageValue?e.translatorRequestedSourceLanguageValue:e.translatorCalculatedSourceLanguageValue?e.translatorCalculatedSourceLanguageValue:e.translatorRequestedTargetLanguageValue?e.translatorRequestedTargetLanguageValue:e.translatorCalculatedTargetLanguageValue?e.translatorCalculatedTargetLanguageValue:e.translatorFormalityModesValue?e.translatorFormalityModesValue:e.translatorFormalityModeValue?e.translatorFormalityModeValue:e.translatorGlossarySupportValue?e.translatorGlossarySupportValue:e.translatorGlossaryListValue?e.translatorGlossaryListValue:e.translatorGlossaryIdValue?e.translatorGlossaryIdValue:e.translatorLanguageModelsValue?e.translatorLanguageModelsValue:e.translatorLanguageModelValue?e.translatorLanguageModelValue:e.translatorTextDirectionValue?e.translatorTextDirectionValue:e.translatorMaximumTextLengthValue?e.translatorMaximumTextLengthValue:e.translatorUnsupportedSourceLanguageValue?e.translatorUnsupportedSourceLanguageValue:e.writeGlossarySupportValue?e.writeGlossarySupportValue:e.writeGlossaryListValue?e.writeGlossaryListValue:e.writeGlossaryIdValue?e.writeGlossaryIdValue:e.writeLanguagesValue?e.writeLanguagesValue:e.writeMaximumTextLengthValue?e.writeMaximumTextLengthValue:e.writeUnsupportedLanguageValue?e.writeUnsupportedLanguageValue:e.writeRequestedLanguageValue?e.writeRequestedLanguageValue:e.writeCalculatedLanguageValue?e.writeCalculatedLanguageValue:e.writeStyleVariantsValue?e.writeStyleVariantsValue:e.writeStyleVariantValue?e.writeStyleVariantValue:e.translatorSourceLanguageDetectionWeightsValue?e.translatorSourceLanguageDetectionWeightsValue:e.writeGlossaryLanguagesValue?e.writeGlossaryLanguagesValue:void 0}(e);if(void 0===t)return this.reset();if(t.$type!==this.propertyType)throw new Error(`PropertyValue has type ${t.$type}, but ${this.propertyType} expected`);this.value.next(t)}set(e){return this.value.next(e),[this.serialize()]}reset(){this.value.next(void 0)}serialize(){return nP(this.propertyName,this.value.value)}prettyPrint(){return{propertyName:cO[this.propertyName],propertyValue:this.value.value}}}class jP extends FP{constructor(){super(cO.TRANSLATOR_TEXT_DIRECTION,gN.$type),this.isRightToLeft=this.value.pipe(OC((e=>(null==e?void 0:e.textDirection)===Vw.RIGHT_TO_LEFT)))}}const WP=e=>!!e;let qP=class extends FP{constructor(){super(cO.TRANSLATOR_MAXIMUM_TEXT_LENGTH,hN.$type),this.max=this.value.pipe(VC(WP),OC((e=>e.max)))}getCurrentMax(){var e,t;return null!==(t=null===(e=this.value.value)||void 0===e?void 0:e.max)&&void 0!==t?t:GP}},BP=class extends FP{constructor(){super(cO.TRANSLATOR_UNSUPPORTED_SOURCE_LANGUAGE,fN.$type),this.unsupported=this.value.pipe(OC((e=>!!e)))}};class HP extends FP{constructor(){super(cO.TRANSLATOR_CALCULATED_SOURCE_LANGUAGE,rN.$type),this.language=this.value.pipe(OC((e=>{var t;return null===(t=null==e?void 0:e.sourceLanguage)||void 0===t?void 0:t.code}))),this.isAutoDetected=this.value.pipe(OC((e=>(null==e?void 0:e.origin)===$w.LANGUAGE_DETECTION)))}updateLanguage(e){return super.set({$type:rN.$type,sourceLanguage:{$type:IN.$type,code:e},origin:$w.REQUESTED_LANGUAGE})}getCurrent(){var e,t;return null===(t=null===(e=this.value.value)||void 0===e?void 0:e.sourceLanguage)||void 0===t?void 0:t.code}}class JP extends FP{constructor(){super(cO.TRANSLATOR_REQUESTED_SOURCE_LANGUAGE,nN.$type),this.language=this.value.pipe(OC((e=>{var t;return null===(t=null==e?void 0:e.sourceLanguage)||void 0===t?void 0:t.code})))}updateLanguage(e){if("autodetect"===e){return super.set(void 0)}return super.set({$type:nN.$type,sourceLanguage:{$type:IN.$type,code:e}})}}class YP extends FP{constructor(){super(cO.TRANSLATOR_SOURCE_LANGUAGES,eN.$type),this.sourceLanguages=this.value.pipe(OC((e=>{var t;return null!==(t=null==e?void 0:e.sourceLanguages.map((e=>e.code)))&&void 0!==t?t:[]})))}}class zP extends FP{constructor(){super(cO.TRANSLATOR_SOURCE_LANGUAGE_DETECTION_WEIGHTS,mN.$type),this.weights=this.value.pipe(OC((e=>{var t;return null!==(t=null==e?void 0:e.weights)&&void 0!==t?t:[]})))}updateSourceLanguageDetectionWeights(e){return super.set(void 0===e?void 0:{$type:mN.$type,weights:e})}}let XP=class extends NP{constructor(){super(...arguments),this.calculatedSourceLanguageProperty=this.registerProperty(new HP),this.requestedSourceLanguageProperty=this.registerProperty(new JP),this.sourceLanguagesProperty=this.registerProperty(new YP),this.maximumTextLengthProperty=this.registerProperty(new qP),this.unsupportedLanguageProperty=this.registerProperty(new BP),this.sourceLanguageDetectionWeightsProperty=this.registerProperty(new zP),this.sourceTextUnitAnnotations=this.registerAnnotation(new VP(Uw.$type,{requiresTransformation:!0})),this.textFormattingAnnotations=this.registerAnnotation(new VP(Cw.$type,{requiresTransformation:!0})),this.textDirection=this.registerProperty(new jP),this.requestClarifyAnnotations=this.registerAnnotation(new VP(Xw.$type,{requiresTransformation:!0})),this.clarifyQuestionAnnotations=this.registerAnnotation(new VP(Qw.$type,{requiresTransformation:!0})),this.clarifyHighlightAnnotations=this.registerAnnotation(new VP(Kw.$type,{requiresTransformation:!0})),this.selectClarifyAnswerAnnotations=this.registerAnnotation(new VP(Zw.$type,{requiresTransformation:!0}))}};class KP extends FP{constructor(){super(cO.TRANSLATOR_TARGET_LANGUAGES,tN.$type),this.targetLanguages=this.value.pipe(OC((e=>{var t;return null!==(t=null==e?void 0:e.targetLanguages.map((e=>e.code)))&&void 0!==t?t:[]})))}}class QP extends FP{constructor(){super(cO.TRANSLATOR_CALCULATED_TARGET_LANGUAGE,aN.$type),this.language=this.value.pipe(OC((e=>{var t;return null===(t=null==e?void 0:e.targetLanguage)||void 0===t?void 0:t.code})))}updateLanguage(e){return super.set({$type:aN.$type,targetLanguage:{$type:bN.$type,code:e}})}}class ZP extends FP{constructor(){super(cO.TRANSLATOR_REQUESTED_TARGET_LANGUAGE,oN.$type)}updateLanguage(e){return super.set({$type:oN.$type,targetLanguage:{$type:bN.$type,code:e}})}getCurrent(){var e,t;return null===(t=null===(e=this.value.value)||void 0===e?void 0:e.targetLanguage)||void 0===t?void 0:t.code}}class ex extends FP{constructor(){super(cO.TRANSLATOR_GLOSSARY_SUPPORT,sN.$type),this.supported=this.value.pipe(OC((e=>!!e)))}}class tx extends FP{constructor(){super(cO.TRANSLATOR_GLOSSARY_LIST,EN.$type),this.entries=this.value.pipe(OC((e=>{var t;return null!==(t=null==e?void 0:e.glossaryEntries)&&void 0!==t?t:[]})))}updateGlossaryList(e){return super.set(void 0===e?void 0:{$type:EN.$type,glossaryEntries:e})}}class nx extends FP{constructor(){super(cO.TRANSLATOR_GLOSSARY_SUGGESTIONS,EN.$type)}}class rx extends FP{constructor(){super(cO.TRANSLATOR_FORMALITY_MODES,lN.$type)}}class ox extends FP{constructor(){super(cO.TRANSLATOR_FORMALITY_MODE,uN.$type)}update(e){return super.set(void 0===e?void 0:{$type:uN.$type,formalityMode:e})}}class ax extends FP{constructor(){super(cO.TRANSLATOR_LANGUAGE_MODELS,dN.$type)}}class ix extends FP{constructor(){super(cO.TRANSLATOR_LANGUAGE_MODEL,pN.$type)}update(e){return super.set(void 0===e?void 0:{$type:pN.$type,languageModel:e})}}class sx extends FP{constructor(){super(cO.TRANSLATOR_GLOSSARY_ID,iN.$type)}update(e){return super.set(void 0===e?void 0:{$type:iN.$type,glossaryId:e})}}let cx=class extends wP{constructor(){super(...arguments),this.requestedTargetLanguageProperty=this.registerProperty(new ZP),this.calculatedTargetLanguageProperty=this.registerProperty(new QP),this.targetLanguagesProperty=this.registerProperty(new KP),this.requestWordAlternativesAnnotations=this.registerAnnotation(new VP(bw.$type)),this.providedWordAlternativesAnnotations=this.registerAnnotation(new VP(Ew.$type,{requiresTransformation:!0})),this.selectWordAlternativeAnnotations=this.registerAnnotation(new VP(Ow.$type)),this.requestTextUnitAlternativesAnnotations=this.registerAnnotation(new VP(Iw.$type)),this.providedTextUnitAlternativesAnnotations=this.registerAnnotation(new VP(Yw.$type,{requiresTransformation:!0})),this.selectTextUnitAlternativeAnnotations=this.registerAnnotation(new VP(ww.$type)),this.requestAutocompletionAnnotations=this.registerAnnotation(new VP(qw.$type)),this.providedAutocompletionAnnotations=this.registerAnnotation(new VP(Bw.$type,{requiresTransformation:!0})),this.selectAutocompletionAnnotations=this.registerAnnotation(new VP(Hw.$type)),this.providedAutomaticTextUnitAlternativesAnnotations=this.registerAnnotation(new VP(zw.$type,{requiresTransformation:!0})),this.selectAutomaticTextUnitAlternativeAnnotations=this.registerAnnotation(new VP(Aw.$type)),this.targetTextUnitAnnotations=this.registerAnnotation(new VP(Uw.$type,{requiresTransformation:!0})),this.glossaryReplacementAnnotations=this.registerAnnotation(new VP(Jw.$type,{requiresTransformation:!0})),this.textFormattingAnnotations=this.registerAnnotation(new VP(Cw.$type,{requiresTransformation:!0})),this.glossarySupport=this.registerProperty(new ex),this.glossaryListProperty=this.registerProperty(new tx),this.glossarySuggestions=this.registerProperty(new nx),this.formalityModes=this.registerProperty(new rx),this.formalityMode=this.registerProperty(new ox),this.languageModels=this.registerProperty(new ax),this.languageModel=this.registerProperty(new ix),this.textDirection=this.registerProperty(new jP),this.glossaryId=this.registerProperty(new sx),this.maximumTextLengthProperty=this.registerProperty(new qP)}};function lx(e){const{plainText:t,textFormattingAnnotations:n}=e,r=new Map,o=new Document,a=o.createElement("document");o.appendChild(a),r.set(a,{$type:xw.$type,start:0,end:t.length});const i=new Map;for(const e of n){const t=o.createElement(e.specificPayload.name),n=e.specificPayload.textFormattingId.value;i.set(n,t),r.set(t,e.operation.range)}const s=new Set(i.keys());for(const e of n){const t=i.get(e.specificPayload.textFormattingId.value);if(void 0!==t)for(const n of e.specificPayload.children){const e=i.get(n.value);void 0!==e&&(t.appendChild(e),s.delete(n.value))}}let c=[];s.forEach((e=>{const t=i.get(e);void 0!==t&&c.push(t)})),c=c.sort(((e,t)=>{var n,o,a,i;const s=r.get(e),c=r.get(t),l=(null!==(n=null==s?void 0:s.start)&&void 0!==n?n:0)-(null!==(o=null==c?void 0:c.start)&&void 0!==o?o:0);return 0===l?(null!==(a=null==s?void 0:s.end)&&void 0!==a?a:0)-(null!==(i=null==c?void 0:c.end)&&void 0!==i?i:0):l}));for(const e of c)a.appendChild(e);function l(e,n,r){if(e===n)return e;return r(o.createTextNode(t.slice(e,n))),n}return function e(t,n){let o=t;for(const t of Array.from(n.childNodes)){const a=r.get(t);void 0!==a&&(o=l(o,a.start,(e=>n.insertBefore(e,t))),o=e(o,t),o=l(o,a.end,(e=>{const{nextSibling:r}=t;null!=r?r.insertBefore(e,t):n.appendChild(e)})))}const a=r.get(n);return void 0!==a&&(o=l(o,a.end,(e=>n.appendChild(e)))),o}(0,a),a.innerHTML}function ux(e,t,n){if(t.nodeType===Node.TEXT_NODE)return{text:t.textContent,id:void 0};const r={$type:Lw.$type,value:crypto.randomUUID()};let o=n,a="";const i=[];if(t.hasChildNodes())for(const n of t.childNodes){const t=ux(e,n,o),r=t.text,s=t.id;o+=r.length,a=a.concat(r),void 0!==s&&i.push(s)}const s={$type:xw.$type,start:n,end:o};if("HTML"!==t.nodeName&&"BODY"!==t.nodeName&&"HEAD"!==t.nodeName){const n={$type:Cw.$type,textFormattingId:r,name:t.nodeName,children:i};e.push({operation:{$type:fO.$type,annotationId:{$type:kO.$type,value:crypto.randomUUID()},range:s,textFormattingPayload:n},specificPayload:n})}return{text:a,id:r}}function dx(e){const t=document.createElement("html");t.innerHTML=e;const n=new Array,{text:r}=ux(n,t,0);return{plainText:r,textFormattingAnnotations:n}}class px extends wP{constructor(){super(...arguments),this.targetTranscriptionTextUnitAnnotations=this.registerAnnotation(new VP(Uw.$type,{requiresTransformation:!0}))}}class gx extends rP{constructor(){super(...arguments),this.sourceTextField=this.registerField(new XP(sO.TRANSLATOR_SOURCE_TEXT)),this.targetTextField=this.registerField(new cx(sO.TRANSLATOR_TARGET_TEXT)),this.targetTranscriptionTextField=this.registerField(new px(sO.TRANSLATOR_TARGET_TRANSCRIPTION_TEXT)),this.textUnitAnnotations=GC([this.sourceTextField.sourceTextUnitAnnotations.annotations,this.targetTextField.targetTextUnitAnnotations.annotations,this.targetTranscriptionTextField.targetTranscriptionTextUnitAnnotations.annotations]).pipe(OC((e=>{const t=e[0],n=e[1],r=e[2];return t.sort(((e,t)=>e.operation.range.start-t.operation.range.start)).map((e=>{var t,o,a,i;const s=e.operation.range,c=null!==(o=null===(t=n.find((t=>{var n,r;return(null===(n=e.specificPayload.textUnitId)||void 0===n?void 0:n.value)===(null===(r=t.specificPayload.textUnitId)||void 0===r?void 0:r.value)})))||void 0===t?void 0:t.operation.range)&&void 0!==o?o:xw.fromJSON({}),l=null!==(i=null===(a=r.find((t=>{var n,r;return(null===(n=e.specificPayload.textUnitId)||void 0===n?void 0:n.value)===(null===(r=t.specificPayload.textUnitId)||void 0===r?void 0:r.value)})))||void 0===a?void 0:a.operation.range)&&void 0!==i?i:xw.fromJSON({});return{sourceStart:s.start,sourceEnd:s.end,sourceLength:s.end-s.start,targetStart:c.start,targetEnd:c.end,targetLength:c.end-c.start,targetTranscriptionStart:l.start,targetTranscriptionEnd:l.end,targetTranscriptionLength:l.end-l.start}}))})))}}class hx extends OP{constructor(e={preventSameLanguages:{enabled:!1}}){super("Translator",lO.TRANSLATOR,new gx),this.config=e,this.targetLanguage=this.document.targetTextField.requestedTargetLanguageProperty.value.pipe(OC((e=>{var t;return null===(t=null==e?void 0:e.targetLanguage)||void 0===t?void 0:t.code}))),this.formattedSourceText=GC([this.document.sourceTextField.content,this.document.sourceTextField.textFormattingAnnotations.annotations]).pipe(OC((([e,t])=>0===t.length?e:void 0===e?void 0:lx({plainText:e,textFormattingAnnotations:t})))),this.formattedTargetText=GC([this.document.targetTextField.content,this.document.targetTextField.textFormattingAnnotations.annotations]).pipe(OC((([e,t])=>0===t.length?e:void 0===e?void 0:lx({plainText:e,textFormattingAnnotations:t})))),this.config.preventSameLanguages.enabled&&this.document.sourceTextField.calculatedSourceLanguageProperty.language.pipe(VC((e=>!!e))).subscribe((e=>{const t=this.document.targetTextField.requestedTargetLanguageProperty.getCurrent();t&&this.config.preventSameLanguages.enabled&&AP(e,t)&&this.updateRequestedTargetLanguage(this.config.preventSameLanguages.getAlternativeTargetLanguage(t))}))}applyFieldEvent(e){if(e.fieldName===sO.TRANSLATOR_TARGET_TEXT&&e.textChangeOperation){const e=[];e.push(...this.cancelTextUnitAlternativesFlows()),e.push(...this.cancelWordAlternativesFlows()),e.push(...this.cancelAutocompletionFlows()),this.publishChange(sO.TRANSLATOR_TARGET_TEXT,e)}this.document.applyItaEvent(e)}updateSourceText(e){const t=this.document.sourceTextField,n=t.maximumTextLengthProperty.getCurrentMax(),r=hx.removeTextFormattingAnnotations(t.textFormattingAnnotations),o=t.updateWithLimit(e,n);this.publishChanges([[t.name,r],[t.name,o]])}updateFormattedSourceText(e,t){const n=this.document.sourceTextField.maximumTextLengthProperty.getCurrentMax();this.updateFormattedText(this.document.sourceTextField,e,n)}updateTargetText(e){const t=this.document.targetTextField,n=hx.removeTextFormattingAnnotations(t.textFormattingAnnotations),r=t.update(e);this.publishChanges([[t.name,this.cancelTextUnitAlternativesFlows()],[t.name,this.cancelWordAlternativesFlows()],[t.name,this.cancelAutocompletionFlows()],[t.name,n],[t.name,r]])}updateFormattedTargetText(e,t){this.updateFormattedText(this.document.targetTextField,e,t)}updateRequestedTargetLanguage(e){var t;if(this.config.preventSameLanguages.enabled&&AP(e,null!==(t=this.document.sourceTextField.calculatedSourceLanguageProperty.getCurrent())&&void 0!==t?t:""))return;const n=this.document.targetTextField.requestedTargetLanguageProperty.updateLanguage(e);this.publishChange(sO.TRANSLATOR_TARGET_TEXT,n)}updateRequestedSourceLanguage(e){const t=this.document.sourceTextField.requestedSourceLanguageProperty.updateLanguage(e);this.publishChange(sO.TRANSLATOR_SOURCE_TEXT,t)}switchLanguages(e){var t,n,r,o,a,i,s,c,l;const{sourceTextField:u,targetTextField:d}=this.document,p=null!==(t=u.calculatedSourceLanguageProperty.getCurrent())&&void 0!==t?t:null===(r=null===(n=u.requestedSourceLanguageProperty.value.value)||void 0===n?void 0:n.sourceLanguage)||void 0===r?void 0:r.code,g=null!==(i=null===(a=null===(o=d.calculatedTargetLanguageProperty.value.value)||void 0===o?void 0:o.targetLanguage)||void 0===a?void 0:a.code)&&void 0!==i?i:null===(c=null===(s=d.requestedTargetLanguageProperty.value.value)||void 0===s?void 0:s.targetLanguage)||void 0===c?void 0:c.code,h=d.content.value;if(!p||!g)return;const f=g.split("-")[0],m=null!==(l=e[p])&&void 0!==l?l:p;this.publishChanges([[sO.TRANSLATOR_TARGET_TEXT,[...d.update("")]],[sO.TRANSLATOR_SOURCE_TEXT,[...u.update("")]],[sO.TRANSLATOR_TARGET_TEXT,[...d.requestedTargetLanguageProperty.updateLanguage(m)]],[sO.TRANSLATOR_SOURCE_TEXT,[...u.requestedSourceLanguageProperty.updateLanguage(f),...u.updateWithLimit(null!=h?h:"",u.maximumTextLengthProperty.getCurrentMax())]]]),u.calculatedSourceLanguageProperty.updateLanguage(f)}updateFormattedText(e,t,n){const r=hx.removeTextFormattingAnnotations(e.textFormattingAnnotations),o=dx(t),{plainText:a,textFormattingAnnotations:i}=function(e,t){return e.plainText.length<=t?e:{plainText:e.plainText.slice(0,t),textFormattingAnnotations:e.textFormattingAnnotations.filter((e=>e.operation.range.start<t)).map((e=>e.operation.range.end<=t?e:Object.assign(Object.assign({},e),{operation:Object.assign(Object.assign({},e.operation),{range:Object.assign(Object.assign({},e.operation.range),{end:t})})})))}}(o,n),s=e.update(a);e.textFormattingAnnotations.set(i),this.publishChanges([[e.name,r],[e.name,s],[e.name,i.map((e=>e.operation))]])}static removeTextFormattingAnnotations(e){var t;const n=null!==(t=e.annotations.value.map((e=>({$type:mO.$type,annotationId:e.operation.annotationId}))))&&void 0!==t?t:[];return e.reset(),n}cancelWordAlternativesFlows(){return this.document.targetTextField.requestWordAlternativesAnnotations.annotations.value.flatMap((e=>this.document.targetTextField.requestWordAlternativesAnnotations.removeAnnotation(e.operation.annotationId)))}cancelTextUnitAlternativesFlows(){return this.document.targetTextField.requestTextUnitAlternativesAnnotations.annotations.value.flatMap((e=>this.document.targetTextField.requestTextUnitAlternativesAnnotations.removeAnnotation(e.operation.annotationId)))}cancelAutocompletionFlows(){return this.document.targetTextField.requestAutocompletionAnnotations.annotations.value.flatMap((e=>this.document.targetTextField.requestAutocompletionAnnotations.removeAnnotation(e.operation.annotationId)))}requestWordAlternatives(e){const t=[];t.push(...this.cancelWordAlternativesFlows());const n=this.document.targetTextField.requestWordAlternativesAnnotations.add(e,e,{$type:bw.$type,flowId:{$type:yw.$type,value:crypto.randomUUID()}})[0];t.push(n),this.publishChange(sO.TRANSLATOR_TARGET_TEXT,t)}requestTextUnitAlternatives(e){const t=[];t.push(...this.cancelTextUnitAlternativesFlows());const n=this.document.targetTextField.requestTextUnitAlternativesAnnotations.add(e,e,{$type:Iw.$type,flowId:{$type:Sw.$type,value:crypto.randomUUID()}})[0];t.push(n),this.publishChange(sO.TRANSLATOR_TARGET_TEXT,t)}requestAutocompletion(e){const t=[];t.push(...this.cancelAutocompletionFlows());const n=this.document.targetTextField.requestAutocompletionAnnotations.add(e,e,{$type:qw.$type,flowId:{$type:Mw.$type,value:crypto.randomUUID()}})[0];t.push(n),this.publishChange(sO.TRANSLATOR_TARGET_TEXT,t)}cancelClarifyFlows(){return this.document.sourceTextField.requestClarifyAnnotations.annotations.value.flatMap((e=>this.document.sourceTextField.requestClarifyAnnotations.removeAnnotation(e.operation.annotationId)))}requestClarify(){var e;const t=[];t.push(...this.cancelClarifyFlows());const n=(null!==(e=this.document.sourceTextField.content.value)&&void 0!==e?e:"").length-1,r=this.document.sourceTextField.requestClarifyAnnotations.add(0,n,{$type:Xw.$type,flowId:{$type:CN.$type,value:crypto.randomUUID()}})[0];t.push(r),this.publishChange(sO.TRANSLATOR_SOURCE_TEXT,t)}selectClarifyAnswer(e,t){var n,r,o,a,i,s;const c=[],l=this.document.sourceTextField.clarifyQuestionAnnotations.annotations.value.find((t=>{var n,r,o;return(null===(o=null===(r=null===(n=t.specificPayload.questionWithAnswers)||void 0===n?void 0:n.question)||void 0===r?void 0:r.id)||void 0===o?void 0:o.value)===e}));if(!l)throw new Error(`Unknown question id "${e}" found!`);const u=null!==(r=null===(n=l.operation.range)||void 0===n?void 0:n.start)&&void 0!==r?r:0,d=null!==(a=null===(o=l.operation.range)||void 0===o?void 0:o.end)&&void 0!==a?a:0,p=this.document.sourceTextField.selectClarifyAnswerAnnotations.add(u,d,{$type:Zw.$type,flowId:l.specificPayload.flowId,questionId:null===(s=null===(i=l.specificPayload.questionWithAnswers)||void 0===i?void 0:i.question)||void 0===s?void 0:s.id,answer:{$type:"deepl.pb.interactive_text_api.translator.ClarifySelectedAnswer",answer:t}})[0];c.push(p),this.publishChange(sO.TRANSLATOR_SOURCE_TEXT,c)}selectWordAlternative(e,t,n){const r=[];r.push(...this.cancelTextUnitAlternativesFlows()),r.push(...this.cancelAutocompletionFlows());const o=this.document.targetTextField.selectWordAlternativeAnnotations.add(e,e,{$type:Ow.$type,flowId:{$type:yw.$type,value:t},selection:n});r.push(...o),this.publishChange(sO.TRANSLATOR_TARGET_TEXT,r)}selectTextUnitAlternative(e,t,n){const r=[];r.push(...this.cancelWordAlternativesFlows()),r.push(...this.cancelAutocompletionFlows());const o=this.document.targetTextField.selectTextUnitAlternativeAnnotations.add(e,e,{$type:ww.$type,flowId:{$type:Sw.$type,value:t},selection:n});r.push(...o),this.publishChange(sO.TRANSLATOR_TARGET_TEXT,r)}selectAutocompletion(e,t,n){const r=[];r.push(...this.cancelWordAlternativesFlows()),r.push(...this.cancelTextUnitAlternativesFlows());const o=this.document.targetTextField.selectAutocompletionAnnotations.add(e,e,{$type:Hw.$type,flowId:{$type:Mw.$type,value:t},selection:n});r.push(...o),this.publishChange(sO.TRANSLATOR_TARGET_TEXT,r)}selectAutomaticTextUnitAlternative(e,t){const n=[],r=this.document.targetTextField.selectAutomaticTextUnitAlternativeAnnotations.add(e,e,{$type:Aw.$type,selection:t});n.push(...r),this.publishChange(sO.TRANSLATOR_TARGET_TEXT,n)}updateGlossaryList(e){const t=this.document.targetTextField.glossaryListProperty.updateGlossaryList(e);this.publishChange(sO.TRANSLATOR_TARGET_TEXT,t)}updateSourceLanguageDetectionWeights(e){const t=this.document.sourceTextField.sourceLanguageDetectionWeightsProperty.updateSourceLanguageDetectionWeights(e);this.publishChange(sO.TRANSLATOR_SOURCE_TEXT,t)}updateFormalityMode(e){const t=this.document.targetTextField.formalityMode.update(e);this.publishChange(sO.TRANSLATOR_TARGET_TEXT,t)}updateLanguageModel(e){const t=this.document.targetTextField.languageModel.update(e);this.publishChange(sO.TRANSLATOR_TARGET_TEXT,t)}updateGlossaryId(e){const t=this.document.targetTextField.glossaryId.update(e);this.publishChange(sO.TRANSLATOR_TARGET_TEXT,t)}}const fx="ITA_REQUEST_TRANSLATION",mx="ITA_CLOSE_TRANSLATION_SESSION",_x="ITA_REQUEST_WRITE",vx="ITA_WRITE_UPDATE_SOURCE_TEXT",Tx="ITA_RESTORE_TRANSLATE_SESSION",yx="ITA_TRANSLATE_SOURCE_LANGUAGE",Ex="ITA_TRANSLATE_SOURCE_LANGUAGE_IS_AUTO_DETECTED",Sx="ITA_TARGET_TEXT_FIELD",Ix="ITA_WRITE_TARGET_TEXT_FIELD",bx="ITA_UPDATE_FORMALITY",Ax="ERROR",wx="ITA_DOCUMENT_STATE",Nx="ITA_WRITE_DOCUMENT_STATE",Ox="ITA_WRITE_UPDATE_REQUESTED_LANGUAGE",Rx="ITA_WRITE_UPDATE_STYLE_VARIANT",Lx="ITA_RESTORE_WRITE_SESSION",Cx="ITA_WRITE_SOURCE_LANGUAGE",Px="ITA_WRITE_SOURCE_LANGUAGE_IS_AUTO_DETECTED",xx="ITA_CLOSE_WRITE_SESSION",kx="ITA_TRANSLATE_SOURCE_LANGUAGE_IS_UNSUPPORTED",Dx="ITA_WRITE_SOURCE_LANGUAGE_IS_UNSUPPORTED",Ux="ITA_TRANSLATE_GENERIC_ERROR",Mx="ITA_WRITE_GENERIC_ERROR",Gx={REQUEST:{ITA_SELECT_ALTERNATIVE:"ITA_SELECT_WRITE_ALTERNATIVE"},REPLY:{ITA_BACKEND_IDLE:"ITA_BACKEND_WRITE_IDLE",ITA_TARGET_TEXT_FIELD_PROVIDED_AUTOMATIC_TEXT_UNIT_ALTERNATIVES_ANNOTATIONS:"ITA_TRANSLATE_TARGET_TEXT_FIELD_PROVIDED_AUTOMATIC_TEXT_UNIT_ALTERNATIVES_ANNOTATIONS"}},$x={REQUEST:{ITA_UPDATE_TARGET_LANGUAGE:"ITA_UPDATE_TARGET_LANGUAGE",ITA_SELECT_ALTERNATIVE:"ITA_SELECT_TRANSLATE_ALTERNATIVE",ITA_UPDATE_SOURCE_LANGUAGE:"ITA_UPDATE_SOURCE_LANGUAGE"},REPLY:{ITA_BACKEND_IDLE:"ITA_BACKEND_TRANSLATE_IDLE",ITA_TARGET_TEXT_FIELD_PROVIDED_AUTOMATIC_TEXT_UNIT_ALTERNATIVES_ANNOTATIONS:"ITA_WRITE_TARGET_TEXT_FIELD_PROVIDED_AUTOMATIC_TEXT_UNIT_ALTERNATIVES_ANNOTATIONS",ITA_TARGET_LANGUAGE:"ITA_TARGET_LANGUAGE"}},Vx=e=>{KO(e),JO(e)};function Fx(e,t){e&&(t?e.updateGlossaryId({$type:Gw.$type,id:t}):e.updateGlossaryId())}function jx(){return r(this,void 0,void 0,(function*(){const e=yield qE(["activeTermbaseId","session","isGlossaryEnabled","hasTermbaseService",Iv.auth.isLoggedIn]);let t;if(e.isGlossaryEnabled&&Rv(e)&&e.activeTermbaseId){const[n]=yield ab();t=n.find((t=>t.id===e.activeTermbaseId))}return{glossaryId:null==t?void 0:t.id,isAutoTermbase:null==t?void 0:t.isAutoTermbase,isShared:null==t?void 0:t.shared}}))}const Wx={};async function qx({sourceText:e,targetLanguage:t,port:n,itaDocumentState:r,domainName:o,translationTrigger:a=""}){delete Wx[n.name];const i=await FS(),s=await pS(),c=Ov(s,an.TRANSLATOR)?"https://ita-pro.www.deepl.com/v1":"https://ita-free.www.deepl.com/v1",l=new MP(new URL(c),i),u=new hx,d=l.createSession(u);try{await d.connect(r),CE({itaSessionType:ur,itaSessionEventType:r?gr:pr})}catch(r){return Pv(r,Y_),n.postMessage({type:Ux,payload:{error:r}}),iy({errorCode:r.name,errorMessage:r.message,domainName:o,targetLang:t,trigger:a,characterCount:e?.length}),void CE({itaSessionType:ur,itaSessionEventType:hr,itaErrorType:mr,itaErrorMessage:r.message})}BO(n.name,{session:d,updateAccessToken:e=>{l.updateAccessToken(e)},domainName:o,translationTrigger:a}),nv()&&console.log("ITA Translate session ID:",d.startSessionResponse?.sessionId?.value);const p=d.client,g=await jx();return await Fx(p,g?.glossaryId),BO(n.name,{glossaryProperties:g}),t&&p.updateRequestedTargetLanguage(K_(t)),e&&p.updateSourceText(e),function(e,t){const n=e.client,r=[];e.connection.onclose((()=>{for(const e of r)e.unsubscribe()})),r.push(e.error.subscribe((e=>{!function(e,t){if(Wx[t.name]=e,e instanceof DP){nv()&&console.error(`ITA session error, Type ${typeof e},\n        Code: ${e.info?.statusCode}; Detail Code: ${e.info?.detailCode?.value}; Fallback Codes: ${e.info?.fallbackDetailCodes.map((e=>e.value)).join(", ")}`);const n=HO(t.name),r=e?.info?.detailCode?.value;qA(r)&&(iy({errorCode:e.name,errorMessage:r||e.message,domainName:n.domainName,targetLang:n.targetLanguage,websiteLanguage:n.translateSourceLanguage,trigger:n.translationTrigger,characterCount:n.sourceText?.length}),t.postMessage({type:Ax,payload:{error:BA(r)}}),Pv(e,Y_)),CE({itaSessionType:ur,itaSessionEventType:hr,itaErrorType:_r,itaErrorMessage:r||e.message})}}(e,t)}))),r.push(e.messages.subscribe((async e=>{nv()&&console.log("ITA_TRANSLATE_MESSAGE",e),100===e.metaInfoMessage?.translatorTaskMetaInfo?.progressInPercent&&(Kx(t),t.postMessage({type:$x.REPLY.ITA_BACKEND_IDLE}))}))),r.push(n.document.targetTextField.content.subscribe((e=>{zx(n,t),t.postMessage({type:Sx,payload:{targetText:e}}),BO(t.name,{targetText:e})}))),r.push(n.document.sourceTextField.content.subscribe((e=>{BO(t.name,{sourceText:e})}))),r.push(n.document.targetTextField.requestedTargetLanguageProperty.value.subscribe((e=>{zx(n,t),BO(t.name,{targetLanguage:e?.targetLanguage?.code}),e?.targetLanguage?.code&&t.postMessage({type:$x.REPLY.ITA_TARGET_LANGUAGE,payload:{language:e?.targetLanguage?.code}})}))),r.push(n.document.sourceTextField.calculatedSourceLanguageProperty.language.subscribe((e=>{zx(n,t),BO(t.name,{translateSourceLanguage:e}),t.postMessage({type:yx,payload:{language:e}})}))),r.push(n.document.sourceTextField.calculatedSourceLanguageProperty.isAutoDetected.subscribe((e=>{zx(n,t),BO(t.name,{isTranslateSourceLanguageAutoDetected:e}),t.postMessage({type:Ex,payload:{isAutoDetected:e}})}))),r.push(n.document.sourceTextField.unsupportedLanguageProperty.unsupported.subscribe((e=>{zx(n,t),BO(t.name,{isTranslateSourceLanguageUnsupported:e}),t.postMessage({type:kx,payload:{isUnsupported:e}})}))),r.push(n.document.targetTextField.providedAutomaticTextUnitAlternativesAnnotations.annotations.subscribe((e=>{const n=e.flatMap((e=>e.specificPayload.alternatives.map((t=>({text:t.text,flowId:"",index:e.operation.range?.start??0})))));t.postMessage({type:$x.REPLY.ITA_TARGET_TEXT_FIELD_PROVIDED_AUTOMATIC_TEXT_UNIT_ALTERNATIVES_ANNOTATIONS,payload:{providedAlternatives:n}})}))),r.push(n.document.targetTextField.glossaryReplacementAnnotations.annotations.subscribe((e=>{BO(t.name,{glossaryAnnotationsApplied:e.length>0})})))}(d,n),d}async function Bx(e){if(e.name in Wx){const t=Wx[e.name];nv()&&console.error("Detected error for ITA translator session so will attempt to restore",t);const n={...HO(e.name)};delete Wx[e.name];try{const t=await async function(e,t){nv()&&console.log(`Attempting to recreate an ITA Translate session for port ${t.name}`);return await(e.session?.connection.stop()),qx({...e,itaDocumentState:e.session?.client.document.serialize(),port:t,sourceText:void 0,domainName:e.domainName??"",translationTrigger:e.translationTrigger??""})}(n,e);return t?.client??null}catch(e){return console.error(`Unable to recreate ITA session, Error: ${e}`),null}}const t=await FS();return HO(e.name).updateAccessToken?.(t),HO(e.name).session?.client??null}async function Hx({port:e,language:t}){const n=await Bx(e);n&&(n.updateRequestedTargetLanguage(K_(t)),BO(e.name,{targetLanguage:t}),CE({itaSessionType:ur,itaSessionEventType:fr,itaUserInteractionType:vr}))}async function Jx({port:e,language:t}){const n=await Bx(e);n&&(n.updateRequestedSourceLanguage(K_(t)),BO(e.name,{sourceLanguage:t}),CE({itaSessionType:ur,itaSessionEventType:fr,itaUserInteractionType:Tr}))}async function Yx(e,t){const n=await Bx(e);if(!n)return;const r={value:t,$type:vN.$type};n.updateFormalityMode(r),CE({itaSessionType:ur,itaSessionEventType:fr,itaUserInteractionType:yr})}function zx(e,t){t.postMessage({type:wx,payload:{itaDocumentState:e.document.serialize()}})}async function Xx(e){const t=HO(e.name).session;await(t?.connection.stop()),delete Wx[e.name],JO(e),nv()&&console.log(`Disposed translate session for port ${e.name}`)}const Kx=async e=>{const t=HO(e.name);t.translateSourceLanguage&&await Promise.allSettled([oy({installationId:(await qE(["installationId"])).installationId,trigger:t.translationTrigger,websiteLanguage:t.translateSourceLanguage,targetLanguage:t.targetLanguage,characterCount:t.sourceText?.length,domainName:t.domainName,isIta:!0,glossaryTrackingInfo:{isGlossaryEnabled:!!t.glossaryProperties?.glossaryId,isGlossaryShared:!!t.glossaryProperties?.isShared,isAutoTermbase:!!t.glossaryProperties?.isAutoTermbase,didGlossaryChangeTranslation:t.glossaryAnnotationsApplied}}),Mb(t.translateSourceLanguage,t.targetLanguage)])};function Qx(e,t){const n=HO(e.name).session?.client;n?.selectAutomaticTextUnitAlternative(t.index,t.text)}const Zx=1500,ek=e=>!!e;class tk extends FP{constructor(){super(cO.WRITE_MAXIMUM_TEXT_LENGTH,jN.$type),this.max=this.value.pipe(VC(ek),OC((e=>e.max)))}getCurrentMax(){var e,t;return null!==(t=null===(e=this.value.value)||void 0===e?void 0:e.max)&&void 0!==t?t:Zx}}class nk extends FP{constructor(){super(cO.WRITE_UNSUPPORTED_LANGUAGE,BN.$type),this.unsupported=this.value.pipe(OC((e=>!!e)))}}class rk extends FP{constructor(){super(cO.WRITE_LANGUAGES,MN.$type),this.languageCodes=this.value.pipe(OC((e=>{var t;return null!==(t=null==e?void 0:e.languages.map((e=>e.code)))&&void 0!==t?t:[]})))}}class ok extends FP{constructor(){super(cO.WRITE_GLOSSARY_LANGUAGES,GN.$type),this.languageCodes=this.value.pipe(OC((e=>{var t;return null!==(t=null==e?void 0:e.languages.map((e=>e.code)))&&void 0!==t?t:[]})))}}class ak extends FP{constructor(){super(cO.WRITE_CALCULATED_LANGUAGE,VN.$type),this.language=this.value.pipe(OC((e=>{var t;return null===(t=null==e?void 0:e.language)||void 0===t?void 0:t.code}))),this.isAutoDetected=this.value.pipe(OC((e=>(null==e?void 0:e.origin)===$w.LANGUAGE_DETECTION)))}updateLanguage(e){return super.set({$type:VN.$type,language:{$type:KN.$type,code:e},origin:$w.REQUESTED_LANGUAGE})}}class ik extends NP{constructor(){super(...arguments),this.sourceTextUnitAnnotations=this.registerAnnotation(new VP(Uw.$type,{requiresTransformation:!0})),this.diffUnitAnnotations=this.registerAnnotation(new VP(kN.$type,{requiresTransformation:!0})),this.languages=this.registerProperty(new rk),this.glossaryLanguages=this.registerProperty(new ok),this.calculatedLanguage=this.registerProperty(new ak),this.maximumTextLengthProperty=this.registerProperty(new tk),this.unsupportedLanguageProperty=this.registerProperty(new nk)}}class sk extends FP{constructor(){super(cO.WRITE_REQUESTED_LANGUAGE,$N.$type)}updateLanguage(e){if("autodetect"===e){return super.set(void 0)}return super.set({$type:$N.$type,language:{$type:KN.$type,code:e}})}}class ck extends FP{constructor(){super(cO.WRITE_STYLE_VARIANTS,WN.$type),this.styleVariants=this.value.pipe(OC((e=>null==e?void 0:e.styleVariants.map((e=>e.value)))))}}class lk extends FP{constructor(){super(cO.WRITE_STYLE_VARIANT,qN.$type),this.styleVariant=this.value.pipe(OC((e=>null==e?void 0:e.styleVariant)))}updateStyleVariant(e){return super.set({$type:qN.$type,styleVariant:e?{$type:eO.$type,value:e}:void 0})}}class uk extends FP{constructor(){super(cO.WRITE_GLOSSARY_SUPPORT,zN.$type),this.supported=this.value.pipe(OC((e=>!!e)))}}class dk extends FP{constructor(){super(cO.WRITE_GLOSSARY_LIST,YN.$type),this.entries=this.value.pipe(OC((e=>{var t;return null!==(t=null==e?void 0:e.glossaryEntries)&&void 0!==t?t:[]})))}updateNeverEditList(e){return super.set(void 0===e?void 0:{$type:YN.$type,glossaryEntries:e})}}class pk extends FP{constructor(){super(cO.WRITE_GLOSSARY_ID,FN.$type)}update(e){return super.set(void 0===e?void 0:{$type:FN.$type,glossaryId:e})}}class gk extends wP{constructor(){super(...arguments),this.requestedLanguage=this.registerProperty(new sk),this.targetTextUnitAnnotations=this.registerAnnotation(new VP(Uw.$type,{requiresTransformation:!0})),this.diffUnitAnnotations=this.registerAnnotation(new VP(kN.$type,{requiresTransformation:!0})),this.styleVariantsProperty=this.registerProperty(new ck),this.styleVariantProperty=this.registerProperty(new lk),this.maximumTextLengthProperty=this.registerProperty(new tk),this.neverEditSupport=this.registerProperty(new uk),this.neverEditListProperty=this.registerProperty(new dk),this.glossaryId=this.registerProperty(new pk),this.requestWordAlternativesAnnotations=this.registerAnnotation(new VP(bw.$type)),this.providedWordAlternativesAnnotations=this.registerAnnotation(new VP(Ew.$type,{requiresTransformation:!0})),this.selectWordAlternativeAnnotations=this.registerAnnotation(new VP(Ow.$type)),this.requestTextUnitAlternativesAnnotations=this.registerAnnotation(new VP(Iw.$type)),this.providedTextUnitAlternativesAnnotations=this.registerAnnotation(new VP(DN.$type,{requiresTransformation:!0})),this.selectTextUnitAlternativeAnnotations=this.registerAnnotation(new VP(ww.$type)),this.providedAutomaticTextUnitAlternativesAnnotations=this.registerAnnotation(new VP(UN.$type,{requiresTransformation:!0})),this.selectAutomaticTextUnitAlternativeAnnotations=this.registerAnnotation(new VP(Aw.$type)),this.requestChangeStyleAlternativesAnnotations=this.registerAnnotation(new VP(nO.$type)),this.providedChangeStyleAlternativesAnnotations=this.registerAnnotation(new VP(oO.$type,{requiresTransformation:!0})),this.selectChangeStyleAlternativeAnnotations=this.registerAnnotation(new VP(aO.$type))}}class hk extends rP{constructor(){super(...arguments),this.sourceTextField=this.registerField(new ik(sO.WRITE_SOURCE_TEXT)),this.targetTextField=this.registerField(new gk(sO.WRITE_TARGET_TEXT)),this.textUnitAnnotations=GC([this.sourceTextField.sourceTextUnitAnnotations.annotations,this.targetTextField.targetTextUnitAnnotations.annotations]).pipe(OC((e=>{const t=e[0],n=e[1];return t.sort(((e,t)=>e.operation.range.start-t.operation.range.start)).map((e=>{var t,r;const o=e.operation.range,a=null!==(r=null===(t=n.find((t=>{var n,r;return(null===(n=e.specificPayload.textUnitId)||void 0===n?void 0:n.value)===(null===(r=t.specificPayload.textUnitId)||void 0===r?void 0:r.value)})))||void 0===t?void 0:t.operation.range)&&void 0!==r?r:xw.fromJSON({});return{sourceStart:o.start,sourceEnd:o.end,sourceLength:o.end-o.start,targetStart:a.start,targetEnd:a.end,targetLength:a.end-a.start}}))})))}}class fk extends OP{constructor(){super("Write",lO.WRITE,new hk)}applyFieldEvent(e){if(e.fieldName===sO.WRITE_TARGET_TEXT&&e.textChangeOperation){const e=[];e.push(...this.cancelTextUnitAlternativesFlows()),e.push(...this.cancelWordAlternativesFlows()),this.publishChange(sO.WRITE_TARGET_TEXT,e)}this.document.applyItaEvent(e)}updateSourceText(e){const t=this.document.sourceTextField.maximumTextLengthProperty.getCurrentMax(),n=this.document.sourceTextField.updateWithLimit(e,t);this.publishChange(sO.WRITE_SOURCE_TEXT,n)}updateTargetText(e){const t=[];t.push(...this.cancelTextUnitAlternativesFlows()),t.push(...this.cancelWordAlternativesFlows()),t.push(...this.document.targetTextField.update(e)),this.publishChange(sO.WRITE_TARGET_TEXT,t)}updateRequestedLanguage(e){const t=this.document.targetTextField.requestedLanguage.updateLanguage(e);this.publishChange(sO.WRITE_TARGET_TEXT,t)}updateStyleVariant(e){const t=this.document.targetTextField.styleVariantProperty.updateStyleVariant(e);this.publishChange(sO.WRITE_TARGET_TEXT,t)}updateNeverEditList(e){const t=this.document.targetTextField.neverEditListProperty.updateNeverEditList(e);this.publishChange(sO.WRITE_TARGET_TEXT,t)}cancelWordAlternativesFlows(){return this.document.targetTextField.requestWordAlternativesAnnotations.annotations.value.flatMap((e=>this.document.targetTextField.requestWordAlternativesAnnotations.removeAnnotation(e.operation.annotationId)))}updateNeverEditGlossaryId(e){const t=this.document.targetTextField.glossaryId.update(e);this.publishChange(sO.WRITE_TARGET_TEXT,t)}cancelTextUnitAlternativesFlows(){return this.document.targetTextField.requestTextUnitAlternativesAnnotations.annotations.value.flatMap((e=>this.document.targetTextField.requestTextUnitAlternativesAnnotations.removeAnnotation(e.operation.annotationId)))}cancelChangeStyleAlternativesFlows(){return this.document.targetTextField.requestChangeStyleAlternativesAnnotations.annotations.value.flatMap((e=>this.document.targetTextField.requestChangeStyleAlternativesAnnotations.removeAnnotation(e.operation.annotationId)))}requestWordAlternatives(e){const t=[];t.push(...this.cancelWordAlternativesFlows());const n=crypto.randomUUID(),r=this.document.targetTextField.requestWordAlternativesAnnotations.add(e,e,{$type:bw.$type,flowId:{$type:yw.$type,value:n}})[0];return t.push(r),this.publishChange(sO.WRITE_TARGET_TEXT,t),n}requestTextUnitAlternatives(e){const t=[];t.push(...this.cancelTextUnitAlternativesFlows());const n=crypto.randomUUID(),r=this.document.targetTextField.requestTextUnitAlternativesAnnotations.add(e,e,{$type:Iw.$type,flowId:{$type:Sw.$type,value:n}})[0];return t.push(r),this.publishChange(sO.WRITE_TARGET_TEXT,t),n}selectWordAlternative(e,t,n){const r=[];r.push(...this.cancelTextUnitAlternativesFlows());const o=this.document.targetTextField.selectWordAlternativeAnnotations.add(e,e,{$type:Ow.$type,flowId:{$type:yw.$type,value:t},selection:n});r.push(...o),this.publishChange(sO.WRITE_TARGET_TEXT,r)}selectTextUnitAlternative(e,t,n){const r=[];r.push(...this.cancelWordAlternativesFlows());const o=this.document.targetTextField.selectTextUnitAlternativeAnnotations.add(e,e,{$type:ww.$type,flowId:{$type:Sw.$type,value:t},selection:n});r.push(...o),this.publishChange(sO.WRITE_TARGET_TEXT,r)}selectAutomaticTextUnitAlternative(e,t){const n=[],r=this.document.targetTextField.selectAutomaticTextUnitAlternativeAnnotations.add(e,e,{$type:Aw.$type,selection:t});n.push(...r),this.publishChange(sO.WRITE_TARGET_TEXT,n)}requestShortenAlternatives(e,t){const n=[];n.push(...this.cancelChangeStyleAlternativesFlows());const r=crypto.randomUUID(),o=this.document.targetTextField.requestChangeStyleAlternativesAnnotations.add(e,e+t,nO.create({flowId:tO.create({value:r}),styleVariant:eO.create({value:"shorten"})}))[0];return n.push(o),this.publishChange(sO.WRITE_TARGET_TEXT,n),r}selectShortenAlternative(e,t,n,r){const o=[];o.push(...this.cancelChangeStyleAlternativesFlows());const a=this.document.targetTextField.selectChangeStyleAlternativeAnnotations.add(e,e+t,aO.create({flowId:tO.create({value:n}),selection:r}));o.push(...a),this.publishChange(sO.WRITE_TARGET_TEXT,o)}}const mk={};async function _k({sourceText:e,requestedLanguage:t,port:n,itaDocumentState:r,domainName:o,writeTrigger:a=""}){delete mk[n.name];const i=await FS(),s=await pS(),c=Ov(s,an.WRITE)?"https://ita-pro.www.deepl.com/v1":"https://ita-free.www.deepl.com/v1",l=new MP(new URL(c),i),u=new fk,d=l.createSession(u);try{await d.connect(r),CE({itaSessionType:dr,itaSessionEventType:r?gr:pr})}catch(t){return n.postMessage({type:Mx,payload:{error:t}}),Pv(t,Y_),nE(_n,{sourceLength:e?.length,error:t.name,trigger:a,domainName:o}),void CE({itaSessionType:dr,itaSessionEventType:hr,itaErrorType:mr,itaErrorMessage:t.message})}zO(n.name,{session:d,updateAccessToken:e=>{l.updateAccessToken(e)},writeTrigger:a,domainName:o}),nv()&&console.log("ITA Write session ID:",d.startSessionResponse?.sessionId?.value);const p=d.client;return t&&p.updateRequestedLanguage(K_(t)),e&&p.updateSourceText(e),function(e,t){const n=e.client,r=[];e.connection.onclose((()=>{for(const e of r)e.unsubscribe()})),r.push(n.document.targetTextField.content.subscribe((async e=>{Ek(n,t),t.postMessage({type:Ix,payload:{targetText:e}}),zO(t.name,{targetText:e})}))),r.push(e.messages.subscribe((async e=>{nv()&&console.log("ITA_WRITE_MESSAGE",e),100===e.metaInfoMessage?.translatorTaskMetaInfo?.progressInPercent&&(Ak(t),t.postMessage({type:Gx.REPLY.ITA_BACKEND_IDLE}))}))),r.push(e.error.subscribe((e=>{!function(e,t){if(mk[t.name]=e,e instanceof DP){nv()&&console.log(`ITA Write session error, Type ${typeof e},\n        Code: ${e.info?.statusCode}; Detail Code: ${e.info?.detailCode?.value}; Fallback Codes: ${e.info?.fallbackDetailCodes.map((e=>e.value)).join(", ")}`);const n=XO(t.name),r=e?.info?.detailCode?.value;qA(r)&&(nE(_n,{lang:n.writeSourceLanguage,sourceLength:n.sourceText?.length,targetLength:n.targetText?.length,style:n.writeStyle,trigger:n.writeTrigger,domainName:n.domainName,error:r||e.message}),t.postMessage({type:Ax,payload:{error:BA(r,!0)}}),Pv(e,Y_)),CE({itaSessionType:dr,itaSessionEventType:hr,itaErrorType:_r,itaErrorMessage:r||e.message})}}(e,t)}))),r.push(n.document.sourceTextField.content.subscribe((e=>{zO(t.name,{sourceText:e})}))),r.push(n.document.sourceTextField.calculatedLanguage.language.subscribe((e=>{["en","pt"].includes(e?.toLowerCase())?Tk({port:t,language:e="en"===e?"en-GB":"pt-PT"}):(Ek(n,t),zO(t.name,{writeSourceLanguage:e}),t.postMessage({type:Cx,payload:{language:e}}))}))),r.push(n.document.sourceTextField.calculatedLanguage.isAutoDetected.subscribe((e=>{Ek(n,t),zO(t.name,{isWriteSourceLanguageAutoDetected:e}),t.postMessage({type:Px,payload:{isAutoDetected:e}})}))),r.push(n.document.sourceTextField.unsupportedLanguageProperty.unsupported.subscribe((e=>{Ek(n,t),zO(t.name,{isWriteSourceLanguageUnsupported:e}),t.postMessage({type:Dx,payload:{isUnsupported:e}})}))),r.push(n.document.targetTextField.providedAutomaticTextUnitAlternativesAnnotations.annotations.subscribe((e=>{const n=e.flatMap((e=>e.specificPayload.alternatives.map((t=>({text:t.text,flowId:"",index:e.operation.range?.start??0})))));t.postMessage({type:Gx.REPLY.ITA_TARGET_TEXT_FIELD_PROVIDED_AUTOMATIC_TEXT_UNIT_ALTERNATIVES_ANNOTATIONS,payload:{providedAlternatives:n}})}))),r.push(n.document.sourceTextField.languages.languageCodes.subscribe((e=>{nv()&&console.log("ITA_WRITE_SOURCE_LANGUAGE_CODES",e)})))}(d,n),d}async function vk(e){if(e.name in mk){nv()&&console.error("Detected error for Write session so will attempt to restore",mk[e.name]);const t={...XO(e.name)};delete mk[e.name];try{const n=await async function(e,t){nv()&&console.log(`Attempting to recreate an ITA Write session for port ${t.name}`);return await(e.session?.connection.stop()),_k({...e,itaDocumentState:e.session?.client.document.serialize(),port:t,sourceText:void 0,domainName:e.domainName??"",writeTrigger:e.writeTrigger??""})}(t,e);return n?.client??null}catch(e){return console.error(`Unable to recreate ITA session, Error: ${e}`),null}}const t=await FS();return XO(e.name).updateAccessToken?.(t),XO(e.name).session?.client??null}async function Tk({port:e,language:t}){const n=await vk(e);n?.updateRequestedLanguage(K_(t)),zO(e.name,{targetLanguage:t}),CE({itaSessionType:dr,itaSessionEventType:fr,itaUserInteractionType:Tr})}async function yk(e,t){const n=await vk(e);n?.updateStyleVariant(t),zO(e.name,{writeStyle:t}),CE({itaSessionType:dr,itaSessionEventType:fr,itaUserInteractionType:Er})}function Ek(e,t){t.postMessage({type:Nx,payload:{itaDocumentState:e.document.serialize()}})}async function Sk(e,t){const n=await vk(e);n?.updateSourceText(t)}async function Ik(e){const t=XO(e.name).session;await(t?.connection.stop()),delete mk[e.name],KO(e),nv()&&console.log(`Disposed write session for port ${e.name}`)}function bk(e,t){const n=XO(e.name).session?.client;n?.selectAutomaticTextUnitAlternative(t.index,t.text),CE({itaSessionType:dr,itaSessionEventType:fr,itaUserInteractionType:Sr})}const Ak=async e=>{const t=XO(e.name);t.writeSourceLanguage&&nE(un,{lang:t.writeSourceLanguage,sourceLength:t.sourceText?.length,targetLength:t.targetText?.length,style:t.writeStyle,trigger:t.writeTrigger,domainName:t.domainName})},wk=()=>r(void 0,void 0,void 0,(function*(){const e=yield wb();if(2===ES(e,TS)){try{yield Ok()}catch(e){iv(e)}Rk()}})),Nk=()=>r(void 0,void 0,void 0,(function*(){if(yield KE())return!1;const e=yield chrome.storage.local.get([Iv.auth.lastLogoutTrigger]);return!(null==e?void 0:e[Iv.auth.lastLogoutTrigger])||e[Iv.auth.lastLogoutTrigger]!==Wt})),Ok=()=>r(void 0,void 0,void 0,(function*(){if(!(yield Nk()))return;const e=yield chrome.cookies.getAll({domain:"deepl.com",name:"dl_session"});if(0===e.length)return;yield Pk(e[0].value)})),Rk=()=>{const e=((e=500,t)=>{let n;return o=>{n&&clearTimeout(n),n=setTimeout((()=>r(void 0,void 0,void 0,(function*(){yield t(o),n=void 0}))),e)}})(5e3,Lk);chrome.cookies.onChanged.addListener((t=>{if("dl_session"===t.cookie.name){if(t.removed&&"expired_overwrite"===t.cause)return void Ck(t.cookie.value);if(!t.removed&&"explicit"===t.cause)return void e(t.cookie.value)}}))},Lk=e=>r(void 0,void 0,void 0,(function*(){iv("Website cookie was added",e),(yield Nk())&&(yield Pk(e))})),Ck=e=>r(void 0,void 0,void 0,(function*(){iv("Website cookie was removed",e);const t=(yield chrome.storage.local.get("delegatedLoginMapping")).delegatedLoginMapping;if(yield kk(t,e)){yield Promise.all([tS(),YE(),zE()]);try{aE(),Yy({trigger:qt,reason:"autologout"})}catch(e){console.error(e)}yield MS(!0)}})),Pk=e=>r(void 0,void 0,void 0,(function*(){try{const t="https://w.deepl.com/oidc/cookie_bearer_exchange?client=chromeExtension",n=yield fetch(t,{method:"GET",credentials:"include"}),r=yield n.json();return yield GS(r,{trigger:Ht,reason:"autologin"}),yield chrome.storage.local.set({delegatedLoginMapping:xk(r.id_token,e)}),!0}catch(e){if(iv(e),e instanceof Error)try{Pv(e,Y_),ay({errorCode:e.name,errorMessage:e.message,errorCategory:lr})}catch(e){iv(e)}}return!1})),xk=(e,t)=>({delegatedSessionId:h(e).sid,originatingSessionId:t}),kk=(e,t)=>r(void 0,void 0,void 0,(function*(){if(!e||e.originatingSessionId!==t)return iv("No delegated login mapping found or session ID mismatch"),!1;const n=(yield XE()).id_token;return!(!n||h(n).sid!==e.delegatedSessionId)||(iv("No current id token found, or the current ID token does not match the delegated session ID"),!1)})),Dk={syncExperiments:"sync_experiments",syncClientState:"sync_client_state",trackClientStateWeb:"track_client_state_web"};function Uk(e){let t;try{t=new URL(e)}catch(e){return!1}return"http:"===t.protocol||"https:"===t.protocol}const Mk={developer_tools:"DEVELOPER_TOOLS",settings_page:"SETTINGS_PAGE",settings_writing:"SETTINGS_WRITING",settings_reading:"SETTINGS_READING",settings_customizations:"SETTINGS_CUSTOMIZATIONS",settings_glossary:"SETTINGS_GLOSSARY",onboarding:"ONBOARDING",onboarding_after_successful_login:"ONBOARDING_AFTER_SUCCESSFUL_LOGIN",firefox_first_run:"FIREFOX_FIRST_RUN",privacy_policy:"PRIVACY_POLICY",create_account:"CREATE_ACCOUNT"},Gk="dev-page.html",$k="settings.html",Vk="settings.html#translator",Fk="settings.html#write",jk="settings.html#customizations",Wk="settings.html#glossary",qk="onboarding.html",Bk="onboarding-firefox.html",Hk="onboarding.html#successful_login",Jk="firefox-first-run.html",Yk="privacy-policy.html",zk="create-account.html";function Xk({payload:e}){const{destination:t,openInSameTab:n}=e;if(void 0===t)return;let r="";switch(t){case Mk.developer_tools:r=Kk(Gk);break;case Mk.settings_page:r=Kk($k);break;case Mk.settings_writing:r=Kk(Fk);break;case Mk.settings_reading:r=Kk(Vk);break;case Mk.settings_customizations:r=Kk(jk);break;case Mk.settings_glossary:r=Kk(Wk);break;case Mk.onboarding:r=xr()?Kk(Bk):Kk(qk);break;case Mk.onboarding_after_successful_login:r=Kk(Hk);break;case Mk.firefox_first_run:r=Kk(Jk);break;case Mk.privacy_policy:r=Kk(Yk);break;case Mk.create_account:r=Kk(zk)}r&&(n?chrome.tabs.query({active:!0,currentWindow:!0},(function(e){const t=e[0];chrome.tabs.update(t.id,{url:r})})):chrome.tabs.create({url:r,active:!0}))}function Kk(e){const t=new URL(chrome.runtime.getURL(e));return t.searchParams.append("dl_brex_internal_page","true"),t.toString()}const Qk=e=>eD(e,nD),Zk=e=>eD(e,rD),eD=(e,t)=>r(void 0,void 0,void 0,(function*(){if(0===e.sourceTexts.length)throw new Error("No text to translate");yield fS(),yield NI(e);const n=yield tD(e);return{translations:yield t(n),glossaryTrackingInfo:{isGlossaryEnabled:!!n.glossary_id,didGlossaryChangeTranslation:!1,isGlossaryShared:!1}}})),tD=e=>r(void 0,void 0,void 0,(function*(){const{activeTermbaseId:t,isLoggedIn:n,isGlossaryEnabled:r,hasTermbaseService:o,browserInstanceId:a}=yield qE([Iv.glossary.activeTermbaseId,Iv.auth.isLoggedIn,Iv.glossary.isGlossaryEnabled,Iv.glossary.hasTermbaseService,Iv.browserInstanceId]);let i;Rv({isLoggedIn:n,hasTermbaseService:o})&&t&&r&&(i=t);const s=Cr();return{text:e.sourceTexts,target_lang:K_(e.targetLangCode),glossary_id:null!=i?i:void 0,source_lang:e.sourceLang,app_information:{instance_id:null!=a?a:"unknown",os:s.browser,os_version:s.browserVersion,app_build:"1.42.0",app_version:"1.42.0"}}})),nD=e=>r(void 0,void 0,void 0,(function*(){if(e.text.length>100)throw new Error("Can't process more than 100 texts in a non batched manner");return yield oD(e)})),rD=e=>r(void 0,void 0,void 0,(function*(){const t=e.text,n=LI(t,24576,(e=>JSON.stringify(e)),100).map((t=>Object.assign(Object.assign({},e),{text:t})));if(1===n.length)return yield oD(n[0]);return(yield Promise.all(n.map(oD))).flat()})),oD=e=>r(void 0,void 0,void 0,(function*(){const t=yield FS(),{response:n}=yield US("https://oneshot-pro.deepl.com/v1/translate",{method:"POST",body:JSON.stringify(e),access_token:t,headers:{"Content-Type":"application/json"}}),r=yield n.json();if(200===n.status)return r.translations;const o=r;throw iv(o),new Error(JSON.stringify(o.errors))})),aD=e=>{if(e.length>100)return Zk;return CI(e.join(""))>6144?Zk:Qk},iD=e=>r(void 0,void 0,void 0,(function*(){const t=yield wb();if(!(2===ES(t,vS)))return yield async function(e){await HE();const t=await qE(["selectedTargetLanguage","session","installationId"]),n=new Date;let r=[],o=null;try{const n={sourceLang:"auto",targetLangCode:t.selectedTargetLanguage,sessionId:t.session.id,id:d(),isHtml:!0,sourceTexts:e.payload.texts},a=CI(e.payload.texts.join(""))>6144?kI:xI,i=await a(n);r=i.processedText,o=i.glossaryTrackingInfo}catch(n){try{iy({errorCode:n.name,errorMessage:n.message,domainName:e.payload.domainName,targetLang:t.selectedTargetLanguage,websiteLanguage:e.payload.sourceLang,trigger:e.payload.trigger,characterCount:e.payload.texts.reduce(((e,t)=>e+t.length),0)})}catch(e){console.log(e)}throw n}Mb(e?.payload?.sourceLang,t?.selectedTargetLanguage);const a={isFirstTime:e.payload.isFirstTime,processingTimeInMs:(new Date).getTime()-n.getTime()};try{oy({installationId:t.installationId,trigger:e.payload.trigger,websiteLanguage:e.payload.sourceLang,targetLanguage:t.selectedTargetLanguage,characterCount:e.payload.texts.reduce(((e,t)=>e+t.length),0),translationPerformance:a,domainName:e.payload.domainName,glossaryTrackingInfo:o})}catch(e){console.error(e)}const i=r.map((e=>e.join("")));return i}(e);const n=e.payload;yield HE();const r=yield qE(["selectedTargetLanguage","session","installationId","regionalVariant"]),o=new Date;let a;const i=n.texts,s=i.reduce(((e,t)=>e+t.length),0);try{const e=aD(i);a=yield e({sourceTexts:i,targetLangCode:r.selectedTargetLanguage,sourceLang:n.sourceLang})}catch(e){try{e instanceof Error&&iy({errorCode:e.name,errorMessage:e.message,domainName:n.domainName,targetLang:r.selectedTargetLanguage,websiteLanguage:n.sourceLang,trigger:n.trigger,characterCount:s})}catch(e){console.log(e)}throw e}Mb(null==n?void 0:n.sourceLang,null==r?void 0:r.selectedTargetLanguage);const c={isFirstRequest:n.isFirstTime,processingTimeInMs:(new Date).getTime()-o.getTime()},{translations:l,glossaryTrackingInfo:u}=a;try{oy({installationId:r.installationId,trigger:n.trigger,websiteLanguage:n.sourceLang,targetLanguage:r.selectedTargetLanguage,characterCount:s,translationPerformance:c,domainName:n.domainName,glossaryTrackingInfo:u})}catch(e){console.error(e)}return l.map((e=>e.text))}));async function sD({request:e,port:t}){try{await fS();const n={nicheIntegration:e.nicheIntegration||Lt,sourceTexts:[e.sourceText],isWriteRequest:!1};await NI(n),await qx({sourceText:e.sourceText,targetLanguage:e.targetLanguage,domainName:e.domainName,translationTrigger:e.trigger,port:t}),nv()&&console.log(`ITA Translator session created for sender: ${t.sender?.tab?.url}, tab ID: ${t.sender?.tab?.id}}`)}catch(n){throw nv()&&console.error(`Error creating ITA Translator session for sender: ${t.sender?.tab?.url}, tab ID: ${t.sender?.tab?.id}}`,n),Pv(n,Y_),iy({errorCode:n.name,errorMessage:n.message,domainName:e.domainName,targetLang:e.targetLanguage,websiteLanguage:e.websiteLanguage,trigger:e.trigger,characterCount:e.sourceText.length}),CE({itaSessionType:ur,itaSessionEventType:hr,itaErrorType:mr,itaErrorMessage:n.message||n}),n}}async function cD({request:e,port:t}){try{await fS();const n={nicheIntegration:e.nicheIntegration||Lt,sourceTexts:[e.sourceText],isWriteRequest:!0};await NI(n),await _k({sourceText:e.sourceText,requestedLanguage:e.requestedLanguage,domainName:e.domainName,writeTrigger:e.trigger,port:t}),nv()&&console.log(`ITA Write session created for sender: ${t.sender?.tab?.url}, tab ID: ${t.sender?.tab?.id}}`)}catch(n){throw nv()&&console.error(`Error creating ITA Write session for sender: ${t.sender?.tab?.url}, tab ID: ${t.sender?.tab?.id}}`,n),Pv(n,Y_),nE(_n,{sourceLength:e.sourceText.length,error:n.name,trigger:e.trigger,domainName:e.domainName}),CE({itaSessionType:dr,itaSessionEventType:hr,itaErrorType:mr,itaErrorMessage:n.message||n}),n}}function lD(e,t,n){return nv()&&!{IS_PROD:!0,BASE_URLS:{dapApi:"https://s.deepl.com/chrome/statistics",toolingApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.42.0",toolingApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.42.0",toolingWriteApiPro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.42.0",toolingWriteApi:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.42.0",classicApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.42.0",classicApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.42.0",classicApiWrite:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.42.0",classicApiWritePro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.42.0",classicApiGlossary:"https://api.deepl.com/termbases/jsonrpc?client=chrome-extension,1.42.0",interactiveTextApiFree:"https://ita-free.www.deepl.com/v1",interactiveTextApiPro:"https://ita-pro.www.deepl.com/v1",oneShotApiPro:"https://oneshot-pro.deepl.com/v1",login:"https://www.deepl.com/auth/login",token:"https://w.deepl.com/oidc/token",cookieBearerExchange:"https://w.deepl.com/oidc/cookie_bearer_exchange",logout:"https://www.deepl.com/auth/logout",feedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",newFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",sidepanelShareFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_2reZXhr31K2MeDI",firefoxFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eyfDZqQmXuNTFOK",uninstallSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU",gslidesFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_9XBLSAbDmLq5emO",deeplDomain:"https://www.deepl.com",deeplPro:"https://www.deepl.com/pro",deeplProWrite:"https://www.deepl.com/pro-write",deeplTranslator:"https://www.deepl.com/translator",deeplDoctrans:"https://www.deepl.com/translator/files",deeplTermsOfServiceFree:"https://www.deepl.com/en/pro-license?tab=free",deeplCreateAccount:"https://www.deepl.com/signup",extensionStorePage:"https://bit.ly/DeepL-Chrome",supportArticle:"https://support.deepl.com/hc/articles/4407580229522",deeplSupport:"https://support.deepl.com/hc",chromeWebstore:"https://chrome.google.com/webstore/detail/deepl-translate-reading-w/cofdbpoegempjloogbagkncekinflcnj",edgeWebstore:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-reading-/fancfknaplihpclbhbpclnmmjcjanbaf",firefoxWebstore:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate",firefoxShortcutDocs:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",firefoxPrivacyPolicy:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate/privacy/",clientStateApi:"https://w.deepl.com/web",experimentsEndpoint:"https://experimentation.deepl.com/experiments",gmailFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_db8ItFTmYBcZjYW",customerSegmentationSurveyFree:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2071",customerSegmentationSurveyPro:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2070",arabicSurvey:"https://deepl.qualtrics.com/jfe/form/SV_ekTrC2ePp0wn7xQ",msAddinsDeepLAds:"https://www.deepl.com/en/microsoft-365",getFreeAccount:"https://www.deepl.com/en/signup?cta=free-login-signup",uninstallPage:"https://www.deepl.com/extension-uninstall"},APP_VERSION:"1.42.0",FEATURE_FLAGS:{TRANSLATE_INPUT:!0,PAGE_TRANSLATION:!0,IMPROVE_WRITING:!0,DOCUMENT_TRANSLATION:!0,RECOMMEND_TO_A_FRIEND:!0,PRO_LOGIN:!0,WEBPAGE_CUSTOMIZER:!0,GDOCS_INTEGRATION:!0,ZENDESK_INTEGRATION:!0,GMAIL_INTEGRATION:!0,GSLIDES_INTEGRATION:!0,ON_INSTALL_ONBOARDING:!0,WHATSAPP_TRANSLATE_ALL_CHAT:!1,DEEPL_WRITE_GENERAL:!1,DEEPL_WRITE_GDOCS:!0,SHOW_CUSTOMER_SEGMENTATION_SURVEY:!1,ARABIC_SURVEY:!0,BATCH_TRANSLATE_HTML_REQUEST:!0,SIDE_PANEL_FIREFOX:!1}}.DISABLE_DEBUG_LOGS&&console.log(t.tab?`message from a content script: ${t.tab.url} with tab id: ${t.tab.id}. action: ${e.action}`:`message from the extension with action: ${e.action}`),uD({action:e.action,request:e,sendResponse:n},t)}function uD(e,t){var n,r,o;const{action:a,request:i,sendResponse:s}=e;switch(a){case _v.dlRequestHtmlTranslation:iD(e.request).then((e=>s(e))).catch((e=>{s(rT(e,Y_))}));break;case _v.dlRequestInlineTranslation:qI(i).then((e=>{s(e)})).catch((e=>{s(rT(e,Y_))}));break;case _v.dlTriggerTranslateInline:VI(t.tab.id),s();break;case hv.dlTriggerImproveInline:jI(t.tab.id),s();break;case hv.dlTriggerImproveInput:WI(t.tab.id),s();break;case _v.dlTriggerTranslateInput:FI(t.tab.id),s();break;case _v.dlRequestInputTranslation:BI(i).then((e=>s(e))).catch((e=>{s(rT(e,Y_))}));break;case _v.dlRequestZendeskInputTranslation:HI(i).then((e=>s(e))).catch((e=>{s(rT(e,Y_))}));break;case _v.dlRequestGmailReceivedEmailTranslation:JI(i).then((e=>s(e))).catch((e=>{s(rT(e,Y_))}));break;case _v.dlRequestWhatsAppMessageTranslation:KI(i).then((e=>s(e))).catch((e=>{s(rT(e,Y_))}));break;case _v.dlRequestTwitterTweetTranslation:YI(i).then((e=>s(e))).catch((e=>{s(rT(e,Y_))}));break;case _v.dlRequestYouTubeTranslation:zI(i).then((e=>s(e))).catch((e=>{s(rT(e,Y_))}));break;case _v.dlRequestLinkedInPostTranslation:XI(i).then((e=>s(e))).catch((e=>{s(rT(e,Y_))}));break;case _v.dlRequestZendeskMessageTranslation:ob(i).then((e=>s(e))).catch((e=>{s(rT(e,Y_))}));break;case _v.dlRequestWhatsAppMessagesTranslation:QI(i).then((e=>s(e))).catch((e=>{s(rT(e,Y_))}));break;case fv.dlRequestGDocsSplitText:ZI(i).then((e=>s(e))).catch((e=>{s(rT(e,Y_))}));break;case _v.dlRequestGDocsProcessContent:eb(i).then((e=>s(e))).catch((e=>{s(rT(e,Y_))}));break;case hv.dlRequestGDocsSentenceAlternatives:tb(i).then((e=>s(e))).catch((e=>{s(rT(e,Y_))}));break;case hv.dlRequestGDocsWordAlternatives:nb(i).then((e=>s(e))).catch((e=>{s(rT(e,Y_))}));break;case hv.dlRequestGDocsSentenceFromPartialTranslation:rb(i).then((e=>s(e))).catch((e=>{s(rT(e,Y_))}));break;case vv.dlRequestTermbases:ab().then((e=>s(e))).catch((e=>{s(rT(e,Y_))}));break;case Tv.dlTrackDetectLanguage:ib(i),s();break;case dv.dlRequestLogin:Nb().then((()=>s(!0))).catch((e=>{s(rT(e,Y_))}));break;case dv.dlRequestLogout:Ob().then((()=>s(!0))).catch((e=>{s(rT(e,Y_))}));break;case mv.dlGetAppSettings:chrome.storage.sync.get(null,(function(e){s(e)}));break;case mv.dlUpdateAppSettings:chrome.storage.sync.set(i.payload,(function(){s(i.payload)}));break;case _v.dlTranslatedInputTextNotSet:sy({errorCode:Vv,errorMessage:"The translated text could not be set",domainName:i.payload}),s();break;case dv.dlGetUserState:Rb().then((e=>s(e))).catch((e=>{s(rT(e,Y_))}));break;case Ev.dlExternalURLRedirect:Mr(i.payload),s();break;case Ev.dlOpenInternalPage:Xk(i),s();break;case Tv.dlTrackInputTranslationInjection:sb(i.payload),s();break;case Tv.dlTrackExtensionOpenedEvent:cb(i.payload),s();break;case Tv.dlTrackLogoClickedEvent:lb(i.payload),s();break;case Tv.dlTrackDocTransClick:ub(),s();break;case Tv.dlTrackRecommendToAFriendClick:db(),s();break;case gv.dlSendNotification:Lb(i.payload),s();break;case mv.dlCheckCommandShortcuts:Cb().then((e=>s(e)));break;case Tv.dlTrackUseOfShortcut:Pb(i.payload),s();break;case Tv.dlTrackUiAction:xb(i.payload),s();break;case Tv.dlTrackInlineSettingOpened:pb(i.payload),s();break;case Tv.dlTrackSettingChanged:gb(i.payload),s();break;case Tv.dlTrackUILocationClicked:eA(i.payload),s();break;case Tv.dlTrackRightClick:hb(i.payload),s();break;case Tv.dlTrackInlinePositionChange:fb(i.payload),s();break;case Tv.dlTrackInlineDragStart:mb(),s();break;case Tv.dlTrackFptHide:_b(i.payload);break;case Tv.dlTrackInlineCopy:Tb(i.payload),s();break;case Tv.dlTrackInlineListen:Eb(i.payload),s();break;case Tv.dlTrackIconHover:vb(i.payload),s();break;case Tv.dlTrackVoiceOverStops:Sb(i.payload),s();break;case Tv.dlTrackOnboardingStepChange:yb(i.payload),s();break;case Tv.dlTrackOnboardingOpenExternalLink:Ib(i.payload),s();break;case Tv.dlTrackReadMore:bb(i.payload),s();break;case Tv.dlTrackLandingOnWebsite:Db(i.payload),s();break;case Tv.dlTrackGDocsReplaceText:Ab(i.payload),s();break;case yv.dlGetExperiments:wb(null===(n=i.payload)||void 0===n?void 0:n.forceFetch).then((e=>s(e))).catch((e=>s(e)));break;case dv.dlGetClientState:lA(null===(r=i.payload)||void 0===r?void 0:r.forceFetch).then((e=>s(e))).catch((e=>s(e)));break;case dv.dlManipulateGetClientState:nv()&&(null===(o=i.payload)||void 0===o?void 0:o.state)&&RA(i.payload.state).then((()=>s())).catch((e=>s(e)));break;case pv.dlTextToSpeech:Gb(i.payload,t.tab.id).then((()=>s())).catch((e=>{s(rT(e,Y_))}));break;case vv.dlGetDictionary:Bb(i.payload).then((e=>s(e))).catch((e=>{s(rT(e,Y_))}));break;case pv.dlGetSupportedVoices:$b().then((e=>s(e))).catch((e=>{s(rT(e,Y_))}));break;case pv.dlStopSpeech:Vb().then((()=>s())).catch((e=>{s(rT(e,Y_))}));break;case Tv.dlTrackOpenInputHighlighter:Fb(i.payload),s();break;case Tv.dlTrackOpenInlineHighlighter:jb(i.payload),s();break;case Tv.dlTrackCloseInputHighlighter:Wb(i.payload),s();break;case Tv.dlTrackCloseInlineHighlighter:qb(i.payload),s();break;case Tv.dlTrackDictionaryStatus:Hb(i.payload),s();break;case Tv.dlTrackOpenDictionarySection:Jb(i.payload),s();break;case Tv.dlTrackDisabledDictionaryHover:Yb(i.payload),s();break;case Tv.dlTrackZendeskCustomizationEvent:zb(i.payload),s();break;case Tv.dlTrackZendeskGlossaryOpened:hA(i.payload).then((()=>s())).catch((e=>{s(rT(e,Y_))}));break;case Tv.dlTrackGlossaryEnabled:fA(i.payload).then((()=>s())).catch((e=>{s(rT(e,Y_))}));break;case Tv.dlTrackGlossaryDisabled:mA(i.payload).then((()=>s())).catch((e=>{s(rT(e,Y_))}));break;case Tv.dlTrackDeeplWriteEvent:tA(i.payload),s();break;case Tv.dlTrackLingueeErrorData:Xb(i.payload),s();break;case Tv.dlTrackGdocsMaxCharExceededShown:Kb(i.payload),s();break;case Tv.dlTrackGDocsMaxCharExceededTryProClicked:Qb(i.payload),s();break;case Tv.dlTrackOnboardingModalShown:Zb(i.payload),s();break;case hv.dlRequestImproveWriting:nA(i).then((e=>s(e))).catch((e=>{s(rT(e,Y_))}));break;case fv.dlSplitTextRequest:SA(i).then((e=>s(e))).catch((e=>{s(rT(e))}));break;case hv.dlRequestAlternatives:IA(i).then((e=>s(e))).catch((e=>{s(rT(e))}));break;case Tv.dlTrackTranslateAcceptOrRevertEvent:rA(i.payload),s();break;case Tv.dlTrackCustomizationEnabledEvent:oA(i.payload),s();break;case Tv.dlTrackGmailCharLimitReached:iA(i.payload),s();break;case dv.dlGetUsersCharacterLimit:dA().then((e=>s(e))).catch((e=>{s(rT(e,Y_))}));break;case Tv.dlTrackAlternativesEvent:cA(i.payload),s();break;case Ev.dlTestClassicAPI:vA(i.payload).then((e=>s(e))).catch((e=>{s(rT(e,Y_))}));break;case Tv.dlOnSuccessfulZendeskTranslation:Ub();break;case Tv.dlTrackUpgradeNotificationIsDisplayed:pA(i.payload.type);break;case Tv.dlTrackUpgradeNotificationClosed:gA(i.payload.type);break;case Tv.dlTrackUpgradeNotificationAction:_A(i.payload.type,i.payload.cta);break;case Tv.dlTrackLanguageDetectionForTextProcessing:TA(i.payload).finally((()=>s()));break;case Tv.dlTrackSeeAlternativesClicked:yA(),s();break;case Tv.dlTrackAlternativeSelected:EA(i.payload),s();break;case Tv.dlTrackIframeTranslationSuccessful:AA(),s();break;case Tv.dlTrackIframeTranslationFailed:wA(i.payload),s();break;case Tv.dlTrackClicksOnAdsButton:NA(),s();break;case Tv.dlTrackAdsShown:OA(i.payload),s();break;case Tv.dlTrackWriteTextStylesChanged:LA(i.payload),s();break;case Tv.dlTrackWriteTextStylesApplied:CA(i.payload),s();break;case Tv.dlTrackWriteTextTonesChanged:PA(i.payload),s();break;case Tv.dlTrackFormalitySelected:NE(i.payload),s();break;case Tv.dlTrackSidePanelOpened:OE();break;case Tv.dlTrackPolicyLoginRequiredNotification:dy(i.payload);break;case Tv.dlTrackReplaceInField:LE(i.payload)}return!0}function dD(e){switch(console.log(`Command "${e}" triggered`),e){case Ze:chrome.tabs.query({active:!0,currentWindow:!0},(function(e){chrome.tabs.sendMessage(e[0].id,{action:"dlTriggerTranslationShortcut"})}));break;case et:chrome.tabs.query({active:!0,currentWindow:!0},(function(e){chrome.tabs.sendMessage(e[0].id,{action:"dlChangeLanguageShortcut"})}))}}function pD(e,t){return r(this,void 0,void 0,(function*(){let n,o=nv();o&&console.log("get experiments");try{n=yield wb(!0),o&&console.log("fetched experiments",n)}catch(e){console.error(e),ay({errorCode:$v,errorMessage:"Unable to fetch experiments in install block"})}o&&console.log("get client state and set perodic code execution");try{yield lA(!0),yield function(){return r(this,void 0,void 0,(function*(){yield chrome.alarms.clearAll(),yield chrome.alarms.create(Dk.syncExperiments,{delayInMinutes:10,periodInMinutes:10}),yield chrome.alarms.create(Dk.syncClientState,{delayInMinutes:30,periodInMinutes:30}),yield chrome.alarms.create(Dk.trackClientStateWeb,{delayInMinutes:360,periodInMinutes:360})}))}()}catch(e){console.error(e),ay({errorCode:$v,errorMessage:e.message})}try{const t=yield chrome.management.getSelf();RE(Object.assign(Object.assign({},t),{installReason:e.reason}))}catch(e){console.error(e)}t?(o&&console.log("start tracking of installation result"),function(e,t){r(this,void 0,void 0,(function*(){const n=nv();if((null==t?void 0:t.browserInstanceIdWasSet)&&e===chrome.runtime.OnInstalledReason.INSTALL){n&&console.log("track - installation successful"),Gy(),n&&console.log("track - browser instance id creation"),tE();try{const e=yield uA();bE(e),n&&console.log("track - client state of website",e)}catch(e){wE(),console.error(e)}}else n&&console.log(`install reason: ${e}, no need to track browser instance id creation, install successful event or the web client state`);(null==t?void 0:t.installationIdWasSet)?(n&&console.log("track - installation id creation"),eE()):n&&console.log(`install reason: ${e}, no need to track installation id creation`)}))}(e.reason,t)):o&&console.log("tracking of installation result not needed"),kA();try{try{const{installationId:e}=yield chrome.storage.sync.get(["installationId"]);chrome.runtime.setUninstallURL(`https://www.deepl.com/extension-uninstall?installation_id=${e}&utm_source=browser_extension&utm_content=uninstall_event`)}catch(e){chrome.runtime.setUninstallURL("https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU"),console.error(e)}e.reason===chrome.runtime.OnInstalledReason.UPDATE&&console.log(`Update from version ${e.previousVersion} to ${chrome.runtime.getManifest().version} was completed`),e.reason!==chrome.runtime.OnInstalledReason.INSTALL||ov()||(yield av())||(xr()?Xk({payload:{destination:Mk.firefox_first_run}}):Xk({payload:{destination:Mk.create_account}})),chrome.contextMenus.removeAll((function(){chrome.contextMenus.create({id:"dlTranslateWithDeepL",title:chrome.i18n.getMessage("right_click_menu_translate_with_deepl"),contexts:["all"]})})),chrome.tabs.query({},(function(e){for(const t of e)Uk(t)&&chrome.scripting.executeScript({target:{tabId:t},files:["build/content.js"]})}))}catch(e){ay({errorCode:$v,errorMessage:e.message})}}))}function gD(e){nv()&&console.log(`Start setup routine after ${null==e?void 0:e.reason}`),function(){return r(this,void 0,void 0,(function*(){let e=!1,t=!1;const n=nv(),r=yield chrome.storage.sync.get(null),o={settingSchemeVersion:44,blacklistDomains:[],blacklistDomainsForReading:[],blacklistDomainsForWriting:[],languagesForTranslation:f.reduce(((e,t)=>({...e,[t.langCode]:T})),{}),selectedTargetLanguage:z_(),isTargetLanguageConfirmed:!1,deepLProApiKey:{IS_PROD:!0,BASE_URLS:{dapApi:"https://s.deepl.com/chrome/statistics",toolingApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.42.0",toolingApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.42.0",toolingWriteApiPro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.42.0",toolingWriteApi:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.42.0",classicApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.42.0",classicApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.42.0",classicApiWrite:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.42.0",classicApiWritePro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.42.0",classicApiGlossary:"https://api.deepl.com/termbases/jsonrpc?client=chrome-extension,1.42.0",interactiveTextApiFree:"https://ita-free.www.deepl.com/v1",interactiveTextApiPro:"https://ita-pro.www.deepl.com/v1",oneShotApiPro:"https://oneshot-pro.deepl.com/v1",login:"https://www.deepl.com/auth/login",token:"https://w.deepl.com/oidc/token",cookieBearerExchange:"https://w.deepl.com/oidc/cookie_bearer_exchange",logout:"https://www.deepl.com/auth/logout",feedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",newFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",sidepanelShareFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_2reZXhr31K2MeDI",firefoxFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eyfDZqQmXuNTFOK",uninstallSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU",gslidesFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_9XBLSAbDmLq5emO",deeplDomain:"https://www.deepl.com",deeplPro:"https://www.deepl.com/pro",deeplProWrite:"https://www.deepl.com/pro-write",deeplTranslator:"https://www.deepl.com/translator",deeplDoctrans:"https://www.deepl.com/translator/files",deeplTermsOfServiceFree:"https://www.deepl.com/en/pro-license?tab=free",deeplCreateAccount:"https://www.deepl.com/signup",extensionStorePage:"https://bit.ly/DeepL-Chrome",supportArticle:"https://support.deepl.com/hc/articles/4407580229522",deeplSupport:"https://support.deepl.com/hc",chromeWebstore:"https://chrome.google.com/webstore/detail/deepl-translate-reading-w/cofdbpoegempjloogbagkncekinflcnj",edgeWebstore:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-reading-/fancfknaplihpclbhbpclnmmjcjanbaf",firefoxWebstore:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate",firefoxShortcutDocs:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",firefoxPrivacyPolicy:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate/privacy/",clientStateApi:"https://w.deepl.com/web",experimentsEndpoint:"https://experimentation.deepl.com/experiments",gmailFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_db8ItFTmYBcZjYW",customerSegmentationSurveyFree:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2071",customerSegmentationSurveyPro:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2070",arabicSurvey:"https://deepl.qualtrics.com/jfe/form/SV_ekTrC2ePp0wn7xQ",msAddinsDeepLAds:"https://www.deepl.com/en/microsoft-365",getFreeAccount:"https://www.deepl.com/en/signup?cta=free-login-signup",uninstallPage:"https://www.deepl.com/extension-uninstall"},APP_VERSION:"1.42.0",FEATURE_FLAGS:{TRANSLATE_INPUT:!0,PAGE_TRANSLATION:!0,IMPROVE_WRITING:!0,DOCUMENT_TRANSLATION:!0,RECOMMEND_TO_A_FRIEND:!0,PRO_LOGIN:!0,WEBPAGE_CUSTOMIZER:!0,GDOCS_INTEGRATION:!0,ZENDESK_INTEGRATION:!0,GMAIL_INTEGRATION:!0,GSLIDES_INTEGRATION:!0,ON_INSTALL_ONBOARDING:!0,WHATSAPP_TRANSLATE_ALL_CHAT:!1,DEEPL_WRITE_GENERAL:!1,DEEPL_WRITE_GDOCS:!0,SHOW_CUSTOMER_SEGMENTATION_SURVEY:!1,ARABIC_SURVEY:!0,BATCH_TRANSLATE_HTML_REQUEST:!0,SIDE_PANEL_FIREFOX:!1}}.DEEPL_PRO_API_KEY,installationId:p(),enableFullPageTranslation:!0,enableInputTranslation:!0,enableInlineTranslation:!0,languagePreferenceForWriting:X_(),languagePreferenceForReading:X_(),languagePreferenceForDeeplWrite:"EN-US",blacklistedPopupWidgets:[],successfulTranslations:0,successfulArabicTranslations:0,isReviewPopupShown:!1,shouldDisplayFeedbackPopup:!1,isInputHighlighterShown:!1,isInlineHighlighterShown:!1,hasITAInlineOnboardingBeenShown:!1,hasITAPopupHideRemarkBeenShown:!1,useAdvancedWindowModeForInlineFunctionality:!0,regionalVariant:void 0,isSurveyLinkHidden:!1,isSidePanelSurveyVisible:!1,sidePanelSurveyHasBeenDisplayed:!1,successfulSidepanelTranslations:0,isGlossaryEnabled:!1,activeTermbaseId:null,isZendeskOnboarded:!1,isZendeskEnabled:!0,isZendeskOnboardingShown:!1,zendeskFormality:"auto",zendeskSuccessfulTranslations:0,zendeskActiveTermbase:null,isGDocsEnabled:!0,isGDocsOnboardingShown:!1,gDocsSegmentation:kn,gDocsWriteLang:null,isGmailEnabled:!0,wasGmailOnboardingShown:!1,successfulTranslationsGmail:0,wasGmailFeedbackPopupShown:!1,isGSlidesEnabled:!0,isGSlidesOnboardingShown:!1,wasGSlidesFeedbackPopupShown:!1,successfulTranslationsGSlides:0,isWhatsAppWebEnabled:!0,isTwitterEnabled:!0,isYoutubeEnabled:!0,customizationsActiveStates:{[Mt]:!0},hasUserSeenAccountCreationNudge:!1,hasUserSeenPostAccountCreationOnboarding:!1,hasUserSeenProCustomerSegmentationSurvey:!1,firefoxAnonPermissionGranted:!0,firefoxPersonalPermissionGranted:!1,enableItaDev:!1,enableItaWriteDev:!1,enableItaInputDev:!1,freeTrialFTPAnonymousUser:5,freeTrialFTPFreeUser:15,enableAdvancedTriggerIcon:!1};if(!r||!r.settingSchemeVersion||r.settingSchemeVersion<o.settingSchemeVersion){let t={};for(const[a,i]of Object.entries(o))a in r&&"settingSchemeVersion"!==a?t[a]=r[a]:("installationId"===a&&(e=!0,n&&console.log("installation id set",i)),t[a]=i);yield chrome.storage.sync.clear(),yield chrome.storage.sync.set(t),n&&console.log("settings set: ",t)}else n&&console.log("No need to update the settings");return(yield iS())||(yield aS(),t=!0,n&&console.log("browser instance id set")),{installationIdWasSet:e,browserInstanceIdWasSet:t}}))}().then((t=>{pD(e,t)})).catch((t=>{pD(e).finally((()=>{console.error(t),ay({errorCode:$v,errorMessage:`setSettingsAfterInstall failed: ${t.message}`})}))}))}function hD(e){switch(e.name){case Dk.syncExperiments:wb().then((()=>{kA()}));break;case Dk.syncClientState:lA();break;case Dk.trackClientStateWeb:uA().then((e=>AE(e))).catch((()=>wE()))}}function fD(e,t){"dlTranslateWithDeepL"===e.menuItemId&&kb(!1)}function mD(e,t){return r(this,void 0,void 0,(function*(){if("sync"===t)for(let[t,{oldValue:n,newValue:r}]of Object.entries(e))if("installationId"===t&&n!==r)try{yield wb(!0)}catch(e){console.error(`Error fetching experiments after installationId change: ${e}`)}}))}function _D(e,t){switch(nv()&&console.log(`Port message received, port name: ${t.name}, sender: ${t.sender.tab.url}, tab ID: ${t.sender.tab.id}, message type ${e.type}`),e.type){case fx:sD({request:e.payload,port:t}).then().catch((e=>{TD(e,t)}));break;case $x.REQUEST.ITA_UPDATE_TARGET_LANGUAGE:Hx({port:t,language:e.payload.language});break;case $x.REQUEST.ITA_UPDATE_SOURCE_LANGUAGE:Jx({port:t,language:e.payload.language});break;case bx:Yx(t,e.payload.formality);break;case Tx:qx({itaDocumentState:e.payload.itaDocumentState,domainName:e.payload.domainName,translationTrigger:e.payload.trigger,port:t});break;case _x:cD({request:e.payload,port:t}).then().catch((e=>{TD(e,t)}));break;case Ox:Tk({port:t,language:e.payload.language});break;case Rx:yk(t,e.payload.styleVariant);break;case Lx:_k({itaDocumentState:e.payload.itaDocumentState,domainName:e.payload.domainName,writeTrigger:e.payload.trigger,port:t});break;case vx:Sk(t,e.payload.sourceText);break;case mx:Xx(t);break;case xx:Ik(t);break;case Gx.REQUEST.ITA_SELECT_ALTERNATIVE:bk(t,e.payload.alternative);break;case $x.REQUEST.ITA_SELECT_ALTERNATIVE:Qx(t,e.payload.alternative);break;default:nv()&&console.log(`Unrecognised message type: ${e.type}`)}}function vD(e){nv()&&console.log(`Port name: ${e.name} disconnected`),Vx(e)}function TD(e,t){t.postMessage({type:Ax,payload:rT(e,Y_)})}const yD={setBrowserExtensionUserAgent:{type:"modifyHeaders",requestHeaders:[{header:"user-agent",operation:"set",value:`DeepLBrowserExtension/1.42.0 ${navigator.userAgent} `}]}},ED={lingueeDomainFilter:{excludedDomains:["linguee.com"],urlFilter:"*://www-app.linguee.com*",resourceTypes:["xmlhttprequest"]},deeplToolingApiDomainFilter:{excludedDomains:["deepl.com"],urlFilter:"*://*.deepl.com/jsonrpc?client=chrome-extension,*",resourceTypes:["xmlhttprequest"]},deeplStatisticsDomainFilter:{excludedDomains:["deepl.com"],urlFilter:"*://s.deepl.*/chrome/statistics*",resourceTypes:["xmlhttprequest"]}};function SD(){if(chrome.declarativeNetRequest)chrome.declarativeNetRequest.updateDynamicRules({removeRuleIds:[2,3,4],addRules:[{id:2,priority:1,action:yD.setBrowserExtensionUserAgent,condition:ED.lingueeDomainFilter},{id:3,priority:1,action:yD.setBrowserExtensionUserAgent,condition:ED.deeplToolingApiDomainFilter},{id:4,priority:1,action:yD.setBrowserExtensionUserAgent,condition:ED.deeplStatisticsDomainFilter}]},(async e=>{nv()&&await console.log("created",e)}));else if(chrome.webRequest?.onBeforeSendHeaders){const e=nv()?"https://test.deepl.com/":"https://www.deepl.com/";browser.webRequest.onBeforeSendHeaders.addListener((t=>{const n=t.requestHeaders;return n.push({name:"Referer",value:e}),{requestHeaders:n}}),{urls:["*://*.deepl.com/jsonrpc?client=chrome-extension,*"]},["requestHeaders","blocking"]),browser.webRequest.onBeforeSendHeaders.addListener((function(e){for(const t of e.requestHeaders)if("User-Agent"===t.name){t.value=`DeepLBrowserExtension/1.42.0 ${navigator.userAgent}`;break}return{requestHeaders:e.requestHeaders}}),{urls:["*://www-app.linguee.com/*","*://*.deepl.com/jsonrpc?client=chrome-extension,*","https://s.deepl.com/chrome/statistics"]},["blocking","requestHeaders"])}}var ID;return self.addEventListener("error",(function(e){const t=e.message||"";Lv(t)&&e.preventDefault()})),self.addEventListener("unhandledrejection",(function(e){const t=e.reason&&e.reason.message||"";Lv(t)&&e.preventDefault()})),qd({...Cv}),Ji("appContext",{location:"background"}),ID=Y_,chrome.storage.sync.get(["installationId","session",Iv.auth.isLoggedIn,Iv.auth.translatorServiceType,Iv.auth.writeServiceType],(function(e){ID.setTag("internal_session_id",e?.session?.id),ID.setTag("is_translator_pro",Ov(e,an.TRANSLATOR)),ID.setTag("is_write_pro",Ov(e,an.WRITE)),ID.setTag("is_logged_in",e.isLoggedIn)})),chrome.storage.local.get("browserInstanceId",(function(e){ID.setTag("browser_instance_id",e.browserInstanceId)})),chrome.storage.onChanged.addListener((e=>(e?.session?.newValue&&ID.setTag("internal_session_id",e.session.newValue.id),e?.installationId&&ID.setUser({id:e.installationId}),e?.browser_instance_id&&ID.setTag("browser_instance_id",bv.browserInstanceId.newValue),!0!==e.isLoggedIn?.newValue&&!1!==e.isLoggedIn?.newValue||ID.setTag("is_logged_in",e.isLoggedIn.newValue),e.translatorServiceType&&chrome.storage.sync.get([Iv.auth.isLoggedIn],ID.setTag("is_translator_pro",Ov({...bv,translatorServiceType:e.translatorServiceType.newValue},an.TRANSLATOR))),e.writeServiceType&&chrome.storage.sync.get([Iv.auth.isLoggedIn],ID.setTag("is_write_pro",Ov({...bv,writeServiceType:e.writeServiceType.newValue},an.WRITE))),!0))),console.info("Sentry initialised"),SD(),chrome.runtime.onInstalled.addListener(gD),chrome.contextMenus.onClicked.addListener(fD),chrome.tabs.onActivated.addListener((async function(e){Uk((await chrome.tabs.get(e.tabId)).url)&&chrome.tabs.sendMessage(e.tabId,{action:"dlTabChanged"}),chrome.tabs.query({},(function(t){for(const n of t)chrome.tabs.sendMessage(n.id,{action:"dlChangeActiveTabStatus",payload:{isActive:n.id===e.tabId}})})),lA()})),chrome.runtime.onConnect.addListener((function(e){nv()&&console.log(`PORT connected to tab with id: ${e.sender.tab.id}, port name: ${e.name}`),e.onMessage.addListener(_D),e.onDisconnect.addListener(vD)})),chrome.runtime.onMessage.addListener(lD),chrome.storage.onChanged.addListener(mD),chrome.commands.onCommand.addListener(dD),chrome.alarms.onAlarm.addListener(hD),chrome.runtime.onMessage.addListener((e=>("reload"===e&&chrome.tabs.query({active:!0}).then((()=>{chrome.runtime.reload(),chrome.tabs.reload()})),!0))),xr()||chrome.webRequest.onBeforeSendHeaders.addListener((()=>{}),{urls:["<all_urls>"]},["requestHeaders","extraHeaders"]),wk(),e.AlternativesSegmentationType={ALTERNATIVES_SEGMENTATION_TYPE_UNSPECIFIED:0,ALTERNATIVES_SEGMENTATION_TYPE_WORD:1,ALTERNATIVES_SEGMENTATION_TYPE_SENTENCE:2},e.BrowserExtensionType={BROWSER_EXTENSION_TYPE_UNSPECIFIED:0,BROWSER_EXTENSION_TYPE_CHROME:1,BROWSER_EXTENSION_TYPE_EDGE:2,BROWSER_EXTENSION_TYPE_FIREFOX:3},e.CONTENT_PROCESS_MODE=TI,e.CloseInlineHighlighterTriggerType={CLOSE_INLINE_HIGHLIGHTER_TRIGGER_TYPE_UNSPECIFIED:0,CLOSE_INLINE_HIGHLIGHTER_TRIGGER_TYPE_ON_CLOSE_ICON:1,CLOSE_INLINE_HIGHLIGHTER_TRIGGER_TYPE_ON_DEEPL_ICON:2,CLOSE_INLINE_HIGHLIGHTER_TRIGGER_TYPE_ON_OUTSIDE_CLICK:3},e.CloseInputHighlighterTriggerType={CLOSE_INPUT_HIGHLIGHTER_TRIGGER_TYPE_UNSPECIFIED:0,CLOSE_INPUT_HIGHLIGHTER_TRIGGER_TYPE_ON_CLOSE_ICON:1,CLOSE_INPUT_HIGHLIGHTER_TRIGGER_TYPE_ON_DEEPL_ICON:2},e.ContentProcessingModeType={CONTENT_PROCESSING_MODE_TYPE_UNSPECIFIED:0,CONTENT_PROCESSING_MODE_TYPE_TRANSLATE:1,CONTENT_PROCESSING_MODE_TYPE_WRITE:2},e.DictionaryErrorType={DICTIONARY_ERROR_TYPE_UNSPECIFIED:0,DICTIONARY_ERROR_TYPE_ENTRY_NOT_FOUND:1,DICTIONARY_ERROR_TYPE_SERVER_ERRORS:2},e.DictionaryStatusType={DICTIONARY_STATUS_TYPE_UNSPECIFIED:0,DICTIONARY_STATUS_TYPE_ENABLE:1,DICTIONARY_STATUS_TYPE_DISABLE:2},e.EVENT_TYPES=VO,e.ErrorCategory={ERROR_CATEGORY_UNSPECIFIED:0,ERROR_CATEGORY_LOGIN:1,ERROR_CATEGORY_AUTO_LOGIN:2},e.EventID=oT,e.ExtensionDisabledReason={EXTENSION_DISABLED_REASON_UNSPECIFIED:0,EXTENSION_DISABLED_REASON_PERMISSIONS_INCREASE:1,EXTENSION_DISABLED_REASON_UNKNOWN:2},e.ExtensionInstallType={EXTENSION_INSTALL_TYPE_REASON_UNSPECIFIED:0,EXTENSION_INSTALL_TYPE_NORMAL:1,EXTENSION_INSTALL_TYPE_DEVELOPMENT:2,EXTENSION_INSTALL_TYPE_ADMIN:3,EXTENSION_INSTALL_TYPE_SIDELOAD:4,EXTENSION_INSTALL_TYPE_OTHER:5},e.ExtensionOnInstalledReason={EXTENSION_ON_INSTALLED_REASON_UNSPECIFIED:0,EXTENSION_ON_INSTALLED_REASON_INSTALL:1,EXTENSION_ON_INSTALLED_REASON_UPDATE:2,EXTENSION_ON_INSTALLED_REASON_CHROME_UPDATE:3,EXTENSION_ON_INSTALLED_REASON_SHARED_MODULE_UPDATE:4},e.ExtensionOpenedFrom={EXTENSION_OPENED_FROM_UNSPECIFIED:0,EXTENSION_OPENED_FROM_EXTENSION_ICON:1,EXTENSION_OPENED_FROM_FPT_AUTO_INJECT:2},e.FptHideType={FPT_HIDE_TYPE_UNSPECIFIED:0,FPT_HIDE_TYPE_DOMAIN:1,FPT_HIDE_TYPE_LANG:2,FPT_HIDE_TYPE_FPT:3},e.GmailActionType={GMAIL_ACTION_TYPE_UNSPECIFIED:0,GMAIL_ACTION_TYPE_READING_VIEW_TRANSLATE:1,GMAIL_ACTION_TYPE_COMPOSE_VIEW_TRANSLATE:2,GMAIL_ACTION_TYPE_COMPOSE_VIEW_IMPROVE:3},e.INTERNAL_PAGE_KEYS=Mk,e.InlineListenActionType={INLINE_LISTEN_ACTION_TYPE_UNSPECIFIED:0,INLINE_LISTEN_ACTION_TYPE_PLAY:1,INLINE_LISTEN_ACTION_TYPE_STOP:2},e.InlineListenContext={INLINE_LISTEN_CONTEXT_UNSPECIFIED:0,INLINE_LISTEN_CONTEXT_TRANSLATE:1,INLINE_LISTEN_CONTEXT_WRITE:2},e.InlineListenTextKind={INLINE_LISTEN_TEXT_KIND_UNSPECIFIED:0,INLINE_LISTEN_TEXT_KIND_SOURCE:1,INLINE_LISTEN_TEXT_KIND_TARGET:2},e.InlinePositionType={INLINE_POSITION_TYPE_UNSPECIFIED:0,INLINE_POSITION_TYPE_TOP:1,INLINE_POSITION_TYPE_RIGHT:2,INLINE_POSITION_TYPE_BOTTOM:3,INLINE_POSITION_TYPE_LEFT:4},e.ItaErrorType=sT,e.ItaParticipationErrorCodes={participant_evicted:"1000_participant_evicted"},e.ItaSessionConnectionErrorCodes=jA,e.ItaSessionEndedErrorCodes=VA,e.ItaSessionEventType=iT,e.ItaSessionSendingErrorCodes=WA,e.ItaSessionStartErrorCodes=FA,e.ItaSessionType=aT,e.ItaUserInteractionType=cT,e.LandOnWebsiteType={LAND_ON_WEBSITE_TYPE_UNSPECIFIED:0,LAND_ON_WEBSITE_TYPE_DEEPL:1,LAND_ON_WEBSITE_TYPE_LINGUEE:2,LAND_ON_WEBSITE_TYPE_GOOGLE_TRANSLATE:3,LAND_ON_WEBSITE_TYPE_WORD_365:4,LAND_ON_WEBSITE_TYPE_POWER_POINT_365:5,LAND_ON_WEBSITE_TYPE_JIRA:6,LAND_ON_WEBSITE_TYPE_CONFLUENCE:7,LAND_ON_WEBSITE_TYPE_GMAIL:8},e.LoginTriggerType={LOGIN_TRIGGER_TYPE_UNSPECIFIED:0,LOGIN_TRIGGER_TYPE_USER:1,LOGIN_TRIGGER_TYPE_AUTOMATIC:2},e.LogoClickedFrom={LOGO_CLICKED_FROM_UNSPECIFIED:0,LOGO_CLICKED_FROM_DEFAULT_POPUP:1,LOGO_CLICKED_FROM_INJECTED_FPT_POPUP:2,LOGO_CLICKED_FROM_INLINE_POPUP:3},e.LogoutTriggerType={LOGOUT_TRIGGER_TYPE_UNSPECIFIED:0,LOGOUT_TRIGGER_TYPE_USER:1,LOGOUT_TRIGGER_TYPE_EXTENSION:2},e.NicheIntegrationType={NICHE_INTEGRATION_TYPE_UNSPECIFIED:0,NICHE_INTEGRATION_TYPE_DEFAULT:1,NICHE_INTEGRATION_TYPE_GDOCS:2,NICHE_INTEGRATION_TYPE_WHATSAPPWEB:3,NICHE_INTEGRATION_TYPE_TWITTER:4,NICHE_INTEGRATION_TYPE_ZENDESK:5,NICHE_INTEGRATION_TYPE_GMAIL:6,NICHE_INTEGRATION_TYPE_GSLIDES:7,NICHE_INTEGRATION_TYPE_LINKEDIN:8,NICHE_INTEGRATION_TYPE_YOUTUBE:9},e.NotificationType={NOTIFICATION_TYPE_UNSPECIFIED:0,NOTIFICATION_TYPE_HINT_KEYBOARD_SHORTCUT:1,NOTIFICATION_TYPE_REQUIRE_LOGIN_POLICY:2},e.ONE_SHOT_TRANSLATE_MAXIMUM_TEXTS=100,e.OidcSessionType={OIDC_SESSION_TYPE_UNSPECIFIED:0,OIDC_SESSION_TYPE_NONE:1,OIDC_SESSION_TYPE_PRO:2,OIDC_SESSION_TYPE_FREE:3},e.OnboardingStepChangeTriggerType={ONBOARDING_STEP_CHANGE_TRIGGER_TYPE_UNSPECIFIED:0,ONBOARDING_STEP_CHANGE_TRIGGER_TYPE_OPEN_PAGE:1,ONBOARDING_STEP_CHANGE_TRIGGER_TYPE_BACK_BUTTON:2,ONBOARDING_STEP_CHANGE_TRIGGER_TYPE_NEXT_BUTTON:3,ONBOARDING_STEP_CHANGE_TRIGGER_TYPE_NAVIGATION:4},e.OriginStore={ORIGIN_STORE_UNSPECIFIED:0,ORIGIN_STORE_CHROME:1,ORIGIN_STORE_EDGE:2,ORIGIN_STORE_LOCAL:3,ORIGIN_STORE_FIREFOX:4},e.PERODIC_CODE_EXECUTION_NAMES=Dk,e.PageID={PAGE_ID_UNSPECIFIED:0,PAGE_ID_PAGE_HUB:1},e.ReplacementType={REPLACEMENT_TYPE_UNSPECIFIED:0,REPLACEMENT_TYPE_TRANSLATION:1,REPLACEMENT_TYPE_IMPROVEMENT:2},e.ResponseCode={RESPONSE_CODE_UNSPECIFIED:0,RESPONSE_CODE_OK:1,RESPONSE_CODE_ERROR:2,RESPONSE_CODE_INVALID_MESSAGE:3,RESPONSE_CODE_OK_WITH_WARNINGS:4},e.RightClickTranslationType={RIGHT_CLICK_TRANSLATION_TYPE_UNSPECIFIED:0,RIGHT_CLICK_TRANSLATION_TYPE_INLINE:1,RIGHT_CLICK_TRANSLATION_TYPE_INPUT:2},e.ServiceLevel={SERVICE_LEVEL_UNSPECIFIED:0,SERVICE_LEVEL_FREE:1,SERVICE_LEVEL_PRO:2,SERVICE_LEVEL_NONE:3},e.SessionTriggerType={SESSION_TRIGGER_TYPE_UNSPECIFIED:0,SESSION_TRIGGER_TYPE_TRANSLATION:1,SESSION_TRIGGER_TYPE_LOGIN:2},e.SettingType={SETTING_TYPE_UNSPECIFIED:0,SETTING_TYPE_DISABLE_EVERYWHERE:1,SETTING_TYPE_DISABLE_PER_SITE:2,SETTING_TYPE_ENABLE_EVERYWHERE:3,SETTING_TYPE_ENABLE_PER_SITE:4},e.ShortcutType={SHORTCUT_TYPE_UNSPECIFIED:0,SHORTCUT_TYPE_TRIGGER_TRANSLATION:1},e.StopVoiceOverTriggerType={STOP_VOICE_OVER_TRIGGER_TYPE_UNSPECIFIED:0,STOP_VOICE_OVER_TRIGGER_TYPE_ON_BUTTON_CLOSE:1,STOP_VOICE_OVER_TRIGGER_TYPE_ON_INLINE_MODAL_CLOSE:2},e.TranslationFormalityType={TRANSLATION_FORMALITY_TYPE_UNSPECIFIED:0,TRANSLATION_FORMALITY_TYPE_FORMAL:1,TRANSLATION_FORMALITY_TYPE_INFORMAL:2},e.TranslationTrigger={TRANSLATION_TRIGGER_UNSPECIFIED:0,TRANSLATION_TRIGGER_MANUAL:1,TRANSLATION_TRIGGER_AUTOMATIC:2,TRANSLATION_TRIGGER_INLINE:3,TRANSLATION_TRIGGER_INPUT:4,TRANSLATION_TRIGGER_INPUT_ALTERNATIVES:5,TRANSLATION_TRIGGER_SIDE_PANEL:6,TRANSLATION_TRIGGER_CUSTOMIZATION:7},e.URL_ACTIONS=kr,e.URL_LIST=Dr,e.UiFunction={UI_FUNCTION_UNSPECIFIED:0,UI_FUNCTION_INPUT_TRANSLATION:1,UI_FUNCTION_INLINE_TRANSLATION:2,UI_FUNCTION_FULL_PAGE_TRANSLATION:3},e.UiLocation={UI_LOCATION_UNSPECIFIED:0,UI_LOCATION_INPUT_TRANSLATION_TRIGGER_ICON:1,UI_LOCATION_INLINE_TRANSLATION_TRIGGER_ICON:2,UI_LOCATION_INLINE_TRANSLATION_SETTING_POPUP:3,UI_LOCATION_INPUT_TRANSLATION_SETTING_POPUP:4,UI_LOCATION_SETTINGS_PAGE_FPT:5,UI_LOCATION_SETTINGS_PAGE_READING:6,UI_LOCATION_SETTINGS_PAGE_WRITING:7,UI_LOCATION_FPT_HIDE_MODAL:8,UI_LOCATION_INPUT_TRANSLATION_SETTINGS_ICON:9,UI_LOCATION_INLINE_TRANSLATION_SETTINGS_ICON:10,UI_LOCATION_INPUT_TRANSLATION_READ_MORE_LINK:11,UI_LOCATION_INLINE_TRANSLATION_READ_MORE_LINK:12,UI_LOCATION_FPT_TRANSLATION_READ_MORE_LINK:13,UI_LOCATION_EXTENSION_HUB_TOGGLE_SWITCH:14,UI_LOCATION_HUB_CUSTOMIZE_SHORTCUT:15,UI_LOCATION_HUB_LOGIN_BUTTON:16,UI_LOCATION_HUB_UPGRADE_TO_PRO_LINK:17,UI_LOCATION_HUB_TRY_PRO_LINK:18,UI_LOCATION_SETTINGS_PAGE_CUSTOMIZE_SHORTCUT_BUTTON:19,UI_LOCATION_HUB_FPT_ENABLE_CHECKBOX:20,UI_LOCATION_HUB_FPT_DISABLE_CHECKBOX:21,UI_LOCATION_DEEPL_WRITE_TRIGGER_ICON:22,UI_LOCATION_HUB_VIEW_INTEGRATIONS:23,UI_LOCATION_HUB_CLOSE_CUSTOMIZATIONS_WIDGET:24,UI_LOCATION_GMAIL_ONBOARDING_POPUP:25,UI_LOCATION_GMAIL_ONBOARDING_ICON:26,UI_LOCATION_GMAIL_CHAR_LIMIT_POPUP_LOGIN:27,UI_LOCATION_GMAIL_FEEDBACK_SURVEY:28,UI_LOCATION_GSLIDES_FEEDBACK_SURVEY:29,UI_LOCATION_GSLIDES_CHAR_LIMIT_POPUP_LOGIN:30,UI_LOCATION_ZENDESK_TRY_PRO_LINK:31,UI_LOCATION_SETTINGS_PAGE_INTEGRATIONS:32,UI_LOCATION_ONBOARDING_SIGN_UP:33,UI_LOCATION_ONBOARDING_SKIP_SIGNUP:34,UI_LOCATION_ONBOARDING_LOGIN:35,UI_LOCATION_ONBOARDING_SEE_ALL_INTEGRATIONS:36,UI_LOCATION_INPUT_IMPROVE_TRIGGER_ICON:37,UI_LOCATION_ICON_TOGGLE_IN_HUB_TRANSLATOR:38,UI_LOCATION_ICON_TOGGLE_IN_HUB_WRITE:39,UI_LOCATION_MANAGE_ICON_SETTINGS:40,UI_LOCATION_WRITE_LANGUAGE_SWITCHED_IN_HUB:41,UI_LOCATION_WRITE_LANGUAGE_SWITCHED_IN_SETTINGS:42,UI_LOCATION_SIDE_PANEL_ICON_ON_WEBSITE:43,UI_LOCATION_HUB_ONBOARDING_LINK:44,UI_LOCATION_INLINE_SELECTION_TRANSLATE_ICON:45,UI_LOCATION_INLINE_SELECTION_WRITE_ICON:46,UI_LOCATION_INPUT_SELECTION_TRANSLATE_ICON:47,UI_LOCATION_INPUT_SELECTION_WRITE_ICON:48,UI_LOCATION_INLINE_SELECTION_TRIGGER_OFF_ICON:49,UI_LOCATION_INPUT_SELECTION_TRIGGER_OFF_ICON:50,UI_LOCATION_SIDE_PANEL_LOGIN_BUTTON:51,UI_LOCATION_SIDE_PANEL_SETTINGS_BUTTON:52,UI_LOCATION_SIDE_PANEL_LOGOUT_BUTTON:53,UI_LOCATION_SIDE_PANEL_UPGRADE_BUTTON:54,UI_LOCATION_SIDE_PANEL_TRANSLATOR_TAB:55,UI_LOCATION_SIDE_PANEL_TRANSLATOR_TARGET_LANG:56,UI_LOCATION_SIDE_PANEL_TRANSLATOR_SOURCE_LANG:57,UI_LOCATION_SIDE_PANEL_TRANSLATION_DIR_INDICATOR:58,UI_LOCATION_SIDE_PANEL_SOURCE_TEXT_FIELD:59,UI_LOCATION_SIDE_PANEL_TARGET_TEXT_FIELD:60,UI_LOCATION_SETTING_USE_ADVANCED_WINDOW_FOR_INPUT_FIELDS:61,UI_LOCATION_REVIEW_WINDOW_CLOSE_ICON:62,UI_LOCATION_REVIEW_WINDOW_TRANSLATE_ALTERNATIVES:63,UI_LOCATION_REVIEW_WINDOW_WRITE_ALTERNATIVES:64},e.UpgradeNotificationAction={UPGRADE_NOTIFICATION_ACTION_UNSPECIFIED:0,UPGRADE_NOTIFICATION_ACTION_LOGIN:1,UPGRADE_NOTIFICATION_ACTION_SIGNUP:2,UPGRADE_NOTIFICATION_ACTION_PRO_TRIAL:3},e.UpgradeNotificationType={UPGRADE_NOTIFICATION_TYPE_UNSPECIFIED:0,UPGRADE_NOTIFICATION_TYPE_ANONYMOUS_USER_LIMIT_EXCEEDED:1,UPGRADE_NOTIFICATION_TYPE_FREE_ACCOUNT_LIMIT_EXCEEDED:2,UPGRADE_NOTIFICATION_TYPE_WRITE_ANONYMOUS_USER_LIMIT_EXCEEDED:3,UPGRADE_NOTIFICATION_TYPE_WRITE_FREE_ACCOUNT_LIMIT_EXCEEDED:4},e.UserType={USER_TYPE_UNSPECIFIED:0,USER_TYPE_NOT_LOGGED_IN:1,USER_TYPE_LOGGED_IN_PRO:2,USER_TYPE_LOGGED_IN_FREE:3},e.WhatsappTranslatorType={WHATSAPP_TRANSLATOR_TYPE_UNSPECIFIED:0,WHATSAPP_TRANSLATOR_TYPE_MESSAGE:1,WHATSAPP_TRANSLATOR_TYPE_CHAT:2},e.WriteStyles={WRITE_STYLES_UNSPECIFIED:0,WRITE_STYLES_SIMPLE:1,WRITE_STYLES_BUSINESS:2,WRITE_STYLES_ACADEMIC:3,WRITE_STYLES_CASUAL:4,WRITE_STYLES_ENTHUSIASTIC:5,WRITE_STYLES_FRIENDLY:6,WRITE_STYLES_CONFIDENT:7,WRITE_STYLES_DIPLOMATIC:8},e.WriteTrigger={WRITE_TRIGGER_UNSPECIFIED:0,WRITE_TRIGGER_INLINE:1,WRITE_TRIGGER_INPUT:2,WRITE_TRIGGER_INPUT_ALTERNATIVES:3,WRITE_TRIGGER_CUSTOMIZATION:4},e.cacheClientState=VE,e.cacheExperiments=jE,e.checkCommandShortcuts=Cb,e.checkLimitsOrThrow=NI,e.clearLoginTimestamp=tS,e.commandListener=dD,e.connectDatabase=ME,e.createBatches=LI,e.createITATranslatorSession=qx,e.createITAWriteSession=_k,e.createInteractiveTranslation=sD,e.createInteractiveWrite=cD,e.createRequestPayload=tD,e.deleteAuthTokens=YE,e.deletePortSettings=Vx,e.deleteTranslationPortSettings=JO,e.deleteWritePortSettings=KO,e.determineEventType=e=>{if(e.textChangeOperation)return VO.TEXT_CHANGE;if(e.setPropertyOperation){if(FO in e.setPropertyOperation)return VO.TARGET_LANGUAGE_CHANGE;if(jO in e.setPropertyOperation)return VO.FORMALITY_CHANGE;if(WO in e.setPropertyOperation)return VO.WRITE_STYLE_CHANGE}},e.determineProcessor=aD,e.disposeTranslateSession=Xx,e.disposeWriteSession=Ik,e.doesContextQualifyForAutologout=kk,e.fetchClientState=MS,e.fetchClientStateWeb=XS,e.fetchExperimentOverrides=_S,e.fetchExperiments=mS,e.fetchGDocsSentenceAlternatives=tb,e.fetchGDocsWordAlternatives=nb,e.fetchTermbases=ab,e.generateOriginatingSessionMapping=xk,e.getAccessToken=FS,e.getAccessTokenExpirationInMs=function(e){return 1e3*h(e).exp},e.getAccountID=sS,e.getActiveTermbase=bA,e.getActiveTranslator=Bx,e.getActiveWriter=vk,e.getAllServiceLevels=pS,e.getAuthTokens=XE,e.getBrowserInstanceId=iS,e.getCachedClientState=FE,e.getCachedExperiments=WE,e.getCharacterLimit=uS,e.getClientState=lA,e.getClientStateWeb=uA,e.getCurrentExperiments=function(){return r(this,void 0,void 0,(function*(){try{const e=yield $E(UE,kE);return e&&e.meta&&e.data?e.data:[]}catch(e){return[]}}))},e.getDapAlternativesSegmentationType=VT,e.getDapApiConfig=lT,e.getDapApiExtensionOpenedFromId=pT,e.getDapApiInlinePositionType=yT,e.getDapApiLingueeError=dT,e.getDapApiLogoClickedFromId=gT,e.getDapApiNotificationType=hT,e.getDapApiSettingType=TT,e.getDapApiShortcutTypes=mT,e.getDapApiTranslationTriggerId=uT,e.getDapApiUiActionEventId=_T,e.getDapApiUiFunctionality=vT,e.getDapApiUiLocation=fT,e.getDapApiWriteTriggerId=BT,e.getDapContentProcessingModeType=GT,e.getDapErrorCategory=JT,e.getDapExtensionDisabledReason=WT,e.getDapExtensionInstallType=jT,e.getDapExtensionOnInstalledReason=qT,e.getDapGmailActionType=UT,e.getDapInputReplacementType=HT,e.getDapItaErrorType=XT,e.getDapItaSessionEventType=zT,e.getDapItaSessionType=YT,e.getDapItaUserInteractionType=KT,e.getDapLoginTrigger=PT,e.getDapLogoutTrigger=CT,e.getDapNicheIntegration=AT,e.getDapOnboardingExternalLink=ET,e.getDapOnboardingStepChangeTrigger=ST,e.getDapOriginStore=IT,e.getDapServiceLevel=DT,e.getDapSessionType=FT,e.getDapSessionTypeTrigger=xT,e.getDapUidCookieValue=gS,e.getDapUpgradeNotificationAction=$T,e.getDapUpgradeNotificationType=MT,e.getDapWhatsAppTranslator=kT,e.getDictionary=Bb,e.getExperiments=wb,e.getExperimentsDataForTracking=cS,e.getExternalUrl=Ur,e.getGlossaryProperties=jx,e.getInlineListenContext=NT,e.getInlineListenTextKind=wT,e.getInstallationId=ZE,e.getItaError=BA,e.getRequestSize=CI,e.getSecondsSinceLastLogin=nS,e.getSessionType=QE,e.getSettings=qE,e.getSupportedVoices=$b,e.getTermbases=II,e.getTranslateFormality=RT,e.getTranslationSessionSettings=HO,e.getUserInfo=oS,e.getUserState=Rb,e.getUserType=lS,e.getUsersCharacterLimit=dA,e.getWebUserInfoData=ny,e.getWebsiteIdFromWebsite=bT,e.getWriteSessionSettings=XO,e.getWriteStyle=OT,e.handleJobs=SI,e.handleSuccessfulGmailTranslationsCount=aA,e.handleSuccessfulGslidesTranslationsCount=sA,e.handleSuccessfulTranslationsCount=Mb,e.handleSuccessfulZendeskTranslationsCount=Ub,e.improveWriting=nA,e.initializeAutoLogin=wk,e.isPayloadNecessaryForUIEvent=LT,e.isProServiceLevel=dS,e.isUserLoggedIn=KE,e.jsonrpc_callFunction=qS,e.jsonrpc_composeMethodCallDict=ty,e.listenToPerodicCodeExecution=hD,e.login=$S,e.loginRequest=Nb,e.loginViaCookieExchange=Pk,e.logout=VS,e.logoutRequest=Ob,e.manipulateClientState=RA,e.markLoginTimestamp=eS,e.messageListener=lD,e.messageListenerInner=uD,e.onAuthCookieAdded=Lk,e.onAuthCookieRemoved=Ck,e.onContextMenuClicked=fD,e.onInstalled=gD,e.onPortDisconnect=vD,e.onStorageChanged=mD,e.openInternalPage=Xk,e.performGDocsProcessContent=eb,e.performGDocsSplitText=ZI,e.portListener=_D,e.processContent=yI,e.processOAuthTokenSet=GS,e.protobufPackage="deepl.pb.analytics.browser_extension",e.qualifiesForExplicitLogin=Nk,e.readData=$E,e.rebuildGDocsSentenceFromPartialTranslation=rb,e.redirectToExternalURL=Mr,e.requestAlternatives=IA,e.requestDictionary=JS,e.resetGlossary=zE,e.selectTranslateAlternative=Qx,e.selectWriteAlternative=bk,e.sendDAPAlternativeSelected=mE,e.sendDAPAlternativesEvent=pE,e.sendDAPBrowserInstanceIdCreated=tE,e.sendDAPCloseInlineHighlighter=Vy,e.sendDAPCloseInputHighlighter=Uy,e.sendDAPContentScriptErrorData=sy,e.sendDAPCustomizationEnabled=sE,e.sendDAPDeeplWriteEvent=nE,e.sendDAPDetectLanguage=vy,e.sendDAPDictionaryStatus=Fy,e.sendDAPDisabledDictionaryHover=Wy,e.sendDAPDocTransClick=hy,e.sendDAPErrorData=ay,e.sendDAPExtensionInfo=RE,e.sendDAPExtensionOpened=ly,e.sendDAPFPTHide=wy,e.sendDAPFTPBlockSizeExceeded=function(e){return r(this,void 0,void 0,(function*(){return ry((t=>Object.assign(Object.assign({},t),{eventId:oT.EVENT_ID_FPT_BLOCK_SIZE_EXCEEDED,fptBlockSizeExceededData:{translationData:{sourceLang:e.websiteLanguage,targetLang:e.targetLanguage,sourceLength:e.characterCount},domainName:e.domainName}})))}))},e.sendDAPGDocsMaxCharExceededShown=zy,e.sendDAPGDocsMaxCharExceededTryProClicked=Xy,e.sendDAPGDocsReplaceText=My,e.sendDAPGlossaryEnabledOrDisabled=gE,e.sendDAPGmailCharLimitReached=cE,e.sendDAPIconHover=Ry,e.sendDAPInlineCopy=Ny,e.sendDAPInlineDragStart=Ey,e.sendDAPInlineListen=Oy,e.sendDAPInlinePositionChange=yy,e.sendDAPInlineSettingOpened=my,e.sendDAPInputTranslationInjection=cy,e.sendDAPInstallSuccess=Gy,e.sendDAPInstallationIdCreated=eE,e.sendDAPItaSessionData=CE,e.sendDAPLandingOnSpecificWebsite=xy,e.sendDAPLingueeErrorData=qy,e.sendDAPLoggedIn=oE,e.sendDAPLoggedOut=aE,e.sendDAPLogin=Jy,e.sendDAPLogoClicked=uy,e.sendDAPLogout=Yy,e.sendDAPNotificationViewed=dy,e.sendDAPOnboardingModalShown=Qy,e.sendDAPOnboardingOpenExternalPage=Cy,e.sendDAPOnboardingStepChange=Ly,e.sendDAPOpenDictionarySection=jy,e.sendDAPOpenInlineHighlighter=$y,e.sendDAPOpenInputHighlighter=Dy,e.sendDAPReadMoreClicked=Py,e.sendDAPRecommendToAFriendClick=fy,e.sendDAPReplaceInFieldInfo=LE,e.sendDAPRightClick=Ty,e.sendDAPSeeAlternativesClicked=fE,e.sendDAPSessionStarted=rE,e.sendDAPSettingsChanged=_y,e.sendDAPShortcutUsed=py,e.sendDAPTrackAdsButtonClicked=TE,e.sendDAPTrackAdsShown=yE,e.sendDAPTrackDailyWebsiteUserLoginCheck=AE,e.sendDAPTrackExtensionInstallWithWebsiteUserLoginCheck=bE,e.sendDAPTrackIframeTranslationFailed=vE,e.sendDAPTrackIframeTranslationSuccessful=_E,e.sendDAPTrackLanguageDetectionForTextProcessing=hE,e.sendDAPTrackUpgradeNotificationAction=dE,e.sendDAPTrackUpgradeNotificationClosed=uE,e.sendDAPTrackUpgradeNotificationDisplayed=lE,e.sendDAPTrackWriteTextStylesApplied=SE,e.sendDAPTrackWriteTextStylesChanged=EE,e.sendDAPTrackWriteTextTonesChanged=IE,e.sendDAPTranslateAcceptOrUndoEvent=iE,e.sendDAPTranslationErrorData=iy,e.sendDAPTranslationRequest=oy,e.sendDAPTwitterTweetTranslationFailed=by,e.sendDAPUILocationClicked=Zy,e.sendDAPUiAction=gy,e.sendDAPVoiceOverStops=ky,e.sendDAPWhatsAppMessageTranslated=Sy,e.sendDAPWhatsAppMessageTranslationFailed=Iy,e.sendDAPYoutubeCommentTranslationFailed=Ay,e.sendDAPZendeskCustomizationEvent=By,e.sendDAPZendeskGlossaryConfigOpened=Hy,e.sendDAPtrackSessionType=Ky,e.sendDapFormalitySelected=NE,e.sendDapSidePanelOpened=OE,e.sendDapTrackGetWebsiteUserDataFailed=wE,e.sendNotification=Lb,e.sendSidePanelTranslatorTargetLangChanged=function(e){return r(this,void 0,void 0,(function*(){return ry((t=>Object.assign(Object.assign({},t),{eventId:oT.EVENT_ID_SIDE_PANEL_TRANSLATOR_TARGET_LANG_CHANGED,sidePanelLanguageChangeData:{lang:e}})))}))},e.sendUIInteractionSidePanel=function(e){return r(this,void 0,void 0,(function*(){return ry((t=>Object.assign(Object.assign({},t),{eventId:oT.EVENT_ID_UI_INTERACTION_SIDE_PANEL,sidePanelInteractionData:{uiLocation:fT(e.uiLocation),isSidePanelOpen:e.isSidePanelOpen}})))}))},e.sendUIInteractionSidePanelFails=function(){return r(this,void 0,void 0,(function*(){return ry((e=>Object.assign(Object.assign({},e),{eventId:oT.EVENT_ID_UI_INTERACTION_SIDE_PANEL_FAILS})))}))},e.setAuthTokens=JE,e.setBrowserInstanceId=aS,e.setSidePanelAsDefault=kA,e.setUserInfoFromClientState=rS,e.shouldInformUser=qA,e.splitText=EI,e.splitTextRequest=SA,e.stopSpeech=Vb,e.storageKeys=Iv,e.testClassicApi=vA,e.textToSpeech=Gb,e.trackAdsShown=OA,e.trackAlternativeSelected=EA,e.trackAlternativesEvent=cA,e.trackClickOnAdsButton=NA,e.trackCloseInlineHighlighter=qb,e.trackCloseInputHighlighter=Wb,e.trackCustomizationEnabled=oA,e.trackDeeplWriteEvent=tA,e.trackDetectLanguage=ib,e.trackDictionaryStatus=Hb,e.trackDisabledDictionaryHover=Yb,e.trackDocTransClick=ub,e.trackExtensionOpenedEvent=cb,e.trackFptHide=_b,e.trackGDocsMaxCharExceededTryProClicked=Qb,e.trackGDocsReplaceText=Ab,e.trackGdocsMaxCharExceededShown=Kb,e.trackGlossaryDisabled=mA,e.trackGlossaryEnabled=fA,e.trackGmailCharLimitReached=iA,e.trackIconHover=vb,e.trackIframeTranslationFailed=wA,e.trackIframeTranslationSuccessful=AA,e.trackInlineCopy=Tb,e.trackInlineDragStart=mb,e.trackInlineListen=Eb,e.trackInlinePositionChange=fb,e.trackInlineSettingsOpened=pb,e.trackInputTranslationInjection=sb,e.trackLandingOnWebsite=Db,e.trackLanguageDetectionForTextProcessing=TA,e.trackLingueeErrorData=Xb,e.trackLogoClickedEvent=lb,e.trackOnboardingModalShown=Zb,e.trackOnboardingOpenExternalLink=Ib,e.trackOnboardingStepChange=yb,e.trackOpenDictionarySection=Jb,e.trackOpenInlineHighlighter=jb,e.trackOpenInputHighlighter=Fb,e.trackReadMoreClick=bb,e.trackRecommendToAFriendClick=db,e.trackRightClick=hb,e.trackSeeAlternativesClicked=yA,e.trackSettingChanged=gb,e.trackTranslateAcceptOrUndoEvent=rA,e.trackUILocationClicked=eA,e.trackUiAction=xb,e.trackUpgradeNotificationAction=_A,e.trackUpgradeNotificationClosed=gA,e.trackUpgradeNotificationDisplayed=pA,e.trackUseOfShortcut=Pb,e.trackVoiceOverStops=Sb,e.trackWriteTextStylesApplied=CA,e.trackWriteTextStylesChanged=LA,e.trackWriteTextTonesChanged=PA,e.trackZendeskCustomizationEvent=zb,e.trackZendeskGlossaryOpened=hA,e.translate=BS,e.translateGmailReceivedEmail=JI,e.translateInlineRequest=qI,e.translateInputRequest=BI,e.translateLinkedInPostRequest=XI,e.translateSelection=kb,e.translateTwitterTweetRequest=YI,e.translateWhatsAppMessageRequest=KI,e.translateWhatsAppMessagesRequest=QI,e.translateYouTubeCommentRequest=zI,e.translateZendeskInputRequest=HI,e.translateZendeskMessageRequest=ob,e.triggerImproveInline=jI,e.triggerImproveInput=WI,e.triggerTranslateInline=VI,e.triggerTranslateInput=FI,e.updateDynamicRules=SD,e.updateGlossaryId=Fx,e.updateITAFormality=Yx,e.updateITASourceLanguage=Jx,e.updateITATargetLanguage=Hx,e.updateRequestedLanguage=Tk,e.updateSession=HE,e.updateSourceText=Sk,e.updateStyleVariant=yk,e.updateTranslationSessionSettings=BO,e.updateWriteSessionSettings=zO,e.writeData=GE,e}({});
//# sourceMappingURL=background.js.map
