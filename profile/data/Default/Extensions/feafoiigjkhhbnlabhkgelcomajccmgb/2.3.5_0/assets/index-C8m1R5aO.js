const n={};let l=!1;function R(){l=!0,chrome.runtime.onMessage.addListener((e,t,r)=>{if(e.isSendMessageToBackgroundMessage&&n[e.type]){const s=n[e.type].map(o=>o(...e.args)).pop();return s.then?(s.then(o=>{r(o)}),!0):r(s)}})}const a={};let N=!1;function A(){N=!0,chrome.runtime.onMessageExternal.addListener((e,t,r)=>{var s,o;if((s=t==null?void 0:t.url)!=null&&s.startsWith("https://esuit.dev")&&a[e.type]){const c=a[e.type].map(i=>i(e.args,t)).pop();if(e.callbackFnName&&(o=t.tab)!=null&&o.id){const i=t.tab.id;c&&c.then?c.then(u=>{chrome.scripting.executeScript({target:{tabId:i},world:"MAIN",args:[u??!1,e.callbackFnName],func:(T,p)=>{try{window[p](T)}catch(M){console.error(M)}}})}):chrome.scripting.executeScript({target:{tabId:i},world:"MAIN",args:[c??!1,e.callbackFnName],func:(u,T)=>{try{window[T](u)}catch(p){console.error(p)}}})}return!0}})}async function m(e,...t){if(d()){if(n[e])return n[e].map(r=>r(...t)).pop();throw new Error(`no handler for ${e}`)}return await chrome.runtime.sendMessage({isSendMessageToBackgroundMessage:!0,type:e,args:t})}function P(e,t){return!l&&R(),n[e]=n[e]||[],n[e].push(t),()=>{const r=n.indexOf(t);n.splice(r,1)}}function w(e,t){return!N&&A(),a[e]=a[e]||[],a[e].push(t),()=>{const r=a.indexOf(t);a.splice(r,1)}}function d(){return!!~location.pathname.indexOf("service-worker-loader.js")}var I=(e=>(e[e.FREE=0]="FREE",e[e.BASIC=1]="BASIC",e[e.PREMIUM=2]="PREMIUM",e))(I||{}),O=(e=>(e[e.SUBSCRIPTION=0]="SUBSCRIPTION",e[e.ONETIME_PAYMENT=1]="ONETIME_PAYMENT",e))(O||{}),f=(e=>(e[e.ONE_MONTH=1]="ONE_MONTH",e[e.THREE_MONTH=3]="THREE_MONTH",e[e.SIX_MONTH=6]="SIX_MONTH",e[e.A_YEAR=12]="A_YEAR",e))(f||{}),_=(e=>(e[e.STRIPE=0]="STRIPE",e[e.PAYPAL=1]="PAYPAL",e))(_||{}),g=(e=>(e[e.FACEBOOK=0]="FACEBOOK",e[e.INSTAGRAM=1]="INSTAGRAM",e))(g||{}),h=(e=>(e.SUBSCRIPTION="paypal_subscription",e.PAYMENT="paypal_payment",e))(h||{}),S=(e=>(e.RETURN_PAGE="RETURN_PAGE",e.RETURN_EXT="RETURN_EXT",e.RETURN_EXT_LOCAL="RETURN_EXT_LOCAL",e))(S||{});export{S as M,I as T,m as k,P as m,w};
