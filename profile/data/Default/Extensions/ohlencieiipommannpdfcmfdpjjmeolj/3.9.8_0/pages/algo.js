(()=>{"use strict";(()=>{document;const e=(window.location.host.split(":")[0].split("www.").pop(),{title:"",favicon:"",userSettings:{keepStyle:!1,showHiddenContent:!1,bgImageUrlSupport:"default",fallbackStrategy:"default",imagesSize:"full-size",imageDisplayStyle:"block"},content:"",contentTextWithTitleAndUrl:"",contentTextLength:0,hasContent:!1,author:"",pubDate:"",customHeader:"",customFooter:"",copyright:"",platform:"unknown",hasPasswordField:!1,description:"",dir:"ltr",lang:"en"});function t(e){try{const t=e.id?`#${e.id}`:"",r=e.className?`.${e.className}`:"";return`${e.tagName.toLowerCase()}${t}${r}`}catch(e){return""}}function r(e){const r=e.readability?e.readability.contentScore.toFixed(2):"undefined";return t(e)+" :: Score - "+r}const o=new class{configure(e){this.enabled="development"===e.config.environment||e.config.enableLog||e.config.urls.page.indexOf("pfdebug=1")>=0}log(...e){this.enabled&&console.log(...e)}error(...e){this.enabled&&console.error(...e)}time(e){this.enabled&&console.time(e)}timeEnd(e){this.enabled&&console.timeEnd(e)}constructor(){var e,t;t=void 0,(e="enabled")in this?Object.defineProperty(this,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):this[e]=t,this.enabled=!0}};function n(e,t){return e.nodeType===Node.ELEMENT_NODE&&(e.classList?e.classList.contains(t):(e.getAttribute("class")||"").split(/\s/).indexOf(t)>=0)}function i(e,t){e.nodeType===Node.ELEMENT_NODE&&(n(e,t)||(e.classList?e.classList.add(t):e.className=(e.className||"")+" "+t))}function a(e,t){if(!e)return;const r=Array.prototype.slice.call(e.childNodes);for(let e=0,o=r.length;e<o;++e)t(r[e])}function s(e,t){for(const r in t.dataset)e.dataset[r]=t.dataset[r]}function l(e){return["SCRIPT","STYLE","NOSCRIPT","APPLET","EMBED","OBJECT","PARAM","IFRAME"].indexOf(e.nodeName)<0}function c(e){var t,r;return null!==(r=null===(t=e.textContent)||void 0===t?void 0:t.trim())&&void 0!==r?r:""}function d(e){let t=0;return e.getAttribute("data-pf_rect_width")&&(t=parseInt(e.getAttribute("data-pf_rect_width")||"0",10)),(null===t||0===t||"number"!=typeof t||isNaN(t))&&(t=e.getBoundingClientRect().width),t}function h(e){return/icon/i.test(e.getAttribute("class")||"")?21:1e3}const u=1e6;function m(e){const t=e.getAttribute("viewBox");if(t){const e=t.split(" ");if(4===e.length)return{width:parseInt(e[2],10),height:parseInt(e[3],10)}}return{width:u,height:u}}function p(e,t,r){if(e.startsWith("data:"))return r(e);const o=function(){let e=(new Date).getTime(),t="undefined"!=typeof performance&&performance.now&&1e3*performance.now()||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(r=>{let o=16*Math.random();return e>0?(o=(e+o)%16|0,e=Math.floor(e/16)):(o=(t+o)%16|0,t=Math.floor(t/16)),("x"===r?o:3&o|8).toString(16)}))}();window.__pfImageToBase64Hooks[o]=function(t){"success"===t.state?r(t.data):r(e)},t.postMessage("root","PfImageToBase64",{id:o,url:e})}const g="__DOM_SCORER_ELEMENT__";var f=function(e){return e.Break="BREAK",e.DoNothing="DO_NOTHING",e.BreakTraversal="BREAK_TRAVERSAL",e}({});const y={words:new Map,links:new Map,uniqWordsCount:0,uniqLinksCount:0,tagsCount:0,hTagsCount:0,hasContentTag:!1,hasImage:!1,hasTable:!1},b={contentPoints:0,headerPoints:0,footerPoints:0,inArticle:!1},v={common:y,headerFooter:b,relatedArticle:{wordsCount:0,recipeWordsCount:0,insideLinkWordsCount:0,contentTagsCount:0,imgTagsCount:0,aTagsCount:0,hasLongTextNode:!1,isDataTag:!1,hasIgnoreClasses:!1,hasInlineLink:!1,isInlineLink:!1},shareScore:{imgsCount:0,aCount:0,hasShareClass:!1,hasShareImage:!1},emptyTags:{skipTag:!1,parentSkipTag:!1},dateScore:{score:0}};function S(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class C{static toElem(e){return e instanceof C?e:e[g]}get parent(){return this._parent}get depth(){return this._depth}get skipped(){return this._skipped}get scores(){return this._scores}get depthLayerIndex(){return this._depthLayerIndex}get depthLayer(){return this._depthLayer}get countChildren(){return this.children.length}get prev(){return this._prev}get next(){return this._next}set depthLayer(e){this._depthLayer=e,this._depthLayerIndex=e.length-1}isWrapper(){return 0!==this.children.length&&this.children.reduce(((e,t)=>e+t.scores.common.words.size),0)===this.scores.common.words.size}hasId(e){if(!this.isElement())return!1;const t=this.node instanceof Element?this.node:null;return!!t&&(t.getAttribute("id")||"").split(/\s/).indexOf(e)>=0}hasClass(e){if(!this.isElement())return!1;const t=this.node instanceof Element?this.node:null;return!!t&&(t.getAttribute("class")||"").split(/\s/).indexOf(e)>=0}hasTagName(e){if(!this.isElement())return!1;const t=this.node instanceof Element?this.node:null;return!!t&&t.tagName.toLowerCase()===e.toLowerCase()}nameMatches(e){if(!this.isElement())return!1;const t=this.node instanceof Element?this.node:null;if(!t)return!1;const r=t.getAttribute("id")||"",o=t.getAttribute("class")||"";return!![t.tagName,r,o].join(" ").match(e)}className(){if(this.isElement()){const e=this.node instanceof Element?this.node:null;return e&&e.getAttribute("class")||""}return""}isElement(){return this.node.nodeType===Node.ELEMENT_NODE}forEachChild(e,t=!1){for(let r=0,o=this.children.length;r<o&&(!0!==t&&this.children[r]._skipped||e(this.children[r],r)!==f.Break);++r);}keep(){if(this.markSkip(),this._parent){let e=this._parent;for(;e;)e.keptChildren.push(this),e=e._parent}}skip(){this.markSkip()}remove(){if(!this._skipped&&(this.markSkip(),this.node.parentNode&&this.node!==this.tree.root.node&&"BODY"!==this.node.nodeName))if(this.keptChildren.length){var e;const t=this.tree.createElement("DIV");null===(e=this._parent)||void 0===e||e.replaceChild(t,this);for(let e=0,r=this.keptChildren.length;e<r;++e)t.appendChild(this.keptChildren[e])}else this.node.parentNode.removeChild(this.node)}lastChild(){return this.children[this.children.length-1]}appendChild(e){if(e instanceof Node&&e.nodeType!==Node.ELEMENT_NODE)return void this.node.appendChild(e);const t=C.toElem(e),r=this.lastChild();r&&(r._next=t,t._prev=r),t._depth=this._depth+1,t._parent&&t._parent.children.length&&t._parent.children.splice(t._parent.children.indexOf(t),1),t._parent=this,this.children.push(t),this.node.appendChild(t.node)}replaceChild(e,t){const r=C.toElem(e),o=C.toElem(t);r._parent=this,r._depth=this._depth+1,r._scores=o._scores,r._skipped=o._skipped,r.keptChildren=o.keptChildren,r.children=o.children,r._prev=o._prev,r._next=o._next,o._parent=null,o._depth=0,o._prev=null,o._next=null,o.children=[];const n=this.children.indexOf(o);n>=0?this.children[n]=r:this.children.push(r),this.node.replaceChild(r.node,o.node)}addChild(e){this.children.push(e)}childAt(e){return this.children[e]}addScore(e,t){this._scores[e]=t}nodeToElement(){return this.node instanceof Element?this.node:null}contains(e){return this.node.contains(e)}markSkip(){this._parent&&(this._skipped=!0)}constructor(e){S(this,"keptChildren",void 0),S(this,"children",void 0),S(this,"_prev",void 0),S(this,"_next",void 0),S(this,"_scores",void 0),S(this,"_parent",void 0),S(this,"_depth",void 0),S(this,"_skipped",void 0),S(this,"_depthLayer",void 0),S(this,"_depthLayerIndex",void 0),S(this,"node",void 0),S(this,"tree",void 0),S(this,"hasScore",void 0),this.node=e.node,this.node[g]=this,this.tree=e.tree,this.hasScore=!1,this.keptChildren=[],this.children=[],this._prev=e.prev||null,this._next=e.prev?this:null,this._depthLayer=[],this._depthLayerIndex=-1,this._parent=void 0===e.parent?null:e.parent,this._depth=e.depth||0,this._scores=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},o=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),o.forEach((function(t){S(e,t,r[t])}))}return e}({},v),this._skipped=!1}}class w{run(e){"medium"===this.pfData.config.platform?this.processMediumSpecificElements():"wsj"===this.pfData.config.platform&&this.processWsjSpecificElements();const t=document.body.querySelectorAll("script, link, style, noscript, object, embed, .comment-list");for(let e=t.length-1;e>=0;--e)t[e].remove();this.replaceEmbeddedYoutube(e);const r=document.querySelectorAll('iframe:not(.twitter-tweet-rendered):not([src*="https://www.facebook.com/plugins/page.php"])');for(let e=r.length-1;e>=0;--e)r[e].closest(".twitter-tweet-rendered")||r[e].remove();const n=document.querySelectorAll("iframe.twitter-tweet-rendered, .twitter-tweet-rendered iframe, pf-iframe.twitter-tweet-rendered, .twitter-tweet-rendered pf-iframe");for(let e=n.length-1;e>=0;--e){const t=n[e],r=t.getAttribute("data-pf_rect_width"),o=t.getAttribute("data-pf_rect_height"),i=t;r&&(i.width=r),o&&(i.height=o)}this.fixSvgUseTags();try{return this.fixCanvases(),this.fixInlineSvgs(),Promise.resolve()}catch(e){return o.error(e),Promise.reject()}}postProcess(){"9to5mac"===this.pfData.config.platform&&this.process9to5MacSpecificElements();const e=document.querySelector("#js-bubble");(null==e?void 0:e.parentElement)&&e.parentElement.remove()}replaceEmbeddedYoutube(e){const t="https://www.youtube.com/embed/",r=document.querySelectorAll(`pf-iframe[src^='${t}'], iframe[src^='${t}']`);for(let a=0,s=r.length;a<s;++a){var o;const s=r[a],l={id:"",type:"",href:"",thumb:""},c=null===(o=s.getAttribute("src"))||void 0===o?void 0:o.match(new RegExp(`${t}([^?]+)`));if(c){const e=c[1];l.type="video",l.href=`https://youtu.be/${e}`,l.thumb=`https://img.youtube.com/vi/${e}/hqdefault.jpg`}else{var n;const e=null===(n=s.getAttribute("src"))||void 0===n?void 0:n.match(new RegExp(`${t}.*list=([^;&]+)`));if(e){const t=e[1];l.type="playlist",l.href=`https://www.youtube.com/playlist?list=${t}`,l.thumb=`https://img.youtube.com/vi/${t}/hqdefault.jpg`}}if(!l.type)continue;const d=e.tree.createElement("a").nodeToElement();d&&(d.setAttribute("href",l.href),d.setAttribute("data-pf-allow-empty","1"),i(d,"youtube-replace-link"));const h=e.tree.createElement("img").nodeToElement();h&&(h.setAttribute("src",l.thumb),h.setAttribute("pf-restore-src",l.thumb),i(h,"youtube-replace-img"));const u=e.tree.createElement("span").nodeToElement();null==u||u.appendChild(e.tree.createTextNode(l.href).node),d&&h&&u&&(C.toElem(s.parentElement).replaceChild(d,s),d.appendChild(h),d.appendChild(u))}}fixSvgUseTags(){const e=document.querySelectorAll("svg");for(let r=0,o=e.length;r<o;++r){const o=e[r],n=o.querySelectorAll("use");for(let e=0,r=n.length;e<r;++e){const r=n[e],i=r.getAttribute("xlink:href");if(!i||"#"!==i[0]){o.remove();continue}let a=null;try{a=document.querySelector(i)}catch(e){}if(a){const e=Array.from(a.children).map((e=>e.cloneNode(!0)));for(let o=0,n=e.length;o<n;++o){var t;null===(t=r.parentNode)||void 0===t||t.insertBefore(e[o],r)}r.remove()}else o.remove()}}}fixCanvases(){const e=document.getElementsByTagName("canvas"),t=this.pfData.page.canvasDataUrls;for(let o=e.length-1;o>=0;--o){var r;const n=e[o];let i=n.getAttribute("class");i=i||"",i+=" canvas-png";const a=new Image,s=Number(n.getAttribute("pf-dataurl-index")||"0");a.src=t[s],a.setAttribute("class",i),null===(r=n.parentNode)||void 0===r||r.replaceChild(a,n)}}fixInlineSvgs(){const e=document.querySelectorAll("svg");for(let t=e.length-1;t>=0;--t)this.processSvg(e[t])}processSvg(e){const t=function(e){const t=d(e)||u,r=h(e),o=m(e).width||u;return Math.min(t,r,o)}(e),r=function(e){const t=function(e){let t=null;return e.getAttribute("data-pf_rect_height")&&(t=parseInt(e.getAttribute("data-pf_rect_height")||"0",10)),(null===t||0===t||"number"!=typeof t||isNaN(t))&&(t=e.getBoundingClientRect().height),t}(e),r=h(e),o=m(e).height||u;return Math.min(t,r,o)}(e);var o;if(0===t||0===r)return void(null===(o=e.parentNode)||void 0===o||o.removeChild(e));const n=this.scaleImageDimensions(t,r);this.fixSvgAttrs(e,n.width,n.height)}scaleImageDimensions(e,t){let r=e,o=t;if(r>this.pfData.config.maxImageWidth){const e=this.pfData.config.maxImageWidth/r;r*=e,o*=e}return{width:r,height:o}}fixSvgAttrs(e,t,r){e.getAttribute("version")||e.setAttribute("version","1.1"),e.getAttribute("xmlns")||e.setAttribute("xmlns","http://www.w3.org/2000/svg");try{e.setAttribute("width",t.toString()),e.setAttribute("height",r.toString())}catch(e){}}processMediumSpecificElements(){const e=document.querySelectorAll('.js-progressiveMedia-canvas, .js-progressiveMedia-thumbnail, [id^="lo-highlight-meter-"]');for(let t=e.length-1;t>=0;--t)e[t].remove();const t=document.querySelectorAll(".js-progressiveMedia-image");for(let e=t.length-1;e>=0;--e)t[e].classList.remove("hidden-originally")}process9to5MacSpecificElements(){document.querySelectorAll(".container.med.left").forEach((e=>{e.remove()}))}processWsjSpecificElements(){document.querySelectorAll(['[data-testid="byline"]','header[role="banner"]'].join(", ")).forEach((e=>{e.remove()}))}constructor(e){var t,r;r=void 0,(t="pfData")in this?Object.defineProperty(this,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[t]=r,this.pfData=e}}function T(e){return new Promise((t=>{const r=new Image;r.onload=()=>t(!0),r.onerror=()=>t(!1),r.src=e}))}function A(e,t,r=!1){if(!e)return e;if(e.startsWith("javascript:")||e.startsWith("data:"))return e;if(e.startsWith("#"))return e;if(/^https?:\/\//i.test(e))return e;if(null!==e.match(/^[a-z]{1,2}_[a-z0-9]+(?::[a-z]+)?/g)||e.match(/^\d+$/)||e.match(/^\d+&sum=[\da-zA-Z0-9_-]+\s+\d+w$/))return e;if(e.startsWith("//"))return t.protocol+e;{const o=t.protocol+"//"+t.host;return e.startsWith("/")||(e="/"+e),r&&/\.[a-zA-Z0-9]+$/.test(t.pathname)?o+t.pathname.split("/").slice(0,-1).join("/")+e:o+e}}function D(e){return e.replace(/format=\d+w/g,"").replace(/www\./g,"").replace(/[-_]\d{1,4}x\d{1,4}/,"")}function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class k{init(){const e=[],t=document.querySelectorAll("#pf-content img");for(let r=0,o=t.length;r<o;++r){const o=t[r],n=new Promise((e=>{if(o.classList.contains("pf-svg-image")||o.removeAttribute("height"),0===d(o)){const t=()=>{this.layoutImage(o),e()};o.addEventListener("load",t),setTimeout((()=>{this.layoutImage(o),e()}),2e3)}else this.layoutImage(o),e()}));e.push(n)}return Promise.all(e)}setDisplayStyle(){let e="block",t={margin:"1em 0 1em 1.5em",clear:"right",display:"inline-block",float:"right"};["left","right","block","none"].includes(this.pfData.userSettings.imageDisplayStyle)&&(e=this.pfData.userSettings.imageDisplayStyle),"block"===e?t={margin:"1em auto",clear:"both",display:"block",float:"none"}:"none"===e?(t.margin="0",t.float="none",t.display="none"):"left"===e&&(t.margin="1em 1.5em 1em 0",t.float="left");let r="#pf-content img.mediumImage, #pf-content figure.mediumImage {";for(const e in t)r+=`${e}: ${t[e]};`;r+="}",function(e,t){const r=t.getElementsByTagName("body")[0],o=t.createElement("style");o.setAttribute("name","pf-style"),o.sheet?o.sheet.insertRule(e):o.appendChild(t.createTextNode(e)),r.appendChild(o)}(r,document)}layoutImage(e){var t;if("none"===e.getAttribute("data-pf_style_display"))return;const r=d(e),o=e.height;let n;if(0===r)return;if(e.classList.remove("blockImage","mediumImage","smallImage"),n=e.classList.contains("pf-primary-img")||r>this.thresholds.blockImage.width?"blockImage":r<this.thresholds.smallImage.width&&o<this.thresholds.smallImage.height?"smallImage":"mediumImage",e.classList.add(n),e.classList.contains("caption-img")){const t=d(e),r=e.closest(".pf-caption, .wp-caption, .caption, .tr-caption-container");if(t&&1===(null==r?void 0:r.querySelectorAll("img").length)&&(r.style.width=`${t}px`),r&&r.classList.add("pf-caption","flex-width",n,this.resizeImageCssClass),e.classList.contains("thumbimage")){const r=e.closest(".thumbinner");r&&(r.style.width=`${t}px`,r.classList.add("pf-caption","flex-width",n,this.resizeImageCssClass))}}const i=(null===(t=e.parentElement)||void 0===t?void 0:t.tagName.toLowerCase())||"";if(i)if("figure"===i)e.parentElement.classList.add("blockImage");else if("picture"===i){var a;(null===(a=e.parentElement)||void 0===a?void 0:a.parentElement).classList.add("blockImage")}e.style.width=`${r}px`}constructor(e){var t;E(this,"thresholds",{blockImage:{width:369},smallImage:{width:100,height:60}}),E(this,"resizeImageCssClass",void 0),E(this,"pfData",void 0),this.pfData=e,this.resizeImageCssClass="pf-size-"+(null===(t=e.userSettings)||void 0===t?void 0:t.imagesSize.replace("-size","").replace("-images",""))}}function x(e,t,r,o,n,i,a){try{var s=e[i](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(o,n)}function N(e){return function(){var t=this,r=arguments;return new Promise((function(o,n){var i=e.apply(t,r);function a(e){x(i,o,n,a,s,"next",e)}function s(e){x(i,o,n,a,s,"throw",e)}a(void 0)}))}}function I(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const L=["data-ct-lazy","data-ezsrc","data-flickity-lazyload","data-hi-res-src","data-href","data-layzr","data-lazy-src","data-low-res-src","data-mediaviewer-src","data-native-src","data-opt-src","data-orig-src","data-original","data-original-src","data-pagespeed-lazy-src","data-pin-media","data-raw-src","data-runner-src","data-src","data-tf-src","data-wpfc-original-src","datasrc","nitro-lazy-src","original"];class _{proccess(){var e=this;return N((function*(){const t=document.querySelectorAll("#pf-content img");for(let e=0,r=t.length;e<r;++e)t[e].classList.add("flex-width");const r=document.querySelectorAll(".wp-caption img, .caption img, .tr-caption-container img, .thumbinner img.thumbimage");for(let e=0,t=r.length;e<t;++e)r[e].classList.add("caption-img"),r[e].classList.remove("flex-width");return e.convertSourceSrcsetToAbsoluteUrls(),yield e.convertSourceImgToAbsoluteUrls(),e.fixLazyLoadImages(),e.fixResponsiveImages(),e.fixMediumImages(),e.convertImagesToBase64(),e.layoutImages.setDisplayStyle(),e.layoutImages.init()}))()}convertImagesToBase64(){const e=document.querySelectorAll("img");for(let t=0,r=e.length;t<r;++t){const r=e[t];r.getAttribute("src")&&p(r.src,this.messageBus,(e=>{r.src=e}))}}convertSourceSrcsetToAbsoluteUrls(){const e=document.querySelectorAll("picture source[srcset]");for(let t=0,r=e.length;t<r;++t){const r=e[t],o=(r.getAttribute("srcset")||"").split(",").map((e=>A(e.trim(),this.pfData.page.location)));r.setAttribute("srcset",o.join(", "))}}convertSourceImgToAbsoluteUrls(){var e=this;return N((function*(){const t=document.querySelectorAll("img");for(let r=0,o=t.length;r<o;++r){const o=t[r],n=o.getAttribute("src");if(n){let t=A(n,e.pfData.page.location);t.includes(e.pfData.page.location.protocol)&&((yield T(t))||(t=A(n,e.pfData.page.location,!0))),o.setAttribute("src",t)}}}))()}maxSrcset(e){if(!e)return null;const t=e.split(/,\s/),r=t[0].split(" ");let o={src:r[0],width:parseInt(r[1],10)};for(let e=1,r=t.length;e<r;++e){const r=t[e].split(" "),n=r[0],i=parseInt(r[1],10);o.width<i&&(o={src:n,width:i})}return o.src}fixMediumImages(){const e=document.querySelectorAll("img.ix.iy");for(let t=0,r=e.length;t<r;++t)e[t].remove();const t=document.querySelectorAll("img");for(let e=0,r=t.length;e<r;++e){const r=t[e];if(r.src&&/miro\.medium\.com/i.test(r.src)){const e=r.src.split("/"),t=e[e.length-1],o=document.querySelectorAll(`img[src*="${t}"]`);for(let e=0,t=o.length;e<t;++e)o[e]!==r&&o[e].remove();r.src=r.src.replace(/q=\d+/,"q=100").replace(/max\/\d+\//,"max/1200/")}}}fixResponsiveImages(){const e={},t=t=>{const r=t.currentSrc||this.maxSrcset(t.getAttribute("srcset")||"")||t.src;e[r]||(p(r,this.messageBus,(e=>{t.src=e})),t.removeAttribute("srcset"),e[r]=!0)};document.querySelectorAll("img[pf-data-srcset]").forEach((e=>{const r=e.getAttribute("pf-data-srcset")||"";e.setAttribute("srcset",r);const o=e;o.onload=()=>{t(o)},o.onerror=()=>{t(o)}}))}fixLazyLoadImages(){const e=document.querySelectorAll("picture source[data-srcset]");for(let t=0,r=e.length;t<r;++t){const r=e[t];r.getAttribute("srcset")||r.setAttribute("srcset",r.getAttribute("data-srcset")||"")}const t=document.querySelectorAll('img[src=""]:not([srcset],img[data-ct-lazy],img[data-ezsrc],img[data-flickity-lazyload],img[data-hi-res-src],img[data-href],img[data-layzr],img[data-lazy-src],img[data-low-res-src],img[data-mediaviewer-src],img[data-native-src],img[data-opt-src],img[data-orig-src],img[data-original],img[data-original-src],img[data-pagespeed-lazy-src],img[data-pin-media],img[data-raw-src],img[data-runner-src],img[data-src],img[data-tf-src],img[data-wpfc-original-src],img[datasrc],img[nitro-lazy-src],img[original],img.lazyload,img.lazyloaded,img[itemprop="url"],img[loading="lazy"],img[data-load="false"],img.js-progressiveMedia-image,a[data-replace-image],amp-img)');for(let e=0,r=t.length;e<r;++e)t[e].remove();const r=document.querySelectorAll('img[src^="data:"]');for(let e=0,t=r.length;e<t;++e){const t=r[e],o=new Image;o.onload=function(){(this.width<=1||this.height<=1)&&t.removeAttribute("src")},o.src=t.src}const o=document.querySelectorAll("img[data-srcset]");for(let e=0,t=o.length;e<t;++e){const t=o[e];t.getAttribute("srcset")||t.setAttribute("srcset",t.getAttribute("data-srcset")||"")}document.querySelectorAll("button.lightbox").forEach((e=>{const t=C.toElem(e),r=e.querySelector("img");var o;r&&(null===(o=t.parent)||void 0===o||o.replaceChild(C.toElem(r),t))}));const n=document.querySelectorAll('img[data-ct-lazy],img[data-ezsrc],img[data-flickity-lazyload],img[data-hi-res-src],img[data-href],img[data-layzr],img[data-lazy-src],img[data-low-res-src],img[data-mediaviewer-src],img[data-native-src],img[data-opt-src],img[data-orig-src],img[data-original],img[data-original-src],img[data-pagespeed-lazy-src],img[data-pin-media],img[data-raw-src],img[data-runner-src],img[data-src],img[data-tf-src],img[data-wpfc-original-src],img[datasrc],img[nitro-lazy-src],img[original],img.lazyload,img.lazyloaded,img[itemprop="url"],img[loading="lazy"],img[data-load="false"],img.js-progressiveMedia-image,a[data-replace-image],amp-img');for(let e=0,t=n.length;e<t;++e){var i;const t=n[e],r=document.createElement("img"),o=t.getAttribute("src")||"";let c=null;for(let e=0,r=L.length;e<r;++e){const r=this.normalizeDataSrcAttr(t.getAttribute(L[e])||"");if(r&&r.indexOf(";base64,")<0){c=A(r,this.pfData.page.location);break}}if(c=c||t.getAttribute("href"),!c&&this.pfData.page.location.host.match(/yahoo/)){const e=t.getAttribute("orig-style"),r=null==e?void 0:e.match(/(http.*?)\)/);c=e&&r?r[1]:t.getAttribute("src")}if(!c){const e=t.getAttribute("src");c=e===document.location.href?t.getAttribute("pf-orig-src"):e}c&&(c=A(c,this.pfData.page.location));const d=t.getAttribute("pf-data-srcset")||t.getAttribute("data-srcset")||t.getAttribute("srcset");d&&(!c||c.indexOf("data:")>=0||d.indexOf(c)>=0)&&(c=this.maxSrcset(d)||c),r.className=t.className,s(r,t);const h=parseInt(t.getAttribute("width")||"",10),u=parseInt(t.getAttribute("height")||"",10);var a,l;h>1&&(r.width=h),u>1&&(r.height=u),"PICTURE"===(null===(i=t.parentNode)||void 0===i?void 0:i.nodeName.toUpperCase())?null===(a=t.parentNode.parentNode)||void 0===a||a.replaceChild(r,t.parentNode):null===(l=t.parentNode)||void 0===l||l.replaceChild(r,t);const m=()=>{this.layoutImages.layoutImage(r),p(r.src,this.messageBus,(e=>{r.src=e})),r.removeEventListener("load",m)};r.addEventListener("load",m),r.addEventListener("error",(()=>{const e=r.src.replace(/([?&][^=]*={[^}]*})/,"");e!==r.src?r.src=e:r.setAttribute("src",o)})),c?r.src=c:d&&(r.srcset=d)}document.querySelectorAll("amp-iframe").forEach((e=>{const t=e.querySelector("img:first-child");var r;t&&(null===(r=e.parentNode)||void 0===r||r.replaceChild(t,e))}))}normalizeDataSrcAttr(e){if(!e)return"";const t=(e,r)=>{for(const o in e){const n=e[o];if("string"==typeof n&&r(n))return n;if("object"==typeof n)return t(n,r)}return""},r=(e=>{let r={};try{r=JSON.parse(e)}catch(e){return null}return t(r,(e=>/(http(s?):)|([/|.|\w|\s])*\.(?:jpg|gif|png|img)/i.test(e)))})(e);return r||e}constructor(e,t){I(this,"pfData",void 0),I(this,"messageBus",void 0),I(this,"layoutImages",void 0),this.pfData=e,this.messageBus=t,this.layoutImages=new k(e)}}class P{behave(e){const t=e.scores.common.words;return 1===t.size&&(t.get("advertisement")||t.get("ad"))&&e.remove(),f.DoNothing}}class q{behave(e){const t=e.node.textContent||"",r=e.scores.common,o=t.replace(/[\s:]+/g," ").toLowerCase();return this.contentData.author&&o.includes(this.contentData.author.toLowerCase())&&r.uniqWordsCount<10?(e.remove(),f.DoNothing):f.DoNothing}constructor(e){var t,r;r=void 0,(t="contentData")in this?Object.defineProperty(this,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[t]=r,this.contentData=e}}function O(e){return e.trim().toLowerCase().match(/[^|^|\s|$|.|,|!|?|)|(|"|']{2,}/g)||[]}class M{calcScore(e){if(e.node.nodeType===Node.TEXT_NODE&&e.node.parentNode&&l(e.node.parentNode))return this.scoreForText(e.node.textContent||"");let t=this.buildScore({});for(let r=0,o=e.countChildren;r<o;++r){const o=e.childAt(r);t=this.mergeScore(t,o.scores.common)}const r=e.nodeToElement();switch(t.hasContentTag=t.hasContentTag||e.nameMatches(/article|main|body|content/i),t.hasTable=t.hasTable||e.hasTagName("table"),t.tagsCount++,["H1","H2","H3","H4","H5","H6"].indexOf((null==r?void 0:r.tagName)||"")>=0&&t.hTagsCount++,e.node.nodeName){case"IMG":{const e=null==r?void 0:r.getAttribute("alt"),o=null==r?void 0:r.getAttribute("src");t.hasImage=!0,e&&(t=this.mergeScore(t,this.scoreForText(e))),o&&(t=this.mergeScore(t,this.scoreForLink(o)));break}case"A":{const e=null==r?void 0:r.getAttribute("title"),o=null==r?void 0:r.getAttribute("href");e&&(t=this.mergeScore(t,this.scoreForText(e))),o&&(t=this.mergeScore(t,this.scoreForLink(o)));break}}return t}scoreForText(e){const t=new Map,r=O(e);for(let e=0,o=r.length;e<o;++e){const o=r[e];t.set(o,(t.get(o)||0)+1)}return this.buildScore({words:t})}scoreForLink(e){const t=e.match(/^https?:\/\/([^.?]+\.)*([^.?]+\.[^./?]+)\//),r=new Map;return t&&r.set(t[2].toLowerCase(),1),this.buildScore({links:r})}mergeMapsScore(e,t){const r=new Map([...e]);for(const[e,o]of t)r.set(e,(r.get(e)||0)+o);return r}mergeScore(e,t){const r=this.buildScore({});return r.words=this.mergeMapsScore(e.words,t.words),r.links=this.mergeMapsScore(e.links,t.links),r.uniqLinksCount=r.links.size,r.uniqWordsCount=r.words.size,r.hasContentTag=e.hasContentTag||t.hasContentTag,r.hasImage=e.hasImage||t.hasImage,r.hasTable=e.hasTable||t.hasTable,r.tagsCount=e.tagsCount+t.tagsCount,r.hTagsCount=e.tagsCount+t.hTagsCount,r}buildScore(e){const t=e.words||new Map,r=e.links||new Map;return{words:t,links:r,uniqWordsCount:t.size,uniqLinksCount:r.size,tagsCount:e.tagsCount||0,hTagsCount:e.hTagsCount||0,hasContentTag:e.hasContentTag||!1,hasImage:e.hasImage||!1,hasTable:e.hasTable||!1}}}function B(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class F{behave(e){const t=e.scores.dateScore;return this.containsPublishDate(e)&&t.score>10?(e.remove(),f.DoNothing):f.DoNothing}calcScore(e){const t=e.node.textContent||"";let r=0;for(const e of this.datePatterns)if(e.test(t)){r+=30;break}return t.length<100&&(r+=5),t.length>100&&(r-=30),/^\s*(?:published|date|posted|updated)/i.test(t)&&(r+=5),{score:r<0?0:r}}containsPublishDate(e){const t=(e.node.textContent||"").split(/(?=[A-Z])/).join(" ").replace(/\s+/g," ");return this.datePatterns.some((e=>{const r=t.match(e);if(!r||!this.contentData.pubDate)return!1;try{const e=new Date(r[0]),t=new Date(this.contentData.pubDate);return!isNaN(e.getTime())&&!isNaN(t.getTime())&&e.getDay()===t.getDay()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}catch(e){return!1}}))}constructor(e){B(this,"datePatterns",[/\b\d{1,2}[./-]\d{1,2}[./-]\d{2,4}\b/,/\b\d{4}[/-]\d{1,2}[/-]\d{1,2}\b/,/\b(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)[a-z]* \d{1,2},? \d{4}\b/i,/\b\d{1,2} (?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)[a-z]* \d{4}\b/i,/\b(?:January|February|March|April|May|June|July|August|September|October|November|December) \d{1,2},? \d{4}\b/i,/\bPublished:?\s+.+?\d{4}\b/i,/\bDate:?\s+.+?\d{4}\b/i,/\bPosted:?\s+.+?\d{4}\b/i,/\b(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Sept|Oct|Nov|Dec)[.]? \d{1,2},? \d{4}(?:\s+\d{1,2}:\d{2}\s*(?:am|pm))?\b/i]),B(this,"contentData",void 0),this.contentData=e}}class H{behave(e){const t="pf-br-replacement";if(e.nameMatches(t))return f.DoNothing;const r=[];let o=0,n=0;const i=[];e.forEachChild(((e,t)=>(i.push(e),this.isBreak(e)?(0===n&&(o=t),n++):n>=2?(r.push([o,t]),n=0):n=0,f.DoNothing)),!0),n>=2&&r.push([o,i.length-1]);const a=[];for(let e=0,t=r.length;e<t;++e){const t=r[e];t[0]!==t[1]&&a.push(t)}let s=0;for(let r=0,o=a.length;r<o;++r){var l;const o=a[r],n=e.tree.createElement("p");null===(l=n.nodeToElement())||void 0===l||l.setAttribute("class",t);for(let e=s;e<o[0];++e){const t=i[e];t.node&&t.node.parentNode&&(n.parent||t.parent.replaceChild(n,t),n.appendChild(t))}for(let e=o[0];e<o[1];++e)this.isBreak(i[e])&&i[e].remove();s=o[1]}return f.DoNothing}isBreak(e){const t=e.nodeToElement();return!!t&&("BR"===t.tagName||!(e.scores.common.hasImage||0!==e.scores.common.words.size||!e.isElement()||!t.querySelector("br")))}}class R{behave(e){var t,r;const o=this.calcScore(e);return e.addScore("emptyTags",o),e.scores.common.hasImage||0!==e.node.childNodes.length||o.skipTag||o.parentSkipTag||""!==(null===(t=e.node.textContent)||void 0===t?void 0:t.trim())||e.node.nodeType===Node.ELEMENT_NODE&&(null===(r=e.nodeToElement())||void 0===r?void 0:r.getAttribute("data-pf-allow-empty"))||e.remove(),f.DoNothing}calcScore(e){const t=e.nodeToElement();if(e.node.nodeType!==Node.ELEMENT_NODE||!t)return{skipTag:!1,parentSkipTag:!1};const r=t.tagName.toUpperCase();return{skipTag:{I:!0,SPAN:!0,TD:!0,TH:!0}[r]||!1,parentSkipTag:{AREA:!0,BASE:!0,COL:!0,COMMAND:!0,EMBED:!0,HR:!0,IMG:!0,INPUT:!0,KEYGEN:!0,LINK:!0,META:!0,PARAM:!0,SOURCE:!0,TRACK:!0,WBR:!0,BR:!0,"TWITTER-WIDGET":!0,IFRAME:!0,PRE:!0,SVG:!0}[r]||e.parent&&e.parent.scores.emptyTags.parentSkipTag||!1}}}class j{behave(e){const t=e.nodeToElement();if(t&&t.tagName&&["H1","H2","H3","H4","H5","H6"].indexOf(t.tagName)>=0)return f.DoNothing;const r=e.scores.headerFooter,o=e.parent&&e.parent.scores.headerFooter||b;if(r.inArticle=o.inArticle||e.hasTagName("article")||!1,r.inArticle)return f.DoNothing;const n=this.findLikelyContent(e),i=this.findCandidateBy(e,"headerPoints"),a=this.findCandidateBy(e,"footerPoints");return i&&n!==i&&i.scores.common.tagsCount>3&&!this.isPartOfTable(i)&&!this.isHTagWrapper(i)&&i.remove(),a&&n!==a&&a.scores.common.tagsCount>3&&a.remove(),f.DoNothing}calcScore(e){let t=e.scores.common.uniqWordsCount;return e.scores.common.hasContentTag&&(t+=1e6),{headerPoints:this.calcPointsFor(e,"header",/head/i),footerPoints:this.calcPointsFor(e,"footer",/foot/i),contentPoints:t,inArticle:!1}}findLikelyContent(e){let t=null,r=10;return e.forEachChild((e=>{const o=e.scores.headerFooter,n=o.contentPoints-o.footerPoints-o.headerPoints;return r<=n&&(t=e,r=n),f.DoNothing})),t}findCandidateBy(e,t){let r=null;for(let o=0,n=e.countChildren;o<n;++o){const n=e.childAt(o);if(!(n.scores.headerFooter[t]<=0)){if(r)return null;r=n}}return r}isPartOfTable(e){var t;const r=(null===(t=e.nodeToElement())||void 0===t?void 0:t.tagName)||"";return e.scores.common.hasTable||["TABLE","THEAD","TBODY","TR","TH"].indexOf(r)>=0}isHTagWrapper(e){return 1===e.scores.common.hTagsCount&&e.scores.common.tagsCount<50}calcPointsFor(e,t,r){let o=0;return e.hasTagName(t)?o=4:e.hasId(t)?o=3:e.hasClass(t)?o=2:e.nameMatches(r)&&(o=1),o}}class W{mark(e,t){const r=e.nodeToElement();(e.hasTagName("A")&&(null==r?void 0:r.getAttribute("name"))||e.nameMatches(/copyright|delete-no|delete-off|pf-author|print-content|pf-date|pf-title|pf-footer|print-header|print-footer|print-only|print-yes|pf-content/i)||t.mustKeepSelectors&&(null==r?void 0:r.matches)&&(null==r?void 0:r.matches(t.mustKeepSelectors.value)))&&e.keep()}}const z=Object.freeze(["archive","bookmark","share","login","aside","combx","comment","contact","foot","footer","footnote","form","masthead","meta","outbrain","related","scroll","shoutbox","sidebar","sponsor","shopping","tags","menu","authorp","breadcrumb","replies","reply"]),U=Object.freeze(["article","body","content","entry","hentry","main","page","pagination","post","blog","story","ERSIngredientsHeader","ERSHeading","ERSSectionHead","ingredient","ingredients","dataTable","wsite-content","recipe-list","ico-ingridients","recipe-info","rcps-table-ingredients","product","footnote","recipe","wpurp-recipe-ingredients","learn-press-content-item"]);function $(e){return new RegExp(e.join("|"),"i")}const Y=/geraspte|kaas|gekruid|kookboeken|shoarmavlees|kiphaasjes|plakjes|bladerdeeg|oventijd|bereidingstijd|hoofdgerecht|ingredient|ingredients|recipe|salt|egg|eggs|honey|cream|organic|tablespoon|baking|chopped|cup|sugar|flour|rice|oil|salt|garlic|chili|egg|tsp|mozzarella|parmesan|paprika|garlic|tbsp|spoon|cocoa|butter|milk|waniliowy|cytrynowego|jajka|OUNCE|BONELESS|Preheat|oven|ONIONS|pizzico|Mascarpone|Formaggio|Parmigiano|Riso|Sale|pepe|Formaggio|Barbabietole|provola|Parmigiano|grattuggiato|Latte|affumicato|Scalogno|Cannella|Limone|Olio|noce/i,V=Object.freeze({unlikelyCandidates:/combx|disqus|rss|shoutbox|ad-break|agegate|logo|header/i,unlikelyCandidatesNavigation:/menu|sidebar|pagination|related-posts/i,primaryImageUnlikelyParents:/secondary|boxzilla/i,okMaybeItsACandidate:/content|and|article|body|column|main|extra|shadow|rightmen|header|content-sidebar-wrap|content-with-sidebar-wrp|pk_left_sidebar|artpag|has-sidebar|node-blog-entry|with-sidebar|widget-content|sp_sidebar|nd-no-sidebars|onecol-sidebar|page|financity-sidebar-wrap/i,negativePartialWord:$(z),negativeWholeWord:(G=z,new RegExp("\\b"+G.join("\\b|\\b"),"i")),positivePartialWord:$(U),divToPElements:/<(a|blockquote|dl|div|img|ol|p|pre|table|ul)/i,normalize:/\s\s+/g,period:/\.( |$)/,weight:/[\s\d]+(gram|gr|gm|ml|kg|cup|pound|lb|spoon|tbsp)[s]?\s*/i,fractions:/[0-9]+\/[0-9]+/i,cookingWords:Y,cookingWordsGlobal:new RegExp(Y.toString(),"ig"),wpPostImage:/wp-post-image/i,videos:/http:\/\/(www\.)?(youtube|vimeo)\.com/i});var G;const J=[".single-post article.hentry",".hentry",".single-post",".type-post","article"],K=[".post-content .fusion-fullwidth",".article",".entry-content",".entry_content",".entry",".format_text",".entrytext",".post-body",".post-content",".post-entry",".post_body",".post_content",".post_entry",".post_page-content",".primary-entry-content"],X=[".hentry .wp-post-image","header img.featured-image",".entry-thumb img",".hentry .featured-thumbnail.large img",".pinit-overlay img",".post-content .post-img img"],Z=[".main .product",".woocommerce-cart-form",".cart-collaterals",".wc-product-table",".product .summary","#tab-description",".woocommerce-product-gallery__image",".woocommerce-product-gallery__image.flex-active-slide .zoomImg",".woocommerce-tabs .woocommerce-Tabs-panel",'[data-widget_type*="woocommerce-product"]'],Q=[".pf-author",".hentry a[rel=author]","a[rel=author]",".author.vcard .fn","[itemprop~=author] [itemprop~=name]","[itemprop~=author]",".byline","#author","header a[rel=author]",".hentry .post-author",".custom-author-details-cover","._1CN-0A",".tdb-author-name",".author-name"],ee=[".pf-date","#pf-date",".Blog-meta-item--date",".hentry .entry-date",'.hentry .post-date time[itemprop="datePublished"]','.article-content--main time[itemprop="datePublished"]',"time.published-date ",'[class^="ArticleFull_headerFooter__date__"]',"span.post-date","span.entry-meta-date"],te=["#productSummary",".product-description","#content",".Main-content",".BlogItem",".hentry","main",'article div[data-layout-label="Post Body"]'],re=['[itemtype*="schema.org/Article"] [itemprop~=articleBody]','[itemtype*="schema.org/NewsArticle"] [itemprop~=articleBody]','[itemtype*="schema.org/Report"] [itemprop~=articleBody]','[itemtype*="schema.org/ScholarlyArticle"] [itemprop~=articleBody]','[itemtype*="schema.org/TechArticle"] [itemprop~=articleBody]','[itemtype*="schema.org/Recipe"]','[itemtype*="schema.org/ScholarlyArticle"] [data-article-body]'],oe=["article"],ne=["aside","nav","footer"],ie=["FOOTER"],ae=["h1","h2","h3","h4","p","pre","code","ul","ol","figure","img"],se=["p","div","ul","ol","table","tr","td","tbody","blockquote"],le=[".navbar",".flex-direction-nav",".yarpp-related",".articleInline",".bottom-meta",".bottomnavigation","#branding",".commentlist","#commentwrapper","#comments",".comments","#disqus_thread",".entry-meta",".igit_relpost","#navbar",".nocomments",".noprint",".pd-rating",".pin-it-btn-wrapper",".post-actions",".post-comments",".post-extras",".post-footer",".post_footer",".post-header",".post-info",".post .meta",".post-meta",".postmeta",".postmetadata",".post_nav",".post_tags",".prev_next",".print-no",".respond","#respond","#sharebar",".shareTools",".share-buttons",".shareTop",".share_this","#sharebarx",".share_box",".sharedaddy",".share_icons",".shr-bookmarks",".sociable",".social_button",".social-ring",".socialwrap",".wpadvert",".wp-socializer",".editorial-disclosure"],ce=["#method_toc",".altadder_section",".relatedwikihows",".ad_label",".wh_ad",".wh_ad_inner",".video",".step_num"],de=[".copyright","#copyright",".delete-no",".delete-off",".pf-author",".print-content","#print-content",".pf-date","#pf-date",".pf-title",".pf-footer",".print-header",".print-footer",".print-yes",".pf-content","#pf-content"],he=["img[data-ct-lazy]","img[data-ezsrc]","img[data-flickity-lazyload]","img[data-hi-res-src]","img[data-href]","img[data-layzr]","img[data-lazy-src]","img[data-low-res-src]","img[data-mediaviewer-src]","img[data-native-src]","img[data-opt-src]","img[data-orig-src]","img[data-original]","img[data-original-src]","img[data-pagespeed-lazy-src]","img[data-pin-media]","img[data-raw-src]","img[data-runner-src]","img[data-src]","img[data-tf-src]","img[data-wpfc-original-src]","datasrc","nitro-lazy-src","original","img.lazyload","img.lazyloaded",'img[itemprop="url"]','img[loading="lazy"]','img[data-load="false"]',"img.js-progressiveMedia-image","a[data-replace-image]","amp-img"];function ue(e){const t=-1!==e.search(V.weight),r=-1!==e.search(V.fractions),o=-1!==e.search(V.cookingWords);return t||r||o}function me(e,t,r){var o,n;return null!==(n=null===(o=e.find((e=>e[t]===r)))||void 0===o?void 0:o.content)&&void 0!==n?n:null}function pe(e,t){const r=e.querySelectorAll("a");return 1===r.length&&r[0].innerText===t}function ge(e){let t=e.parentNode,r=t?t.parentNode:null;const o=(e,t)=>e&&t&&"undefined"!==t.tagName&&"BODY"!==t.tagName&&"BODY"!==e.tagName&&"HTML"!==t.tagName,n=e=>{if(!e.children||1!==e.children.length)return!1;const t=e.getAttribute("data-pf_style_display")||"";return["block","flex","table-row-group","table-row"].indexOf(t)>=0||null===t&&"DIV"===e.tagName.toUpperCase()};for(;o(t,r)&&n(t);)t=r,r=null==r?void 0:r.parentNode;return"BODY"===(null==t?void 0:t.tagName)||"HTML"===(null==t?void 0:t.tagName)?null:t}function fe(e,t){if(t.nodeType===Node.TEXT_NODE){var r;const o=null===(r=t.nodeValue)||void 0===r?void 0:r.trim();o&&e.push(o)}else if(length>1||1===t.childNodes.length&&t.childNodes[0].nodeType!=Node.TEXT_NODE)a(t,(t=>{fe(e,t)}));else{var o;const r=null===(o=t.textContent)||void 0===o?void 0:o.trim();r&&e.push(r)}}function ye(e,t,r){return e.filter((e=>e[t]===r))}function be(e){let t=0;return t+=e.split(",").length,t+=Math.min(Math.floor(e.length/100),3),e&&(t+=(e.match(V.cookingWordsGlobal)||[]).length/e.length*50),t}function ve(e){const t=e.getElementsByTagName("a"),r=c(e).length;let o=0;for(let e=0,r=t.length;e<r;++e)o+=c(t[e]).length;return o/r}function Se(e,t){if(ie.indexOf(e.tagName)>=0)return!0;const r=e.className+" "+e.id+" "+e.nodeName;return"image"===t?V.unlikelyCandidates.test(r)||V.primaryImageUnlikelyParents.test(r)||!1:!(!(V.unlikelyCandidates.test(r)||V.unlikelyCandidatesNavigation.test(r)&&e.querySelector("a"))||V.okMaybeItsACandidate.test(r)||e.querySelector(oe.join(","))||"BODY"===e.tagName||oe.includes(e.tagName.toLowerCase()))}function Ce(e){let t=e.parentElement;for(;t;){if(Se(t,"image"))return!0;t=t.parentElement}return!1}function we(e,t){switch(e.readability={contentScore:0},e.tagName){case"ARTICLE":e.readability.contentScore+=15;break;case"ASIDE":case"NAV":e.readability.contentScore-=15;break;case"DIV":e.readability.contentScore+=5;break;case"PRE":case"TD":case"BLOCKQUOTE":e.readability.contentScore+=3;break;case"ADDRESS":case"OL":case"UL":case"DL":case"DD":case"DT":case"LI":case"FORM":e.readability.contentScore-=3;break;case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"TH":e.readability.contentScore-=5}e.readability.contentScore+=function(e,t){if(!t)return 0;const r=e;let o=0;const n=r.id+" "+r.className;return-1===n.search(V.negativePartialWord)||oe.includes(r.nodeName.toLowerCase())||(o-=25),n.indexOf("side")>=0&&n.indexOf("widget")>=0&&!oe.includes(r.nodeName.toLowerCase())&&(o-=25),-1===n.search(V.positivePartialWord)||ne.includes(r.nodeName.toLowerCase())||(o+=25),o}(e,t)}class Te{behave(e,t){const r=e.scores.common;if(t&&t.skipRelatedArticlesClassifier||r.hasContentTag&&r.uniqWordsCount>200||t&&t.candidate&&t.candidate.contains(e.node)&&!this.isOnEdgeOf(e))return f.DoNothing;const o=e.scores.relatedArticle;return o.isDataTag?f.BreakTraversal:o.hasInlineLink||o.hasIgnoreClasses||o.contentTagsCount>25&&r.uniqWordsCount>200||o.wordsCount<5||o.aTagsCount<2||1===o.imgTagsCount||o.hasLongTextNode||o.recipeWordsCount/o.wordsCount>=.15?f.DoNothing:o.imgTagsCount/o.aTagsCount<2.5&&((o.insideLinkWordsCount/o.wordsCount||0)>=.4||(o.aTagsCount+o.imgTagsCount)/(o.contentTagsCount+o.aTagsCount+o.imgTagsCount)>=.5)?(e.remove(),f.BreakTraversal):f.DoNothing}calcScore(e){if(e.node.nodeType===Node.TEXT_NODE)return this.buildTextScore(e);if("P"===e.node.nodeName&&e.node.parentNode&&l(e.node.parentNode))return this.buildTextScore(e,1);let t=this.buildScore({});for(let r=0,o=e.countChildren;r<o;++r){const o=e.childAt(r);t=this.mergeScore(t,o.scores.relatedArticle)}const r=e.node.nodeName,o=e.nodeToElement();switch(r){case"A":(null==o?void 0:o.getAttribute("href"))&&"author"!==(null==o?void 0:o.getAttribute("rel"))&&(t.aTagsCount++,t.insideLinkWordsCount=t.wordsCount,t.hasLongTextNode=!1,t.isInlineLink=this.isInlineLink(e));break;case"IMG":t.imgTagsCount++}return t.wordsCount>0&&t.wordsCount>t.insideLinkWordsCount&&l(e.node)&&!e.isWrapper()&&t.contentTagsCount++,{TABLE:!0,TR:!0,TD:!0}[r]&&(t.isDataTag=!0,t.insideLinkWordsCount=0,t.aTagsCount=0,t.imgTagsCount=0),e.nameMatches(/gallery/i)&&(t.hasIgnoreClasses=!0),t.hasInlineLink=t.hasInlineLink||this.hasInlineLink(e),t}isOnEdgeOf(e){const t=e.depthLayer.length,r=e.depthLayerIndex,o=Math.ceil(.3*t),n=Math.floor(t-.3*t);return r<=o||r>=n}buildTextScore(e,t){if(this.isShortDescription(e))return this.buildScore({});const r=O(e.node.textContent||""),o=r.length;let n=0;for(let e=0;e<o;++e)ue(r[e])&&n++;return this.buildScore({wordsCount:o,recipeWordsCount:n,hasLongTextNode:o>=25,contentTagsCount:t||0})}mergeScore(e,t){const r=this.buildScore({});return r.wordsCount=e.wordsCount+t.wordsCount,r.recipeWordsCount=e.recipeWordsCount+t.recipeWordsCount,r.insideLinkWordsCount=e.insideLinkWordsCount+t.insideLinkWordsCount,r.contentTagsCount=e.contentTagsCount+t.contentTagsCount,r.aTagsCount=e.aTagsCount+t.aTagsCount,r.imgTagsCount=e.imgTagsCount+t.imgTagsCount,r.hasLongTextNode=e.hasLongTextNode||t.hasLongTextNode,r.hasIgnoreClasses=e.hasIgnoreClasses||t.hasIgnoreClasses,r.hasInlineLink=e.hasInlineLink||t.hasInlineLink,r}buildScore(e){return{wordsCount:e.wordsCount||0,recipeWordsCount:e.recipeWordsCount||0,insideLinkWordsCount:e.insideLinkWordsCount||0,contentTagsCount:e.contentTagsCount||0,imgTagsCount:e.imgTagsCount||0,aTagsCount:e.aTagsCount||0,hasLongTextNode:e.hasLongTextNode||!1,isDataTag:e.isDataTag||!1,hasIgnoreClasses:e.hasIgnoreClasses||!1,hasInlineLink:e.hasInlineLink||!1,isInlineLink:e.isInlineLink||!1}}isShortDescription(e){const t=e.node.textContent;return!!(null==t?void 0:t.trim().match(/(\.{3,}|…)$/))}isInlineLink(e){let t=null,r=e.prev;for(;r;){var o;if(null===(o=r.node.textContent)||void 0===o?void 0:o.trim()){t=r;break}r=r.prev}return!(!t||!this.isNonLinkInlineContent(t))}isNonLinkInlineContent(e){var t,r,o;const n=e.scores.relatedArticle;return n.wordsCount!==n.insideLinkWordsCount&&"none"!==(null===(r=e.parent)||void 0===r||null===(t=r.nodeToElement())||void 0===t?void 0:t.getAttribute("data-pf_style_display"))&&(e.node.nodeType===Node.TEXT_NODE||"inline"===(null===(o=e.nodeToElement())||void 0===o?void 0:o.getAttribute("data-pf_style_display")))}hasInlineLink(e){let t=!1;return e.forEachChild((e=>e.scores.relatedArticle.isInlineLink?(t=!0,f.Break):f.DoNothing)),t&&!this.isShortDescription(e)}}const Ae=["facebook","google","stumbleupon","reddit","pinterest","printfriendly","yum","twitter","tweet","linkedin","share","shares","print","tumblr","rss","youtube","social"],De=["twitter.com","facebook.com","reddit.com","myspace.com","stumbleupon.com","mix.com","mixx.com","viadeo.com","yummly.com","addthis.com","google.com","pinterest.com","printfriendly.com","mailto:","tumblr.com","linkedin.co","digg.com","whatsapp.com","vk.com","weibo.com","ok.ru","odnoklassniki.ru","xing.com","blogger.com","flipboard.com","meneame.net","mail.ru","icio.us","livejournal.com","delicious.com","youtube.com"];class Ee{behave(e){var t;if(!e.countChildren)return f.DoNothing;const r=e.className(),o=(null===(t=e.nodeToElement())||void 0===t?void 0:t.tagName)||"";return"TWITTER-WIDGET"===o||"BLOCKQUOTE"===o&&r.indexOf("twitter-tweet")>=0?(e.keep(),f.BreakTraversal):this.calcPoints(e)>.3?(e.remove(),f.BreakTraversal):f.DoNothing}calcScore(e){let t=this.buildScore({hasShareClass:this.hasShareClass(e),hasShareImage:this.isShareImage(e)});for(let r=0,o=e.countChildren;r<o;++r){const o=e.childAt(r);t=this.mergeScore(t,o.scores.shareScore)}switch(e.node.nodeName){case"IMG":t.imgsCount++;break;case"A":t.aCount++}return t.hasShareClass=this.hasShareClass(e),t}calcPoints(e){const t=e.scores.shareScore;if(t.hasShareImage)return 0;if(t.hasShareClass)return 1;const r=this.calcOccurrencesAndTotalFor(Ae,e.scores.common.words);if(r.totalUniqCount>25)return 0;const o=this.calcOccurrencesAndTotalFor(De,e.scores.common.links);return 2*(r.relatedUniqCount>1?r.ratio:0)+(o.relatedUniqCount>1?o.ratio:0)}calcOccurrencesAndTotalFor(e,t){let r=0,o=0;for(let n=0,i=e.length;n<i;++n){const i=e[n],a=t.get(i);a&&(o++,r+=a)}let n=0;for(const e in t){const r=t.get(e);"number"==typeof r&&(n+=r)}return{relatedCount:r,totalCount:n,relatedUniqCount:o,totalUniqCount:t.size,ratio:r/n||0}}buildScore(e){return{imgsCount:e.imgsCount||0,aCount:e.aCount||0,hasShareClass:e.hasShareClass||!1,hasShareImage:e.hasShareImage||!1}}mergeScore(e,t){const r=this.buildScore({});return r.imgsCount=e.imgsCount+t.imgsCount,r.aCount=e.aCount+t.aCount,r.hasShareImage=e.hasShareImage||t.hasShareImage,r}hasShareClass(e){const t=e.className();return!(!t||!/fb-like|daftplugPublicFacebookReactionsNotification|daftplugPublicFacebookReactionsNotification_container|daftplugPublicFacebookReactionsNotification_postTitle|daftplugPublicFacebookReactionsNotification_postTitle|socializer-share-bar|PIN_\d+/.test(t))}isShareImage(e){const t=e.nodeToElement();if(!t||"IMG"!==t.tagName)return!1;let r=t.nextElementSibling;for(;r;){if(r.querySelectorAll("a").length>1)return!0;r=r.nextElementSibling}return!1}}function ke(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class xe{get root(){return this._root}set root(e){this._root=C.toElem(e)}createElement(e){return new C({node:document.createElement(e),tree:this})}createTextNode(e){return new C({node:document.createTextNode(e),tree:this})}breadthFirstTraversal(e){const t=[this._root];let r=null;for(;(r=t.shift())&&e(r)!==f.BreakTraversal;)for(let e=0,o=r.countChildren;e<o;++e){const o=r.childAt(e);t.push(o)}}preOrderTraversalWithElementSkip(e,t){const r=[t||this._root];let o=null;for(;o=r.shift();)if(!o.skipped&&e(o)!==f.BreakTraversal)for(let e=0,t=o.countChildren;e<t;++e)r.push(o.childAt(e))}postOrderTraversal(e,t=null){const r=[],o=[t||this._root];let n=null;for(;n=o.pop();)if(!n.skipped){r.push(n);for(let e=0,t=n.countChildren;e<t;++e)o.push(n.childAt(e))}let i=r.length;for(;i--;)e(r[i])}constructor(e){ke(this,"depthLayers",void 0),ke(this,"_root",void 0),this._root=new C({tree:this,node:e}),this.depthLayers=[[this._root]],this._root.depthLayer=this.depthLayers[0];const t=[this._root];let r;for(;r=t.shift();){let e=null;for(let n=0,i=r.node.childNodes.length;n<i;++n){var o;const i=r.node.childNodes[n];if(i.nodeType===Node.TEXT_NODE&&!(null===(o=i.nodeValue)||void 0===o?void 0:o.trim())||i.nodeType===Node.COMMENT_NODE||i instanceof Element&&"SCRIPT"===i.tagName)continue;const a=new C({tree:r.tree,parent:r,node:i,depth:r.depth+1,prev:e});this.depthLayers[a.depth]=this.depthLayers[a.depth]||[],this.depthLayers[a.depth].push(a),a.depthLayer=this.depthLayers[a.depth],e=a,r.addChild(a),t.push(a)}}}}function Ne(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Ie{get tree(){return this._tree}elementFor(e){let t=e;for(;t;){if(t[g])return t[g];const r=e instanceof Element?e:null;if(r){if(r.childElementCount>1)return null;t=r.firstElementChild}}return null}registerScoreClassifier(e,t){this.scoreClassifiers[e]=t}registerMarkClassifier(e,t){this.markClassifiers.push({classifier:e,options:t})}registerBehaviorClassifier(e,t="after"){this.behaviorClassifiers[t].push(e)}markAndCalcScore(){this._tree.postOrderTraversal((e=>{this.markAndCalcScoreElement(e)}))}rebuildTree(){this._tree=new xe(document.body),this.markAndCalcScore()}beforeRunner(){this.traverseElements("before")}afterRunner(e){this._tree.root=C.toElem(e.candidate),this.traverseElements("after",e)}markAndCalcScoreElement(e){for(const{classifier:t,options:r}of this.markClassifiers)t.mark(e,r);for(const t in this.scoreClassifiers){const r=this.scoreClassifiers[t];e.addScore(t,r.calcScore(e))}e.hasScore=!0}traverseElements(e,t){this._tree.postOrderTraversal((e=>{e.hasScore||this.markAndCalcScoreElement(e)})),this._tree.preOrderTraversalWithElementSkip((r=>{for(const o of this.behaviorClassifiers[e])if(o.behave(r,t)===f.BreakTraversal)return f.BreakTraversal;return f.DoNothing}))}constructor(){Ne(this,"_tree",void 0),Ne(this,"scoreClassifiers",void 0),Ne(this,"markClassifiers",void 0),Ne(this,"behaviorClassifiers",void 0),this._tree=new xe(document.body),this.scoreClassifiers={},this.markClassifiers=[],this.behaviorClassifiers={before:[],after:[]}}}class Le{keepStyleResult(){return{type:"boolean",value:this.pfData.userSettings.keepStyle}}authorSelectorResult(){if(!this.pfData.userSettings.authorSelector)return null;if("selector"===this.pfData.userSettings.authorSelector.type){const e=document.querySelector(this.pfData.userSettings.authorSelector.value);if(e)return{type:"node",value:e}}else if("meta"===this.pfData.userSettings.authorSelector.type){const e=this.metaContentFor(this.pfData.userSettings.authorSelector);if(e&&e.length)return{type:"text",value:this.metaContentFor(this.pfData.userSettings.authorSelector)}}return"error-message"===this.pfData.userSettings.fallbackStrategy?{type:"text",value:`Unable to find author specified by the selectors "${this.pfData.userSettings.authorSelector.value}"`}:null}dateSelectorResult(){if(!this.pfData.userSettings.dateSelector)return null;if("selector"===this.pfData.userSettings.dateSelector.type){if(1===document.querySelectorAll(this.pfData.userSettings.dateSelector.value).length)return{type:"selector",value:this.pfData.userSettings.dateSelector.value}}else if("meta"===this.pfData.userSettings.dateSelector.type)return{type:"text",value:this.metaContentFor(this.pfData.userSettings.dateSelector)};return"error-message"===this.pfData.userSettings.fallbackStrategy?{type:"text",value:`Unable to find date specified by the selectors "${this.pfData.userSettings.dateSelector.value}"`}:null}removeSelectorResult(){return this.pfData.userSettings.removeSelectors&&"selector"===this.pfData.userSettings.removeSelectors.type&&this.pfData.userSettings.removeSelectors.value.length?{type:"selector",value:this.pfData.userSettings.removeSelectors.value}:null}titleSelectorResult(){if(!this.pfData.userSettings.titleSelector)return null;if("selector"===this.pfData.userSettings.titleSelector.type){const e=document.querySelector(this.pfData.userSettings.titleSelector.value);if(e)return o.log("Picking title using userSettings.titleSelector"),{type:"node",value:e}}else if("meta"===this.pfData.userSettings.titleSelector.type){const e=this.metaContentFor(this.pfData.userSettings.titleSelector);if(e&&e.length){o.log("Picking title using userSettings.titleSelector");const t=document.createElement("div");return t.innerHTML=e,{type:"node",value:t}}}if("error-message"===this.pfData.userSettings.fallbackStrategy){const e=document.createElement("div");return e.textContent=`Unable to find title specified by the selectors "${this.pfData.userSettings.titleSelector.value}"`,{type:"node",value:e}}return null}contentSelectorResult(){if(!this.pfData.userSettings.contentSelectors||"selector"!==this.pfData.userSettings.contentSelectors.type)return null;const e=document.querySelectorAll(this.pfData.userSettings.contentSelectors.value);return e.length?{type:"node",value:e}:"error-message"===this.pfData.userSettings.fallbackStrategy?{type:"text",value:`Unable to find content specified by the selectors "${this.pfData.userSettings.contentSelectors.value}"`}:null}primaryImageSelectorResult(){if(this.pfData.userSettings.primaryImage&&this.pfData.userSettings.primaryImage.value&&(e=>{try{return Boolean(new URL(e))}catch(e){return!1}})(this.pfData.userSettings.primaryImage.value))return{type:"url",value:this.pfData.userSettings.primaryImage.value};if(!this.pfData.userSettings.primaryImageSelector)return null;if("selector"===this.pfData.userSettings.primaryImageSelector.type){const e=document.querySelector(this.pfData.userSettings.primaryImageSelector.value);if(e)return{type:"node",value:e}}else if("meta"===this.pfData.userSettings.primaryImageSelector.type){const e=this.metaContentFor(this.pfData.userSettings.primaryImageSelector),t=document.createElement("IMG");return t.src=e,{type:"node",value:t}}if("error-message"===this.pfData.userSettings.fallbackStrategy){const e=document.createElement("IMG");return e.setAttribute("alt",`Unable to find primary image specified by the selectors "${this.pfData.userSettings.primaryImageSelector.value}"`),{type:"node",value:e}}return null}metaContentFor(e){return me(this.pfData.page.metas,e.attributeName||"",e.attributeValue||"")}constructor(e){var t,r;r=void 0,(t="pfData")in this?Object.defineProperty(this,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[t]=r,this.pfData=e}}function _e(e,t,r,o,n){return e<t||r<t?e>r?r+1:e+1:o===n?t:t+1}function Pe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class qe{find(){if(this.pfData.userSettings.primaryImage&&"off"===this.pfData.userSettings.primaryImage.value)return void(this.primaryImageHTML="");const e=this.userSettingsSelector.primaryImageSelectorResult();if(e)return"node"===e.type?this.primaryImageHTML=e.value.outerHTML:"url"===e.type&&(this.primaryImageHTML=`<img src="${e.value}" />`),void(this.foundViaUserSettings=!0);try{const t=e||this.largeImage()||this.wpPostImage()||this.metaImage();if(t){if((t.matches("img")?t:t.querySelector("img")||Array.from(t.getElementsByTagName("img"))[0]).getAttribute("src")){const e=t.cloneNode(!0);e.style.cssText="",this.primaryImageHTML=e.outerHTML}}}catch(e){o.error(e)}}findSameImage(e,t,r){if(!e)return null;e=D(e),e=decodeURI(e);let o=null,n=.17;const i=t.flatMap((e=>Array.from(e.querySelectorAll("img, picture source"))));for(let t=0,a=i.length;t<a;++t){const a=i[t];let s=a.getAttribute("src");if(s){if(s=decodeURI(D(s)),-1!==decodeURI(a.getAttribute("src")||"").indexOf(e)||e.startsWith("data:")){o=a;break}if(!r){const t=this.similarityScore(e,s);t<n&&(o=a,n=t)}}}return o}prependTo(e){if(this.pfData.page.hasPrintOnly&&this.pfData.page.enablePrintOnly)return void o.log("Primary Image: SKIPPED, has print-only");if(!this.primaryImageHTML)return void o.log("Primary Image: SKIPPED, no candidates");const t=(new DOMParser).parseFromString(this.primaryImageHTML,"text/html").body.firstChild,r=t.matches("img")?t:t.querySelector("img"),n=(null==r?void 0:r.getAttribute("src"))||"";this.findSameImage(n,[e],this.foundViaUserSettings)?o.log("Primary Image: ALREADY EXISTS src = "+n):(t.classList.add("blockImage","pf-primary-img"),e.insertBefore(t,e.firstChild),o.log("Primary Image: ADDED src = "+n))}largeImage(){const e=e=>{for(let t=0;t<e.length;++t){let r=e[t];if(!Se(r,"image")&&!Ce(r))return r.nextSibling&&r.nextSibling instanceof Element&&"FIGCAPTION"===r.nextSibling.tagName&&r.parentNode instanceof Element&&(r=r.parentNode),r}},t=(new DOMParser).parseFromString(this.pfData.page.body,"text/html");return e(document.querySelectorAll(".pf-large-image"))||e(t.querySelectorAll(".pf-large-image"))}wpPostImage(){let e=null;if("wordpress"===this.pfData.config.platform)for(const r of X){const n=document.querySelectorAll(r);if(1===n.length){var t;e=n[0],"FIGURE"===(null===(t=e.parentElement)||void 0===t?void 0:t.nodeName)&&(e=e.parentElement),o.log("Picked WP Post Image using selector - "+r);break}}return e}metaImage(){var e;if("content-only"===(null===(e=this.pfData.userSettings.primaryImage)||void 0===e?void 0:e.value))return null;const t=me(this.pfData.page.metas,"property","og:image")||me(this.pfData.page.metas,"name","twitter:image")||me(this.pfData.page.metas,"itemprop","image");if(t){const e=this.findSameImage(t,[document.body],!1);if(e)return e;const r=document.createElement("img");return r.setAttribute("src",t),r}return null}similarityScore(e,t){if((e=this.cleanImgFromPatterns(e))===(t=this.cleanImgFromPatterns(t)))return 0;const r=this.getCommonPrefix(e,t);e=e.replace(r,""),t=t.replace(r,"");const o=Math.min(e.length,t.length),n=function(e,t){if(e===t)return 0;e.length>t.length&&([e,t]=[t,e]);let r=e.length,o=t.length;for(;r>0&&e.charCodeAt(r-1)===t.charCodeAt(o-1);)r--,o--;let n=0;for(;n<r&&e.charCodeAt(n)===t.charCodeAt(n);)n++;if(r-=n,o-=n,0===r||o<3)return o;const i=[];for(let t=0;t<r;t++)i.push(t+1),i.push(e.charCodeAt(n+t));const a=i.length-1;let s=0,l=0;for(;s<o-3;){const e=t.charCodeAt(n+s),r=t.charCodeAt(n+s+1),o=t.charCodeAt(n+s+2),c=t.charCodeAt(n+s+3);l=s+=4;for(let t=0;t<a;t+=2){let n=i[t];const a=i[t+1];let d=_e(n,s-3,s-2,e,a),h=_e(d,s-2,s-1,r,a);const u=_e(h,s-1,s,o,a);l=_e(u,s,l,c,a),i[t]=l,n=d,d=h,h=u}}for(;s<o;){const e=t.charCodeAt(n+s);l=++s;for(let t=0;t<a;t+=2){const r=i[t];i[t]=l=_e(r,s-1,l,e,i[t+1])}}return l}(e,t)/o;return n<.17?n:1}cleanImgFromPatterns(e){const t=["height","h","width","w","q","fill","bg","bgMode","quality","size","crop","c","scale","ih","iw","thumb","fit","pad","face"],[r,o]=e.split("?"),n=r.replace(/(width|height|bound|webp|jpg|jpeg|png|lossy|q\d+|\d+x\d+)/gi,"");let i="";if(o){const e=o.split("&").filter((e=>!t.includes(e.split("=")[0]))).join("&");e.length&&(i="?"+e)}return n+i}getCommonPrefix(e,t){const r=Math.min(e.length,t.length);let o=0;for(;o<r&&e[o]===t[o];)++o;return e.substring(0,o)}constructor(e){Pe(this,"primaryImageHTML",void 0),Pe(this,"foundViaUserSettings",void 0),Pe(this,"pfData",void 0),Pe(this,"userSettingsSelector",void 0),this.pfData=e,this.primaryImageHTML=null,this.foundViaUserSettings=!1,this.userSettingsSelector=new Le(e)}}function Oe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Me{flagIsActive(e){return(this.flags&e)>0}addFlag(e){this.flags=this.flags|e}removeFlag(e){this.flags=this.flags&~e}constructor(e,t){Oe(this,"flags",void 0),Oe(this,"run",void 0),Oe(this,"userSettingsSelector",void 0),Oe(this,"pfData",void 0),Oe(this,"contentData",void 0),Oe(this,"flagStripUnlikelys",void 0),Oe(this,"flagWeightClasses",void 0),Oe(this,"flagCleanConditionally",void 0),this.flags=7,this.flagStripUnlikelys=1,this.flagWeightClasses=2,this.flagCleanConditionally=4,this.run=0,this.pfData=e,this.contentData=t,this.userSettingsSelector=new Le(e)}}function Be(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Fe extends Me{extractAuthors(){const e=this.userSettingsSelector.authorSelectorResult();if(e)switch(e.type){case"node":return e.value.classList.add("algo-author"),this.saveAuthor(e.value.textContent||"");case"text":return this.saveAuthor(e.value)}const t=this.extractAuthorFromApplicationLd(this.pfData.page.applicationLd);if(t)return this.saveAuthor(t);this.extractAuthorBySelectors(),this.extractAuthorFromContent(['[data-testid="prism-linkbase"]',".Page-authors",".authors"]),this.extractAuthorFromMeta("name","author"),this.extractAuthorFromMeta("property","author"),this.extractAuthorFromMeta("property","article:author")}extractPubDate(){const e=this.userSettingsSelector.dateSelectorResult();e?"text"===e.type?this.pubDate=e.value:"selector"===e.type&&this.pfData.userSettings.dateSelector&&this.extractDateBySelectors([this.pfData.userSettings.dateSelector.value]):(this.extractDateBySelectors(ee),this.extractDateFromMeta("property","article:published"),this.extractDateFromMeta("property","article:published_time"),this.extractDateFromMeta("name","shareaholic:article_published_time"),this.extractDateFromMeta("itemprop","datePublished"),this.extractDateFromMeta("name","article:published_time"),this.extractDateFromMeta("name","publish-date"),this.extractDateFromMeta("property","lastPublishedDate"),this.extractDateFromMeta("property","article:published_time"),this.extractDateFromTimeTag(),this.extractDateFromApplicationLd())}extractCopyright(){const e=document.querySelectorAll(".copyright, #copyright");if(e.length>0){const t=e[0];this.copyright=t.cloneNode(!0),this.copyright.removeAttribute("style"),t.remove()}}extractCustomHeaderFooter(){const e=document.querySelector(".print-header");if(e){const t=document.createElement("div"),r=e.cloneNode(!0);r.removeAttribute("style"),t.appendChild(r),this.customHeader=t.innerHTML,e.remove()}const t=document.querySelectorAll(".pf-footer, .print-footer");if(t.length>0){const e=document.createElement("div"),r=t[0].cloneNode(!0);r.removeAttribute("style"),e.appendChild(r),this.customFooter=e.innerHTML,t[0].remove()}}saveAuthor(e){this.contentData.author=e,this.author=`<div id="pf-author">${e}</div>`}extractAuthorFromApplicationLd(e){if(e&&e.author){if(e.author.name&&"string"==typeof e.author.name)return e.author.name;if(Array.isArray(e.author)&&e.author[0]&&"string"==typeof e.author[0].name){const t=e.author.filter((e=>e&&"string"==typeof e.name)).map((e=>e.name.trim()));if(t.length)return t.join(", ")}if(e["@graph"]&&Array.isArray(e["@graph"])){const t=e["@graph"].find((e=>"Person"===e["@type"]));if(t&&t.name&&"string"==typeof t.name)return t.name}}return""}extractDateBySelectors(e){if(""===this.pubDate)for(const t of e){const e=Array.from(document.querySelectorAll(t)).filter((e=>!e.closest(".widget")&&!e.closest(".sidebar")));if(1===e.length){this.pubDate=e[0].textContent||"",e[0].remove();break}}}extractDateFromMeta(e,t){if(""!==this.pubDate)return;const r=ye(this.pfData.page.metas,e,t),o=ye(this.pfData.page.metas,"property","og:locale");let n;var i;if(1==o.length&&void 0!==o[0].content&&(n=null===(i=o[0].content)||void 0===i?void 0:i.replace("_","-")),r.length>0&&void 0!==r[0].content)try{var a,s;let e=null!==(s=null===(a=r[0].content)||void 0===a?void 0:a.split("T")[0])&&void 0!==s?s:"";if(!isNaN(Number(r[0].content))){const t=new Date(Number(r[0].content));1970===t.getUTCFullYear()&&t.setUTCFullYear((new Date).getUTCFullYear()),e=t.toISOString().split("T")[0]}const t=new Date(e);if(!isNaN(t.getTime()))try{this.pubDate=t.toLocaleDateString(n,{month:"long",year:"numeric",day:"numeric",timeZone:"UTC"})}catch(e){this.pubDate=t.toLocaleDateString("en-US",{month:"long",year:"numeric",day:"numeric",timeZone:"UTC"})}}catch(e){}}extractDateFromTimeTag(){if(""!==this.pubDate)return;const e=document.querySelector("time");if(!e)return;const t=ye(this.pfData.page.metas,"property","og:locale");let r;var o;1==t.length&&void 0!==t[0].content&&(r=null===(o=t[0].content)||void 0===o?void 0:o.replace("_","-"));const n=e.getAttribute("datetime")||"";try{var i;const e=null!==(i=n.split("T")[0])&&void 0!==i?i:"",t=new Date(e);if(!isNaN(t.getTime()))try{this.pubDate=t.toLocaleDateString(r,{month:"long",year:"numeric",day:"numeric",timeZone:"UTC"})}catch(e){this.pubDate=t.toLocaleDateString("en-US",{month:"long",year:"numeric",day:"numeric",timeZone:"UTC"})}}catch(e){}}extractAuthorBySelectors(){if(""!==this.author)return;let e=[];const t=/(^|\W)(by)(\W|$)/i,r=Q.join(", ");for(const i of Q){e=[];const a=Array.from(document.querySelectorAll(i)).filter((e=>!e.closest(".widget")&&!e.closest(".sidebar")&&-1===e.className.search(/combx|comment|community|disqus|extra|foot|header|menu|remark|rss|shoutbox|sidebar|sponsor|ad-break|agegate|pagination|pager|popup|tweet|twitter|tags|postmetadata/i)&&"INPUT"!==e.nodeName));if(a.length>=1){var o;let s=a[0];const l=s.parentElement,c=null==l?void 0:l.parentElement;let d=null;l&&l.querySelectorAll(r).length>1?d=l:c&&c.querySelectorAll(r).length>1&&(d=c),d&&(s=d),s.classList.add("algo-author");const h=s.querySelectorAll("sup");for(let e=0,t=h.length;e<t;++e)h[e].remove();if(d?(d.querySelectorAll(i).forEach((t=>{fe(e,t)})),e.join(" ").match(/,/)||(e=[e.join(", ")])):fe(e,s),!(null===(o=s.textContent)||void 0===o?void 0:o.match(t)))try{var n;const r=s.parentElement,o=[r];0===(null==r||null===(n=r.previousElementSibling)||void 0===n?void 0:n.children.length)&&o.push(r.previousElementSibling);for(const r of o){const o=(null==r?void 0:r.textContent)||"";if(o.match(t)&&o.length<60){e.unshift("By");break}}}catch(e){}this.saveAuthor(e.join(" "));break}}}extractAuthorFromContent(e){if(""!==this.author)return;const t=e=>{const t=e.trim().split(/\s+/).length;return["by","author","written by"].some((t=>e.toLowerCase().includes(t)))&&t>=2&&t<=3},r=e=>["by","author","written by"].some((t=>e.toLowerCase().includes(t)));let o="";for(const a of e){const e=document.querySelectorAll(a);for(const a of e)if(a instanceof HTMLElement){var n;const e=null===(n=a.textContent)||void 0===n?void 0:n.trim();if(e&&t(e)){o=e;break}let s=a.parentElement;for(let t=0;t<2&&s;t++){var i;const t=null===(i=s.textContent)||void 0===i?void 0:i.trim();if(t&&r(t)){o=e||"";break}s=s.parentElement}}if(o)break}o&&this.saveAuthor(o)}extractAuthorFromMeta(e,t){if(""!==this.author)return;const r=ye(this.pfData.page.metas,e,t);if(1==r.length&&void 0!==r[0].content){var o;const e=null===(o=r[0].content)||void 0===o?void 0:o.trim();e&&this.saveAuthor(e)}}extractDateFromApplicationLd(){if(""!==this.pubDate)return;const e=this.pfData.page.applicationLd;if(e&&e.datePublished){const t=e.datePublished;"string"==typeof t&&(this.pubDate=new Date(t).toLocaleDateString("en-US",{month:"long",year:"numeric",day:"numeric",timeZone:"UTC"}))}}constructor(e,t){super(e,t),Be(this,"author",void 0),Be(this,"pubDate",void 0),Be(this,"copyright",void 0),Be(this,"customHeader",void 0),Be(this,"customFooter",void 0),this.author="",this.pubDate="",this.copyright=null,this.customHeader="",this.customFooter=""}}function He(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Re extends Fe{getArticleTitle(e){const t=t=>{const r=e.tree.createElement("H1"),o=r.nodeToElement();return o&&(o.innerText=t),r},r=["h1","h2","h3"];let n,i=null;const a=this.userSettingsSelector.titleSelectorResult();var s,l;if(a&&"node"===a.type&&(i=a.value,n=a.value),i||(n=document.querySelector(".pf-title"),n&&(o.log("Picking title using .pf-title"),i=n)),i||(n=document.querySelector('header [itemprop~="headline"]'),n&&""!==(null===(s=n.textContent)||void 0===s?void 0:s.trim())&&(o.log("Picking title using header itemprop~=headline"),i=n)),!i&&("blogger"===this.pfData.config.platform||"wordpress"===this.pfData.config.platform)){const e=[".post-title",".entry-title"];"wordpress"===this.pfData.config.platform&&e.push(".post_title",".posttitle","#page-title","#pagetitle","#title",".title",".entry-header");const t=[".single-post",".post","#post",".hentry"],a=[],s=t.length,l=r.length,c=e.length;for(let o=0;o<s;++o)if(!document.querySelector(".pf-body-cache"+t[o]))for(let n=0;n<l;++n)for(let i=0;i<c;++i)a.push(`${t[o]} ${e[i]} ${r[n]}`),a.push(`${t[o]} ${r[n]}${e[i]}`);for(const e of a){var d;if(n=document.querySelector(e),n&&""!==(null===(d=n.textContent)||void 0===d?void 0:d.trim())){o.log("Picking title using WP/blogger classes"),i=n;break}}}if(!i&&"squarespace"===this.pfData.config.platform){const e=["article .BlogItem-title"];for(const t of e){var h;if(n=document.querySelector(t),n&&""!==(null===(h=n.textContent)||void 0===h?void 0:h.trim())){o.log("Picking title using squarespace classes"),i=n;break}}}if(!i){var u,m;const e=null===(m=document.querySelector("title"))||void 0===m||null===(u=m.textContent)||void 0===u?void 0:u.trim();if(e){const t=e=>e.trim().toLowerCase().replace(/\W+/g,""),n=t(e);let a=0;for(const e of r){const r=document.querySelectorAll(e),s=r.length;for(let e=0;e<s;e++){const s=r[e],l=n.match(t(s.textContent||""));l&&l[0].length>15&&l[0].length>a&&(o.log("Using title element which had a substring of document title"),a=l[0].length,i=s)}}}}if(!i){const e=document.querySelector("article header");if(e)for(const t of r){const r=e.querySelectorAll(t);if(1===r.length){o.log("Picking title using article header, header h-tags"),i=r[0];break}if(r.length>1)break}}if(i)return this.titleText=(null===(l=i.textContent)||void 0===l?void 0:l.trim())||"",this.titleTags.push(i.nodeName),t(this.titleText);let p="",g="";try{p=g=document.title,"string"!=typeof p&&(p=g=c(document.getElementsByTagName("title")[0]))}catch(e){}if(p.match(/ [|-] /))p=g.replace(/(.*)[|-] .*/gi,"$1"),p.split(" ").length<3&&(p=g.replace(/[^|-]*[|-](.*)/gi,"$1"));else if(p.includes(": "))p=g.replace(/.*:(.*)/gi,"$1"),p.split(" ").length<3&&(p=g.replace(/[^:]*[:](.*)/gi,"$1"));else if(p.length>150||p.length<15){const e=document.getElementsByTagName("h1");1===e.length&&(p=c(e[0]))}return p=p.trim(),p.split(" ").length<=4&&(p=g),p.length>0&&(this.titleText=p),t(p)}pickTitleFromContent(){const e=["h1","h2","h3"];for(const i of e){var t;const e=document.getElementsByTagName(i);if(1===e.length&&""!==(null===(t=e[0].textContent)||void 0===t?void 0:t.trim())){var r,n;this.titleText=null!==(n=null===(r=e[0].textContent)||void 0===r?void 0:r.trim())&&void 0!==n?n:"",this.titleTags.push(i),o.log("Picking possible title from content - "+this.titleText);break}if(e.length>1)break}}constructor(e,t){super(e,t),He(this,"titleText",void 0),He(this,"titleTags",void 0),this.titleText="",this.titleTags=["h1","h2","h3"]}}function je(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class We extends Re{removeHiddenContent(){if(this.pfData.userSettings.showHiddenContent)return;const e=[...de];this.pfData.page.enablePrintOnly&&e.push(".print-only","#print-only");const t=document.querySelectorAll(e.join(",")),r=t.length;for(let e=0;e<r;++e){const r=t[e],o=r.querySelectorAll(".hidden-originally");for(let e=0,t=o.length;e<t;++e)o[e].classList.remove("hidden-originally");r.classList.remove("hidden-originally");let n=r.parentElement;for(;n;)n.classList.remove("hidden-originally"),n=n.parentElement}const o=document.querySelectorAll(he.join(","));for(let e=0,t=o.length;e<t;++e)o[e].classList.remove("hidden-originally");let n="";const i=this.wpContentTags.length,a=this.wpContentParentTags.length;for(let e=0;e<a;++e){const t=document.querySelectorAll(this.wpContentParentTags[e]);for(let e=0;e<t.length;++e)for(let r=0;r<i;++r){const o=t[e].querySelectorAll(`${this.wpContentTags[r]}.hidden-originally`);for(let e=0;e<o.length;e++)n+=(o[e].getAttribute("class")||"")+" "}}document.querySelectorAll(this.wpContentParentTags.map((e=>`${e}.hidden-originally`)).join(",")).forEach((e=>{n+=(e.getAttribute("class")||"")+" "})),n=n.replace(/hidden-originally/g,""),this.wpContentParentTags=this.wpContentParentTags.filter((e=>-1===n.indexOf(e.replace(".","")))),this.wpContentTags=this.wpContentTags.filter((e=>-1===n.indexOf(e.replace(".","")))),document.querySelectorAll(".hidden-originally").forEach((e=>{e.remove()})),document.querySelectorAll(".hidden").forEach((e=>{e.classList.remove("hidden")}))}grabArticle(e,s){var l,d;this.run+=1;const h=`added-to-list${this.run}`;let u,m,p,g,f=null,y=[];const b=[];this.pfData.page.enablePrintOnly&&b.push(".print-only","#print-only");const v=".printfriendly.pf-alignright, .printfriendly.pf-alignleft, .printfriendly.pf-aligncenter",S=Array.from(document.querySelectorAll(".pf-content, #pf-content")),w=S.length;for(let e=0;e<w;++e){const t=S[e].querySelectorAll(v);for(let e=0,r=t.length;e<r;++e)t[e].remove()}const T=S.some((e=>{var t;const r=(null===(t=e.textContent)||void 0===t?void 0:t.trim())||"",o=e.querySelectorAll("img").length>0,n="IMG"===e.nodeName;return""!==r||o||n}));T&&b.push(".pf-content","#pf-content");const A=this.userSettingsSelector.contentSelectorResult();if(A)if("node"===A.type)y=A.value;else if("text"===A.type){const t=e.tree.createElement("DIV");return t.nodeToElement().setAttribute("id","pf-content"),t.appendChild(e.tree.createTextNode(A.value)),t.nodeToElement()}if(!y.length&&this.pfData.page.enablePrintOnly&&(y=Array.from(document.querySelectorAll(b.join(",")))),0===y.length){switch(this.pfData.config.platform){case"blogger-dynamic":if(u=document.querySelectorAll(".overview-content .entry-content, .viewitem-content .entry-content"),u.length>0){for(let e=0,t=u.length;e<t;++e){const t=u[e].querySelectorAll(".post-title, .entry-title, .post-header, .post-footer");for(let e=0,r=t.length;e<r;++e)t[e].remove()}y=Array.from(u)}break;case"blogger":{const e=document.querySelector("#main");e&&(u=e.querySelectorAll(".post-body, .entry-content, .post-title, .entry-title"),u.length>0&&(u.forEach((e=>{e.querySelectorAll(".post-title, .entry-title, .post-header, .post-footer").forEach((e=>e.remove()))})),y=Array.from(u)))}break;case"wordpress":{const e=Z.join(","),t=[".fl-module-fl-post-content",".elementor-widget-theme-post-content"];if(this.wpContentParentTags.forEach((e=>{this.wpContentTags.forEach((r=>{t.push(e+" "+r)}))})),t.push('[data-elementor-type="wp-post"]'),function(e){const t="|"+e.join("|")+"|",r=/\|[^|]*?woocommerce.*?\|/i.test(t),o=/\|home\|/i.test(t),n=/\|single-product\|/i.test(t);return r&&(n||!o)}(this.pfData.page.bodyClassList)&&document.querySelectorAll(e).length>0)y=Array.from(document.querySelectorAll(e)),o.log("Found WP Candidate using WooCommerce Selectors");else for(const e of t){const t=document.querySelector(e);if(t&&!t.classList.contains("pf-invalid-selector")&&c(t).length>150){o.log("Found WP candidate. Selector - "+e),y=[t];break}}}break;case"weebly":u=document.querySelectorAll("#wsite-content .blog-content"),1===u.length&&(c(u[0]).length>20||u[0].querySelectorAll("img").length>0)&&(y=Array.from(u));break;case"wikihow":u=document.querySelectorAll("#bodycontents"),1===u.length&&(c(u[0]).length>20||u[0].querySelectorAll("img").length>0)&&(y=Array.from(u));break;case"medium":u=document.querySelectorAll("article.postArticle--full > .postArticle-content"),1===u.length&&(c(u[0]).length>20||u[0].querySelectorAll("img").length>0)&&(y=Array.from(u));break;case"washingtonpost":y=Array.from(document.querySelectorAll(".article-body .teaser-content, .remainder-content"));break;case"nytimes":if(u=document.querySelectorAll(".story-body"),u.length>=1&&(y=Array.from(u)),0===y.length){const e=document.querySelector('meta[name="slug"]');e&&(u=document.querySelectorAll("#"+e.getAttribute("content")),u.length>=1&&(y=Array.from(u)))}if(0===y.length&&(u=document.querySelectorAll("article#story"),u.length>=1)){for(let e=0,t=u.length;e<t;++e){const t=u[e].querySelectorAll('nav, header, footer, #bottom-wrapper, #newsletter-module, .bottom-of-article, [class^="ResponsiveAd"], div [class^="SectionBar"], div[class^="elementStyles-recirculation"], [class^="InlineMessage"]');for(let e=0,r=t.length;e<r;++e)t[e].remove()}y=Array.from(u)}break;case"squarespace":for(const e of te)if(u=document.querySelectorAll(e),(1===u.length||2===u.length)&&(c(u[0]).length>20||u[0].querySelectorAll("img").length>0)){for(let e=0,t=u.length;e<t;++e){const t=u[e].querySelectorAll(".product-quantity-input, .sqs-add-to-cart-button-wrapper, .product-variants, .product-sharing, aside, .entry-header, .entry-footer, nav, .Blog-meta, .BlogItem-share, .Index-page-scroll-indicator");for(let e=0,r=t.length;e<r;++e)t[e].remove()}y=Array.from(u);break}}if(D=this.pfData.config.domains.page,!["reuters.com"].some((e=>D.includes(e))))for(const e of re){const t=document.querySelector(e);if(t&&c(t).length>250){y=[t];break}}}var D;const E=y.some((e=>"BODY"===e.tagName));if(y.length>0&&!E){y.forEach((e=>{le.forEach((t=>{e.querySelectorAll(t).forEach((e=>e.remove()))})),e.querySelectorAll(v).forEach((e=>e.remove())),"wikihow"===this.pfData.config.platform?ce.forEach((t=>{e.querySelectorAll(t).forEach((e=>e.remove()))})):"nytimes"===this.pfData.config.platform&&e.querySelectorAll("footer, .visually-hidden").forEach((e=>e.remove()))}));const t=y.reduce(((e,t)=>e+(t.textContent||"")),"").trim(),r=y.some((e=>e.querySelectorAll("img,svg").length>0||"IMG"===e.nodeName));if(""!==t||r){o.log("Bypassed readability and found content using "+this.pfData.config.platform+" rules");const r=e.tree.createElement("DIV");if(r.nodeToElement().id="pf-content","wordpress"===this.pfData.config.platform){for(const e of X){const t=document.querySelectorAll(e);if(1===t.length){let n=t[0].matches("img")?t[0]:t[0].querySelector("img");if(n&&!this.primaryImage.findSameImage(n.getAttribute("src")||"",y,!1)){var k;"FIGURE"===(null===(k=n.parentElement)||void 0===k?void 0:k.nodeName)&&(n=n.parentElement),r.appendChild(n),o.log("Picked WP Post Image using selector - "+e);break}}}const e=document.querySelector(".single-recipe-ingredients"),t=y.some((e=>e.querySelector(".single-recipe-ingredients")));e&&!t&&r.appendChild(e)}"on"!==this.userSettingsSelector.keepStyleResult().value&&y.forEach((e=>{[...Array.from(e.querySelectorAll("[style]")),...e.hasAttribute("style")?[e]:[]].forEach((e=>{e.setAttribute("orig-style",e.getAttribute("style")||""),e.removeAttribute("style")}))}));const n=t.length;return y.reduce(((e,t)=>{var r;return e+((null===(r=t.querySelector("aside"))||void 0===r?void 0:r.textContent)||"").length}),0)<.15*n&&y.forEach((e=>{e.querySelectorAll("aside").forEach((e=>e.remove()))})),y.forEach((e=>{r.node.contains(e)||("THEAD"===e.tagName||"TBODY"===e.tagName?e.parentNode&&r.appendChild(e.parentNode):r.appendChild(e))})),r.nodeToElement()}}const x=this.flagIsActive(this.flagStripUnlikelys),N=null!==s,I=(s=s||document.body).innerHTML,L=[];if(s.children&&s.children.length)for(let e=0,t=s.children.length;e<t;++e)L.push(s.children[e]);let _=null;const P=[];let q;const O=["P","PRE","TD","UL","OL"],M=["SPAN","B"];for(;_=L.shift();)if(m=null,x&&Se(_))o.log("Removing unlikely candidate - "+t(_)),_.parentNode.removeChild(_);else{if(O.includes(_.tagName)&&!n(_,"pf-br-replacement"))P.push(_);else if(M.includes(_.tagName)&&1===_.childNodes.length&&_.childNodes[0].nodeType===Node.TEXT_NODE&&c(_).length>30){do{m=ge(m||_)}while(m&&M.includes(m.tagName));m&&!n(m,h)&&P.push(m)}else if("DIV"===_.tagName)if(-1!==_.innerHTML.search(V.divToPElements)||_.classList.contains("print-yes"))a(_,(t=>{try{var r;if(t.nodeType===Node.TEXT_NODE&&(null===(r=t.nodeValue)||void 0===r?void 0:r.trim())){const r=e.tree.createElement("span");r.nodeToElement().className="pf-space-replacement",C.toElem(_).replaceChild(r,t),r.appendChild(t)}else t.nodeType===Node.COMMENT_NODE&&_.removeChild(t)}catch(e){}}));else try{const t=e.tree.createElement("p"),r=t.nodeToElement();a(_,(e=>{t.appendChild(e)})),C.toElem(_.parentNode).replaceChild(t,_),_.id&&(r.id=_.id),_.className&&(r.className=_.className),P.push(t.node)}catch(e){P.push(_),o.log("Could not alter div to p, probably an IE restriction, reverting back to div.: "+e)}if(P[P.length-1]&&i(P[P.length-1],h),_.children&&_.children.length)for(let e=0,t=_.children.length;e<t;e++)L.push(_.children[e])}y=[];for(let e=0;e<P.length;e++){g=!1;const t=P[e];["SECTION","DIV","ARTICLE"].includes(t.tagName)&&t.children&&t.children.length>1?(m=t,g=!0):m=ge(t),m&&void 0!==m.tagName&&(p=c(t),p.length<25&&!ue(p)&&!pe(t,p)||p.length<5||(f=ge(m),q=be(p),!g&&n(m,h)||(void 0===m.readability&&(we(m,this.flagIsActive(this.flagWeightClasses)),y.push(m)),m.readability.contentScore+=q),!f||void 0===f.tagName||n(m,h)||n(f,h)||(void 0===f.readability&&(we(f,this.flagIsActive(this.flagWeightClasses)),y.push(f)),f.readability.contentScore+=.9*q)))}let B=null;for(let e=0,t=y.length;e<t;++e)y[e].readability.contentScore=y[e].readability.contentScore*(1-ve(y[e]));y.sort(((e,t)=>{var r,o;const n=(null===(r=e.readability)||void 0===r?void 0:r.contentScore)||0,i=(null===(o=t.readability)||void 0===o?void 0:o.contentScore)||0;return n<i?1:n===i?0:-1})),o.log("Top 5 Candidates");for(let e=0,t=Math.min(5,y.length);e<t;e++)o.log(r(y[e]));if(y.length>0){B=y[0];const t=Math.min(B.readability.contentScore,100),r=.5*t,n=[],i=.9*t;if(y.forEach((e=>{if(null!==e.closest(".pf-candidate"))return;const t=e.querySelectorAll(".pf-candidate");if(t.length>0&&("ARTICLE"===e.tagName&&e.readability.contentScore>=r||e.readability.contentScore>=i)){const r=n.indexOf(t[0]);n[r]=e,B=n[0]}e.classList.add("pf-candidate"),e.readability.contentScore>=r&&n.push(e)})),n.length>1)try{if(B=function(e){if(e.length<2)throw new Error("getCommonAncestor: not enough parameters");let t=e.shift();const r="contains"in t?"contains":"compareDocumentPosition",o="contains"===r?1:16;e:for(;t=t.parentNode;){let n=e.length;for(;n--;)if((("contains"===r?t[r](e[n])?1:0:t[r](e[n]))&o)!==o)continue e;return t}return null}(n),"BODY"===(null==B?void 0:B.tagName)){const t=function(e){return"THEAD"===e.tagName||"TBODY"===e.tagName?e.parentElement:e},r=e.tree.createElement("div"),i=t(y[0]);C.toElem(i.parentElement).replaceChild(r,i),r.appendChild(i),r.node.readability=i.readability;for(let e=0;e<n.length;e++)r.appendChild(t(n[e]));B=r.nodeToElement(),o.log("Combining top candidates")}else o.log("Changing Top Candidate to Ancestor")}catch(e){B=y[0]}}if(null===B||B instanceof Element&&"BODY"===B.tagName){o.log("Top Candidate NULL or BODY");const t=e.tree.createElement("DIV");let r=s.firstChild;for(;r;)t.appendChild(r),r=s.firstChild;C.toElem(s).appendChild(t),B=t.nodeToElement()}if("medium"===this.pfData.config.platform&&B){const e=B.closest("article");if(e){o.log("Changing Top Candidate to Ancestor article");const t=e.querySelectorAll("section"),r=Array.from(t).filter((e=>e.innerText.length>0));if(r.length>0){const t=ae.map((e=>`${e}, ${e}>*, :has(${e})`)).join(",");r[0].querySelectorAll(`*:not(${t})`).forEach((e=>e.remove())),B=e}}}if(B&&"THEAD"===B.nodeName||B&&"TBODY"===B.nodeName){const e=B.parentNode;e instanceof Element&&(B=e)}B&&void 0===(null==B?void 0:B.readability)&&we(B,this.flagIsActive(this.flagWeightClasses)),B&&o.log("Top Candidate: "+r(B));const F=e.tree.createElement("DIV"),H=F.nodeToElement();var R;N&&(H.id="pf-content");const j=Math.max(10,.2*(null!==(R=null==B||null===(l=B.readability)||void 0===l?void 0:l.contentScore)&&void 0!==R?R:0)),W=B?ge(B)||B.parentNode:null,z=W?Array.prototype.slice.call(W.childNodes):[];let U=null;if(B){const e=B.previousElementSibling;e&&e.querySelector("img")&&1===e.querySelectorAll("img").length&&(U=e,F.appendChild(U))}const $=null==B||null===(d=B.parentElement)||void 0===d?void 0:d.previousElementSibling;$&&$.querySelector("img")&&1===$.querySelectorAll("img").length&&F.appendChild($);for(let t=0,n=z.length;t<n;t++){const n=z[t];let i=!1,s=0,l="";const d=n.id+" "+n.className;if(n&&n!==U){if(B&&n.className===B.className&&""!==B.className&&(s+=.2*B.readability.contentScore),n.contains(B))i=!0,l="top candidate";else{if(V.negativeWholeWord.test(d))continue;if(void 0!==n.readability&&n.readability.contentScore+s>=j)i=!0,l="content score + contentbonus > threshold";else if(se.includes(n.nodeName.toLowerCase())){const e=ve(n),t=c(n),r=t.length,o=n.getElementsByTagName("a").length,a=n.getElementsByTagName("img").length;r>300&&e<.25?(i=!0,l="Long content with low link density"):r>80&&e<.25&&o<3?(i=!0,l="Possibly long content with low link density & link count < 3"):r<80&&0===e&&-1!==t.search(V.period)?(i=!0,l="Short content with no links and has periods (.)"):o<2&&1==a&&(i=!0,l="link count < 2 with one image")}}if(i){let t,i;o.log("Appending node: "+r(n)+" -- because "+l),"DIV"!==n.nodeName&&"P"!==n.nodeName&&"TABLE"!==n.nodeName?(t=e.tree.createElement("DIV"),i=t.nodeToElement(),i&&(i.id=n.id),a(n,(e=>{t.appendChild(e)}))):(t=C.toElem(n),i=t.nodeToElement()),i&&(i.className=""),F.appendChild(t)}}}return this.prepArticle(F.nodeToElement()),c(H).length<this.textLimit?(o.log("****Text length less than "+this.textLimit+" ****"),s.innerHTML=I,e.rebuildTree(),e.beforeRunner(),this.flagIsActive(this.flagStripUnlikelys)?(this.removeFlag(this.flagStripUnlikelys),o.log("Turning off FLAG_STRIP_UNLIKELYS"),this.grabArticle(e,s)):this.flagIsActive(this.flagWeightClasses)?(this.removeFlag(this.flagWeightClasses),o.log("Turning off FLAG_WEIGHT_CLASSES"),this.grabArticle(e,s)):this.flagIsActive(this.flagCleanConditionally)?(this.removeFlag(this.flagCleanConditionally),o.log("Turning off FLAG_CLEAN_CONDITIONALLY"),this.grabArticle(e,s)):250===this.textLimit?(o.log("*** Reducing text limit to 75 ***"),this.textLimit=75,this.grabArticle(e,s)):null):F.hasTagName("thead")||F.hasTagName("tbody")?(null===(Y=F.parent)||void 0===Y?void 0:Y.nodeToElement())||null:F.nodeToElement();var Y}prepArticle(e){e&&(this.cleanStyles(e),function(e,t){const r=e.getElementsByTagName(t);for(let e=r.length-1;e>=0;--e){var o;{let t="";for(let o=0,n=r[e].attributes.length;o<n;o+=1)t+=r[e].attributes[o].value+"|";if(-1!==t.search(V.videos))continue;if(-1!==r[e].innerHTML.search(V.videos))continue}null===(o=r[e].parentNode)||void 0===o||o.removeChild(r[e])}}(e,"object"))}cleanStyles(e){if("on"===this.userSettingsSelector.keepStyleResult().value)return;const t=e||document;let r=t.firstChild;if(t)for("function"==typeof t.removeAttribute&&"pf-styled"!==t.className&&(t.setAttribute("orig-style",t.getAttribute("style")||""),t.removeAttribute("style"));null!==r;)r.nodeType===Node.ELEMENT_NODE&&r instanceof Element&&("pf-styled"!==r.className&&(r.setAttribute("orig-style",r.getAttribute("style")||""),r.removeAttribute("style")),this.cleanStyles(r)),r=r.nextSibling}constructor(e,t,r){super(e,t),je(this,"textLimit",void 0),je(this,"wpContentParentTags",void 0),je(this,"wpContentTags",void 0),je(this,"primaryImage",void 0),je(this,"hasContent",void 0),this.textLimit=250,this.hasContent=!0,this.wpContentParentTags=[...J],this.wpContentTags=[...K],this.primaryImage=r}}const ze={extract(e){const t={"after-main":[],"before-main":[]};let r=1e5,o=1;const n=Array.from(e.querySelectorAll(".print-yes"));for(let e=0,i=n.length;e<i;++e){const i=n[e],a=i.dataset.pfPrintPosition||"after-main";i.dataset.pfPrintOrder||(i.dataset.pfPrintOrder=r.toString(),++r),i.dataset.pfPrintYesId=o.toString(),++o,t[a].push(i)}return t["after-main"]=Ue(t["after-main"]),t["before-main"]=Ue(t["before-main"]),t},apply(e,t){const r=Array.from(e.querySelectorAll("[data-pf-print-yes-id]")).map((e=>e.dataset.pfPrintYesId||"")),o=$e(r,t["before-main"]),n=$e(r,t["after-main"]);for(let t=o.length-1;t>=0;--t)e.insertBefore(o[t],e.firstChild);n.forEach((t=>e.appendChild(t))),Ye(t["before-main"]),Ye(t["after-main"])}};function Ue(e){return e.sort(((e,t)=>parseInt(e.dataset.pfPrintOrder||"0",10)-parseInt(t.dataset.pfPrintOrder||"0",10)))}function $e(e,t){const r=[];for(let o=0,n=t.length;o<n;++o){const n=t[o];e.indexOf(n.dataset.pfPrintYesId||"")<0&&r.push(n)}return r}function Ye(e){e.forEach((e=>{e.querySelectorAll("[data-pf_style_display], [data-pf_style_visibility]").forEach((e=>{e.removeAttribute("data-pf_style_display"),e.removeAttribute("data-pf_style_visibility")}))}))}function Ve(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Ge extends We{get articleContent(){return this._articleContent}init(e,t){var r;this.defaultHtml=t,this.prepDocument(e);const n=e.tree.createElement("DIV"),i=e.tree.createElement("DIV");this.pickTitleFromContent();const a=this.getArticleTitle(e),s=`<div id="pf-root">${document.body.innerHTML}</div>`,l=ze.extract(document.body);e.beforeRunner();let d=this.grabArticle(e);d||(this.addFlag(this.flagStripUnlikelys),this.addFlag(this.flagWeightClasses),this.addFlag(this.flagCleanConditionally),document.body.innerHTML=s,e.rebuildTree(),this.textLimit=250,this.run=0,d=this.grabArticle(e),d?o.error(new Error("runDomScorerModifier removes main content")):(d=e.tree.createElement("DIV").nodeToElement(),d&&(d.id="pf-content"),this.hasContent=!1));const h=a.nodeToElement();var u;this._articleContent=d,this.pubDate&&(this.contentData.pubDate=this.pubDate),d&&e.afterRunner({candidate:d,skipRelatedArticlesClassifier:!!this.pfData.userSettings.contentSelectors}),this.titleText&&h?h.innerHTML=this.titleText:this.titleText=(null==h||null===(u=h.textContent)||void 0===u?void 0:u.trim())||"",d&&d.querySelectorAll(this.titleTags.join(",")).forEach((e=>{var t;this.titleText===(null===(t=e.textContent)||void 0===t?void 0:t.trim())&&e.remove()}));const m=n.nodeToElement();m&&(m.id="printfriendly");const p=i.nodeToElement();p&&(p.id="pf-inner"),h&&(h.id="pf-title"),i.appendChild(a),d&&i.appendChild(d),n.appendChild(i),document.body.innerHTML=this.defaultHtml,C.toElem(document.body).appendChild(n),document.body.removeAttribute("style");const g=this.userSettingsSelector.removeSelectorResult();d&&g&&"selector"===g.type&&d.querySelectorAll(g.value).forEach((e=>e.remove())),d&&this.primaryImage.prependTo(d),this.hasContent&&d&&(this.wrapTextNodes(d,e),ze.apply(d,l)),this.contentData.hasContent=this.hasContent,this.contentData.title=h?c(h):"";const f=this.pfData.page.metas.filter((e=>"description"===e.name));f.length&&(this.contentData.description=f[0].content||""),this.contentData.dir=function(e){const t=(e,t)=>(e.match(new RegExp(t,"g"))||[]).length;return(e=>100*(t(e,"[\\u05B0-\\u05F4\\uFB1D-\\uFBF4]")+t(e,"[\\u060C-\\u06FE\\uFB50-\\uFEFC]"))/e.length>20)((e=>e.replace(/@\w+/,""))(e))?"rtl":"ltr"}((null==d?void 0:d.textContent)||""),this.contentData.content=(null==d?void 0:d.innerHTML)||"",this.contentData.contentTextWithTitleAndUrl=(null==d?void 0:d.textContent)+this.contentData.title,this.contentData.contentTextLength=(null==d||null===(r=d.textContent)||void 0===r?void 0:r.length)||0,o.timeEnd("algo.js Time")}addHeaderFooter(){const e=[];e.push(this.headerHtml());const t=[];this.author?t.push(this.author):this.contentData.author="",this.pubDate&&(t.push(`<div id='pf-date'>${this.pubDate}</div>`),this.contentData.pubDate=this.pubDate);const r=document.querySelector("#pf-content");if(r&&t.length>0){var o;const n=document.createElement("div");n.innerHTML=e.join("");const i=document.createElement("div");i.id="pf-author-date-container",i.innerHTML=t.join(""),n.appendChild(i),null===(o=r.parentNode)||void 0===o||o.insertBefore(n,r)}const n=document.querySelector("#pf-title"),i=document.querySelector("#pf-src");var a;if(n&&i&&(null===(a=i.parentNode)||void 0===a||a.insertBefore(n,i)),this.customHeader){const e=document.createElement("div");e.innerHTML=this.customHeader;const t=document.querySelector("#pf-title");var s;t&&(null===(s=t.parentNode)||void 0===s||s.insertBefore(e,t)),this.contentData.customHeader=e.innerHTML}if(this.customFooter){const e=document.createElement("div");e.innerHTML=this.customFooter,document.body.appendChild(e),this.contentData.customFooter=e.innerHTML}if(this.copyright){const e=document.createElement("div");e.innerHTML=this.copyright.innerHTML,document.body.appendChild(e),this.contentData.copyright=e.innerHTML}}headerHtml(){let e=this.pfData.config.urls.page;try{e=decodeURI(e)}catch(e){}const t=encodeURI(e),r=this.pfData.page.location,o=decodeURI(r.host).replace(/^www\./,""),n=decodeURI(r.pathname).replace(/\/$/,"");return`\n      <div id="pf-src">\n        <a id="pf-src-url" href="${t}">\n          <img id="pf-src-icon" width="16" height="16" src="${this.pfData.page.favicon}">\n          <span><strong>${o}</strong>${n}</span>\n        </a>\n      </div>\n    `}prepDocument(e){if(null===document.body){const t=e.tree.createElement("body");try{document.body=t.node}catch(e){document.documentElement.appendChild(t.node),o.log(e)}document.body.innerHTML=this.pfData.page.body}document.body.id="pf-body"}wrapTextNodes(e,t){if(!e.tagName||!["PRE","CODE","SVG"].includes(e.tagName.toUpperCase()))if(e.nodeType===Node.TEXT_NODE){var r,o;const i=null!==(o=null===(r=e.textContent)||void 0===r?void 0:r.trim())&&void 0!==o?o:"";if("null"===i)C.toElem(e).remove();else if(i){const r=t.tree.createElement("span");r.nodeToElement().className="text-node";const o=C.toElem(e.parentNode);var n;o?o.replaceChild(r,e):null===(n=e.parentNode)||void 0===n||n.replaceChild(r.node,e),r.appendChild(e)}}else e.childNodes.length>0&&a(e,(e=>{this.wrapTextNodes(e,t)}))}constructor(e,t,r){super(e,t,r),Ve(this,"defaultHtml",void 0),Ve(this,"_articleContent",void 0),this._articleContent=null,this.defaultHtml=""}}function Je(e,t,r,o,n,i,a){try{var s=e[i](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(o,n)}function Ke(e){return function(){var t=this,r=arguments;return new Promise((function(o,n){var i=e.apply(t,r);function a(e){Je(i,o,n,a,s,"next",e)}function s(e){Je(i,o,n,a,s,"throw",e)}a(void 0)}))}}function Xe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Ze{start(){var e=this;return Ke((function*(){try{o.configure(e.pfData),e.defaultHtml=document.body.innerHTML,document.body.innerHTML=`${e.defaultHtml}<div id="pf-root">${e.pfData.page.body}</div>`,e.pfData.page.bodyClassList&&e.pfData.page.bodyClassList.length&&document.body.setAttribute("class",`${document.body.getAttribute("class")} ${e.pfData.page.bodyClassList.join(" ")}`),e.scorer=new Ie,e.scorer.registerScoreClassifier("common",new M),e.scorer.registerMarkClassifier(new W,{mustKeepSelectors:e.pfData.userSettings.contentSelectors}),e.scorer.registerBehaviorClassifier(new j),e.scorer.registerScoreClassifier("headerFooter",new j),e.scorer.registerScoreClassifier("shareScore",new Ee),e.scorer.registerBehaviorClassifier(new Ee),e.scorer.registerScoreClassifier("relatedArticle",new Te),e.scorer.registerBehaviorClassifier(new Te),e.scorer.registerBehaviorClassifier(new H),e.scorer.registerBehaviorClassifier(new R),e.scorer.registerBehaviorClassifier(new P),e.scorer.registerScoreClassifier("dateScore",new F(e.contentData)),e.scorer.registerBehaviorClassifier(new F(e.contentData)),e.scorer.registerBehaviorClassifier(new q(e.contentData)),e.scorer.markAndCalcScore(),e.detectPlatforms(),yield e.htmlPreProcessor.run(e.scorer),e.readability.removeHiddenContent(),e.removePrintNo(),e.addAppropriateClasses(),e.replaceBackgroundImages(),e.readability.extractAuthors(),e.readability.extractPubDate(),e.primaryImage.find(),e.pfData.page.enablePrintOnly&&(e.readability.extractCopyright(),e.readability.extractCustomHeaderFooter()),e.cleanHTML(),e.htmlPreProcessor.postProcess(),e.scorer&&e.readability.init(e.scorer,e.defaultHtml),yield e.runPostAlgoProcesses()}catch(t){yield e.runPostAlgoProcesses(),o.log(t)}}))()}detectPlatforms(){const e=/wp-content/i,t=/blogger.com/i,r=/squarespace.com/i,o=/weebly.com/i,n=this.pfData.page.csStyleSheetHrefs,i=e=>this.pfData.config.domains.page===e;if(/wikihow.com/i.test(this.pfData.config.domains.page)||i("wikihow.com"))this.pfData.config.platform="wikihow";else if(i("nytimes.com"))this.pfData.config.platform="nytimes";else if(i("washingtonpost.com"))this.pfData.config.platform="washingtonpost";else if(this.pfData.page.bodyClassList.includes("mediawiki"))this.pfData.config.platform="mediawiki";else if(i("9to5mac.com"))this.pfData.config.platform="9to5mac";else if(i("wsj.com"))this.pfData.config.platform="wsj";else{const i=this.pfData.page.metas;for(const e of i)"generator"===e.name&&"blogger"===e.content?this.pfData.config.platform="blogger":"blogger-template"===e.name&&"dynamic"===e.content?this.pfData.config.platform="blogger-dynamic":"al:ios:app_name"===e.property&&"Medium"===e.content&&(this.pfData.config.platform="medium");if("unknown"===this.pfData.config.platform)for(const i of n){if(e.test(i)){this.pfData.config.platform="wordpress";break}if(t.test(i)){this.pfData.config.platform="blogger";break}if(r.test(i)){this.pfData.config.platform="squarespace";break}if(o.test(i)){this.pfData.config.platform="weebly";break}}}this.contentData.platform=this.pfData.config.platform}removePrintNo(){this.pfData.page.enablePrintOnly&&document.querySelectorAll(".print-no, .pf-remove").forEach((e=>e.remove()))}addAppropriateClasses(){const e=document.querySelectorAll("figcaption");for(let t=0,r=e.length;t<r;++t){const r=e[t].closest("figure");r&&r.classList.add("pf-caption")}}replaceBackgroundImages(){"on"===this.pfData.userSettings.bgImageUrlSupport&&document.querySelectorAll("[data-pf-style-background-image]").forEach((e=>{const t=document.createElement("img");t.src=e.getAttribute("data-pf-style-background-image")||"",Array.from(e.attributes).forEach((e=>{t.setAttribute(e.name,e.value)})),e.replaceWith(t)}))}cleanHTML(){document.querySelectorAll("font").forEach((e=>{if(!this.scorer)return;const t=this.scorer.tree.createElement("span");a(e,(e=>{t.appendChild(e)})),e.parentNode&&e.parentNode.replaceChild(t.node,e)})),document.querySelectorAll("input[type=password]").length>0&&(this.contentData.hasPasswordField=!0);const e=this.selectorsToRemove(),t=document.querySelectorAll(e.removeIfNotPrintOnly);for(let e=0,r=t.length;e<r;++e){const r=t[e];"body"!==r.tagName.toLowerCase()&&r.classList.add("to-remove")}const r=document.querySelectorAll("[class^='addthis_']");for(let e=0,t=r.length;e<t;++e){const t=r[e],o=t.previousElementSibling;if(o){const e=o.textContent||"";e.length<50&&e.toLowerCase().match(/share this|follow us/)&&o.classList.add("to-remove")}t.classList.add("to-remove")}this.pfData.page.enablePrintOnly&&document.querySelectorAll(".print-only, #print-only").forEach((e=>{e.classList.remove("to-remove"),e.querySelectorAll(".to-remove").forEach((e=>{e.classList.remove("to-remove")}))})),document.querySelectorAll(".to-remove").forEach((e=>e.remove()));const o=document.querySelectorAll(e.alwaysRemove);for(let e=0,t=o.length;e<t;++e)o[e].remove();try{const e=document.querySelectorAll("#pf-content a");for(let t=0,r=e.length;t<r;++t){const r=e[t],o=r.innerHTML.trim().replace(/&nbsp;/g," ");r.getAttribute("name")||""!==o||r.remove()}const t=document.querySelectorAll("#pf-content div.separator");for(let e=0,r=t.length;e<r;++e){const r=t[e],o=r.children;let n=!0;for(let e=0,t=o.length;e<t;++e){const t=o[e].tagName.toLowerCase();if("a"!==t&&"br"!==t){n=!1;break}}n&&r.classList.add("img-separator")}const r=document.querySelectorAll(".pf-caption img, .wp-caption img, .caption img, .tr-caption-container img, .thumbinner img.thumbimage");for(let e=0,t=r.length;e<t;++e)r[e].classList.add("caption-img");document.querySelectorAll(".embed-responsive").forEach((e=>{e.classList.remove("embed-responsive")}))}catch(e){}}selectorsToRemove(){const e=["aside.sidebar",".cufon img.canvas-png",".yarpp-related","#wdsb-share-box","#printfriendly","#print",".linkwithin_outer","#lws_0","#nrelate_related_0",".ccc-widget","#cccwr",".widget-cb",".doncaprio-share-buttons",".st_twitter_hcount",".st_pinterest_hcount",".st_digg_hcount",".st_stumbleupon_hcount",".st_fblike_hcount",".addthis_toolbox","#goog-gt-tt",".skiptranslate",".really_simple_share",".robots-nocontent","#sharebar",".sharebar",".articleExtras",".embed-mod",".pd-rating",".itxtrstimg",".itxthookicon",".w2bPinitButton","#twitter_h",".instaemail","#instaemail-button",".emailbutton","#share_print",".pinit-overlay",".pinit-button",".ngg_images",".mr_social_sharing_wrapper",".mapp-layout",".realtidbits-comments","#newsletter-promo",".newsletter-promo",".sharify-container",".sw-pinit-button",".jetpack-likes-widget-wrapper",".crunchify-social",".post-tags",".postmeta",".hreview-aggregate",".ratingblock",".nc_socialPanel",".outbrain",".related_post",".article-comments-post-wrapper",".articleComments",".modal-dialog",".load-screen","div.article-info img.squared-base",".rev_slider",".social-widget",".jw-player","bsp-jw-player",".xnetvidplayer",".RelatedCoverage-relatedcoverage--LmkKX",".powerinbox",".email-sign-up",".article-prev-next",".related-posts",".related-cne-video-component","#Subscribe",".ColCMostViewed","#ColCFacebook",".amzn-native-container",".hidden-print",'div[aria-label="cookieconsent"]',"[class*='relatedposts']","[class*='zergnet-widget']","[data-spot-id]",".gm-style","select","textarea","label","button:not(.lightbox)","input"];return"mediawiki"===this.pfData.config.platform&&e.push([".noprint","div#jump-to-nav",".mw-jump","div.top","div#column-one","#colophon",".editsection",".toctoggle",".tochidden","div#f-poweredbyico","div#f-copyrightico","li#viewcount","li#about","li#disclaimer","li#mobileview","li#privacy","#footer-places",".mw-hidden-catlinks","tr.mw-metadata-show-hide-extended","span.mw-filepage-other-resolutions","#filetoc",".usermessage","#ca-delete","span.brokenref",".compact-ambox table .mbox-image",".compact-ambox table .mbox-imageright",".compact-ambox table .mbox-empty-cell",".compact-ambox .hide-when-compact",".check-icon a.new",".geo-nondefault",".geo-multi-punct",".nonumtoc .tocnumber",".toclimit-2 .toclevel-1 ul",".toclimit-3 .toclevel-2 ul",".toclimit-4 .toclevel-3 ul",".toclimit-5 .toclevel-4 ul",".toclimit-6 .toclevel-5 ul",".toclimit-7 .toclevel-6 ul",".mw-special-Watchlist #mw-watchlist-resetbutton",".wpb .wpb-header",".wpbs-inner .wpb-outside",".sysop-show",".accountcreator-show",".inputbox-hidecheckboxes form .inputbox-element","#editpage-specialchars",".wikipedia .ambox",".wikipedia .navbox",".wikipedia .vertical-navbox",".wikipedia .infobox.sisterproject",".wikipedia .dablink",".wikipedia .metadata",".editlink","a.NavToggle","span.collapseButton","span.mw-collapsible-toggle","#content cite a.external.text:after",".nourlexpansion a.external.text:after",".nourlexpansion a.external.autonumber:after",".skin-simple div#column-one",".skin-simple div#f-poweredbyico",".skin-simple div#f-copyrightico",".skin-simple .editsection","#siteNotice","div.magnify",".togglelink",".mw-editsection",".toctitle"]),{alwaysRemove:[".pf-init-iframe",".sociable","#sociable",".addthis","#addthis",".printfriendly",".pf-print","#pf-print",".wp-socializer",".editsection",".a2a_dd",".addtoany_share_save",".addtoany_share_save_container",".simply-social-wrapper","#pf-mask",".social_button","#socialbookmarks",".articleFeedback",".print-no",".no-print",".ftwit",".famos-toolbar",".famos-fstar",".ftwit-drawer"].join(","),removeIfNotPrintOnly:e.join(",")}}runPostAlgoProcesses(){var e=this;return Ke((function*(){try{var t,r,n,i;e.contentData.favicon=e.pfData.page.favicon,e.contentData.userSettings=e.pfData.userSettings,e.contentData.hasContent&&(e.readability.addHeaderFooter(),yield e.imageProcessor.proccess(),e.contentData.content=(null===(t=e.readability.articleContent)||void 0===t?void 0:t.innerHTML)||"",e.contentData.contentTextWithTitleAndUrl=((null===(r=e.readability.articleContent)||void 0===r?void 0:r.textContent)||"")+(e.contentData.title||""),e.contentData.contentTextLength=(null===(i=e.readability.articleContent)||void 0===i||null===(n=i.textContent)||void 0===n?void 0:n.length)||0),e.messageBus.postMessage("core","PfRunPostAlgoProcesses",{contentData:e.contentData})}catch(t){o.error(t),e.messageBus.postMessage("core","PfRunPostAlgoProcesses",{contentData:e.contentData})}}))()}constructor(t,r){Xe(this,"pfData",void 0),Xe(this,"messageBus",void 0),Xe(this,"defaultHtml",void 0),Xe(this,"htmlPreProcessor",void 0),Xe(this,"contentData",void 0),Xe(this,"readability",void 0),Xe(this,"scorer",void 0),Xe(this,"primaryImage",void 0),Xe(this,"imageProcessor",void 0),this.pfData=t,this.messageBus=r,this.scorer=null,this.defaultHtml="",this.htmlPreProcessor=new w(t),this.contentData=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},o=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),o.forEach((function(t){Xe(e,t,r[t])}))}return e}({},e),this.primaryImage=new qe(t),this.readability=new Ge(t,this.contentData,this.primaryImage),this.imageProcessor=new _(this.pfData,this.messageBus)}}function Qe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const et=new class{postMessage(e,t,r){chrome.runtime.sendMessage({destination:e,type:t,payload:r})}listen(e,t,r){if(this.setupDone)return;const o=chrome.runtime.connect({name:e});this.setupPort(o,t,r),this.setupDone=!0}setupPort(e,t,r){e.onMessage.addListener((e=>{try{if(!e)return;const r=e.type;if(!r)return;const o=t[r];if(!o)return;o(e.payload)}catch(e){if(!r)throw e;r(e)}})),e.onDisconnect.addListener((()=>{setTimeout((()=>{const o=chrome.runtime.connect({name:e.name});this.setupPort(o,t,r)}))}))}constructor(){var e,t;t=void 0,(e="setupDone")in this?Object.defineProperty(this,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):this[e]=t,this.setupDone=!1}};let tt,rt,ot=!1;function nt(e){tt=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},o=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),o.forEach((function(t){Qe(e,t,r[t])}))}return e}({},tt,e.pfData),rt=new Ze(tt,et),rt.start()}et.listen("algo",{PfStartAlgo:nt,PfImageToBase64Hook:e=>{const t=window.__pfImageToBase64Hooks&&window.__pfImageToBase64Hooks[e.id];t&&t(e),delete window.__pfImageToBase64Hooks[e.id]},PfLoadAlgo:e=>{ot||(ot=!0,nt(e))}},(()=>{})),window.__pfImageToBase64Hooks={}})()})();