(()=>{"use strict";function n(n,t,i,e,r,o,a){try{var l=n[o](a),p=l.value}catch(n){return void i(n)}l.done?t(p):Promise.resolve(p).then(e,r)}function t(t){return function(){var i=this,e=arguments;return new Promise((function(r,o){var a=t.apply(i,e);function l(t){n(a,r,o,l,p,"next",t)}function p(t){n(a,r,o,l,p,"throw",t)}l(void 0)}))}}function i(){return(i=t((function*(n){n&&(yield chrome.tabs.update(n,{active:!0}))}))).apply(this,arguments)}function e(){return e=t((function*(n){yield function(n){return i.apply(this,arguments)}(n.printfriendly_print_in_tab_payload.tabId),yield chrome.storage.local.remove("printfriendly_print_in_tab_payload"),window.close()})),e.apply(this,arguments)}function r(){return r=t((function*(){const n=function(){const n=document.createElement("iframe");return n.id="cs-core-print-sandbox-iframe",n.style.visibility="hidden",n.style.position="absolute",n.src="/sandbox/page-0.html",n}();var t;document.body.appendChild(n),t=()=>{chrome.storage.local.get("printfriendly_print_in_tab_payload").then((n=>function(n){return e.apply(this,arguments)}(n)))},window.addEventListener("message",(n=>{"PfPrintComplete"===n.data.type&&t()}),!1),yield new Promise((t=>{n.onload=()=>t()}));const i=yield chrome.storage.local.get("printfriendly_print_in_tab_payload");i.printfriendly_print_in_tab_payload&&function(n,t){var i;null===(i=n.contentWindow)||void 0===i||i.postMessage({type:"PfPrintContent",payload:t},"*")}(n,i.printfriendly_print_in_tab_payload)})),r.apply(this,arguments)}(function(){return r.apply(this,arguments)})().catch(console.error)})();