(()=>{"use strict";var e=function(e){return e.SettingsTextSize="printfriendly_settings_text_size",e.SettingsImageSize="printfriendly_settings_img_size",e.ScreenshotImages="printfriendly_screenshot_images",e.SettingsScreenshotBanner="printfriendly_settings_screenshot_banner",e.SettingsDefaultMode="printfriendly_settings_default_mode",e.SettingsPaperSize="printfriendly_settings_paper_size",e.SettingsScreenshotFormat="printfriendly_settings_screenshot_format",e.SettingsLanguage="printfriendly_settings_language",e.PopupWindowId="printfriendly_popup_window_id",e.ScreenshotTabId="printfriendly_screenshot_tab_id",e.ScreenshotCapturing="printfriendly_screenshot_capturing",e.ScreenshotImage="printfriendly_screenshot_img",e.ScreenshotSlices="printfriendly_screenshot_slices",e.WebsiteHostname="printfriendly_website_hostname",e.WebsiteUrl="printfriendly_website_url",e.WebsiteTitle="printfriendly_website_title",e.AlreadyShownIntro="alreadyShownIntro",e.ClientId="printfriendly_client_id",e.ScreenshotProgress="printfriendly_screenshot_progress",e.ScreenshotFilename="printfriendly_screenshot_filename",e.PrintInTabPayload="printfriendly_print_in_tab_payload",e}({});function n(e,n,t,i,r,o,s){try{var a=e[o](s),l=a.value}catch(e){return void t(e)}a.done?n(l):Promise.resolve(l).then(i,r)}function t(e){return function(){var t=this,i=arguments;return new Promise((function(r,o){var s=e.apply(t,i);function a(e){n(s,r,o,a,l,"next",e)}function l(e){n(s,r,o,a,l,"throw",e)}a(void 0)}))}}function i(){return(i=t((function*(e){e&&(yield chrome.tabs.update(e,{active:!0}))}))).apply(this,arguments)}function r(){return r=t((function*(n){yield function(e){return i.apply(this,arguments)}(n[e.PrintInTabPayload].tabId),yield chrome.storage.local.remove(String(e.PrintInTabPayload)),window.close()})),r.apply(this,arguments)}function o(){return o=t((function*(){const n=function(){const e=document.createElement("iframe");return e.id="cs-core-print-sandbox-iframe",e.style.visibility="hidden",e.style.position="absolute",e.src="/sandbox/page-0.html",e}();var t;document.body.appendChild(n),t=()=>{chrome.storage.local.get(e.PrintInTabPayload).then((e=>function(e){return r.apply(this,arguments)}(e)))},window.addEventListener("message",(e=>{"PfPrintComplete"===e.data.type&&t()}),!1),yield new Promise((e=>{n.onload=()=>e()}));const i=yield chrome.storage.local.get(e.PrintInTabPayload);i[e.PrintInTabPayload]&&function(e,n){var t;null===(t=e.contentWindow)||void 0===t||t.postMessage({type:"PfPrintContent",payload:n},"*")}(n,i[e.PrintInTabPayload])})),o.apply(this,arguments)}(function(){return o.apply(this,arguments)})().catch(console.error)})();